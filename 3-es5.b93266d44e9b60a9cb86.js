!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{EiDu:function(t,o,i){"use strict";i.d(o,"a",(function(){return c}));var a=i("fXoL"),r=i("jhN1"),c=function(){var t=function(){function t(n){e(this,t),this.sanitizer=n}return n(t,[{key:"transform",value:function(e,t){switch(t){case"html":return this.sanitizer.bypassSecurityTrustHtml(e);case"style":return this.sanitizer.bypassSecurityTrustStyle(e);case"script":return this.sanitizer.bypassSecurityTrustScript(e);case"url":return this.sanitizer.bypassSecurityTrustUrl(e);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(e);default:throw new Error("Invalid safe type specified: "+t)}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.c))},t.\u0275pipe=a.Mb({name:"safe",type:t,pure:!0}),t}()},GOTl:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("1gpv"),i={CannedResponses:o.f+"canned_responses",CannedResponseCategories:o.f+"canned_response_categories"}},JNPz:function(t,o,i){"use strict";i.d(o,"b",(function(){return he})),i.d(o,"e",(function(){return me})),i.d(o,"c",(function(){return Ce})),i.d(o,"d",(function(){return Oe})),i.d(o,"a",(function(){return xe}));var a,r=i("fXoL"),c=i("bYFv"),s=i("1gpv"),l=i("G2Tp"),d=i("3v1o"),g=i("58Y9"),p=i("M9dC"),u=i("4SUy"),b=i("GOTl"),h=i("H552"),f=i("n6zm"),m=i("CRtO"),v=i("tk/3"),C=i("X8pc"),O=i("ScLb"),S=((a=function(){function t(n){e(this,t),this.http=n}return n(t,[{key:"fetchCannedResponseCategories",value:function(){var e=Object(g.i)(b.a.CannedResponseCategories,"PerPage","100");return this.http.get(e).toPromise()}},{key:"fetchCannedResponseList",value:function(e,t,n,o){var i=Object(g.i)(b.a.CannedResponses+"/list","categoryId",e);return n&&parseInt(n)>0&&(i=Object(g.i)(i,"perPageCount",n)),t&&(i=Object(g.i)(i,"searchText",t)),parseInt(o)>1&&(i=Object(g.i)(i,"page",o)),this.http.get(i).toPromise()}},{key:"fetchCannedResponse",value:function(e){return this.http.get(b.a.CannedResponses+"/"+e).toPromise()}},{key:"fetchCannedResponseDetail",value:function(e,t){return this.http.post(b.a.CannedResponses+"/"+e+"/resolve",t).toPromise()}},{key:"fetchEmailPlaceHolderList",value:function(){return this.http.get(O.a.PlaceHolderList).toPromise()}}]),t}()).\u0275fac=function(e){return new(e||a)(r.bc(v.b))},a.\u0275prov=r.Jb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),x=i("KWhx"),y=i("ofXK"),P=i("3Pt+"),M=i("Pk9d"),T=i("jcQU"),w=i("QYJQ"),R=i("SRvG"),_=i("KDci"),I=i("AjNn"),j=["richTextEditor"],k=["placeholderDialog"],L=["responseTemplate"],D=["accordion"],F=["dropdownlistObj"],B=["tooltipObj"],U=["searchResponseObj"],E=["loadMoreBtn"];function N(e,t){if(1&e&&(r.Tb(0,"label"),r.Lc(1),r.Sb()),2&e){var n=r.gc(2);r.xb(1),r.Nc(" ",n.label,"\n")}}function z(e,t){if(1&e){var n=r.Ub();r.Tb(0,"div",7),r.Jc(1,N,2,1,"label",4),r.Tb(2,"label",8),r.Tb(3,"span",9),r.ec("mousedown",(function(){return r.Bc(n),r.gc().openPlaceholderDialog()})),r.Lc(4),r.hc(5,"translate"),r.Sb(),r.Sb(),r.Sb()}if(2&e){var o=r.gc();r.xb(1),r.nc("ngIf",o.label),r.xb(3),r.Nc(" ",r.ic(5,2,"INSERTPLACEHOLDERS")," ")}}function A(e,t){if(1&e&&(r.Tb(0,"label"),r.Lc(1),r.Tb(2,"span",10),r.Lc(3,"*"),r.Sb(),r.Sb()),2&e){var n=r.gc(2);r.xb(1),r.Nc(" ",n.label," ")}}function J(e,t){if(1&e){var n=r.Ub();r.Tb(0,"div",7),r.Jc(1,A,4,1,"label",4),r.Tb(2,"label",8),r.Tb(3,"span",9),r.ec("mousedown",(function(){return r.Bc(n),r.gc().openPlaceholderDialog()})),r.Lc(4),r.hc(5,"translate"),r.Sb(),r.Sb(),r.Sb()}if(2&e){var o=r.gc();r.xb(1),r.nc("ngIf",o.label),r.xb(3),r.Nc(" ",r.ic(5,2,"USECANNEDRESPONSE")," ")}}function H(e,t){if(1&e){var n=r.Ub();r.Tb(0,"div",11),r.Tb(1,"ejs-richtexteditor",12,13),r.ec("blur",(function(e){return r.Bc(n),r.gc().rteFocusOut(e)}))("focus",(function(e){return r.Bc(n),r.gc().rteFocus(e)}))("created",(function(){return r.Bc(n),r.gc().rteCreate()}))("imageUploading",(function(e){return r.Bc(n),r.gc().imageBeforeUpload(e)}))("imageUploadSuccess",(function(e){return r.Bc(n),r.gc().imageUploadSuccess(e)}))("dialogOpen",(function(e){return r.Bc(n),r.gc().rteDialogOpen(e)}))("dialogClose",(function(){return r.Bc(n),r.gc().rteDialogClose()}))("actionComplete",(function(e){return r.Bc(n),r.gc().rteActionComplete(e)}))("imageRemoving",(function(){return r.Bc(n),r.gc().rteImageCancelCallback()})),r.Sb(),r.Sb()}if(2&e){var o=r.gc();r.nc("formGroup",o.formGroupObj),r.xb(1),r.pc("id","",o.id,"_RTE"),r.nc("height",o.height)("value",o.value)("placeholder",o.placeholder)("toolbarSettings",o.toolbarSettings)("insertImageSettings",o.imageSettings)("formControlName",o.reactiveFormName)("pasteCleanupSettings",o.pastSettings)("htmlAttributes",o.autoCompleteAttribute)("htmlAttributes",o.htmlAttributes)}}function Q(e,t){if(1&e){var n=r.Ub();r.Tb(0,"ejs-richtexteditor",14,13),r.ec("blur",(function(e){return r.Bc(n),r.gc().rteFocusOut(e)}))("focus",(function(e){return r.Bc(n),r.gc().rteFocus(e)}))("created",(function(){return r.Bc(n),r.gc().rteCreate()}))("imageUploading",(function(e){return r.Bc(n),r.gc().imageBeforeUpload(e)}))("imageUploadSuccess",(function(e){return r.Bc(n),r.gc().imageUploadSuccess(e)}))("dialogOpen",(function(e){return r.Bc(n),r.gc().rteDialogOpen(e)}))("dialogClose",(function(){return r.Bc(n),r.gc().rteDialogClose()}))("actionComplete",(function(e){return r.Bc(n),r.gc().rteActionComplete(e)}))("imageRemoving",(function(){return r.Bc(n),r.gc().rteImageCancelCallback()})),r.Sb()}if(2&e){var o=r.gc();r.pc("id","",o.id,"_RTE"),r.nc("height",o.height)("value",o.value)("placeholder",o.placeholder)("toolbarSettings",o.toolbarSettings)("insertImageSettings",o.imageSettings)("pasteCleanupSettings",o.pastSettings)("htmlAttributes",o.autoCompleteAttribute)("htmlAttributes",o.htmlAttributes)}}var G=function(e){return{"last-item":e}};function $(e,t){if(1&e){var n=r.Ub();r.Tb(0,"div"),r.Tb(1,"div",16),r.ec("mousedown",(function(e){r.Bc(n);var o=t.$implicit;return r.gc(2).placeHolderClick(e,o.cannedResponseId)})),r.Tb(2,"div",17),r.Tb(3,"div",18),r.Tb(4,"span"),r.Lc(5),r.Sb(),r.Sb(),r.Tb(6,"div",19),r.Ob(7,"span",20),r.hc(8,"translate"),r.Sb(),r.Sb(),r.Sb(),r.Sb()}if(2&e){var o=t.$implicit,i=t.last;r.xb(1),r.nc("ngClass",r.tc(6,G,i)),r.xb(3),r.yb("data-title",o.name),r.xb(1),r.Nc(" ",o.name," "),r.xb(2),r.yb("data-title",r.ic(8,4,"ADD"))}}function K(e,t){1&e&&r.Jc(0,$,9,8,"div",15),2&e&&r.nc("ngForOf",t.$implicit)}function q(e,t){1&e&&(r.Tb(0,"div",31),r.Lc(1),r.hc(2,"translate"),r.Sb()),2&e&&(r.xb(1),r.Mc(r.ic(2,1,"CANNEDRESPONSES")))}function V(e,t){1&e&&(r.Tb(0,"div",31),r.Lc(1),r.hc(2,"translate"),r.Sb()),2&e&&(r.xb(1),r.Mc(r.ic(2,1,"PLACEHOLDERS")))}function X(e,t){if(1&e){var n=r.Ub();r.Tb(0,"div",32),r.Tb(1,"ejs-dropdownlist",33,34),r.ec("dataBound",(function(){return r.Bc(n),r.gc(3).dataBoundCategory()}))("select",(function(e){return r.Bc(n),r.gc(3).onCategorySelect(e)})),r.Sb(),r.Tb(3,"ejs-textbox",35,36),r.ec("input",(function(e){return r.Bc(n),r.gc(3).inputText(e)})),r.hc(5,"translate"),r.Sb(),r.Sb()}if(2&e){var o=r.gc(3);r.xb(1),r.nc("dataSource",o.cannedResponseCategories)("fields",o.fields),r.xb(2),r.oc("placeholder",r.ic(5,3,"SEARCH"))}}function Y(e,t){if(1&e&&(r.Tb(0,"div",37),r.Lc(1),r.hc(2,"translate"),r.hc(3,"translate"),r.Sb()),2&e){var n=r.gc(3);r.xb(1),r.Nc(" ",n.searchText&&n.searchText.length>0?r.ic(2,1,"SEARCHRESULTS"):r.ic(3,3,"MOSTUSED")," ")}}function W(e,t){if(1&e){var n=r.Ub();r.Tb(0,"div",25),r.Jc(1,q,3,3,"div",26),r.Jc(2,V,3,3,"div",26),r.Tb(3,"div",27),r.ec("click",(function(){return r.Bc(n),r.gc(2).closeCannedResponseDialog()})),r.Ob(4,"span",28),r.hc(5,"translate"),r.Sb(),r.Sb(),r.Jc(6,X,6,5,"div",29),r.Jc(7,Y,4,5,"div",30)}if(2&e){var o=r.gc(2);r.xb(1),r.nc("ngIf",o.enableCannedResponse),r.xb(1),r.nc("ngIf",o.enablePlaceholder),r.xb(2),r.yb("data-non-elliptical",!0)("data-title",r.ic(5,6,"CLOSE")),r.xb(2),r.nc("ngIf",o.enableCannedResponse),r.xb(1),r.nc("ngIf",o.enableCannedResponse&&o.cannedResponses&&o.cannedResponses.length>0)}}function Z(e,t){if(1&e&&(r.Tb(0,"div",56),r.Tb(1,"span"),r.Lc(2),r.Sb(),r.Sb()),2&e){var n=r.gc().$implicit;r.xb(1),r.yb("data-title",n.category),r.xb(1),r.Nc(" ",n.category," ")}}function ee(e,t){if(1&e){var n=r.Ub();r.Tb(0,"li",49),r.ec("mouseenter",(function(e){r.Bc(n);var o=t.$implicit;return r.gc(6).showPreview(e,o.id)}))("mousedown",(function(e){r.Bc(n);var o=t.$implicit;return r.gc(6).placeHolderClick(e,o.id)})),r.Tb(1,"div",50),r.Tb(2,"div",51),r.Tb(3,"span"),r.Lc(4),r.Sb(),r.Sb(),r.Tb(5,"div",52),r.Tb(6,"div",53),r.Tb(7,"span",54),r.Lc(8),r.hc(9,"translate"),r.Sb(),r.Jc(10,Z,3,2,"div",55),r.Sb(),r.Sb(),r.Sb(),r.Sb()}if(2&e){var o=t.$implicit,i=r.gc(6);r.xb(3),r.yb("data-title",o.title),r.xb(1),r.Nc(" ",o.title," "),r.xb(4),r.Nc(" ",r.ic(9,4,"INSERT")," "),r.xb(2),r.nc("ngIf","0"===i.responseCategoryId)}}function te(e,t){if(1&e&&(r.Tb(0,"div",58),r.Tb(1,"div",59),r.Tb(2,"div",60),r.Tb(3,"span"),r.Lc(4),r.Sb(),r.Sb(),r.Tb(5,"div",61),r.Tb(6,"span"),r.Lc(7),r.Sb(),r.Sb(),r.Sb(),r.Ob(8,"div",62),r.Sb()),2&e){var n=r.gc(8);r.xb(3),r.yb("data-title",n.responseDetail.name),r.xb(1),r.Mc(n.responseDetail.name),r.xb(2),r.yb("data-title",n.responseDetail.cannedResponseCategory),r.xb(1),r.Mc(n.responseDetail.cannedResponseCategory),r.xb(1),r.nc("innerHtml",n.responseDetail.description,r.Cc)}}function ne(e,t){if(1&e&&(r.Tb(0,"div"),r.Jc(1,te,9,5,"div",57),r.Sb()),2&e){var n=r.gc(7),o=r.yc(8);r.xb(1),r.nc("ngIf",n.responseDetail)("ngIfElse",o)}}function oe(e,t){if(1&e&&r.Jc(0,ne,2,2,"div",39),2&e){var n=r.gc(6),o=r.yc(10);r.nc("ngIf",!n.isPreviewLoading)("ngIfElse",o)}}function ie(e,t){if(1&e){var n=r.Ub();r.Tb(0,"ejs-tooltip",41,42),r.Tb(2,"div",43),r.Tb(3,"ul",44),r.Jc(4,ee,11,6,"li",45),r.Sb(),r.Sb(),r.Tb(5,"div",46),r.Tb(6,"button",47,48),r.ec("created",(function(){return r.Bc(n),r.gc(5).loadMoreCreated()}))("click",(function(){r.Bc(n);var e=r.gc(5);return!e.loadMoreBtnClicked&&e.loadFilterResponse()})),r.Tb(8,"span"),r.Lc(9),r.hc(10,"translate"),r.Sb(),r.Sb(),r.Sb(),r.Jc(11,oe,1,2,"ng-template",null,24,r.Kc),r.Sb()}if(2&e){var o=r.gc(5);r.nc("offsetY",0)("showTipPointer",!1),r.xb(4),r.nc("ngForOf",o.cannedResponses),r.xb(1),r.nc("hidden",!o.loadMore),r.xb(4),r.Nc(" ",r.ic(10,5,"LOADMORE"),"")}}function ae(e,t){if(1&e&&(r.Tb(0,"div"),r.Jc(1,ie,13,7,"ejs-tooltip",40),r.Sb()),2&e){var n=r.gc(4),o=r.yc(8);r.xb(1),r.nc("ngIf",n.cannedResponses&&n.cannedResponses.length>0)("ngIfElse",o)}}function re(e,t){if(1&e&&(r.Tb(0,"div"),r.Jc(1,ae,2,2,"div",39),r.Sb()),2&e){var n=r.gc(3),o=r.yc(10);r.xb(1),r.nc("ngIf",!n.isLoading)("ngIfElse",o)}}function ce(e,t){if(1&e){var n=r.Ub();r.Tb(0,"div",67,68),r.ec("mousedown",(function(e){return r.Bc(n),r.gc(6).placeHolderClick(e)})),r.Tb(2,"div",69),r.Tb(3,"span"),r.Lc(4),r.Sb(),r.Sb(),r.Sb()}if(2&e){var o=t.$implicit;r.yb("data-placeholder",o.placeholder),r.xb(3),r.yb("data-title",o.name),r.xb(1),r.Mc(o.name)}}function se(e,t){if(1&e&&(r.Tb(0,"div"),r.Tb(1,"div",64),r.Lc(2),r.Sb(),r.Tb(3,"div",65),r.Jc(4,ce,5,3,"div",66),r.Sb(),r.Sb()),2&e){var n=t.$implicit;r.xb(2),r.Mc(n.placeholderCategory),r.xb(2),r.nc("ngForOf",n.placeholders)}}function le(e,t){if(1&e&&(r.Tb(0,"div"),r.Jc(1,se,5,2,"div",15),r.Sb()),2&e){var n=r.gc(4);r.xb(1),r.nc("ngForOf",n.emailPlaceHolderList)}}function de(e,t){if(1&e&&(r.Tb(0,"div",63),r.Jc(1,le,2,1,"div",39),r.Sb()),2&e){var n=r.gc(3),o=r.yc(10);r.xb(1),r.nc("ngIf",!n.isLoading)("ngIfElse",o)}}function ge(e,t){if(1&e&&(r.Jc(0,re,2,2,"div",4),r.Jc(1,de,2,2,"div",38)),2&e){var n=r.gc(2);r.nc("ngIf",n.enableCannedResponse),r.xb(1),r.nc("ngIf",n.enablePlaceholder)}}function pe(e,t){if(1&e&&(r.Tb(0,"div"),r.Tb(1,"div"),r.Tb(2,"ejs-dialog",21,22),r.Jc(4,W,8,8,"ng-template",null,23,r.Kc),r.Jc(6,ge,2,2,"ng-template",null,24,r.Kc),r.Sb(),r.Sb(),r.Sb()),2&e){var n=r.gc();r.xb(2),r.nc("visible",!1)("closeOnEscape",!0)("position",n.placeholderDialogPosition)}}function ue(e,t){1&e&&(r.Tb(0,"div",70),r.Tb(1,"span"),r.Lc(2),r.hc(3,"translate"),r.Sb(),r.Sb()),2&e&&(r.xb(2),r.Nc(" ",r.ic(3,1,"NORESULT")," "))}function be(e,t){1&e&&(r.Tb(0,"div",71),r.Ob(1,"lib-shimmer",72),r.Sb()),2&e&&(r.xb(1),r.nc("stepCount",5))}var he={allowedTypes:[".jpeg",".jpg",".png",".gif"],saveUrl:s.a.InlineImageupload,saveFormat:"Blob",path:""},fe={allowedTypes:[".jpeg",".jpg",".png",".gif"],saveFormat:"Base64",path:""},me={items:["Bold","Italic","Underline","|","FontColor","BackgroundColor","|","InsertCode","Formats","Alignments","OrderedList","UnorderedList","|","CreateTable","CreateLink","Image","|","ClearFormat"]},ve={items:["Bold","Italic","Underline","|","FontColor","BackgroundColor","|","InsertCode","Formats","Alignments","OrderedList","UnorderedList","|","CreateTable","CreateLink","|","ClearFormat"]},Ce={deniedAttrs:["id","title"],deniedTags:["img[href]","h1"],allowedStyleProps:["background","background-color","border","border-bottom","border-left","border-radius","border-right","border-style","border-top","border-width","clear","color","cursor","direction","display","float","font","font-size","font-weight","font-style","height","left","line-height","margin","margin-top","margin-left","margin-right","margin-bottom","max-height","max-width","min-height","min-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","right","table-layout","text-align","text-decoration","text-indent","top","vertical-align","visibility","white-space","width"],prompt:!1,keepFormat:!0};function Oe(e){}var Se,xe=((Se=function(){function t(n,o,i,a,s,l){e(this,t),this.authService=n,this.http=o,this.spinService=i,this.rteService=a,this.viewContainerRef=s,this.jwtService=l,this.height="250",this.isNeedImageUpload=!0,this.enableFloatingToolbar=!1,this.promptFormatOption=!1,this.focusIn=new r.n,this.focusOut=new r.n,this.rteCreated=new r.n,this.rteDialogOpened=new r.n,this.autoCompleteAttribute={autocomplete:"anyrandomstring"},this.imageSettings=this.isNeedImageUpload?he:fe,this.toolbarSettings=this.isNeedImageUpload?me:ve,this.pastSettings=Ce,this.placeholderDialogPosition={X:"right"},this.selection=new c.e,this.fields={text:"name",value:"id"},this.listFields={text:"name",value:"id"},this.loadMoreCount=10,this.timeOut=null}return n(t,[{key:"ngOnInit",value:function(){this.imageSettings=this.isNeedImageUpload?he:fe,this.toolbarSettings=this.isNeedImageUpload?me:ve,this.toolbarSettings.enableFloating=this.enableFloatingToolbar,this.pastSettings.prompt=this.promptFormatOption}},{key:"ngAfterViewInit",value:function(){}},{key:"rteActionComplete",value:function(e){}},{key:"rteFocus",value:function(e){this.focusIn.emit(e),this.isRTEFocussed=!0,this.rteDialogOpened.emit()}},{key:"rteFocusOut",value:function(e){0===this.rteObj.getCharCount()&&0===this.rteObj.inputElement.querySelectorAll("img").length&&0===this.rteObj.inputElement.querySelectorAll("table").length&&(this.rteObj.value=null,this.rteObj.dataBind()),this.focusOut.emit(e),this.enableCannedResponse&&(this.isRTEFocussed=!1,this.rteRangeFocusSelection())}},{key:"rteCreate",value:function(){this.rteCreated.emit()}},{key:"rteImageModuleManipulation",value:function(e){var t=this;e.imageToken&&(this.spinService.showSpinner(),this.http.delete(""+Object(g.x)(s.a.InlineImageDelete,"token",e.imageToken),{headers:{attachmentToken:Object(d.h)()}}).toPromise().then((function(e){Object(d.p)(e.token)})).finally((function(){t.spinService.hideSpinner()})))}},{key:"rteImageCancelCallback",value:function(){this.rteObj.imageModule.uploadObj.getFilesData().length>0&&"File uploaded successfully"===this.rteObj.imageModule.uploadObj.getFilesData()[0].status&&this.rteImageModuleManipulation(this.rteObj.imageModule.uploadObj.getFilesData()[0])}},{key:"rteDialogOpen",value:function(e){var t=this;e.element.classList.contains("e-rte-img-dialog")&&(this.rteObj.imageModule.uploadObj.maxFileSize=10485760,[".e-dlg-closeicon-btn",".e-footer-content .e-cancel"].forEach((function(n){e.element.querySelector(n).addEventListener("click",t.rteImageCancelCallback.bind(t),!1)})))}},{key:"rteDialogClose",value:function(){this.enableCannedResponse&&this.placeholderDialog.hide()}},{key:"imageUploadSuccess",value:function(e){!function(e,t){var n=JSON.parse(e.e.target.response);if(n.url){e.element?(e.element.src=n.url,e.element.setAttribute("data-name",e.file.name),e.element.setAttribute("data-size",Object(g.s)(e.file.size)),e.file.name=n.url):e.file.name=n.url,e.file.imageToken=new URL(n.url).searchParams.get("token");var o=t.element.querySelectorAll(".e-file-name")[0];o&&(o.innerHTML=e.file.name.replace(o.innerHTML,n.url),o.title=n.url)}}(e,this.rteObj)}},{key:"imageBeforeUpload",value:function(e){e.currentRequest.setRequestHeader("attachmentToken",Object(d.h)()),Object(l.b)(e.currentRequest,this.authService)}},{key:"openPlaceholderDialog",value:function(){var e=this;this.isDialogCancel=!1,this.cannedResponseCategories=null,this.enableCannedResponse?(this.isLoading=!0,this.loadMore=!1,this.searchResponseObj&&(this.searchResponseObj.value=null,this.searchText=null),this.isLocalDataAdded?(this.cannedResponseCategories=new h.a({url:b.a.CannedResponseCategories,adaptor:new p.b}),this.dropdownlistObj.value=0,this.responseCategoryId="0",this.filterResponse()):(this.cannedResponseCategories=new h.a({url:b.a.CannedResponseCategories,adaptor:new p.b}),this.dropdownlistObj.value=0)):this.enablePlaceholder&&this.rteService.fetchEmailPlaceHolderList().then((function(t){e.emailPlaceHolderList=t.result,e.isLoading=!1})),Object(u.X)(this.saveSelection)&&this.rteRangeFocusSelection(),this.placeholderDialog.show(),this.rteObj.focusIn()}},{key:"rteRangeFocusSelection",value:function(){var e=this.selection.getRange(document);this.saveSelection=this.selection.save(e,document)}},{key:"placeHolderClick",value:function(e,t){var n=this,o=e.currentTarget;setTimeout((function(){if(n.enableCannedResponse)n.spinService.showSpinner(),n.rteService.fetchCannedResponseDetail(t.toString(),n.cannedResponseResolveObj).then((function(e){var t=e.result;n.rteObj.value||n.rteObj.focusIn(),!n.isDialogCancel&&n.isRTEFocussed&&n.rteRangeFocusSelection(),0===n.rteObj.formatter.getUndoRedoStack().length&&n.rteObj.formatter.saveData(),n.saveSelection.restore(),n.rteObj.executeCommand("insertHTML",t),n.rteObj.formatter.saveData(),n.rteObj.formatter.enableUndo(n.rteObj);var o=n.selection.getRange(document);n.saveSelection=n.selection.save(o,document),n.isDialogCancel=!1,n.isRTEFocussed=!0,n.spinService.hideSpinner()})).catch((function(){n.spinService.hideSpinner()}));else if(n.enablePlaceholder){var e=document.activeElement,i=o.getAttribute("data-placeholder");if("INPUT"===e.tagName||e.classList.contains("placeholder-subject")){if("INPUT"===e.tagName&&e.classList.contains("placeholder-subject")){var a=i.length+e.selectionStart,r=e.value;e.ej2_instances[0].value=0===e.selectionStart?"".concat(i).concat(r):"".concat(r.substring(0,e.selectionStart)).concat(i).concat(r.substring(e.selectionStart)),e.ej2_instances[0].element.focus(),setTimeout((function(){e.ej2_instances[0].element.setSelectionRange(a,a)}))}}else{n.rteObj.value||n.rteObj.focusIn(),!n.isDialogCancel&&n.isRTEFocussed&&n.rteRangeFocusSelection(),0===n.rteObj.formatter.getUndoRedoStack().length&&n.rteObj.formatter.saveData(),n.saveSelection.restore(),n.rteObj.executeCommand("insertText",i),n.rteObj.formatter.saveData(),n.rteObj.formatter.enableUndo(n.rteObj);var c=n.selection.getRange(document);n.saveSelection=n.selection.save(c,document),n.isDialogCancel=!1,n.isRTEFocussed=!0}}}),0),e.preventDefault(),e.stopPropagation()}},{key:"closeCannedResponseDialog",value:function(){this.placeholderDialog&&this.placeholderDialog.hide(),this.isDialogCancel=!0,null!=this.selectedIndex&&this.accordionRef.expandItem(!1,this.selectedIndex)}},{key:"dataBoundCategory",value:function(){this.isLocalDataAdded||(this.dropdownlistObj.addItem({id:0,name:"All Categories"},0),this.dropdownlistObj.value=0,this.responseCategoryId="0",this.loadMore=!1,this.filterResponse(),this.isLocalDataAdded=!0)}},{key:"onCategorySelect",value:function(e){this.responseCategoryId=e.itemData.id.toString(),this.loadMore=!1,this.isLoading=!0,this.filterResponse()}},{key:"inputText",value:function(e){var t=this;this.loadMore=!1,this.searchText=e.value,this.isLoading=!0,clearTimeout(this.timeOut),this.timeOut=setTimeout((function(){t.filterResponse()}),300)}},{key:"loadFilterResponse",value:function(){this.filterResponse(!0)}},{key:"loadMoreCreated",value:function(){this.progressLoad=new f.c({content:this.loadMoreBtn.element.innerText,isPrimary:!0,duration:3599e3},this.loadMoreBtn.element)}},{key:"filterResponse",value:function(e){var t=this;this.loadMoreBtnClicked=!0,Object(g.D)(this.responseCategoryId)||(this.loadMore?(this.progressLoad.start(),this.loadMoreCount=5,++this.pageData):(this.loadMoreCount=10,this.pageData=1,this.cannedResponses=null),this.rteService.fetchCannedResponseList(this.responseCategoryId,this.searchText,this.loadMoreCount.toString(),this.pageData.toString()).then((function(n){t.cannedResponses&&t.cannedResponses.length>0&&e?n.result.forEach((function(e){t.cannedResponses.push(e)})):t.cannedResponses=n.result,t.loadMore=n.hasMore,t.isLoading=!1,setTimeout((function(){t.loadMoreBtn&&t.loadMoreBtn.element.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}))})).finally((function(){t.loadMoreBtnClicked=!1,t.progressLoad&&t.progressLoad.progressComplete()})))}},{key:"showPreview",value:function(e,t){var n=this;this.responseId=parseInt(t),this.isPreviewLoading=!0,this.responseDetail&&this.responseId===this.responseDetail.cannedResponseId?this.isPreviewLoading=!1:(clearTimeout(this.timeOut),this.timeOut=setTimeout((function(){n.rteService.fetchCannedResponse(n.responseId.toString()).then((function(e){e&&e.result&&n.responseId===e.result.cannedResponseId?(n.responseDetail=e.result,n.isPreviewLoading=!1):n.isPreviewLoading=!0}))}),1e3))}},{key:"compileTemplate",value:function(e,t){var n=this.viewContainerRef.createEmbeddedView(e,{$implicit:t});return n.markForCheck(),n.rootNodes}},{key:"detachCompiledTemplate",value:function(e){[].slice.call(e.childNodes).forEach((function(e){Object(u.I)(e)}))}}]),t}()).\u0275fac=function(e){return new(e||Se)(r.Nb(m.a),r.Nb(v.b),r.Nb(C.a),r.Nb(S),r.Nb(r.O),r.Nb(x.a))},Se.\u0275cmp=r.Hb({type:Se,selectors:[["app-rte"]],viewQuery:function(e,t){var n;1&e&&(r.Qc(j,!0),r.Qc(k,!0),r.Qc(L,!0),r.Qc(D,!0),r.Qc(F,!0),r.Qc(B,!0),r.Qc(U,!0),r.Qc(E,!0)),2&e&&(r.xc(n=r.fc())&&(t.rteObj=n.first),r.xc(n=r.fc())&&(t.placeholderDialog=n.first),r.xc(n=r.fc())&&(t.responseRef=n.first),r.xc(n=r.fc())&&(t.accordionRef=n.first),r.xc(n=r.fc())&&(t.dropdownlistObj=n.first),r.xc(n=r.fc())&&(t.tooltipObj=n.first),r.xc(n=r.fc())&&(t.searchResponseObj=n.first),r.xc(n=r.fc())&&(t.loadMoreBtn=n.first))},inputs:{id:"id",enabeRteTitle:"enabeRteTitle",placeholder:"placeholder",formGroupObj:"formGroupObj",formControl:"formControl",value:"value",height:"height",isNeedImageUpload:"isNeedImageUpload",enableCannedResponse:"enableCannedResponse",enablePlaceholder:"enablePlaceholder",label:"label",cannedResponseResolveObj:"cannedResponseResolveObj",reactiveFormName:"reactiveFormName",htmlAttributes:"htmlAttributes",placeholderPosition:"placeholderPosition",enableFloatingToolbar:"enableFloatingToolbar",promptFormatOption:"promptFormatOption"},outputs:{focusIn:"focusIn",focusOut:"focusOut",rteCreated:"rteCreated",rteDialogOpened:"rteDialogOpened"},features:[r.wb([c.j,c.d,c.c,c.b,c.a,c.g,c.f])],decls:11,vars:5,consts:[["style","display: flex;",4,"ngIf"],["class","mb-5",3,"formGroup",4,"ngIf"],[3,"height","value","placeholder","id","toolbarSettings","insertImageSettings","pasteCleanupSettings","htmlAttributes","blur","focus","created","imageUploading","imageUploadSuccess","dialogOpen","dialogClose","actionComplete","imageRemoving",4,"ngIf"],["responseTemplate",""],[4,"ngIf"],["noData",""],["fetching",""],[2,"display","flex"],[1,"align-right"],[1,"link",3,"mousedown"],[1,"error"],[1,"mb-5",3,"formGroup"],[3,"height","value","placeholder","id","toolbarSettings","insertImageSettings","formControlName","pasteCleanupSettings","htmlAttributes","blur","focus","created","imageUploading","imageUploadSuccess","dialogOpen","dialogClose","actionComplete","imageRemoving"],["richTextEditor",""],[3,"height","value","placeholder","id","toolbarSettings","insertImageSettings","pasteCleanupSettings","htmlAttributes","blur","focus","created","imageUploading","imageUploadSuccess","dialogOpen","dialogClose","actionComplete","imageRemoving"],[4,"ngFor","ngForOf"],[1,"cursor-pointer","content-format",3,"ngClass","mousedown"],[1,"form-group","row",2,"margin-bottom","0px"],[1,"col-10","ellipsis","no-wrap"],[1,"col-2"],[1,"on-hover-show","hd-icon","hd-plus"],["width","400px","cssClass","dlg-height customize-dlg-style",3,"visible","closeOnEscape","position"],["placeholderDialog",""],["header",""],["content",""],[1,"flex-horizontal"],["class","font-16 font-500",4,"ngIf"],[1,"align-right","pr-2",3,"click"],[1,"e-btn-icon","e-icon-dlg-close","e-icons","cursor-pointer"],["class","flex filter-action",4,"ngIf"],["class","result-info border-bottom secondary",4,"ngIf"],[1,"font-16","font-500"],[1,"flex","filter-action"],["allowFiltering","true","width","175",3,"dataSource","fields","dataBound","select"],["dropdownlistObj",""],["width","350","width","175","showClearButton","true",1,"align-right",3,"placeholder","input"],["searchResponseObj",""],[1,"result-info","border-bottom","secondary"],["style","padding:0 0 0 18px;",4,"ngIf"],[4,"ngIf","ngIfElse"],["target","#listView","cssClass","tooltip-content","height","100%","position","LeftCenter","opensOn","Auto","width","393",3,"offsetY","showTipPointer",4,"ngIf","ngIfElse"],["target","#listView","cssClass","tooltip-content","height","100%","position","LeftCenter","opensOn","Auto","width","393",3,"offsetY","showTipPointer"],["tooltipObj",""],[1,"e-listview"],["id","listView",1,"e-list-parent"],["class","e-list-item",3,"mouseenter","mousedown",4,"ngFor","ngForOf"],[1,"mb-10","text-center","mt-5",3,"hidden"],["ejs-button","",1,"e-primary","e-btn","no-border","e-link","link",3,"created","click"],["loadMoreBtn",""],[1,"e-list-item",3,"mouseenter","mousedown"],[1,"display-block"],[1,"float-left","ellipsis","no-wrap","response-title"],[1,"float-right","response-category"],[1,"flex"],[1,"show-on-hover","link"],["class","ellipsis no-wrap hide-on-hover",4,"ngIf"],[1,"ellipsis","no-wrap","hide-on-hover"],["class","tootip-info",4,"ngIf","ngIfElse"],[1,"tootip-info"],[1,"info-header","flex-vertical","border-bottom"],[1,"ellipsis","no-wrap","font-16","font-500"],[1,"ellipsis","no-wrap","font-12"],[1,"info-content",3,"innerHtml"],[2,"padding","0 0 0 18px"],[1,"font-500","font-14","pb-3","pt-2"],[1,"placeholder-list"],["class","placeholder-list-item no-wrap ellipsis",3,"mousedown",4,"ngFor","ngForOf"],[1,"placeholder-list-item","no-wrap","ellipsis",3,"mousedown"],["element",""],[1,"no-wrap","ellipsis"],[1,"error-action-msg","error-style"],[1,"ticket-fetch-loader"],[3,"stepCount"]],template:function(e,t){1&e&&(r.Jc(0,z,6,4,"div",0),r.Jc(1,J,6,4,"div",0),r.Jc(2,H,3,11,"div",1),r.Jc(3,Q,2,9,"ejs-richtexteditor",2),r.Jc(4,K,1,1,"ng-template",null,3,r.Kc),r.Jc(6,pe,8,3,"div",4),r.Jc(7,ue,4,3,"ng-template",null,5,r.Kc),r.Jc(9,be,2,1,"ng-template",null,6,r.Kc)),2&e&&(r.nc("ngIf",t.enablePlaceholder),r.xb(1),r.nc("ngIf",t.enableCannedResponse&&t.placeholderPosition),r.xb(1),r.nc("ngIf",t.reactiveFormName),r.xb(1),r.nc("ngIf",!t.reactiveFormName),r.xb(3),r.nc("ngIf",t.enableCannedResponse||t.enablePlaceholder))},directives:[y.n,P.h,P.c,c.i,P.g,P.b,y.m,y.l,M.b,T.e,w.i,M.d,R.c,_.a],pipes:[I.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.dlg-height[_ngcontent-%COMP%]{max-height:100%!important;top:0!important}.customize-dlg-style[_ngcontent-%COMP%]{height:100%}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%]{font-size:16px!important;width:100%}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%]   .expand-button-style[_ngcontent-%COMP%]{background:#000;cursor:pointer;height:35px;left:auto;margin-right:auto;opacity:.25;right:400px;text-align:center;top:8px;transform:rotate(180deg);width:35px}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%]   .expand-button-style[_ngcontent-%COMP%]:hover{color:#fff;left:auto}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%]   .expand-button-style[_ngcontent-%COMP%]   .hd-icon[_ngcontent-%COMP%]{color:#fff;font-size:11px;padding:0}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%]   .expand-button-style[_ngcontent-%COMP%]   .hd-icon[_ngcontent-%COMP%]:before{top:-1px}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]{font-size:14px;padding:15px 0 5px 8px}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]{border-radius:0;padding:0!important}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]{max-width:100%;padding:0 16px 0 24px}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]   .response-title[_ngcontent-%COMP%]{max-width:60%}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]   .response-category[_ngcontent-%COMP%]{max-width:40%}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]   .response-category[_ngcontent-%COMP%]   .show-on-hover[_ngcontent-%COMP%]{display:none}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]   .response-category[_ngcontent-%COMP%]   .hide-on-hover[_ngcontent-%COMP%]{display:block;max-width:100%}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]:hover{background-color:#ecf2f7;border-color:#ecf2f7}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]:hover   .response-category[_ngcontent-%COMP%]   .show-on-hover[_ngcontent-%COMP%]{display:block}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]:hover   .response-category[_ngcontent-%COMP%]   .hide-on-hover[_ngcontent-%COMP%]{display:none}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]:active{background-color:#e5efff;border-color:#fff}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header-content[_ngcontent-%COMP%]{padding:16px!important}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header-content[_ngcontent-%COMP%]   .filter-action[_ngcontent-%COMP%]{margin-top:20px;width:100%}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header-content[_ngcontent-%COMP%]   .e-icon-dlg-close[_ngcontent-%COMP%]{border-radius:4px;bottom:0;height:25px;line-height:25px;padding:0;width:25px}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header-content[_ngcontent-%COMP%]   .e-icon-dlg-close[_ngcontent-%COMP%]:before{padding:3px;top:1px}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header-content[_ngcontent-%COMP%]   .e-icon-dlg-close[_ngcontent-%COMP%]:hover{background:#f4f5f7}.customize-dlg-style[_ngcontent-%COMP%]   .center-format[_ngcontent-%COMP%]{align-items:center;display:flex;height:100%;justify-content:center}.customize-dlg-style[_ngcontent-%COMP%]   .e-footer-content[_ngcontent-%COMP%]{background:inherit;font-size:14px;font-weight:500;height:45px;text-align:center}.placeholder-dlg[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]{padding:18px!important}.error-style[_ngcontent-%COMP%]{line-height:35px;margin:0!important;padding:7px 0 7px 20px!important}.modify-sidebar[_ngcontent-%COMP%]{height:calc(100% - 50px);top:50px!important}.tooltip-content[_ngcontent-%COMP%]{background-color:#fff;border-color:#fff;border-radius:4px;box-shadow:0 0 1px rgba(9,30,66,.31),0 3px 5px rgba(9,30,66,.2);left:auto!important;max-height:calc(100% - 100px);opacity:1;right:410px!important;top:50px!important}.tooltip-content[_ngcontent-%COMP%]   .e-tip-content[_ngcontent-%COMP%]{color:var(--primary-color);overflow:hidden;padding:0}.tooltip-content[_ngcontent-%COMP%]   .e-tip-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{height:100%}.tooltip-content[_ngcontent-%COMP%]   .e-tip-content[_ngcontent-%COMP%]   .tootip-info[_ngcontent-%COMP%]{height:100%;padding:15px 0 0 15px}.tooltip-content[_ngcontent-%COMP%]   .e-tip-content[_ngcontent-%COMP%]   .tootip-info[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]{height:10%;padding:0 15px 0 0}.tooltip-content[_ngcontent-%COMP%]   .e-tip-content[_ngcontent-%COMP%]   .tootip-info[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{max-height:90%;overflow-x:hidden;overflow-y:auto;padding:20px 15px 15px 0}"]}),Se)}}])}();