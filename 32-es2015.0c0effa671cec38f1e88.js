(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"4ZeN":function(e,t,i){"use strict";i.r(t),i.d(t,"CannedResponsesModule",(function(){return Be}));var n=i("ofXK"),o=i("tyNb"),s=i("58Y9"),r=i("M9dC"),a=i("dSv1"),c=i("H552"),l=i("GOTl"),d=i("A4Lh"),h=i("Pk9d"),u=i("4SUy"),b=i("5Lwd"),g=i("ScLb"),p=i("fXoL"),f=i("1kef"),m=i("JCZ/"),C=i("X8pc"),S=i("tk/3");let v=(()=>{class e{constructor(e){this.http=e,this.httpOptions={headers:new S.e({"Content-Type":"application/json"})}}AddCategory(e){return this.http.post(l.a.CannedResponseCategories,e).toPromise()}EditCategory(e){return this.http.put(l.a.CannedResponseCategories,e).toPromise()}DeleteCategory(e){return this.http.delete(l.a.CannedResponseCategories+"/"+e).toPromise()}fetchEmailPlaceHolderList(){const e=Object(s.i)(g.a.PlaceHolderList,"isRequiredForCannedResponse","true");return this.http.get(e).toPromise()}AddCannedResponse(e){return this.http.post(l.a.CannedResponses,e).toPromise()}EditCannedResponse(e){return this.http.put(l.a.CannedResponses,e).toPromise()}DeleteCannedResponse(e){return this.http.delete(l.a.CannedResponses+"/"+e).toPromise()}changeOwnerForView(e,t){return this.http.put(l.a.CannedResponses+"/"+e+"/change_owner/"+t,this.httpOptions).toPromise()}}return e.\u0275fac=function(t){return new(t||e)(p.bc(S.b))},e.\u0275prov=p.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=i("IaKf"),O=i("jcQU"),y=i("SRvG"),E=i("QYJQ"),x=i("GJ+o"),D=i("hXFv"),R=i("AjNn"),N=i("EiDu");const w=["cannedResponseListGrid"],I=["responseCategoryList"],P=["categoryDialog"],A=["editCategoryName"],L=["addCategoryName"],j=["responseGridElement"],M=["contentGroupForm"],B=["cannedResponseListEle"],k=["agentDrop"],F=["contextmenu"],q=["searchCannesResponse"];function H(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",38),p.Tb(1,"span",39),p.Tb(2,"span",40),p.ec("click",(function(){return p.Bc(e),p.gc().editClick()})),p.hc(3,"translate"),p.Sb(),p.Sb(),p.Tb(4,"span",39),p.Tb(5,"span",41),p.ec("click",(function(){return p.Bc(e),p.gc().deleteCategoryClick()})),p.hc(6,"translate"),p.Sb(),p.Sb(),p.Sb()}2&e&&(p.xb(2),p.yb("data-title",p.ic(3,2,"EDITCATEGORY")),p.xb(3),p.yb("data-title",p.ic(6,4,"DELETECATEGORY")))}function G(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",42),p.Tb(1,"span",43),p.ec("click",(function(i){p.Bc(e);const n=t.$implicit;return p.gc().rowSelect(i,n)})),p.Lc(2),p.Sb(),p.Sb()}if(2&e){const e=t.$implicit;p.xb(2),p.Nc(" ",e.name," ")}}function J(e,t){if(1&e&&(p.Tb(0,"span",44),p.Lc(1),p.Sb()),2&e){const e=t.$implicit;p.xb(1),p.Nc(" ",e.accessScope," ")}}function U(e,t){if(1&e){const e=p.Ub();p.Tb(0,"span",45),p.ec("click",(function(){p.Bc(e);const i=t.$implicit,n=p.gc();return n.moreOptionsSelect(n.editItem,i)})),p.hc(1,"translate"),p.Sb(),p.Tb(2,"span",46),p.ec("click",(function(i){p.Bc(e);const n=t.$implicit;return p.gc().bindBtnTemplate(i,n)})),p.Sb()}2&e&&p.yb("data-title",p.ic(1,1,"EDIT"))}function _(e,t){if(1&e&&(p.Tb(0,"div",47),p.Lc(1),p.hc(2,"translate"),p.Sb(),p.Tb(3,"div",47),p.Lc(4),p.hc(5,"translate"),p.Sb(),p.Tb(6,"div",47),p.Lc(7),p.hc(8,"translate"),p.Sb()),2&e){const e=p.gc();p.nc("hidden",!e.editCategory),p.xb(1),p.Nc(" ",p.ic(2,6,"EDITCATEGORY")," "),p.xb(2),p.nc("hidden",!e.addCategory),p.xb(1),p.Nc(" ",p.ic(5,8,"ADDCATEGORY")," "),p.xb(2),p.nc("hidden",!e.changeOwnerDialog),p.xb(1),p.Mc(p.ic(8,10,"CHANGEOWNER"))}}function V(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",47),p.Tb(1,"button",48),p.ec("click",(function(){return p.Bc(e),p.gc().closeDialog()})),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Tb(4,"button",49),p.ec("click",(function(){return p.Bc(e),p.gc().editCategoryClick()})),p.Lc(5),p.hc(6,"translate"),p.Sb(),p.Sb(),p.Tb(7,"div",47),p.Tb(8,"button",48),p.ec("click",(function(){return p.Bc(e),p.gc().closeDialog()})),p.Lc(9),p.hc(10,"translate"),p.Sb(),p.Tb(11,"button",49),p.ec("click",(function(){return p.Bc(e),p.gc().addCategoryClick()})),p.Lc(12),p.hc(13,"translate"),p.Sb(),p.Sb(),p.Tb(14,"div",47),p.Tb(15,"button",48),p.ec("click",(function(){return p.Bc(e),p.gc().closeDialog()})),p.Lc(16),p.hc(17,"translate"),p.Sb(),p.Tb(18,"button",49),p.ec("click",(function(){return p.Bc(e),p.gc().updateOwnerClick()})),p.Lc(19),p.hc(20,"translate"),p.Sb(),p.Sb()}if(2&e){const e=p.gc();p.nc("hidden",!e.editCategory),p.xb(2),p.Mc(p.ic(3,9,"CANCEL")),p.xb(3),p.Mc(p.ic(6,11,"UPDATE")),p.xb(2),p.nc("hidden",!e.addCategory),p.xb(2),p.Mc(p.ic(10,13,"CANCEL")),p.xb(3),p.Mc(p.ic(13,15,"ADD")),p.xb(2),p.nc("hidden",!e.changeOwnerDialog),p.xb(2),p.Mc(p.ic(17,17,"CANCEL")),p.xb(3),p.Mc(p.ic(20,19,"UPDATE"))}}function Q(e,t){1&e&&(p.Tb(0,"div"),p.Tb(1,"span",65),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(2),p.Nc(" ",p.ic(3,1,"NOCHANGES"),""))}function X(e,t){if(1&e&&(p.Tb(0,"div",65),p.Ob(1,"span",66),p.hc(2,"safe"),p.Sb()),2&e){const e=p.gc(2);p.xb(1),p.nc("innerHTML",p.jc(2,1,e.CategoryNameErrorMessage,"html"),p.Cc)}}function W(e,t){1&e&&(p.Tb(0,"div"),p.Tb(1,"span",65),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(2),p.Nc(" ",p.ic(3,1,"FIELDREQUIRED"),""))}function Y(e,t){if(1&e&&(p.Tb(0,"div"),p.Ob(1,"span",66),p.hc(2,"safe"),p.Sb()),2&e){const e=p.gc(2);p.xb(1),p.nc("innerHTML",p.jc(2,1,e.editCategoryNameErrorMessage,"html"),p.Cc)}}function K(e,t){if(1&e&&(p.Tb(0,"div",65),p.Ob(1,"span",66),p.hc(2,"safe"),p.Sb()),2&e){const e=p.gc(2);p.xb(1),p.nc("innerHTML",p.jc(2,1,e.CategoryNameErrorMessage,"html"),p.Cc)}}function z(e,t){1&e&&(p.Tb(0,"div"),p.Tb(1,"span",65),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(2),p.Nc(" ",p.ic(3,1,"FIELDREQUIRED"),""))}function $(e,t){if(1&e&&(p.Tb(0,"div"),p.Ob(1,"span",66),p.hc(2,"safe"),p.Sb()),2&e){const e=p.gc(2);p.xb(1),p.nc("innerHTML",p.jc(2,1,e.addCategoryNameErrorMessage,"html"),p.Cc)}}function Z(e,t){if(1&e&&(p.Tb(0,"div"),p.Ob(1,"span",66),p.hc(2,"safe"),p.Sb()),2&e){const e=p.gc(2);p.xb(1),p.nc("innerHTML",p.jc(2,1,e.errorMessage,"html"),p.Cc)}}function ee(e,t){if(1&e&&(p.Tb(0,"div",67),p.Tb(1,"div",68),p.Tb(2,"div",69),p.Tb(3,"span",70),p.Lc(4),p.Sb(),p.Tb(5,"span",70),p.Tb(6,"span",71),p.Lc(7),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb()),2&e){const e=t.$implicit;p.nc("ngClass",e.isAgent?"agent":""),p.yb("data-user-id",e.userId),p.xb(4),p.Nc(" ",e.displayName," "),p.xb(3),p.Mc(e.emailId)}}function te(e,t){1&e&&(p.Tb(0,"div"),p.Tb(1,"span",65),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(2),p.Nc(" ",p.ic(3,1,"FIELDREQUIRED"),""))}function ie(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",null,50),p.Tb(2,"div",47),p.Tb(3,"div",51),p.Tb(4,"div",52),p.Jc(5,Q,4,3,"div",53),p.Jc(6,X,3,4,"div",54),p.Tb(7,"div",55),p.Tb(8,"label"),p.Lc(9),p.hc(10,"translate"),p.Tb(11,"span",56),p.Lc(12,"*"),p.Sb(),p.Sb(),p.Tb(13,"ejs-textbox",57,58),p.ec("blur",(function(){return p.Bc(e),p.gc().editCategoryNameFocusOut()}))("change",(function(){return p.Bc(e),p.gc().editCategoryChange()}))("focus",(function(){return p.Bc(e),p.gc().CategoryFocus()}))("created",(function(){return p.Bc(e),p.gc().controlCreated("editCategoryName")})),p.hc(15,"translate"),p.Sb(),p.Jc(16,W,4,3,"div",53),p.Jc(17,Y,3,4,"div",53),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(18,"div",47),p.Tb(19,"div",51),p.Tb(20,"div"),p.Jc(21,K,3,4,"div",54),p.Tb(22,"div",55),p.Tb(23,"label"),p.Lc(24),p.hc(25,"translate"),p.Tb(26,"span",56),p.Lc(27,"*"),p.Sb(),p.Sb(),p.Tb(28,"ejs-textbox",59,60),p.ec("blur",(function(){return p.Bc(e),p.gc().addCategoryNameFocusOut()}))("change",(function(){return p.Bc(e),p.gc().addCategoryChange()}))("focus",(function(){return p.Bc(e),p.gc().CategoryFocus()}))("created",(function(){return p.Bc(e),p.gc().controlCreated("addCategoryName")})),p.hc(30,"translate"),p.Sb(),p.Jc(31,z,4,3,"div",53),p.Jc(32,$,3,4,"div",53),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(33,"div",47),p.Tb(34,"div",51),p.Tb(35,"div",61),p.Jc(36,Z,3,4,"div",53),p.Tb(37,"div",55),p.Tb(38,"label"),p.Lc(39),p.hc(40,"translate"),p.Tb(41,"span",56),p.Lc(42,"*"),p.Sb(),p.Sb(),p.Tb(43,"ejs-dropdownlist",62,63),p.ec("focus",(function(){return p.Bc(e),p.gc().assigneeFocus()}))("blur",(function(){return p.Bc(e),p.gc().assigneeFocusOut()}))("change",(function(){return p.Bc(e),p.gc().assigneeFocusOut()})),p.hc(45,"translate"),p.hc(46,"translate"),p.Jc(47,ee,8,4,"ng-template",null,64,p.Kc),p.Sb(),p.Jc(49,te,4,3,"div",53),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb()}if(2&e){const e=p.gc();p.xb(2),p.nc("hidden",!e.editCategory),p.xb(3),p.nc("ngIf",e.noChangesValidation),p.xb(1),p.nc("ngIf",e.CategoryNameError),p.xb(3),p.Nc(" ",p.ic(10,27,"CATEGORY")," "),p.xb(4),p.oc("placeholder",p.ic(15,29,"TEXTBOXPLACEHOLDER")),p.nc("htmlAttributes",e.inputAttribute),p.xb(3),p.nc("ngIf",e.isRequired),p.xb(1),p.nc("ngIf",e.editCategoryNameError),p.xb(1),p.nc("hidden",!e.addCategory),p.xb(3),p.nc("ngIf",e.CategoryNameError),p.xb(3),p.Nc(" ",p.ic(25,31,"CATEGORY")," "),p.xb(4),p.oc("placeholder",p.ic(30,33,"TEXTBOXPLACEHOLDER")),p.nc("htmlAttributes",e.inputAttribute),p.xb(3),p.nc("ngIf",e.isRequired),p.xb(1),p.nc("ngIf",e.addCategoryNameError),p.xb(1),p.nc("hidden",!e.changeOwnerDialog),p.xb(3),p.nc("ngIf",e.errorMessage),p.xb(3),p.Nc(" ",p.ic(40,35,"AGENT")," "),p.xb(4),p.oc("placeholder",p.ic(45,37,"DROPDOWNPLACEHOLDER")),p.oc("filterBarPlaceholder",p.ic(46,39,"SEARCH")),p.nc("dataSource",e.assigneeDataConfig)("fields",e.assigneeFieldConfig)("allowFiltering",!0)("showClearButton",!0)("htmlAttributes",e.autoCompleteAttribute)("query",e.agentDropQuery),p.xb(6),p.nc("ngIf",e.isRequired)}}let ne=(()=>{class e{constructor(e,t,i,n,o,s){this.appRootService=e,this.seoService=t,this.router=i,this.spinService=n,this.cannedResponseService=o,this.toastService=s,this.inputAttribute={maxlength:d.s,autocomplete:"anyrandomstring"},this.fields={text:"name",value:"id"},this.edit=Object(a.a)("EDIT"),this.delete=Object(a.a)("DELETE"),this.height="200px",this.changeOwner=Object(a.a)("CHANGEOWNER"),this.assigneeFieldConfig={value:"userId",text:"displayName"},this.autoCompleteAttribute={autocomplete:"anyrandomstring"},this.animation={effect:"none"},this.moreActionItems=[{text:this.delete,id:"1"},{text:this.changeOwner,id:"2"}],this.moreActionsWithResponse=[this.delete],this.moreActionsWithChangeOwner=[this.delete,this.changeOwner],this.editItem={item:{text:this.edit}},this.searchPlaceholder=Object(a.a)("SEARCH");const r=Object(a.a)("ADMIN")+" / "+Object(a.a)("CANNEDRESPONSES"),c=Object(a.a)("CANNEDRESPONSES")+" | "+Object(a.a)("ADMIN");this.appRootService.setAppTitleText(r),this.seoService.setHeaderElements({title:c})}ngOnInit(){const e=history.state;this.pageSettings={pageSize:d.q},Object(u.X)(e.data)?this.filterGrid("1"):(this.filterGrid(e.data.value),this.listObj.query=(new c.g).addParams("includeAdditionalIds",e.data.value)),this.loadCategories()}ngAfterViewInit(){this.oldCategoryValue=this.listObj.text;const e=history.state;Object(u.X)(e.data)?(this.listObj.value=1,setTimeout(()=>{this.isDisabledAction=!0},0)):(this.listObj.value=parseInt(e.data.value,10),1===this.listObj.value?setTimeout(()=>{this.isDisabledAction=!0},0):setTimeout(()=>{this.isDisabledAction=!1},0)),this.gridEle.nativeElement.addEventListener("scroll",()=>{this.contextmenu.close()}),this.cannedResponseListEle.nativeElement.addEventListener("keydown",e=>{Object(s.l)(e,this.cannedResponseListEle.nativeElement)}),this.gridEle.nativeElement.addEventListener("scroll",()=>{this.contextmenu.close()})}rowSelect(e,t){if(e.target.classList.contains("more-option-button"))e.cancel=!0;else{const e=t;e&&this.goToDetail(e.cannedResponseId)}}filterGrid(e){this.grid.query=(new c.g).addParams("cannedResponseCategoryId",e),this.loadGrid()}loadGrid(){this.cannedResponseList=new c.a({url:l.a.CannedResponses,adaptor:new r.b})}loadCategories(){this.categoriesData=new c.a({url:l.a.CannedResponseCategories,adaptor:new r.b})}addCannedResponse(){this.router.navigate(["/admin/canned-responses/new"],{state:{data:{accessScopeId:b.a.Public,cannedResponseCategoryId:this.listObj.value}}})}goToDetail(e){this.router.navigateByUrl("/admin/canned-responses/"+e)}onChange(){this.oldCategoryValue=this.listObj.text,this.filterGrid(this.listObj.value.toString()),this.isDisabledAction=1===this.listObj.value}closeDialog(){this.categoryDialog.hide(),this.editCategoryName.value=null,this.addCategoryName.value=null,this.isRequired=!1,this.noChangesValidation=!1,this.editCategory=!1,this.addCategory=!1,this.changeOwnerDialog=!1,this.editCategoryNameError=!1,this.editCategoryNameErrorMessage=null,this.addCategoryNameError=!1,this.addCategoryNameErrorMessage=null,this.deleteDialog&&this.deleteDialog.hide()}moreOptionsSelect(e,t){e.item.text===this.edit?this.goToDetail(t.cannedResponseId):e.item.text===this.delete?(this.selectedCannedResponseId=this.selectedItemData.cannedResponseId,Object(s.b)(this.deleteCannedReponse,this.closeDialog,this,Object(a.a)("DELETERESPONSE"),Object(a.a)("DELETERESPONSEALERT"),Object(a.a)("YES")+", "+Object(a.a)("DELETE"))):e.item.text===this.changeOwner&&(this.changeOwnerDialogOpen(),this.cannedResponseID=this.selectedItemData.cannedResponseId)}categoryDialogOpen(){this.editCategory?setTimeout(()=>{this.editCategoryName.focusIn()}):this.addCategory?setTimeout(()=>{this.addCategoryName.focusIn()}):this.changeOwnerDialog&&setTimeout(()=>{this.agentDrop.focusIn()})}changeOwnerDialogOpen(){this.assigneeDataConfig=new c.a({url:g.a.Assignee,adaptor:new r.b}),this.editCategory=!1,this.addCategory=!1,this.changeOwnerDialog=!0,this.categoryDialog.show()}assigneeFocus(){this.isRequired=!1}assigneeFocusOut(){this.isRequired=!this.agentDrop.value}updateOwnerClick(){this.agentDrop.value&&!Object(u.X)(this.agentDrop.value)&&(this.spinService.showSpinner(),this.cannedResponseService.changeOwnerForView(this.cannedResponseID.toString(),this.agentDrop.value).then(e=>{e&&(this.spinService.hideSpinner(),this.toastService.successToast(e.message),this.closeDialog(),this.loadGrid())}).catch(e=>{this.spinService.hideSpinner(),e.error&&e.error.errors&&e.error.errors.length>0&&(this.errorMessage=e.error.errors[0].errorMessage)}))}moreOptionsClick(){this.grid.clearSelection()}moreOptionsButtonOpen(){const e=this.gridEle.nativeElement.querySelectorAll(".response-more-option-button.e-active");if(e.length>1){const t=e;t&&t[0].ej2_instances[0].toggle()}}addCategoryNameFocusOut(){this.isRequired=!this.addCategoryName.value}actionCompleteOnCategory(){this.responseCategoryId&&(this.listObj.value=this.responseCategoryId,this.responseCategoryId=void 0)}addClick(){this.addCategory=!0,this.editCategory=!1,this.changeOwnerDialog=!1,this.isRequired=!1,this.noChangesValidation=!1,this.editCategoryNameError=!1,this.editCategoryNameErrorMessage=null,this.categoryDialog.show()}editClick(){this.addCategory=!1,this.changeOwnerDialog=!1,this.editCategory=!0,this.isRequired=!1,this.noChangesValidation=!1,this.editCategoryNameError=!1,this.editCategoryNameErrorMessage=null,this.editCategoryName.value=this.listObj.text,this.categoryDialog.show()}CategoryFocus(){setTimeout(()=>{this.CategoryNameError=!1,this.isRequired=!1},0)}addCategoryClick(){this.spinService.showSpinner(),null===this.addCategoryName.value||0===this.addCategoryName.value.length||""===this.addCategoryName.value?(this.spinService.hideSpinner(),this.isRequired=!0):this.addCategoryNameError?(this.spinService.hideSpinner(),this.addCategoryNameErrorMessage=s.e,this.isRequired=null):this.cannedResponseService.AddCategory({name:this.addCategoryName.value}).then(e=>{this.spinService.hideSpinner(),this.closeDialog(),this.isDisabledAction=!1,this.listObj.query=(new c.g).addParams("includeAdditionalIds",e.id.toString()),this.responseCategoryId=e.id,this.filterGrid(e.id.toString())}).catch(e=>{this.spinService.hideSpinner(),e.error&&e.error.errors.length>0&&setTimeout(()=>{this.CategoryNameError=!0,this.CategoryNameErrorMessage=e.error.errors[0].errorMessage},0)})}controlCreated(e){setTimeout(()=>{const t=this.CategoryForm.nativeElement;Object(s.h)(t.querySelector("#"+e))})}editCategoryClick(){this.spinService.showSpinner(),this.editCategoryNameErrorMessage=null;const e=this.editCategoryName.value;this.editCategoryName.value===this.oldCategoryValue?(this.spinService.hideSpinner(),this.noChangesValidation=!0,this.isRequired=null):0===this.editCategoryName.value.length||""===this.editCategoryName.value?(this.spinService.hideSpinner(),this.isRequired=!0,this.noChangesValidation=null):this.editCategoryNameError?(this.spinService.hideSpinner(),this.editCategoryNameErrorMessage=s.e,this.isRequired=null,this.noChangesValidation=null):this.cannedResponseService.EditCategory({id:this.listObj.value,name:this.editCategoryName.value}).then(()=>{this.spinService.hideSpinner(),this.closeDialog(),this.listObj.refresh(),this.listObj.text=e,this.oldCategoryValue=this.listObj.text}).catch(e=>{this.spinService.hideSpinner(),e.error&&e.error.errors.length>0&&setTimeout(()=>{this.CategoryNameError=!0,this.CategoryNameErrorMessage=e.error.errors[0].errorMessage},0)})}deleteClick(){this.spinService.showSpinner(),this.cannedResponseService.DeleteCategory(this.listObj.value).then(()=>{this.spinService.hideSpinner(),this.closeDialog(),this.filterGrid("1"),this.listObj.refresh(),this.listObj.value=1,this.isDisabledAction=!0}).catch(e=>{this.spinService.hideSpinner(),e.error&&e.error.errors.length>0&&this.toastService.failureToast(e.error.errors[0].errorMessage)})}deleteCategoryClick(){Object(s.b)(this.deleteClick,this.closeDialog,this,Object(a.a)("DELETECATEGORY"),Object(a.a)("DELETECATEGORYSUBALERT"),Object(a.a)("YES")+", "+Object(a.a)("DELETE"))}deleteCannedReponse(){this.spinService.showSpinner(),this.cannedResponseService.DeleteCannedResponse(this.selectedCannedResponseId).then(()=>{this.spinService.hideSpinner(),this.closeDialog(),this.toastService.successToast(Object(a.a)("CANNEDRESPONSEDELETED")),this.loadGrid(),this.listObj.refresh()}).catch(e=>{this.spinService.hideSpinner(),e.error&&e.error.errors.length>0&&this.toastService.failureToast(e.error.errors[0].errorMessage)})}addCategoryChange(){if(null!=this.addCategoryName.value){const e=Object(s.d)(this.addCategoryName.value);this.addCategoryNameError=!!e,this.addCategoryNameErrorMessage=e?s.e:null,this.isRequired=!1,this.noChangesValidation=!1}else this.isRequired=!1}gridDataBound(){Object(s.a)(this.grid)}gridActionBegin(){}editCategoryChange(){if(null!=this.editCategoryName.value){const e=Object(s.d)(this.editCategoryName.value);this.editCategoryNameError=!!e,this.editCategoryNameErrorMessage=e?s.e:null,this.isRequired=!1,this.noChangesValidation=!1}else this.isRequired=!1}editCategoryNameFocusOut(){this.isRequired=!this.editCategoryName.value}bindBtnTemplate(e,t){this.selectedItemData=t;const i=Object(h.f)(e.target);this.contextmenu.open(i.top+16,i.left-5,e.target)}itemBeforeEvent(){"Active"===this.selectedItemData.ownerStatus?(this.contextmenu.hideItems(this.moreActionsWithChangeOwner),this.contextmenu.showItems(this.moreActionsWithResponse)):(this.contextmenu.hideItems(this.moreActionsWithResponse),this.contextmenu.showItems(this.moreActionsWithChangeOwner))}searchNodes(){const e=this.searchCannesResponse.value.trim();this.grid.search(e)}}return e.\u0275fac=function(t){return new(t||e)(p.Nb(f.a),p.Nb(m.a),p.Nb(o.g),p.Nb(C.a),p.Nb(v),p.Nb(T.a))},e.\u0275cmp=p.Hb({type:e,selectors:[["app-canned-response-list"]],viewQuery:function(e,t){var i;1&e&&(p.Gc(w,!0),p.Gc(I,!0),p.Qc(P,!0),p.Qc(A,!0),p.Qc(L,!0),p.Qc(j,!0),p.Qc(M,!0),p.Qc(B,!0),p.Qc(k,!0),p.Qc(F,!0),p.Qc(q,!0)),2&e&&(p.xc(i=p.fc())&&(t.grid=i.first),p.xc(i=p.fc())&&(t.listObj=i.first),p.xc(i=p.fc())&&(t.categoryDialog=i.first),p.xc(i=p.fc())&&(t.editCategoryName=i.first),p.xc(i=p.fc())&&(t.addCategoryName=i.first),p.xc(i=p.fc())&&(t.gridEle=i.first),p.xc(i=p.fc())&&(t.CategoryForm=i.first),p.xc(i=p.fc())&&(t.cannedResponseListEle=i.first),p.xc(i=p.fc())&&(t.agentDrop=i.first),p.xc(i=p.fc())&&(t.contextmenu=i.first),p.xc(i=p.fc())&&(t.searchCannesResponse=i.first))},decls:63,vars:44,consts:[[1,"canned-response-list","hd-grid-full-height"],["responseGridElement",""],[1,"secondary","padding-10","information-content"],[1,"bd-icon","bd-icon-info","information-icon","information-icon-position"],[1,"no-padding"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","flex-horizontal"],[1,"flex-horizontal","pl-2",2,"float","left"],[1,"pr-10"],[1,"no-margin"],["width","150",3,"dataSource","fields","popupHeight","allowFiltering","filterBarPlaceholder","placeholder","change","actionComplete"],["responseCategoryList",""],[2,"padding","7px 0px 7px 7px","float","left"],[1,"cursor-pointer","bd-icon","bd-icon-add","action-square-button",3,"click"],["style","float: left;",4,"ngIf"],[1,"grid-menu-bar","align-right","flex"],[1,"grid-menu","width100","flex-horizontal"],[1,"add-button-container"],["type","button","ejs-button","",1,"e-btn","add-button","e-primary","e-outline",3,"click"],[1,"search-box"],["id","search","showClearButton","true","autocomplete","off","maxlength","150",3,"placeholder","change"],["searchCannesResponse",""],[1,"row","no-margin","pl-20","pr-20",2,"height","90%"],["cannedResponseListEle",""],[3,"dataSource","allowPaging","pageSettings","allowSorting","allowResizing","dataBound","actionBegin"],["cannedResponseListGrid",""],["field","name","minWidth","150","width","160","clipMode","EllipsisWithTooltip","textAlign","left",3,"headerText"],["template",""],["field","accessScopeId","minWidth","150","width","160","clipMode","EllipsisWithTooltip","textAlign","left",3,"headerText"],["field","owner","minWidth","150","width","160","clipMode","EllipsisWithTooltip","textAlign","left",3,"headerText"],["field","usageCount","minWidth","150","width","160","clipMode","EllipsisWithTooltip","textAlign","Center",3,"headerText"],["textAlign","Center","minWidth","100","width","100"],[3,"items","animationSettings","beforeOpen","select"],["contextmenu",""],["width","450px","isModal","true","showCloseIcon","true","closeOnEscape","true","height","Auto","cssClass","dialog-height",1,"save-dialog",3,"visible","overlayClick","close","open"],["categoryDialog",""],["header",""],["footerTemplate",""],["content",""],[2,"float","left"],[1,"pl-2"],[1,"action-square-button","cursor-pointer","bd-icon","bd-icon-edit",2,"cursor","pointer",3,"click"],[1,"action-square-button","cursor-pointer","bd-icon","bd-icon-delete",2,"cursor","pointer",3,"click"],[1,"no-wrap","ellipsis"],[1,"primary-link-color","cursor-pointer",3,"click"],[1,"grid-text-font-color"],[1,"bd-icon","bd-icon-edit","more-option-button",3,"click"],[1,"hd-icon","hd-vertical-menu","more-option-button",3,"click"],[3,"hidden"],["data-ripple","true",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat",3,"click"],["contentGroupForm",""],[1,"dialog-content"],["id","editTagContent"],[4,"ngIf"],["class","required",4,"ngIf"],[1,"form-group","pt-3"],[1,"error"],["id","editCategoryName","autocomplete","off",3,"placeholder","htmlAttributes","blur","change","focus","created"],["editCategoryName",""],["id","addCategoryName","autocomplete","off",3,"placeholder","htmlAttributes","blur","change","focus","created"],["addCategoryName",""],["id","editAgentContent"],[3,"placeholder","dataSource","fields","allowFiltering","showClearButton","htmlAttributes","query","filterBarPlaceholder","focus","blur","change"],["agentDrop",""],["itemTemplate",""],[1,"required"],[1,"error",3,"innerHTML"],[1,"flex-horizontal","p-2",3,"ngClass"],[1,"wrapper","flex-horizontal","full-width"],[1,"flex-vertical","no-wrap","ellipsis"],[1,"e-text"],[1,"font-12"]],template:function(e,t){1&e&&(p.Tb(0,"div",0,1),p.Tb(2,"div",2),p.Ob(3,"div",3),p.Lc(4),p.hc(5,"translate"),p.Sb(),p.Tb(6,"div",4),p.Tb(7,"div",5),p.Tb(8,"div",6),p.Tb(9,"div",7),p.Tb(10,"label",8),p.Lc(11),p.hc(12,"translate"),p.Sb(),p.Sb(),p.Tb(13,"div"),p.Tb(14,"ejs-dropdownlist",9,10),p.ec("change",(function(){return t.onChange()}))("actionComplete",(function(){return t.actionCompleteOnCategory()})),p.hc(16,"translate"),p.hc(17,"translate"),p.Sb(),p.Sb(),p.Tb(18,"div",11),p.Tb(19,"span",12),p.ec("click",(function(){return t.addClick()})),p.hc(20,"translate"),p.Sb(),p.Sb(),p.Jc(21,H,7,6,"div",13),p.Sb(),p.Tb(22,"div",14),p.Tb(23,"div",15),p.Tb(24,"div",16),p.Tb(25,"button",17),p.ec("click",(function(){return t.addCannedResponse()})),p.Lc(26),p.hc(27,"translate"),p.Sb(),p.Sb(),p.Tb(28,"div",18),p.Tb(29,"ejs-textbox",19,20),p.ec("change",(function(){return t.searchNodes()})),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(31,"div",21,22),p.Tb(33,"div"),p.Tb(34,"ejs-grid",23,24),p.ec("dataBound",(function(){return t.gridDataBound()}))("actionBegin",(function(){return t.gridActionBegin()})),p.Tb(36,"e-columns"),p.Tb(37,"e-column",25),p.hc(38,"translate"),p.Jc(39,G,3,1,"ng-template",null,26,p.Kc),p.Sb(),p.Tb(41,"e-column",27),p.hc(42,"translate"),p.Jc(43,J,2,1,"ng-template",null,26,p.Kc),p.Sb(),p.Ob(45,"e-column",28),p.hc(46,"translate"),p.Ob(47,"e-column",29),p.hc(48,"translate"),p.Tb(49,"e-column",30),p.Jc(50,U,3,3,"ng-template",null,26,p.Kc),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(52,"ejs-contextmenu",31,32),p.ec("beforeOpen",(function(){return t.itemBeforeEvent()}))("select",(function(e){return t.moreOptionsSelect(e)})),p.Sb(),p.Tb(54,"div"),p.Tb(55,"ejs-dialog",33,34),p.ec("overlayClick",(function(){return t.closeDialog()}))("close",(function(){return t.closeDialog()}))("open",(function(){return t.categoryDialogOpen()})),p.Jc(57,_,9,12,"ng-template",null,35,p.Kc),p.Jc(59,V,21,21,"ng-template",null,36,p.Kc),p.Jc(61,ie,50,41,"ng-template",null,37,p.Kc),p.Sb(),p.Sb()),2&e&&(p.xb(4),p.Nc(" ",p.ic(5,24,"CANNEDRESPONSEMODULEINFO"),""),p.xb(7),p.Nc("",p.ic(12,26,"CATEGORY")," "),p.xb(3),p.oc("filterBarPlaceholder",p.ic(16,28,"SEARCH")),p.oc("placeholder",p.ic(17,30,"CATEGORY")),p.nc("dataSource",t.categoriesData)("fields",t.fields)("popupHeight",t.height)("allowFiltering",!0),p.xb(5),p.yb("data-title",p.ic(20,32,"ADDCATEGORY")),p.xb(2),p.nc("ngIf",!t.isDisabledAction),p.xb(5),p.Nc(" ",p.ic(27,34,"ADDCANNEDRESPONSE")," "),p.xb(3),p.nc("placeholder",t.searchPlaceholder),p.xb(5),p.nc("dataSource",t.cannedResponseList)("allowPaging",!0)("pageSettings",t.pageSettings)("allowSorting",!0)("allowResizing",!0),p.xb(3),p.oc("headerText",p.ic(38,36,"INPLACETITLE")),p.xb(4),p.oc("headerText",p.ic(42,38,"PERMISSIONACCESSSCOPE")),p.xb(4),p.oc("headerText",p.ic(46,40,"OWNER")),p.xb(2),p.oc("headerText",p.ic(48,42,"USAGECOUNT")),p.xb(5),p.nc("items",t.moreActionItems)("animationSettings",t.animation),p.xb(3),p.nc("visible",!1))},directives:[O.e,n.n,y.c,E.i,x.k,x.e,x.b,x.d,x.a,D.f,h.b,n.l],pipes:[R.a,N.a],styles:[".response-more-option-button[_ngcontent-%COMP%]{background:none;padding:0!important}.grid-margin[_ngcontent-%COMP%]{margin-top:4px}.e-dropdown-btn[_ngcontent-%COMP%]:active{box-shadow:none!important}.cursor-style[_ngcontent-%COMP%]:hover{cursor:pointer}.canned-response-list[_ngcontent-%COMP%]   .grid-menu-bar[_ngcontent-%COMP%]{padding:10px 5px;width:auto}.canned-response-list[_ngcontent-%COMP%]   .add-button-container[_ngcontent-%COMP%]{padding:12px 12px 15px!important}.canned-response-list[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{height:38px!important;padding:0!important}"]}),e})();var oe=i("bYFv"),se=i("JNPz");const re=["addcannedresponse"],ae=["placeholderDialog"],ce=["Description"],le=["responseTitle"],de=["privateButton"],he=["publicButton"],ue=["responseCategoryList"];function be(e,t){1&e&&p.Pb(0)}function ge(e,t){if(1&e){const e=p.Ub();p.Tb(0,"button",15,16),p.ec("click",(function(){return p.Bc(e),p.gc().addCannedResponse()})),p.Lc(2),p.hc(3,"translate"),p.Sb()}2&e&&(p.nc("isPrimary",!0),p.xb(2),p.Mc(p.ic(3,2,"ADD")))}function pe(e,t){if(1&e){const e=p.Ub();p.Tb(0,"button",15,16),p.ec("click",(function(){return p.Bc(e),p.gc().updateCannedResponse()})),p.Lc(2),p.hc(3,"translate"),p.Sb()}2&e&&(p.nc("isPrimary",!0),p.xb(2),p.Mc(p.ic(3,2,"UPDATE")))}function fe(e,t){1&e&&(p.Tb(0,"div",45),p.Tb(1,"span",20),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(2),p.Nc(" ",p.ic(3,1,"FIELDREQUIRED"),""))}function me(e,t){1&e&&p.Pb(0)}function Ce(e,t){if(1&e&&(p.Tb(0,"div",45),p.Jc(1,me,1,0,"ng-container",3),p.Sb()),2&e){p.gc(2);const e=p.yc(14);p.xb(1),p.nc("ngTemplateOutlet",e)}}function Se(e,t){1&e&&(p.Tb(0,"div",46),p.Tb(1,"span",20),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(2),p.Nc(" ",p.ic(3,1,"FIELDREQUIRED"),""))}function ve(e,t){1&e&&(p.Tb(0,"div"),p.Tb(1,"span",47),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(2),p.Nc(" ",p.ic(3,1,"FIELDREQUIRED"),""))}function Te(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div"),p.Tb(1,"div",17),p.Tb(2,"div",18),p.Tb(3,"div",19),p.Tb(4,"label"),p.Lc(5),p.hc(6,"translate"),p.Tb(7,"span",20),p.Lc(8,"*"),p.Sb(),p.Sb(),p.Tb(9,"ejs-textbox",21,22),p.ec("focus",(function(){return p.Bc(e),p.gc().responseTitleFocusIn()}))("created",(function(){p.Bc(e);const t=p.yc(10);return p.gc().validationElementBind(t)}))("blur",(function(){return p.Bc(e),p.gc().responseTitleFocusOut()}))("change",(function(){return p.Bc(e),p.gc().responseTitleChange()}))("input",(function(t){return p.Bc(e),p.gc().responseTitleInput(t)})),p.hc(11,"translate"),p.Sb(),p.Jc(12,fe,4,3,"div",23),p.Jc(13,Ce,2,1,"div",23),p.Sb(),p.Sb(),p.Tb(14,"div",18),p.Tb(15,"div",24),p.Tb(16,"div"),p.Tb(17,"label",25),p.Tb(18,"span",26),p.ec("click",(function(){return p.Bc(e),p.gc().openPlaceholderDialog()})),p.Lc(19),p.hc(20,"translate"),p.Sb(),p.Sb(),p.Tb(21,"label"),p.Lc(22),p.hc(23,"translate"),p.Tb(24,"span",20),p.Lc(25,"*"),p.Sb(),p.Sb(),p.Tb(26,"app-rte",27,28),p.ec("focusIn",(function(){return p.Bc(e),p.gc().rteFocus()}))("rteCreated",(function(){return p.Bc(e),p.gc().rteCreated()}))("focusOut",(function(){return p.Bc(e),p.gc().rteFocusOut()})),p.Sb(),p.Jc(28,Se,4,3,"div",29),p.Tb(29,"div",30),p.Ob(30,"span",31),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(31,"div",32),p.Tb(32,"div",33),p.Tb(33,"label"),p.Lc(34),p.hc(35,"translate"),p.Tb(36,"span",20),p.Lc(37,"*"),p.Sb(),p.Sb(),p.Tb(38,"ejs-dropdownlist",34,35),p.ec("created",(function(){p.Bc(e);const t=p.yc(39);return p.gc().validationElementBind(t)}))("dataBound",(function(){return p.Bc(e),p.gc().categoryDataBound()}))("focus",(function(){return p.Bc(e),p.gc().categoryFocusIn()}))("blur",(function(){return p.Bc(e),p.gc().categoryFocusOut()}))("change",(function(){return p.Bc(e),p.gc().categoryChange()})),p.hc(40,"translate"),p.hc(41,"translate"),p.Sb(),p.Jc(42,ve,4,3,"div",36),p.Sb(),p.Sb(),p.Tb(43,"div",37),p.Tb(44,"div",38),p.Lc(45),p.hc(46,"translate"),p.Sb(),p.Tb(47,"div",39),p.Ob(48,"ejs-radiobutton",40,41),p.Sb(),p.Tb(50,"div",42),p.Ob(51,"ejs-radiobutton",43,44),p.Sb(),p.Sb(),p.Sb(),p.Sb()}if(2&e){const e=p.gc();p.xb(5),p.Nc(" ",p.ic(6,19,"RESPONSETITLE")," "),p.xb(4),p.oc("placeholder",p.ic(11,21,"TEXTBOXPLACEHOLDER")),p.oc("value",e.data.name),p.nc("htmlAttributes",e.inputAttribute),p.xb(3),p.nc("ngIf",e.titleRequired),p.xb(1),p.nc("ngIf",e.titleNameIsError),p.xb(6),p.Nc(" ",p.ic(20,23,"INSERTPLACEHOLDERS")," "),p.xb(3),p.Nc(" ",p.ic(23,25,"DESCRIPTION")," "),p.xb(4),p.oc("value",e.data.description),p.xb(2),p.nc("ngIf",e.rteValidation),p.xb(6),p.Nc(" ",p.ic(35,27,"CATEGORY")," "),p.xb(4),p.oc("filterBarPlaceholder",p.ic(40,29,"SEARCH")),p.oc("placeholder",p.ic(41,31,"DROPDOWNPLACEHOLDER")),p.nc("dataSource",e.categoriesData)("fields",e.fields)("popupHeight",e.height)("allowFiltering",!0),p.xb(4),p.nc("ngIf",e.CategoryRequired),p.xb(3),p.Nc(" ",p.ic(46,33,"PERMISSIONACCESSSCOPE")," ")}}function Oe(e,t){if(1&e&&(p.Ob(0,"span",48),p.hc(1,"safe")),2&e){const e=p.gc();p.nc("innerHTML",p.jc(1,1,e.commonInputValidationErrorMessage,"html"),p.Cc)}}function ye(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",49),p.Tb(1,"div",50),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Tb(4,"div",51),p.ec("click",(function(){return p.Bc(e),p.gc().closeDialog()})),p.Ob(5,"span",52),p.hc(6,"translate"),p.Sb(),p.Sb()}2&e&&(p.xb(2),p.Mc(p.ic(3,3,"PLACEHOLDERS")),p.xb(3),p.yb("data-non-elliptical",!0)("data-title",p.ic(6,5,"Close")))}function Ee(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div"),p.Tb(1,"button",53),p.ec("click",(function(){return p.Bc(e),p.gc().closeDialog()})),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()}2&e&&(p.xb(2),p.Mc(p.ic(3,1,"CANCEL")))}function xe(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",59,60),p.ec("mousedown",(function(t){return p.Bc(e),p.gc(3).placeHolderClick(t)})),p.Tb(2,"div",61),p.Tb(3,"span"),p.Lc(4),p.Sb(),p.Sb(),p.Sb()}if(2&e){const e=t.$implicit;p.yb("data-placeholder",e.placeholder),p.xb(3),p.yb("data-title",e.name),p.xb(1),p.Mc(e.name)}}function De(e,t){if(1&e&&(p.Tb(0,"div"),p.Tb(1,"div",56),p.Lc(2),p.Sb(),p.Tb(3,"div",57),p.Jc(4,xe,5,3,"div",58),p.Sb(),p.Sb()),2&e){const e=t.$implicit;p.xb(2),p.Mc(e.placeholderCategory),p.xb(2),p.nc("ngForOf",e.placeholders)}}function Re(e,t){if(1&e&&(p.Tb(0,"div",null,54),p.Jc(2,De,5,2,"div",55),p.Sb()),2&e){const e=p.gc();p.xb(2),p.nc("ngForOf",e.PlaceHolderList)}}let Ne=(()=>{class e{constructor(e,t,i,n,o,s,r){this.appRootService=e,this.seoService=t,this.cannedResponseServices=i,this.spinService=n,this.activatedRoute=o,this.router=s,this.toastService=r,this.focusedEleValue="Description",this.selection=new oe.e,this.placeholderDialogPosition={X:"right"},this.inputAttribute={maxlength:d.s,autocomplete:"anyrandomstring"},this.fields={text:"name",value:"id"},this.height="200px",this.cannedResponseServices.fetchEmailPlaceHolderList().then(e=>{this.PlaceHolderList=e.result}),this.resolveData=this.activatedRoute.data.subscribe(e=>{const t=history.state;e.data?(this.data=e.data.result,this.isAddPage=!1):(this.isAddPage=!0,this.data={accessScopeId:b.a.Private,name:"",description:"",cannedResponseCategoryId:1,cannedResponseId:0,cannedResponseCategory:"",accessScope:""}),Object(u.X)(t.data)?(this.cannedResponseCategoryId=this.data.cannedResponseCategoryId,this.accessScopeId=this.data.accessScopeId):(this.cannedResponseCategoryId=t.data.cannedResponseCategoryId,this.accessScopeId=t.data.accessScopeId),this.spinService.hideSpinner()}),this.responseHeader=this.isAddPage?Object(a.a)("ADD"):Object(a.a)("EDIT");const c=Object(a.a)("ADMIN")+" / "+Object(a.a)("CANNEDRESPONSES")+" / "+this.responseHeader+",/admin/canned-responses",l=this.responseHeader+" | "+Object(a.a)("CANNEDRESPONSES")+" | "+Object(a.a)("ADMIN");this.appRootService.setAppTitleText(c),this.appRootService.getNavigateUrl(this.router.url.replace(this.isAddPage?"/new":"/"+this.data.cannedResponseId,"")),this.seoService.setHeaderElements({title:l})}ngOnInit(){this.loadCategories(),this.commonInputValidationErrorMessage=s.e}ngAfterViewInit(){this.categoryDropdown.query=(new c.g).addParams("includeAdditionalIds",this.cannedResponseCategoryId.toString()),this.categoryDropdown.value=this.cannedResponseCategoryId,this.accessScopeId===b.a.Private?this.privateButton.checked=!0:this.publicButton.checked=!0,this.rteFocusUIRefresh()}rteFocusUIRefresh(){this.Description.rteObj.refreshUI()}categoryDataBound(){this.categoryDropdown.value=this.cannedResponseCategoryId}loadCategories(){this.categoriesData=new c.a({url:l.a.CannedResponseCategories,adaptor:new r.b})}rteRangeFocusSelection(){const e=this.selection.getRange(document);this.saveSelection=this.selection.save(e,document)}openPlaceholderDialog(){Object(s.D)(this.focusedEleValue)&&(this.focusedEleValue="Description"),"Description"===this.focusedEleValue&&Object(u.X)(this.saveSelection)&&this.rteRangeFocusSelection(),this.placeholderDialog.show()}rteFocus(){this.focusedEleValue="Description",this.rteValidation=!1,this.Description.rteObj.focusIn(),this.isRTEFocussed=!0}rteCreated(){setTimeout(()=>{this.Description.rteObj.refreshUI()},200)}responseTitleFocusIn(){this.focusedEleValue="ResponseTitle",this.titlePos=this.responseTitle.element.selectionStart}validationElementBind(e){setTimeout(()=>{if(e&&e.element){const t=e.element.parentElement;t&&Object(s.h)(t)}},100)}responseTitleFocusOut(){if(Object(u.X)(this.responseTitle.value))return void(this.titleRequired=!0);const e=this.responseTitle.value.trim();Object(u.X)(e)||0!==e.length||(this.titleRequired=!0)}responseTitleChange(){if(null!=this.responseTitle.value){this.titleRequired=!1;const e=Object(s.d)(this.responseTitle.value);this.titleNameIsError=!!e}else this.titleRequired=!1,this.titleNameIsError=!1}responseTitleInput(e){this.responseTitle.value=e.value;const t=e.value;this.titleRequired=!(!Object(u.X)(t)&&""!==t.trim());const i=Object(s.d)(t);this.titleNameIsError=!!i}closeDialog(){this.placeholderDialog.hide(),this.isDialogCancel=!0}placeHolderClick(e){const t=e.currentTarget.getAttribute("data-placeholder"),i=this.Description.rteObj;if(Object(s.D)(this.focusedEleValue)&&(this.focusedEleValue="Description"),"Description"===this.focusedEleValue||"ResponseTitle"===this.focusedEleValue){i.value||i.focusIn(),!this.isDialogCancel&&this.isRTEFocussed&&this.rteRangeFocusSelection(),0===i.formatter.getUndoRedoStack().length&&i.formatter.saveData(),this.saveSelection.restore(),i.executeCommand("insertText",t),i.formatter.saveData(),i.formatter.enableUndo(i);const e=this.selection.getRange(document);this.saveSelection=this.selection.save(e,document),this.isDialogCancel=!1,this.isRTEFocussed=!0}e.preventDefault(),e.stopPropagation()}cannedResponseCancel(){this.router.navigate(this.isAddPage?[this.router.url.replace("/new","")]:[this.router.url.replace("/"+this.data.cannedResponseId,"")],{state:{data:{value:this.cannedResponseCategoryId}}})}navigateToPreviousPage(){this.router.navigate(this.isAddPage?[this.router.url.replace("/new","")]:[this.router.url.replace("/"+this.data.cannedResponseId,"")],{state:{data:{value:this.categoryDropdown.value}}})}rteFocusOut(){const e=this.Description.rteObj;this.rteValidation=!(e.value&&e.value.length>0),Object(u.X)(this.saveSelection)&&this.rteRangeFocusSelection(),this.isRTEFocussed=!1}categoryFocusIn(){this.CategoryRequired=Object(u.X)(this.categoryDropdown.value)||0===this.categoryDropdown.value.toString().length}categoryFocusOut(){this.CategoryRequired=!1}categoryChange(){this.CategoryRequired=!(!Object(u.X)(this.categoryDropdown.value)&&0!==this.categoryDropdown.value.toString().length)}addCannedResponse(){this.responseTitleFocusOut(),this.rteFocusOut(),this.titleRequired||this.titleNameIsError||this.rteValidation||Object(u.X)(this.categoryDropdown.value)||0===this.categoryDropdown.value.toString().length?Object(u.X)(this.categoryDropdown.value)||0===this.categoryDropdown.value.toString().length?this.CategoryRequired=!0:(this.titleRequired||this.titleNameIsError)&&this.responseTitle.focusIn():(this.placeholderDialog.hide(),this.spinService.showSpinner(),this.cannedResponseServices.AddCannedResponse({name:this.responseTitle.value,accessScopeId:this.privateButton.checked?b.a.Private:b.a.Public,description:this.Description.rteObj.value,cannedResponseCategoryId:this.categoryDropdown.value}).then(e=>{e&&(this.spinService.hideSpinner(),this.toastService.successToast(Object(a.a)("CANNEDRESPONSEADDED"))),this.navigateToPreviousPage()}).catch(e=>{this.spinService.hideSpinner(),e.error&&e.error.errors.length>0&&this.toastService.failureToast(e.error.errors[0].errorMessage)}))}updateCannedResponse(){this.responseTitleFocusOut(),this.rteFocusOut(),this.titleRequired||this.titleNameIsError||this.rteValidation||Object(u.X)(this.categoryDropdown.value)||0===this.categoryDropdown.value.toString().length?Object(u.X)(this.categoryDropdown.value)||0===this.categoryDropdown.value.toString().length?this.CategoryRequired=!0:(this.titleRequired||this.titleNameIsError)&&this.responseTitle.focusIn():(this.placeholderDialog.hide(),this.spinService.showSpinner(),this.cannedResponseServices.EditCannedResponse({cannedResponseId:this.data.cannedResponseId,name:this.responseTitle.value,accessScopeId:this.privateButton.checked?b.a.Private:b.a.Public,description:this.Description.rteObj.value,cannedResponseCategoryId:this.categoryDropdown.value}).then(e=>{e&&(this.spinService.hideSpinner(),this.toastService.successToast(Object(a.a)("CANNEDRESPONSEUPDATED"))),this.navigateToPreviousPage()}).catch(e=>{this.spinService.hideSpinner(),e.error&&e.error.errors.length>0&&this.toastService.failureToast(e.error.errors[0].errorMessage)}))}}return e.\u0275fac=function(t){return new(t||e)(p.Nb(f.a),p.Nb(m.a),p.Nb(v),p.Nb(C.a),p.Nb(o.a),p.Nb(o.g),p.Nb(T.a))},e.\u0275cmp=p.Hb({type:e,selectors:[["app-canned-response-detail"]],viewQuery:function(e,t){var i;1&e&&(p.Qc(re,!0),p.Qc(ae,!0),p.Qc(ce,!0),p.Qc(le,!0),p.Qc(de,!0),p.Qc(he,!0),p.Qc(ue,!0)),2&e&&(p.xc(i=p.fc())&&(t.addCannedResponseButton=i.first),p.xc(i=p.fc())&&(t.placeholderDialog=i.first),p.xc(i=p.fc())&&(t.Description=i.first),p.xc(i=p.fc())&&(t.responseTitle=i.first),p.xc(i=p.fc())&&(t.privateButton=i.first),p.xc(i=p.fc())&&(t.publicButton=i.first),p.xc(i=p.fc())&&(t.categoryDropdown=i.first))},decls:24,vars:9,consts:[[1,"response-notification-form"],[1,"response-notification-overflow","overflow-auto-align"],[1,"pt-3","col-lg-8","pl-4"],[4,"ngTemplateOutlet"],[1,"response-action-buttons"],[1,"col-lg-8"],["type","submit","class","mr-10 e-btn","ejs-button","",3,"isPrimary","click",4,"ngIf"],["type","button","cssClass","e-outline","ejs-button","",1,"e-btn",3,"click"],["cannedAction",""],["errorInputValidation",""],["width","350px","height","100%","cssClass","canned-response-placeholder",3,"visible","closeOnEscape","position"],["placeholderDialog",""],["header",""],["footerTemplate",""],["content",""],["type","submit","ejs-button","",1,"mr-10","e-btn",3,"isPrimary","click"],["addcannedresponse",""],[1,"form-builder"],[1,"form-group","row","flex-vertical"],[1,"col","pt-2"],[1,"error"],["autocomplete","off",3,"placeholder","value","htmlAttributes","focus","created","blur","change","input"],["responseTitle",""],["class","error-msg",4,"ngIf"],[1,"col"],[1,"align-right"],[1,"link",3,"click"],[3,"value","focusIn","rteCreated","focusOut"],["Description",""],["class","error-msg pt-5",4,"ngIf"],["id","description",1,"col","custom-error","no-padding"],[1,"error","primary"],[1,"form-group","row","py-2"],[1,"col-6"],[3,"dataSource","fields","popupHeight","allowFiltering","filterBarPlaceholder","placeholder","created","dataBound","focus","blur","change"],["responseCategoryList",""],[4,"ngIf"],[1,"form-group","row","flex-horizontal","py-2"],[1,"col-3"],[1,"col-1",2,"right","50px"],["label","Private","name","access","value","Private"],["privateButton",""],[1,"col-1",2,"right","15px"],["label","Public","name","access","value","Public"],["publicButton",""],[1,"error-msg"],[1,"error-msg","pt-5"],[1,"required"],[1,"error",3,"innerHTML"],[1,"flex-horizontal"],[1,"font-16","font-500"],[1,"align-right","action-square-button","cursor-pointer",3,"click"],[1,"hd-icon","hd-close","font-16"],["data-ripple","true",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["contentholidayForm",""],[4,"ngFor","ngForOf"],[1,"font-500","font-14","pb-3","pt-2"],[1,"placeholder-list"],["class","placeholder-list-item no-wrap ellipsis",3,"mousedown",4,"ngFor","ngForOf"],[1,"placeholder-list-item","no-wrap","ellipsis",3,"mousedown"],["element",""],[1,"no-wrap","ellipsis"]],template:function(e,t){if(1&e&&(p.Tb(0,"div",0),p.Tb(1,"div",1),p.Tb(2,"div",2),p.Jc(3,be,1,0,"ng-container",3),p.Sb(),p.Sb(),p.Tb(4,"div",4),p.Tb(5,"div",5),p.Jc(6,ge,4,4,"button",6),p.Jc(7,pe,4,4,"button",6),p.Tb(8,"button",7),p.ec("click",(function(){return t.cannedResponseCancel()})),p.Lc(9),p.hc(10,"translate"),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Jc(11,Te,53,35,"ng-template",null,8,p.Kc),p.Jc(13,Oe,2,4,"ng-template",null,9,p.Kc),p.Tb(15,"div"),p.Tb(16,"ejs-dialog",10,11),p.Jc(18,ye,7,7,"ng-template",null,12,p.Kc),p.Jc(20,Ee,4,3,"ng-template",null,13,p.Kc),p.Jc(22,Re,3,1,"ng-template",null,14,p.Kc),p.Sb(),p.Sb()),2&e){const e=p.yc(12);p.xb(3),p.nc("ngTemplateOutlet",e),p.xb(3),p.nc("ngIf",t.isAddPage),p.xb(1),p.nc("ngIf",!t.isAddPage),p.xb(2),p.Mc(p.ic(10,7,"CANCEL")),p.xb(7),p.nc("visible",!1)("closeOnEscape",!0)("position",t.placeholderDialogPosition)}},directives:[n.r,n.n,y.c,h.b,E.i,se.a,O.e,y.i,n.m],pipes:[R.a,N.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.response-notification-form[_ngcontent-%COMP%]{height:100%}.response-notification-form[_ngcontent-%COMP%]   .form-builder[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-left:0}.response-action-buttons[_ngcontent-%COMP%]{background:#f7fafc;border-top:1px solid #e8eaed;bottom:0;height:50px;margin-left:0;padding:10px 10px 10px 15px;position:fixed;width:100%}.response-notification-overflow[_ngcontent-%COMP%]{height:calc(100% - 50px)!important}.canned-response-placeholder[_ngcontent-%COMP%], .response-notification-overflow[_ngcontent-%COMP%]{max-height:100%!important;top:0!important}.overflow-auto-align[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}.e-dialog[cssClass=canned-response-placeholder][_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%], .e-dialog[cssClass=response-notification-overflow][_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%]{width:100%!important}"]}),e})();var we=i("mrjb");let Ie=(()=>{class e{constructor(e,t,i){this.http=e,this.spinService=t,this.router=i}resolve(e){return this.spinService.showSpinner(),this.http.get(l.a.CannedResponses+"/"+e.params.id).toPromise().catch(e=>this.router.navigateByUrl("error",{state:e.error.errors[0].errorMessage,skipLocationChange:!0}))}}return e.\u0275fac=function(t){return new(t||e)(p.bc(S.b),p.bc(C.a),p.bc(o.g))},e.\u0275prov=p.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Pe=[{path:"",component:ne},{path:"new",component:Ne},{path:":id",component:Ne,resolve:{data:Ie}},{path:"**",component:we.a}];let Ae=(()=>{class e{}return e.\u0275mod=p.Lb({type:e}),e.\u0275inj=p.Kb({factory:function(t){return new(t||e)},imports:[[o.k.forChild(Pe)],o.k]}),e})();var Le=i("ltyr"),je=i("np3I"),Me=i("5OZa");let Be=(()=>{class e{}return e.\u0275mod=p.Lb({type:e}),e.\u0275inj=p.Kb({factory:function(t){return new(t||e)},providers:[v,Ie],imports:[[n.b,Ae,Le.a,x.j,je.AdminModule,E.h,y.b,h.a,y.j,O.d,Me.a,y.h,D.e]]}),e})()},mrjb:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("dSv1"),o=i("fXoL");let s=(()=>{class e{constructor(){this.title=Object(n.a)("PAGENOTFOUND"),this.message=Object(n.a)("PAGENOTFOUNDMESSAGE")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-page-not-found"]],decls:10,vars:2,consts:[[1,"fallback-container","flex-vertical"],[1,"row","container","align-center","mt-100"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"fallback_image"],["height","300","width","300","src","assets/images/page-not-found.png"],[1,"fallback_message"],[1,"error-font"],[1,"message-style","font-16"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Tb(2,"div",2),o.Tb(3,"div",3),o.Ob(4,"img",4),o.Sb(),o.Tb(5,"div",5),o.Tb(6,"div",6),o.Lc(7),o.Sb(),o.Tb(8,"span",7),o.Lc(9),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.xb(7),o.Mc(t.title),o.xb(2),o.Mc(t.message))},styles:[".fallback-container[_ngcontent-%COMP%]{height:100%;text-align:center}.fallback-container[_ngcontent-%COMP%]   .message-style[_ngcontent-%COMP%]{font-weight:400;line-height:24px;padding-top:6px}"]}),e})()}}]);