(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"83/i":function(e){e.exports=JSON.parse('{"rules":[{"field":"firstResponseEscalation","label":"First response escalation","operator":"0","operatorValue":"0","reminderTime":"30","timeOptionId":2,"sortOrder":1},{"field":"responseEscalation","label":"Response escalation","operator":"0","operatorValue":"0","reminderTime":"30","timeOptionId":2,"sortOrder":2},{"field":"resolutionEscalation","label":"Resolution escalation","operator":"0","operatorValue":"0","reminderTime":"30","timeOptionId":2,"sortOrder":3}]}')},EiDu:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("fXoL"),s=i("jhN1");let o=(()=>{class e{constructor(e){this.sanitizer=e}transform(e,t){switch(t){case"html":return this.sanitizer.bypassSecurityTrustHtml(e);case"style":return this.sanitizer.bypassSecurityTrustStyle(e);case"script":return this.sanitizer.bypassSecurityTrustScript(e);case"url":return this.sanitizer.bypassSecurityTrustUrl(e);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(e);default:throw new Error("Invalid safe type specified: "+t)}}}return e.\u0275fac=function(t){return new(t||e)(n.Nb(s.c))},e.\u0275pipe=n.Mb({name:"safe",type:e,pure:!0}),e})()},asGy:function(e){e.exports=JSON.parse('[{"businessHourId":null,"field":"priority","firstResponseTime":1,"firstResponseTimeOptionId":"2","isEscalationEnabled":true,"isReminderEnabled":true,"resolutionTime":1,"resolutionTimeOptionId":"3","responseTime":1,"responseTimeOptionId":"2","value":"1"},{"businessHourId":null,"field":"priority","firstResponseTime":1,"firstResponseTimeOptionId":"2","isEscalationEnabled":true,"isReminderEnabled":true,"resolutionTime":1,"resolutionTimeOptionId":"3","responseTime":1,"responseTimeOptionId":"2","value":"2"},{"businessHourId":null,"field":"priority","firstResponseTime":1,"firstResponseTimeOptionId":"2","isEscalationEnabled":true,"isReminderEnabled":true,"resolutionTime":1,"resolutionTimeOptionId":"3","responseTime":1,"responseTimeOptionId":"2","value":"3"},{"businessHourId":null,"field":"priority","firstResponseTime":1,"firstResponseTimeOptionId":"2","isEscalationEnabled":true,"isReminderEnabled":true,"resolutionTime":1,"resolutionTimeOptionId":"3","responseTime":1,"responseTimeOptionId":"2","value":"4"}]')},dQZi:function(e){e.exports=JSON.parse('{"rules":[{"field":"firstResponseReminder","label":"First response reminder","operator":"0","operatorValue":"0","reminderTime":"30","timeOptionId":2,"sortOrder":1},{"field":"responseReminder","label":"Response reminder","operator":"0","operatorValue":"0","reminderTime":"30","timeOptionId":2,"sortOrder":2},{"field":"resolutionReminder","label":"Resolution reminder","operator":"0","operatorValue":"0","reminderTime":"30","timeOptionId":2,"sortOrder":3}]}')},nVeP:function(e,t,i){"use strict";i.r(t),i.d(t,"SLAPolicyModule",(function(){return ht}));var n=i("ofXK"),s=i("ltyr"),o=i("GJ+o"),r=i("np3I"),a=i("QYJQ"),l=i("jcQU"),c=i("SRvG"),u=i("5OZa"),d=i("tyNb"),h=i("mrjb"),p=i("H552"),b=i("58Y9"),m=i("M9dC"),g=i("dSv1"),f=i("A4Lh"),y=i("Pk9d"),v=i("1gpv");const O={SLAPolicyList:v.f+"sla",SLAPolicyDetail:v.f+"sla",AddSLA:v.f+"sla",EditSLA:v.f+"sla",DeleteSLA:v.f+"sla",TicketConditionFields:v.f+"sla",ActivateSLA:v.f+"sla",DeactivateSLA:v.f+"sla",ChangePosition:v.f+"sla"};var T=i("5Lwd"),S=i("4SUy"),C=i("fXoL"),x=i("1kef"),E=i("JCZ/"),A=i("X8pc"),I=i("IaKf"),D=i("tk/3");let P=(()=>{class e{constructor(e,t,i){this.http=e,this.spinService=t,this.toastService=i,this.httpOptions={headers:new D.e({"Content-Type":"application/json"})}}deleteSLAPolicy(e){return this.http.delete(O.DeleteSLA+"/"+e).toPromise()}toggleSLA(e,t){return this.http.patch(e?O.ActivateSLA+"/"+t+"/activate":O.DeactivateSLA+"/"+t+"/deactivate",this.httpOptions).toPromise()}addBSLA(e){return this.http.post(O.AddSLA,e).toPromise().catch(e=>{400===e.status&&(this.spinService.hideSpinner(),Object(S.X)(e.error.errors)?this.toastService.failureToast(e.error.message):this.toastService.failureToast(e.error.errors[0].errorMessage))})}editBSLA(e,t){return this.http.put(O.EditSLA+"/"+t,e).toPromise().catch(e=>{400===e.status&&(this.spinService.hideSpinner(),Object(S.X)(e.error.errors)?this.toastService.failureToast(e.error.message):this.toastService.failureToast(e.error.errors[0].errorMessage))})}changePosition(e,t){return this.http.patch(O.ChangePosition+"/"+e+"/positionchange",t).toPromise()}}return e.\u0275fac=function(t){return new(t||e)(C.bc(D.b),C.bc(A.a),C.bc(I.a))},e.\u0275prov=C.Jb({token:e,factory:e.\u0275fac}),e})();var L=i("hXFv"),j=i("N/Vq"),R=i("KDci"),M=i("64zv"),w=i("AjNn");const _=["slaPolicyListGrid"],N=["enableDisableSLA"],k=["slaActivityTab"],F=["slaListEle"],B=["contextmenu"],Q=["slaListPage"],q=["searchSla"];function H(e,t){if(1&e){const e=C.Ub();C.Tb(0,"div",31),C.Tb(1,"span",32),C.ec("click",(function(i){C.Bc(e);const n=t.$implicit;return C.gc().rowClick(i,n.id)})),C.Lc(2),C.Sb(),C.Sb()}if(2&e){const e=t.$implicit;C.xb(2),C.Nc(" ",e.name,"")}}function J(e,t){if(1&e&&(C.Tb(0,"span",33),C.Ob(1,"app-date-time",34),C.Sb()),2&e){const e=t.$implicit,i=C.gc();C.xb(1),C.nc("date",e.lastUpdatedOn)("format",i.format)("timezone",i.timeZone)}}function G(e,t){if(1&e){const e=C.Ub();C.Tb(0,"span",35),C.ec("click",(function(){C.Bc(e);const i=t.$implicit,n=C.gc();return n.moreOptionsSelect(n.editItem,i)})),C.hc(1,"translate"),C.Sb(),C.Tb(2,"span",36),C.ec("click",(function(i){C.Bc(e);const n=t.$implicit;return C.gc().bindBtnTemplate(i,n)})),C.Sb()}2&e&&C.yb("data-title",C.ic(1,1,"EDIT"))}let V=(()=>{class e{constructor(e,t,i,n,s,o){this.appRootService=e,this.router=t,this.seoService=i,this.spinService=n,this.toastService=s,this.slaService=o,this.moreActionItems=[{id:"1",text:"Activate"},{id:"2",text:"Deactivate"},{id:"3",text:"Delete"}],this.moreActionItemswithDelete=["Delete"],this.moreActionWithActivate=["Activate","Delete"],this.moreActionWithDeactivate=["Deactivate","Delete"],this.editItem={item:{id:T.z.Edit}},this.pagerSize=f.E,this.dragAndDrop=!0,this.animation={effect:"none"},this.tabAnimationSettings={next:{effect:"None"},previous:{effect:"None"}},this.stillFetching=!0,this.isActive=!0,this.slaListUrl=O.SLAPolicyList,this.perPage=f.E.toString(),this.currentpage="1",this.preventFields=[{isDefault:!0}],this.tabHeader=[{text:Object(g.a)("ACTIVE")},{text:Object(g.a)("INACTIVE")}],this.timeZone=f.P.timeZoneOffset,this.format=`${f.e.dateFormat} ${f.e.timeFormat}`,this.appRootService.setAppTitleText("SLA"),this.stillFetching=!0,this.setSEOHeader();const r=Object(g.a)("ADMIN")+" / "+Object(g.a)("SLA"),a=Object(g.a)("SLA")+" | "+Object(g.a)("ADMIN");this.appRootService.setAppTitleText(r),this.seoService.setHeaderElements({title:a})}ngOnInit(){let e=O.SLAPolicyList;e=Object(b.i)(e,"Page",this.currentpage),e=Object(b.i)(e,"PerPage",this.perPage),this.slaPolicyList=new p.a({url:e,adaptor:new m.b}),this.href=this.router.url,this.tabSelected=T.t.Active.toLowerCase()}ngAfterViewInit(){this.slaPolicyListGrid.query=(new p.g).addParams("isenabled","true"),this.slaListEle.nativeElement.addEventListener("keydown",e=>{Object(b.l)(e,this.slaListEle.nativeElement)}),this.slaListPageEle.nativeElement.addEventListener("scroll",()=>{this.contextmenu.close()}),Object(f.V)(!1)}setSEOHeader(){this.seoService.setHeaderElements({title:"SLA"})}slaPolicyListDataBound(){const e=this.slaPolicyListGrid.element.querySelector(".e-gridcontent .e-content .e-emptyrow td");e&&e.setAttribute("colspan","2"),this.stillFetching=!1,setTimeout(()=>{this.slaPolicyListGrid.widthService.setWidthToColumns(),Object(b.a)(this.slaPolicyListGrid);const e=this.slaPolicyListGrid.getCurrentViewRecords(),t=[];e.forEach((e,i)=>{this.preventFields.forEach(n=>{n.isDefault==e.isDefault&&t.push(this.slaPolicyListGrid.getRowByIndex(i))})});for(let i=0;i<t.length;i++){const e=document.createElement("td");e.classList.add("intentcell"),t[i].querySelector(".e-rowdragdrop").remove(),t[i].prepend(e),i>0&&(t[i].querySelector(".intentcell").style.borderTop="1px solid #e0e0e0")}})}slaPolicyListActionBegin(e){"refresh"===e.requestType&&this.slaPolicyListGrid.searchModule.refreshSearch&&(this.slaPolicyListGrid.searchModule.refreshSearch=!1)}addSlaClick(){this.router.navigateByUrl(this.href+"/add")}rowClick(e,t){e.stopPropagation(),this.router.navigateByUrl(this.href+"/"+t)}cancelDialog(){this.deleteDialog.hide()}loadGrid(e){this.slaListUrl=O.SLAPolicyList,this.slaListUrl=Object(b.i)(this.slaListUrl,"Page",this.currentpage),this.slaListUrl=Object(b.i)(this.slaListUrl,"PerPage",this.perPage);const t=Object(b.x)(this.slaListUrl,"isEnabled",e);this.slaPolicyList=new p.a({url:t,adaptor:new m.b})}updateDeleteSLAPolicy(){this.spinService.showSpinner(),this.slaService.deleteSLAPolicy(this.id).then(e=>{e&&(this.spinService.hideSpinner(),this.deleteDialog.hide(),this.loadGrid(this.isActive?"true":"false"),this.toastService.successToast(e.message))}).catch(e=>{this.spinService.hideSpinner(),e.error&&e.error.errors.length>0&&400===e.error.statusCode&&this.toastService.failureToast(e.error.errors[0].errorMessage)})}getCurrentSwitchObj(e,t){return this[e]._results.filter(e=>e.element.dataset.id===t+"")[0]}slaTabSelecting(){this.stillFetching=!0,"1"===this.slaActivityTab.selectingID?(this.tabSelected=T.t.Inactive.toLowerCase(),this.slaPolicyListGrid.setProperties({query:(new p.g).addParams("isenabled","false")},!0),this.dragAndDrop=!1,this.stillFetching=!0):(this.tabSelected=T.t.Active.toLowerCase(),this.slaPolicyListGrid.setProperties({query:(new p.g).addParams("isenabled","true")},!0),this.dragAndDrop=!0,this.stillFetching=!0)}slaRowDrag(e){const t=this.slaPolicyListGrid.getRowInfo(e.target).rowData;t&&this.preventFields.forEach(i=>{i.isDefault==t.isDefault&&(e.cancel=!0)})}slaRowDrop(e){const t=this.slaPolicyListGrid.getRowInfo(this.slaPolicyListGrid.getRowByIndex(e.dropIndex)).rowData;t&&this.preventFields.forEach(i=>{i.isDefault==t.isDefault&&(e.cancel=!0)});const i=e.data[0].id;if(e.cancel=!0,e.fromIndex===e.dropIndex||Object(S.X)(e.dropIndex)||isNaN(e.dropIndex))return;const n={toPosition:++e.dropIndex,changePositionMode:T.q.ToPosition};this.spinService.showSpinner(),this.slaService.changePosition(i,n).then(e=>{e&&(this.spinService.hideSpinner(),this.loadGrid(this.isEnabled?"false":"true"),this.toastService.successToast(Object(g.a)("SLAPOSITIONCHANGED")))}).catch(e=>{const t=Object(b.q)(e.error);400===e.status&&(this.spinService.hideSpinner(),this.toastService.failureToast(t))})}activateAndDeactivateAction(e){this.isEnabled=e,this.spinService.showSpinner(),this.slaService.toggleSLA(e,this.selectedItemData.id).then(e=>{if(e){this.spinService.hideSpinner(),this.loadGrid(this.isEnabled?"false":"true");const e=this.isEnabled?Object(g.a)("SLAACTIVATE"):Object(g.a)("SLADEACTIVATE");this.toastService.successToast(e)}}).catch(e=>{const t=Object(b.q)(e.error);400===e.status&&(this.spinService.hideSpinner(),this.toastService.failureToast(t))})}moreOptionsSelect(e,t){e.item.id===T.z.Edit?(this.id=+t.id,this.router.navigateByUrl(this.href+"/"+this.id)):e.item.id===T.z.Delete?(this.id=+this.selectedItemData.id,Object(b.b)(this.updateDeleteSLAPolicy,this.cancelDialog,this,Object(g.a)("DELETE")+" SLA",Object(g.a)("DELETEPOLICYALERT"))):e.item.id===T.z.Activate?this.activateAndDeactivateAction(!0):e.item.id===T.z.Deactivate&&this.activateAndDeactivateAction(!1)}bindBtnTemplate(e,t){this.selectedItemData=t;const i=Object(y.f)(e.target);this.contextmenu.open(i.top+16,i.left-5,e.target)}itemBeforeEvent(){this.selectedItemData.isEnable?(this.contextmenu.hideItems(this.moreActionWithActivate),this.contextmenu.showItems(this.moreActionWithDeactivate)):(this.contextmenu.hideItems(this.moreActionWithDeactivate),this.contextmenu.showItems(this.moreActionWithActivate)),this.selectedItemData.isDefault&&this.contextmenu.hideItems(this.moreActionItemswithDelete)}searchNodes(){const e=this.searchSla.value.trim();this.slaPolicyListGrid.search(e)}}return e.\u0275fac=function(t){return new(t||e)(C.Nb(x.a),C.Nb(d.g),C.Nb(E.a),C.Nb(A.a),C.Nb(I.a),C.Nb(P))},e.\u0275cmp=C.Hb({type:e,selectors:[["app-sla-policy-list"]],viewQuery:function(e,t){var i;1&e&&(C.Qc(_,!0),C.Qc(N,!0),C.Qc(k,!0),C.Qc(F,!0),C.Qc(B,!0),C.Qc(Q,!0),C.Qc(q,!0),C.Qc(c.k,!0)),2&e&&(C.xc(i=C.fc())&&(t.slaPolicyListGrid=i.first),C.xc(i=C.fc())&&(t.enableDisableSLA=i.first),C.xc(i=C.fc())&&(t.slaActivityTab=i.first),C.xc(i=C.fc())&&(t.slaListEle=i.first),C.xc(i=C.fc())&&(t.contextmenu=i.first),C.xc(i=C.fc())&&(t.slaListPageEle=i.first),C.xc(i=C.fc())&&(t.searchSla=i.first),C.xc(i=C.fc())&&(t.switch=i))},decls:47,vars:29,consts:[[1,"sla-policy-container","hd-grid-full-height"],["slaListPage",""],[1,"height-100"],[1,"sla-policy-list"],["slaListEle",""],[1,"secondary","padding-10","information-content"],[1,"bd-icon","bd-icon-info","information-icon","information-icon-position"],[1,"pl-3"],[1,"row","no-margin","float-right",2,"border-bottom","1px solid #e2e8f0","padding-bottom","7px"],[1,"grid-menu",3,"hidden"],[1,"search-box",2,"padding","0 12px"],["id","search","showClearButton","true","autocomplete","off","maxlength","150",3,"placeholder","change"],["searchSla",""],[1,"float-right"],["type","button","ejs-button","",1,"e-btn","add-button","e-outline","e-primary",3,"click"],["overflowMode","Popup","width","71%",3,"animation","selecting"],["slaActivityTab",""],[3,"header"],[1,"sla-policy-list-container","pt-3"],["allowResizing","true","allowSorting","true","height","100%",3,"dataSource","hidden","allowRowDragAndDrop","dataBound","rowDrop","rowDrag","actionBegin"],["slaPolicyListGrid",""],["field","name","minWidth","200","width","250","clipMode","EllipsisWithTooltip",3,"headerText"],["template",""],["field","lastModifiedBy","minWidth","100","width","150","clipMode","EllipsisWithTooltip",3,"headerText"],["field","lastUpdatedOn","minWidth","100","width","120",3,"headerText"],["minWidth","100","width","100","textAlign","Center"],[1,"align-center","height-100",3,"hidden"],[1,"ticket-fetch-loader"],[3,"stepCount"],[3,"items","animationSettings","beforeOpen","select"],["contextmenu",""],[1,"no-wrap","ellipsis"],[1,"primary-link-color","cursor-pointer",3,"click"],[1,"cursor-pointer","grid-text-font-color"],[3,"date","format","timezone"],[1,"more-option-button","bd-icon","bd-icon-edit",3,"click"],[1,"hd-icon","hd-vertical-menu","more-option-button",3,"click"]],template:function(e,t){1&e&&(C.Tb(0,"div",0,1),C.Tb(2,"div",2),C.Tb(3,"div",3,4),C.Tb(5,"div",5),C.Ob(6,"div",6),C.Lc(7),C.hc(8,"translate"),C.Sb(),C.Tb(9,"div",7),C.Tb(10,"div",8),C.Tb(11,"div",9),C.Tb(12,"div",10),C.Tb(13,"ejs-textbox",11,12),C.ec("change",(function(){return t.searchNodes()})),C.hc(15,"translate"),C.Sb(),C.Sb(),C.Tb(16,"div",13),C.Tb(17,"button",14),C.ec("click",(function(){return t.addSlaClick()})),C.Lc(18),C.hc(19,"translate"),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Tb(20,"ejs-tab",15,16),C.ec("selecting",(function(){return t.slaTabSelecting()})),C.Tb(22,"e-tabitems"),C.Ob(23,"e-tabitem",17),C.Ob(24,"e-tabitem",17),C.Sb(),C.Sb(),C.Sb(),C.Tb(25,"div",18),C.Tb(26,"ejs-grid",19,20),C.ec("dataBound",(function(){return t.slaPolicyListDataBound()}))("rowDrop",(function(e){return t.slaRowDrop(e)}))("rowDrag",(function(e){return t.slaRowDrag(e)}))("actionBegin",(function(e){return t.slaPolicyListActionBegin(e)})),C.Tb(28,"e-columns"),C.Tb(29,"e-column",21),C.hc(30,"translate"),C.Jc(31,H,3,1,"ng-template",null,22,C.Kc),C.Sb(),C.Ob(33,"e-column",23),C.hc(34,"translate"),C.Tb(35,"e-column",24),C.hc(36,"translate"),C.Jc(37,J,2,3,"ng-template",null,22,C.Kc),C.Sb(),C.Tb(39,"e-column",25),C.Jc(40,G,3,3,"ng-template",null,22,C.Kc),C.Sb(),C.Sb(),C.Sb(),C.Tb(42,"div",26),C.Tb(43,"div",27),C.Ob(44,"lib-shimmer",28),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Tb(45,"ejs-contextmenu",29,30),C.ec("beforeOpen",(function(){return t.itemBeforeEvent()}))("select",(function(e){return t.moreOptionsSelect(e)})),C.Sb()),2&e&&(C.xb(7),C.Nc(" ",C.ic(8,17,"SLAMODULECONTENT")," "),C.xb(4),C.nc("hidden",t.stillFetching),C.xb(2),C.oc("placeholder",C.ic(15,19,"SEARCH")),C.xb(5),C.Nc(" ",C.ic(19,21,"ADDSLA")," "),C.xb(2),C.nc("animation",t.tabAnimationSettings),C.xb(3),C.nc("header",t.tabHeader[0]),C.xb(1),C.nc("header",t.tabHeader[1]),C.xb(2),C.nc("dataSource",t.slaPolicyList)("hidden",t.stillFetching)("allowRowDragAndDrop",t.dragAndDrop),C.xb(3),C.oc("headerText",C.ic(30,23,"SLANAME")),C.xb(4),C.oc("headerText",C.ic(34,25,"LASTMODIFIEDBY")),C.xb(2),C.oc("headerText",C.ic(36,27,"LASTMODIFIED")),C.xb(7),C.nc("hidden",!t.stillFetching),C.xb(2),C.nc("stepCount",5),C.xb(1),C.nc("items",t.moreActionItems)("animationSettings",t.animation))},directives:[a.i,c.c,L.m,L.o,L.n,o.k,o.e,o.b,j.b,o.d,o.a,j.a,R.a,L.f,M.a],pipes:[w.a],styles:[".sla-policy-container[_ngcontent-%COMP%]{overflow:hidden}.sla-policy-container[_ngcontent-%COMP%]   .sla-policy-list[_ngcontent-%COMP%]{height:inherit}.sla-policy-container[_ngcontent-%COMP%]   .sla-policy-list[_ngcontent-%COMP%]   .title-style[_ngcontent-%COMP%]{font-weight:500}.sla-policy-container[_ngcontent-%COMP%]   .sla-policy-list[_ngcontent-%COMP%]   .cursor-style[_ngcontent-%COMP%]:hover{cursor:pointer}.sla-policy-container[_ngcontent-%COMP%]   .sla-policy-list[_ngcontent-%COMP%]   .e-dropdown-btn[_ngcontent-%COMP%]:active{box-shadow:none!important}.sla-policy-container[_ngcontent-%COMP%]   .sla-policy-list[_ngcontent-%COMP%]   .padding-bottom-5px[_ngcontent-%COMP%]{padding-bottom:5px!important}.sla-policy-container[_ngcontent-%COMP%]   .sla-policy-list[_ngcontent-%COMP%]   .switch-class[_ngcontent-%COMP%]{margin-top:10px}.sla-policy-container[_ngcontent-%COMP%]   .sla-policy-list[_ngcontent-%COMP%]   .sla-policy-list-container[_ngcontent-%COMP%]{height:calc(100% - 160px);padding:0 16px}.sla-policy-container[_ngcontent-%COMP%]   .sla-policy-list[_ngcontent-%COMP%]   .e-gridcontent[_ngcontent-%COMP%]{height:calc(100% - 12px)!important}.sla-policy-container[_ngcontent-%COMP%]   .sla-policy-list[_ngcontent-%COMP%]   .e-gridcontent[_ngcontent-%COMP%]   .e-content[_ngcontent-%COMP%]{height:inherit!important;overflow-y:auto!important}.sla-policy-container[_ngcontent-%COMP%]   .height-100[_ngcontent-%COMP%]{height:100%}.sla-policy-container[_ngcontent-%COMP%]   .padding-10[_ngcontent-%COMP%]{padding:10px}"]}),e})();var X=i("zZ4g"),U=i.t(X,2),z=i("asGy"),$=i.t(z,2),K=i("dQZi"),W=i.t(K,2),Z=i("83/i"),Y=i.t(Z,2),ee=i("ScLb"),te=i("Vtjc"),ie=i("1UK9"),ne=function(e){return e.FirstResponseTime="firstResponseTime",e.ResponseTime="responseTime",e.ResolutionTime="resolutionTime",e.ReminderEnabled="reminderEnabled",e.EscalationEnabled="escalationEnabled",e}({}),se=function(e){return e.FirstResponseReminder="firstResponseReminder",e.ResponseReminder="responseReminder",e.ResolutionReminder="resolutionReminder",e.FirstResponseEscalation="firstResponseEscalation",e.ResponseEscalation="responseEscalation",e.ResolutionEscalation="resolutionEscalation",e}({}),oe=function(e){return e.ResolutionEscalation="resolutionEscalation",e.LabelForResolutionEscalation="Resolution escalation",e.OperatorLastItem="11",e[e.MaxEscalationLevel=3]="MaxEscalationLevel",e.OperatorFirstItem="0",e}({}),re=function(e){return e.Minutes="2",e.Hours="3",e.Days="4",e}({}),ae=function(e){return e[e.FirstResponseReminder=1]="FirstResponseReminder",e[e.ResponseReminder=2]="ResponseReminder",e[e.ResolutionReminder=3]="ResolutionReminder",e}({}),le=function(e){return e[e.FirstResponseEscalation=1]="FirstResponseEscalation",e[e.ResponseEscalation=2]="ResponseEscalation",e[e.ResolutionEscalation=3]="ResolutionEscalation",e}({}),ce=function(e){return e.TimeToFirstReply="first-response-time",e.TimeToNextReply="every-response-time",e.ResolutionTime="resolution-time",e}({}),ue=i("3LJS");const de=["resolutionEscalationLevels"],he=["moreEscalationLevels"],pe=["escalationLevel"];function be(e,t){1&e&&C.Pb(0)}function me(e,t){if(1&e){const e=C.Ub();C.Tb(0,"div"),C.Tb(1,"button",6),C.ec("click",(function(){return C.Bc(e),C.gc().moreEscalationLevel()})),C.Lc(2),C.hc(3,"translate"),C.hc(4,"translate"),C.Sb(),C.Sb()}if(2&e){const e=C.gc();C.xb(2),C.Pc(" ",C.ic(3,3,"ADDLEVEL")," ",e.loadMoreEscalationCount," ",C.ic(4,5,"ESCALATIONLEVEL"),"")}}function ge(e,t){if(1&e){const e=C.Ub();C.Tb(0,"div",23),C.Tb(1,"span",24),C.ec("click",(function(){return C.Bc(e),C.gc(2).deleteNode()})),C.Sb(),C.Sb()}}function fe(e,t){if(1&e){const e=C.Ub();C.Tb(0,"div",7),C.Tb(1,"div",8),C.Tb(2,"span",9),C.Lc(3),C.hc(4,"translate"),C.Sb(),C.Sb(),C.Tb(5,"div",10),C.Tb(6,"div",11),C.Tb(7,"ejs-dropdownlist",12,13),C.ec("change",(function(t){return C.Bc(e),C.gc().escalationOperatorChange(t)}))("created",(function(){return C.Bc(e),C.gc().escalationOperatorDropCreated()})),C.hc(9,"translate"),C.Sb(),C.Sb(),C.Tb(10,"div",14),C.Tb(11,"div",15),C.Tb(12,"ejs-multiselect",16),C.ec("dataBound",(function(i){C.Bc(e);const n=t.$implicit;return C.gc().groupDataBound("escaltion_group_"+n.index,i)}))("change",(function(t){return C.Bc(e),C.gc().groupChange(t)})),C.hc(13,"translate"),C.hc(14,"translate"),C.Sb(),C.Sb(),C.Sb(),C.Tb(15,"div",14),C.Tb(16,"div",17),C.Tb(17,"ejs-multiselect",18,19),C.ec("dataBound",(function(i){C.Bc(e);const n=t.$implicit;return C.gc().assigneeDataBound("escaltion_assignee_"+n.index,i)}))("change",(function(t){return C.Bc(e),C.gc().assigneeChange(t)})),C.hc(19,"translate"),C.hc(20,"translate"),C.Sb(),C.Sb(),C.Sb(),C.Tb(21,"div",20),C.hc(22,"translate"),C.Jc(23,ge,2,0,"div",21),C.Sb(),C.Sb(),C.Tb(24,"div",22),C.Lc(25),C.hc(26,"translate"),C.Sb(),C.Sb()}if(2&e){const e=t.$implicit,i=C.gc();C.xb(3),C.Mc(C.ic(4,25,"SENDLEVELESCALATION")),C.xb(4),C.oc("placeholder",C.ic(9,27,"DURATION")),C.nc("dataSource",i.operatorDataConfig)("fields",i.operatorFields),C.xb(5),C.oc("placeholder",C.ic(13,29,"GROUP")),C.pc("id","escaltion_group_",e.index,""),C.oc("filterBarPlaceholder",C.ic(14,31,"SEARCH")),C.nc("dataSource",i.assigneeGroupDataConfig)("fields",i.assigneeGroupFieldConfig)("allowFiltering",!0)("showClearButton",!0),C.yb("data-index",e.index),C.xb(5),C.oc("placeholder",C.ic(19,33,"AGENT")),C.pc("id","escaltion_assignee_",e.index,""),C.oc("filterBarPlaceholder",C.ic(20,35,"SEARCH")),C.nc("dataSource",i.assigneeDataConfig)("fields",i.assigneeFields)("allowFiltering",!0)("showClearButton",!0)("itemTemplate",i.assigneeOrGroupItemTemplate),C.yb("data-index",e.index),C.xb(4),C.yb("data-non-elliptical",!0)("data-title",C.ic(22,37,"DELETE")),C.xb(2),C.nc("ngIf",i.loadMoreEscalationCount>2),C.xb(2),C.Mc(C.ic(26,39,"VALIDATIONMESSAGEFORSETASSIGNEE"))}}const ye=function(e){return{$implicit:e}};let ve=(()=>{class e{constructor(e,t){this.viewContainerRef=e,this.appRootService=t,this.operatorDataConfig=[{key:"Immediately",value:"0",typeId:2,text:"0"},{key:"After 30 minutes",value:"1",typeId:2,text:"30"},{key:"After 1 hour",value:"2",typeId:3,text:"1"},{key:"After 2 hours",value:"3",typeId:3,text:"2"},{key:"After 4 hours",value:"4",typeId:3,text:"4"},{key:"After 8 hours",value:"5",typeId:3,text:"8"},{key:"After 12 hours",value:"6",typeId:3,text:"12"},{key:"After 1 day",value:"7",typeId:4,text:"1"},{key:"After 2 days",value:"8",typeId:4,text:"2"},{key:"After 3 days",value:"9",typeId:4,text:"3"},{key:"After 5 days",value:"10",typeId:4,text:"5"},{key:"After 7 days",value:"11",typeId:4,text:"7"}],this.operatorFields={text:"key",value:"value"},this.index=0,this.assigneeFields={text:"displayName",value:"userId"},this.assigneeGroupFieldConfig={text:"groupName",value:"groupID"},this.isMoreEscalation=!0,this.escalationCount=1,this.loadMoreEscalationCount=2,this.operatorDataFields=[],this.ruleDataFields=[],this.assigneeOrGroupItemTemplate=Object(b.B)(),this.resolutionEscalationErrorEleCount=0,this.escalationIndex={index:0},this.isNewSLAPolicy=!0}ngOnInit(){this.assigneeDataConfig=new p.a({url:ee.a.Assignee,adaptor:new m.b}),this.assigneeGroupDataConfig=new p.a({url:ee.a.Group,adaptor:new m.b})}moreEscalationLevel(){++this.index;const e=this.compileTemplate(this.resolutionEscalationLevels,{index:this.index}),t=this.moreEscalationLevels.nativeElement;e.length>0&&(++this.escalationCount,++this.loadMoreEscalationCount,e.forEach(e=>{t.appendChild(e)})),this.resetEscalationLevelValues(),this.escalationCount>2&&(this.isMoreEscalation=!1)}compileTemplate(e,t){const i=this.viewContainerRef.createEmbeddedView(e,{$implicit:t});return i.markForCheck(),i.rootNodes}deleteNode(){const e=Object(S.C)(event.target,".more-escalation-levels-container");e&&Object(S.I)(e),this.resetEscalationLevelValues(),this.setIndexAttribute(),--this.loadMoreEscalationCount,--this.escalationCount,this.isMoreEscalation=!0,this.appRootService.closeAppToolTip()}assigneeFocusOut(){let e;const t=event.target.parentElement.querySelector(".escalation-assignee-drop");Object(S.X)(t)||(e=t.ej2_instances[0]);const i=event.target.parentElement.querySelector(".validation-error-msg");Object(S.X)(e)||this.assigneeBlur(e,i)}escalationOperatorChange(e){const t=e.value,i=this.escalationLevel.nativeElement.querySelectorAll(".more-escalation-levels-container");if(!Object(S.X)(t)){if(t===oe.OperatorLastItem)this.isMoreEscalation=!1;else if(this.escalationCount<oe.MaxEscalationLevel){const t=e.element.getAttribute("data-index");(i.length<2&&t===oe.OperatorFirstItem||i.length>1&&t!==oe.OperatorFirstItem)&&(this.isMoreEscalation=!0)}if(i.length>1&&t===oe.OperatorLastItem){const t=e.element.getAttribute("data-index");this.isMoreEscalation=!1,i.length>1&&this.detachCompiledTemplate(t)}else if(i.length>1&&t!==oe.OperatorLastItem){const t=e.element.getAttribute("data-index");this.changeoperatorDropData(),this.escalationCount<oe.MaxEscalationLevel&&t!==oe.OperatorFirstItem&&(this.isMoreEscalation=!0)}}}changeoperatorDropData(){let e=0;const t=this.escalationLevel.nativeElement.querySelectorAll(".escalation-operator-drop");t.length<2&&(t[0].ej2_instances[0].dataSource=this.operatorDataConfig),t.forEach(i=>{if(e>0){const n=t[e-1].ej2_instances[0].value,s=parseInt(n,10);if(s>=parseInt(i.ej2_instances[0].value,10)){let e=i.getAttribute("data-index");e!==oe.OperatorFirstItem&&(e=parseInt(e,10)-1),this.detachCompiledTemplate(e)}this.operatorDropData=this.operatorDataConfig.filter(e=>e.value>s),i.ej2_instances[0].dataSource=this.operatorDropData,n!==oe.OperatorLastItem&&this.escalationCount<oe.MaxEscalationLevel&&(this.isMoreEscalation=!0)}++e})}detachCompiledTemplate(e){const t=[];let i=0;const n=this.escalationLevel.nativeElement.querySelectorAll(".more-escalation-levels-container");i=parseInt(e,0)+1,n.forEach(e=>{e.getAttribute("data-index")===i.toString()&&(t.push(e),++i)}),Object(S.X)(t)||[].slice.call(t).forEach(e=>{Object(S.I)(e),--this.loadMoreEscalationCount,--this.escalationCount})}setIndexAttribute(){setTimeout(()=>{let e=0,t=0;const i=this.escalationLevel.nativeElement.querySelectorAll(".escalation-operator-drop"),n=this.escalationLevel.nativeElement.querySelectorAll(".more-escalation-levels-container");i.length<3&&(i[0].ej2_instances[0].dataSource=this.operatorDataConfig,i[0].ej2_instances[0].value===oe.OperatorLastItem&&(this.isMoreEscalation=!1)),i.forEach(t=>{t.ej2_instances[0].element.setAttribute("data-index",e.toString());const n=t.parentElement.parentElement.querySelectorAll(".rule .escalation-assign");if(n&&n.forEach(t=>{t.setAttribute("data-index",e.toString())}),e>0){i[e].ej2_instances[0].value===oe.OperatorLastItem&&(this.isMoreEscalation=!1);const n=parseInt(i[e-1].ej2_instances[0].value,10),s=i[e].ej2_instances[0].value;this.operatorDropData=this.operatorDataConfig.filter(e=>e.value>n),t.ej2_instances[0].dataSource=this.operatorDropData,s===oe.OperatorFirstItem&&setTimeout(()=>{t.ej2_instances[0].index=0})}++e}),n.forEach(e=>{e.setAttribute("data-index",t.toString()),++t})})}escalationOperatorDropCreated(){this.setIndexAttribute()}resetEscalationLevelValues(){const e=this.escalationLevel.nativeElement.querySelectorAll(".send-level-escalation");let t=1;e.forEach(e=>{e.innerText=Object(g.a)("SENDLEVEL")+" "+t+" "+Object(g.a)("ESCALATIONLEVEL"),++t})}getEj2Objects(e){return this[e]._results}getOperatorElement(){return this.escalationLevel.nativeElement.querySelectorAll(".escalation-operator-drop")}getAssigneeElement(){return this.escalationLevel.nativeElement.querySelectorAll(".escalation-assignee-drop")}getGroupElement(){return this.escalationLevel.nativeElement.querySelectorAll(".escalation-group-drop")}getLevelsEscalation(){this.operatorDataFields=[],this.ruleDataFields=[];const e=this.getOperatorElement(),t=this.getAssigneeElement(),i=this.getGroupElement();if(e.length>0&&t.length>0&&i.length>0){const n=this.getResolutionOperator(e,t,i);if(n.length>0){const e=this.getResolutionAssignee(t,i),s=this.getResolutionGroup(i,t),o=this.mergedArray(n,e);return this.mergedArray(o,s)}return null}return null}getResolutionOperator(e,t,i){this.operatorDataFields=[];let n=1,s=0;return e.forEach(e=>{const o=e.ej2_instances[0].itemData,r=t[s].ej2_instances[0].value,a=i[s].ej2_instances[0].value;if(!Object(S.X)(r)||!Object(S.X)(a)){const e={name:"Level"+n,escalationTime:o.text.toString(),timeOptionId:o.typeId,placeholder:"",action:"",field:oe.ResolutionEscalation,label:oe.LabelForResolutionEscalation,escalationValue:o.value.toString(),sortOrder:le.ResolutionEscalation};this.operatorDataFields.push(e),++n}++s}),this.operatorDataFields}getResolutionAssignee(e,t){this.ruleDataFields=[];let i=0;return e.forEach(e=>{const n=e.ej2_instances[0].value,s=t[i].ej2_instances[0].value,o=Object(S.X)(n)?null:n.map(String);if(!Object(S.X)(n))for(let t=0;t<o.length;t++)o[t]===T.w.AssignedAgent.toString()&&(o[t]=T.v.AssignedAgent);if(!Object(S.X)(n)||!Object(S.X)(s)){const e={agentId:Object(S.X)(n)?null:o.toString(),agentValue:Object(S.X)(n)?null:n};this.ruleDataFields.push(e)}++i}),this.ruleDataFields}getResolutionGroup(e,t){this.ruleDataFields=[];let i=0;return e.forEach(e=>{const n=e.ej2_instances[0].value,s=t[i].ej2_instances[0].value,o=Object(S.X)(n)?null:n.map(String);if(!Object(S.X)(n))for(let t=0;t<o.length;t++)o[t]===T.w.AssignedGroup.toString()&&(o[t]=T.v.AssignedGroup);if(!Object(S.X)(n)||!Object(S.X)(s)){const e={groupId:Object(S.X)(n)?null:o.toString(),groupValue:Object(S.X)(n)?null:n};this.ruleDataFields.push(e)}++i}),this.ruleDataFields}mergedArray(e,t){const i=[];return e.forEach((e,n)=>{i.push(Object.assign({},e,t[n]))}),i}getResolutionEscalationData(e,t){this.isNewSLAPolicy=t,Object(S.X)(e)||(this.resolutionEscalation=e,this.resolutionEscalation.length>2?(this.moreEscalationLevel(),this.moreEscalationLevel()):this.resolutionEscalation.length>1&&this.moreEscalationLevel(),setTimeout(()=>{this.setResolutionValues(e)}))}setResolutionValues(e){const t=this.getOperatorElement(),i=this.getAssigneeElement(),n=this.getGroupElement();this.setAssigneeValues(e,i),this.setGroupValues(e,n),this.setOperatorValues(e,t)}addAssignedGroup(e){if(!this.isNewSLAPolicy){let t;e.forEach(e=>{if(!this.isNewSLAPolicy&&e.ej2_instances[0].getItems().length>0){const i=e.ej2_instances[0];for(let e=0;e<i.listData.length;e++){if(i.listData[e].groupID===T.w.AssignedGroup){t=!0;break}t=!1}t||(i.addItem({groupID:T.w.AssignedGroup,groupName:T.x.AssignedGroup},0),i.dataBind())}})}}addAssignedAgent(e){if(!this.isNewSLAPolicy){let t;e.forEach(e=>{if(!this.isNewSLAPolicy&&e.ej2_instances[0].getItems().length>0){const i=e.ej2_instances[0];for(let e=0;e<i.listData.length;e++){if(i.listData[e].userId===T.w.AssignedAgent){t=!0;break}t=!1}t||(i.addItem({displayName:T.x.AssignedAgent,userId:T.w.AssignedAgent,emailId:"",shortCode:"AA",colorCode:"#0450cc"},0),i.dataBind())}})}}setAssigneeValues(e,t){let i=0;t.forEach(t=>{if(!Object(S.X)(e[i].agentValue)){const n=t.ej2_instances[0];n.setProperties({query:(new p.g).addParams("userId",e[i].agentValue.toString())},!0),n.value=e[i].agentValue,n.initValue=JSON.parse(JSON.stringify(e[i].agentValue)),n.dataBind()}++i})}setGroupValues(e,t){let i=0;t.forEach(t=>{if(!Object(S.X)(e[i].groupValue)){const n=t.ej2_instances[0];n.setProperties({query:(new p.g).addParams("includeAdditionalIds",e[i].groupValue.toString())},!0),n.value=e[i].groupValue,n.initValue=JSON.parse(JSON.stringify(e[i].groupValue)),n.dataBind()}++i})}setOperatorValues(e,t){let i=0;t.forEach(t=>{t.ej2_instances[0].value=e[i].escalationValue,++i})}validateResolutionEscalation(){const e=this.getAssigneeElement(),t=this.escalationLevel.nativeElement.querySelectorAll(".validation-error-msg");if(e.length>1)for(let i=0;i<e.length;i++){const n=e[i].ej2_instances[0];Object(S.X)(n)||this.assigneeBlur(n,t[i])}else t[0].classList.remove("show-validation"),t[0].classList.add("hide-validation")}assigneeBlur(e,t){Object(S.X)(e.value)||0===e.value.length?(t.classList.add("show-validation"),t.classList.remove("hide-validation")):(t.classList.remove("show-validation"),t.classList.add("hide-validation"))}checkErrorElement(){return this.resolutionEscalationErrorEleCount=0,this.escalationLevel.nativeElement.querySelectorAll(".e-rule-container .validation-error-msg").forEach(e=>{e.classList.contains("show-validation")&&++this.resolutionEscalationErrorEleCount}),this.resolutionEscalationErrorEleCount}assigneeChange(e){0===(e.value?e.value:null).length&&(e.element.ej2_instances[0].value=null)}groupChange(e){0===(e.value?e.value:null).length&&(e.element.ej2_instances[0].value=null)}getCurrentGroupEle(e){let t;return this.getGroupElement().forEach(i=>{i.getAttribute("data-index")==e.toString()&&(t=i)}),t}getCurrentAssigneeEle(e){let t;return this.getAssigneeElement().forEach(i=>{i.getAttribute("data-index")==e.toString()&&(t=i)}),t}groupDataBound(e,t){const i=this.escalationLevel.nativeElement.querySelector(".escalation-group-drop#"+e).ej2_instances[0];i.requestCount?++i.requestCount:i.requestCount=1,Object(S.X)(i.value)||this.isNewSLAPolicy?this.groupAlreadyExist=!1:i.value.forEach(e=>{e==T.w.AssignedGroup&&(this.groupAlreadyExist=!0)});const n=t.items.length;for(let s=0;s<n;s++){if(t.items[s].groupID===T.w.AssignedGroup){this.itemAddedGroup=!0;break}this.itemAddedGroup=!1}this.itemAddedGroup||this.groupAlreadyExist||!this.isNewSLAPolicy||(i.addItem({groupID:T.w.AssignedGroup,groupName:T.x.AssignedGroup},0),i.dataBind()),!this.isNewSLAPolicy&&n>0&&(this.addAssignedGroup(this.getGroupElement()),1===i.requestCount&&(i.value=i.initValue,i.dataBind()))}assigneeDataBound(e,t){const i=this.escalationLevel.nativeElement.querySelector(".escalation-assignee-drop#"+e).ej2_instances[0];i.requestCount?++i.requestCount:i.requestCount=1,Object(S.X)(i.value)||this.isNewSLAPolicy?this.assigneeAlreadyExist=!1:i.value.forEach(e=>{e==T.w.AssignedAgent&&(this.assigneeAlreadyExist=!0)});const n=t.items.length;for(let s=0;s<n;s++){if(t.items[s].userId===T.w.AssignedAgent){this.itemAddedAssignee=!0;break}this.itemAddedAssignee=!1}!this.assigneeAlreadyExist&&this.isNewSLAPolicy&&(i.addItem({displayName:T.x.AssignedAgent,userId:T.w.AssignedAgent,emailId:"",shortCode:"AA",colorCode:"#0450cc"},0),i.dataBind()),!this.isNewSLAPolicy&&n>0&&(this.addAssignedAgent(this.getAssigneeElement()),1===i.requestCount&&(i.value=i.initValue,i.dataBind()))}}return e.\u0275fac=function(t){return new(t||e)(C.Nb(C.O),C.Nb(x.a))},e.\u0275cmp=C.Hb({type:e,selectors:[["app-escalation-level"]],viewQuery:function(e,t){var i;1&e&&(C.Qc(de,!0),C.Qc(he,!0),C.Qc(pe,!0),C.Qc(l.e,!0),C.Qc(l.h,!0)),2&e&&(C.xc(i=C.fc())&&(t.resolutionEscalationLevels=i.first),C.xc(i=C.fc())&&(t.moreEscalationLevels=i.first),C.xc(i=C.fc())&&(t.escalationLevel=i.first),C.xc(i=C.fc())&&(t.dropdown=i),C.xc(i=C.fc())&&(t.multiselect=i))},inputs:{resolutionEscalation:"resolutionEscalation"},decls:9,vars:5,consts:[[1,"escalation-level-container"],["escalationLevel",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["moreEscalationLevels",""],[4,"ngIf"],["resolutionEscalationLevels",""],["cssClass","e-outline","ejs-button","",1,"mr-10","e-btn",3,"click"],[1,"more-escalation-levels-container"],[1,"pb-2"],[1,"pr-2","font-12","send-level-escalation","secondary"],[1,"flex-horizontal"],[1,"operator","pb-3"],["index","0","floatLabelType","Never","popupHeight","150px","popupWidth","170px",1,"escalation-operator-drop",3,"dataSource","fields","placeholder","change","created"],["escalationOperator",""],[1,"rule","pb-3"],[1,"col-12"],["popupHeight","200px","mode","CheckBox",1,"escalation-group-drop","escalation-assign",3,"placeholder","id","dataSource","fields","allowFiltering","showClearButton","filterBarPlaceholder","dataBound","change"],[1,"col-12","padding-left-0"],["popupHeight","200px","popupWidth","250px","mode","CheckBox",1,"escalation-assignee-drop","escalation-assign",3,"placeholder","id","dataSource","fields","allowFiltering","showClearButton","filterBarPlaceholder","itemTemplate","dataBound","change"],["escalationRule",""],[1,"escalation-remove-icon"],["class","align-right cursor-pointer",4,"ngIf"],[1,"e-error","hide-validation","validation-error-msg","pb-2","margin-left-215px"],[1,"align-right","cursor-pointer"],[1,"hd-icon","hd-trash",3,"click"]],template:function(e,t){if(1&e&&(C.Tb(0,"div",0,1),C.Tb(2,"div"),C.Jc(3,be,1,0,"ng-container",2),C.Sb(),C.Ob(4,"div",null,3),C.Jc(6,me,5,7,"div",4),C.Sb(),C.Jc(7,fe,27,41,"ng-template",null,5,C.Kc)),2&e){const e=C.yc(8);C.xb(3),C.nc("ngTemplateOutlet",e)("ngTemplateOutletContext",C.tc(3,ye,t.escalationIndex)),C.xb(3),C.nc("ngIf",t.isMoreEscalation)}},directives:[n.r,n.n,c.c,l.e,l.h],pipes:[w.a],styles:[".action-assignee-style[_ngcontent-%COMP%]   .e-rule-value[_ngcontent-%COMP%]{width:auto!important}.action-assignee-style[_ngcontent-%COMP%]   .e-template[_ngcontent-%COMP%]{display:flex}.action-assignee-style[_ngcontent-%COMP%]   .e-template[_ngcontent-%COMP%]   .e-input-group[_ngcontent-%COMP%]:first-child{margin-right:60px!important}.action-assignee-style[_ngcontent-%COMP%]   .e-template[_ngcontent-%COMP%]   .e-input-group[_ngcontent-%COMP%]:nth-child(2){margin-top:0!important}.escalation-remove-icon[_ngcontent-%COMP%]{margin-bottom:20px}.margin-left-215px[_ngcontent-%COMP%]{margin-left:215px}"]}),e})();var Oe=i("EiDu");const Te=["policyName"],Se=["policyDescription"],Ce=["ticketQuerybuilder"],xe=["tab"],Ee=["slaForm"],Ae=["reminderQuerybuilder"],Ie=["slaContainer"],De=["creationTime"],Pe=["assigneeTemplate"],Le=["assigneeGroupDrop"],je=["assigneeDrop"],Re=["escalationQuerybuilder"],Me=["escalationLevel"],we=["escalationLevelContainer"],_e=["ticketConditionSection"],Ne=["escalationTemplate"],ke=["operationalHourDrop"];function Fe(e,t){1&e&&(C.Tb(0,"div",38),C.Tb(1,"span",20),C.Lc(2),C.hc(3,"translate"),C.Sb(),C.Sb()),2&e&&(C.xb(2),C.Nc(" ",C.ic(3,1,"FIELDREQUIRED"),""))}function Be(e,t){1&e&&C.Pb(0)}function Qe(e,t){if(1&e&&(C.Tb(0,"div",38),C.Jc(1,Be,1,0,"ng-container",39),C.Sb()),2&e){C.gc(2);const e=C.yc(23);C.xb(1),C.nc("ngTemplateOutlet",e)}}function qe(e,t){1&e&&C.Pb(0)}function He(e,t){if(1&e&&(C.Tb(0,"div",38),C.Jc(1,qe,1,0,"ng-container",39),C.Sb()),2&e){C.gc(2);const e=C.yc(23);C.xb(1),C.nc("ngTemplateOutlet",e)}}function Je(e,t){1&e&&(C.Tb(0,"div",38),C.Tb(1,"span",20),C.Lc(2),C.hc(3,"translate"),C.Sb(),C.Sb()),2&e&&(C.xb(2),C.Nc(" ",C.ic(3,1,"FIELDREQUIRED"),""))}function Ge(e,t){if(1&e){const e=C.Ub();C.Tb(0,"div",40),C.Tb(1,"div",41),C.Tb(2,"div",42),C.Tb(3,"div",43),C.Tb(4,"span"),C.Lc(5),C.hc(6,"translate"),C.Sb(),C.Tb(7,"span",44),C.Lc(8),C.hc(9,"translate"),C.Sb(),C.Tb(10,"span"),C.Lc(11),C.hc(12,"translate"),C.Sb(),C.Sb(),C.Tb(13,"ejs-querybuilder",45,46),C.ec("created",(function(){return C.Bc(e),C.gc(2).ticketQueryBuilderCreated()}))("change",(function(t){return C.Bc(e),C.gc(2).ticketQueryBuilderChange(t)}))("ruleChange",(function(){return C.Bc(e),C.gc(2).ticketQueryBuilderRuleChange()})),C.Sb(),C.Sb(),C.Tb(15,"div",47),C.Tb(16,"button",48),C.ec("click",(function(t){C.Bc(e);const i=C.yc(14);return C.gc(2).newCondition(t,i)})),C.Lc(17),C.hc(18,"translate"),C.Sb(),C.Sb(),C.Sb(),C.Sb()}if(2&e){const e=C.gc(2);C.xb(2),C.nc("ngClass",e.validCondition?"":"border-color-condition"),C.xb(3),C.Mc(C.ic(6,7,"MATCHSLACONDITION")),C.xb(3),C.Nc(" ",C.ic(9,9,"ALL"),""),C.xb(3),C.Nc(" ",C.ic(12,11,"OFTHECONDITION"),""),C.xb(2),C.nc("columns",e.ticketFilter)("rule",e.ticketTarget),C.xb(4),C.Mc(C.ic(18,13,"ADDNEWCONDITION"))}}function Ve(e,t){if(1&e){const e=C.Ub();C.Tb(0,"div",15,16),C.Tb(2,"div",17),C.Tb(3,"div",18),C.Tb(4,"label",19),C.Lc(5),C.hc(6,"translate"),C.Tb(7,"span",20),C.Lc(8,"*"),C.Sb(),C.Sb(),C.Tb(9,"ejs-textbox",21,22),C.ec("created",(function(){return C.Bc(e),C.gc().policyNameCreated()}))("blur",(function(){return C.Bc(e),C.gc().policyNameFocusOut()}))("change",(function(){return C.Bc(e),C.gc().policyNameChange()}))("input",(function(t){return C.Bc(e),C.gc().policyNameInput(t)})),C.hc(11,"translate"),C.Sb(),C.Jc(12,Fe,4,3,"div",23),C.Jc(13,Qe,2,1,"div",23),C.Sb(),C.Sb(),C.Tb(14,"div",17),C.Tb(15,"div",18),C.Tb(16,"label",19),C.Lc(17),C.hc(18,"translate"),C.Sb(),C.Tb(19,"ejs-textbox",24,25),C.ec("change",(function(){return C.Bc(e),C.gc().policyDescriptionChange()})),C.hc(21,"translate"),C.Sb(),C.Jc(22,He,2,1,"div",23),C.Sb(),C.Sb(),C.Tb(23,"div",17),C.Tb(24,"div",18),C.Tb(25,"label",19),C.Lc(26),C.hc(27,"translate"),C.Tb(28,"span",20),C.Lc(29,"*"),C.Sb(),C.Sb(),C.Tb(30,"ejs-dropdownlist",26,27),C.ec("dataBound",(function(t){return C.Bc(e),C.gc().operationalHourDataBound(t)}))("created",(function(){return C.Bc(e),C.gc().operationalHourCreated()}))("change",(function(){return C.Bc(e),C.gc().operationalHourChange()}))("blur",(function(){return C.Bc(e),C.gc().operationalHourFocusOut()})),C.hc(32,"translate"),C.Sb(),C.Jc(33,Je,4,3,"div",23),C.Sb(),C.Sb(),C.Tb(34,"div",28),C.Tb(35,"div",29),C.Tb(36,"div",30),C.Lc(37),C.hc(38,"translate"),C.Sb(),C.Sb(),C.Tb(39,"div",31),C.Tb(40,"div",32),C.Ob(41,"ejs-radiobutton",33,34),C.hc(43,"translate"),C.Sb(),C.Tb(44,"div",32),C.Ob(45,"ejs-radiobutton",33),C.hc(46,"translate"),C.Sb(),C.Sb(),C.Sb(),C.Jc(47,Ge,19,15,"div",35),C.Tb(48,"div",36),C.Tb(49,"button",37),C.ec("click",(function(t){return C.Bc(e),C.gc().btnClicked(t)})),C.Lc(50),C.hc(51,"translate"),C.Sb(),C.Sb(),C.Sb()}if(2&e){const e=C.gc();C.xb(5),C.Nc(" ",C.ic(6,30,"NAME")," "),C.xb(4),C.oc("placeholder",C.ic(11,32,"TEXTBOXPLACEHOLDER")),C.nc("value",e.name)("htmlAttributes",e.inputAttribute)("enabled",!e.isDefaultSLA),C.xb(3),C.nc("ngIf",e.nameRequired),C.xb(1),C.nc("ngIf",e.nameIsError),C.xb(4),C.Nc(" ",C.ic(18,34,"DESCRIPTION")," "),C.xb(2),C.oc("placeholder",C.ic(21,36,"TEXTBOXPLACEHOLDER")),C.nc("value",e.description)("htmlAttributes",e.textAreaAttribute),C.xb(3),C.nc("ngIf",e.descriptionIsError),C.xb(4),C.Nc(" ",C.ic(27,38,"OPERATIONALHOUR")," "),C.xb(4),C.oc("placeholder",C.ic(32,40,"DROPDOWNPLACEHOLDER")),C.nc("dataSource",e.operationalHoursDataConfig)("value",e.businessId)("fields",e.operationalHoursFields)("query",e.businessHourDropQuery)("allowFiltering",!0)("filterBarPlaceholder",e.placeholderString)("htmlAttributes",e.autoCompleteAttribute),C.xb(3),C.nc("ngIf",e.operationalHourRequired),C.xb(4),C.Nc(" ",C.ic(38,42,"CALCULATERESOLUTIONTIME")," "),C.xb(4),C.oc("label",C.ic(43,44,"TICKETCREATIONTIME")),C.nc("checked",e.resolutionFromCreationTime),C.xb(4),C.oc("label",C.ic(46,46,"TICKETMODIFICATIONTIME")),C.nc("checked",e.resolutionFromModificationTime),C.xb(2),C.nc("ngIf",!e.isDefaultSLA),C.xb(2),C.nc("isPrimary",!0),C.xb(1),C.Mc(C.ic(51,48,"NEXT"))}}function Xe(e,t){if(1&e){const e=C.Ub();C.Tb(0,"div"),C.Tb(1,"div",56),C.Tb(2,"div",57),C.Tb(3,"div",58),C.Tb(4,"div",59),C.Ob(5,"span",60),C.Sb(),C.Tb(6,"div",61),C.Lc(7),C.Sb(),C.Sb(),C.Tb(8,"div",62),C.Tb(9,"div",63),C.Tb(10,"span",64),C.Lc(11),C.hc(12,"translate"),C.Sb(),C.Tb(13,"span",65),C.Ob(14,"ejs-switch",66),C.Sb(),C.Sb(),C.Tb(15,"div",67),C.Tb(16,"span",64),C.Lc(17),C.hc(18,"translate"),C.Sb(),C.Tb(19,"span",65),C.Ob(20,"ejs-switch",68),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Tb(21,"div",69,70),C.Tb(23,"div",71),C.Tb(24,"div",72),C.Tb(25,"div",73),C.Lc(26),C.hc(27,"translate"),C.Tb(28,"span",20),C.Lc(29,"*"),C.Sb(),C.Sb(),C.Tb(30,"div",74),C.Tb(31,"div",75),C.Tb(32,"ejs-numerictextbox",76),C.ec("blur",(function(){C.Bc(e);const t=C.gc(2).index;return C.gc(2).firstResponseFocusOut(t,"first-response-time")})),C.Sb(),C.Sb(),C.Tb(33,"div",77),C.Tb(34,"ejs-dropdownlist",78),C.ec("change",(function(){C.Bc(e);const t=C.gc(2).index;return C.gc(2).firstResponseChange(t,"first-response-time")}))("blur",(function(){C.Bc(e);const t=C.gc(2).index;return C.gc(2).firstResponseFocusOut(t,"first-response-time")})),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Tb(35,"div",79),C.Tb(36,"div",73),C.Lc(37),C.hc(38,"translate"),C.Sb(),C.Tb(39,"div",74),C.Tb(40,"div",75),C.Tb(41,"ejs-numerictextbox",80),C.ec("blur",(function(){C.Bc(e);const t=C.gc(2).index;return C.gc(2).everyResponseFocusOut(t,"every-response-time")})),C.Sb(),C.Sb(),C.Tb(42,"div",77),C.Tb(43,"ejs-dropdownlist",81),C.ec("change",(function(){C.Bc(e);const t=C.gc(2).index;return C.gc(2).everyResponseChange(t,"every-response-time")}))("blur",(function(){C.Bc(e);const t=C.gc(2).index;return C.gc(2).everyResponseFocusOut(t,"every-response-time")})),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Tb(44,"div",79),C.Tb(45,"div",73),C.Lc(46),C.hc(47,"translate"),C.Tb(48,"span",20),C.Lc(49,"*"),C.Sb(),C.Sb(),C.Tb(50,"div",74),C.Tb(51,"div",75),C.Tb(52,"ejs-numerictextbox",82),C.ec("blur",(function(){C.Bc(e);const t=C.gc(2).index;return C.gc(2).resolutionFocusOut(t,"resolution-time")})),C.Sb(),C.Sb(),C.Tb(53,"div",77),C.Tb(54,"ejs-dropdownlist",83),C.ec("change",(function(){C.Bc(e);const t=C.gc(2).index;return C.gc(2).resolutionChange(t,"resolution-time")}))("blur",(function(){C.Bc(e);const t=C.gc(2).index;return C.gc(2).resolutionFocusOut(t,"resolution-time")})),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Tb(55,"div",79),C.Tb(56,"div",73),C.Lc(57),C.hc(58,"translate"),C.Tb(59,"span",20),C.Lc(60,"*"),C.Sb(),C.Sb(),C.Tb(61,"div",84),C.Tb(62,"ejs-dropdownlist",85),C.ec("dataBound",(function(){C.Bc(e);const t=C.gc().$implicit,i=C.gc().index;return C.gc(2).businessHourDataBound(i,t.businessHourId,t.businessHourText)})),C.hc(63,"translate"),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Tb(64,"div",86),C.Tb(65,"div",71),C.Tb(66,"div",87),C.Tb(67,"span",88),C.Ob(68,"span",89),C.Sb(),C.Sb(),C.Tb(69,"div",90),C.Tb(70,"span",88),C.Ob(71,"span",91),C.Sb(),C.Sb(),C.Tb(72,"div",90),C.Tb(73,"span",88),C.Ob(74,"span",92),C.Sb(),C.Sb(),C.Tb(75,"div",90),C.Tb(76,"span",88),C.Ob(77,"span",93),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb()}if(2&e){const e=C.gc().$implicit,t=C.gc(),i=t.$implicit,n=t.index,s=C.gc(2);C.xb(5),C.Ic("background-color",i.backgroundColor),C.xb(2),C.Nc(" ",i.name," "),C.xb(4),C.Mc(C.ic(12,56,"REMINDER")),C.xb(3),C.nc("checked",e.isReminderEnabled),C.xb(3),C.Mc(C.ic(18,58,"ESCALATION")),C.xb(3),C.nc("checked",e.isEscalationEnabled),C.xb(6),C.Nc(" ",C.ic(27,60,"TIMETOFIRSTREPLY")," "),C.xb(6),C.oc("value",e.firstResponseTime),C.nc("htmlAttributes",s.inputAttribute),C.yb("data-index",n)("data-mandatory",!0)("data-column",3),C.xb(2),C.oc("value",s.setTimeFieldDropValue(e.firstResponseTimeOptionId,"first-response-time")),C.nc("dataSource",s.timeFieldsDataConfig)("htmlAttributes",s.autoCompleteAttribute)("fields",s.slaTimeFields),C.yb("data-index",n)("data-mandatory",!0)("data-column",3),C.xb(3),C.Nc(" ",C.ic(38,62,"TIMETONEXTREPLY")," "),C.xb(4),C.oc("value",e.responseTime),C.nc("htmlAttributes",s.inputAttribute),C.yb("data-index",n)("data-column",3),C.xb(2),C.oc("value",s.setTimeFieldDropValue(e.responseTimeOptionId,"every-response-time")),C.nc("dataSource",s.timeFieldsDataConfig)("htmlAttributes",s.autoCompleteAttribute)("fields",s.slaTimeFields),C.yb("data-index",n)("data-column",3),C.xb(3),C.Nc(" ",C.ic(47,64,"TIMETORESOLUTION")," "),C.xb(6),C.oc("value",e.resolutionTime),C.nc("htmlAttributes",s.inputAttribute),C.yb("data-index",n)("data-mandatory",!0)("data-column",3),C.xb(2),C.oc("value",s.setTimeFieldDropValue(e.resolutionTimeOptionId,"resolutionTime")),C.nc("dataSource",s.timeFieldsDataConfig)("htmlAttributes",s.autoCompleteAttribute)("fields",s.slaTimeFields),C.yb("data-index",n)("data-mandatory",!0)("data-column",3),C.xb(3),C.Nc(" ",C.ic(58,66,"OPERATIONALHOUR")," "),C.xb(5),C.oc("placeholder",C.ic(63,68,"BUSINESSHOURS")),C.nc("dataSource",s.businessHourDataConfig)("htmlAttributes",s.autoCompleteAttribute),C.yb("data-index",n)("data-column",4),C.xb(6),C.yb("data-index",n)("data-mandatory",!0),C.xb(3),C.yb("data-index",n),C.xb(3),C.yb("data-index",n)("data-mandatory",!0),C.xb(3),C.yb("data-index",n)}}function Ue(e,t){if(1&e&&(C.Tb(0,"div"),C.Jc(1,Xe,78,70,"div",13),C.Sb()),2&e){const e=t.index,i=C.gc().index;C.xb(1),C.nc("ngIf",i==e)}}function ze(e,t){if(1&e&&(C.Tb(0,"div",54),C.Jc(1,Ue,2,1,"div",55),C.Sb()),2&e){const e=t.index,i=C.gc(2);C.yb("data-index",e),C.xb(1),C.nc("ngForOf",i.slaTargetData)}}function $e(e,t){1&e&&(C.Tb(0,"div",38),C.Tb(1,"span",20),C.Lc(2),C.hc(3,"translate"),C.Sb(),C.Sb()),2&e&&(C.xb(2),C.Nc(" ",C.ic(3,1,"SELECTALLREQUIREDFIELDS"),""))}function Ke(e,t){if(1&e){const e=C.Ub();C.Tb(0,"div",49),C.Tb(1,"div",50),C.Jc(2,ze,2,2,"div",51),C.Jc(3,$e,4,3,"div",23),C.Tb(4,"div",36),C.Tb(5,"button",52),C.ec("click",(function(t){return C.Bc(e),C.gc().btnClicked(t)})),C.Lc(6),C.hc(7,"translate"),C.Sb(),C.Tb(8,"button",53),C.ec("click",(function(t){return C.Bc(e),C.gc().btnClicked(t)})),C.Lc(9),C.hc(10,"translate"),C.Sb(),C.Sb(),C.Sb(),C.Sb()}if(2&e){const e=C.gc();C.xb(2),C.nc("ngForOf",e.priorityData),C.xb(1),C.nc("ngIf",e.slaTimeFieldsRequired),C.xb(3),C.Mc(C.ic(7,5,"BACK")),C.xb(2),C.nc("isPrimary",!0),C.xb(1),C.Mc(C.ic(10,7,"NEXT"))}}function We(e,t){if(1&e){const e=C.Ub();C.Tb(0,"div",94),C.Tb(1,"div",17),C.Tb(2,"div",18),C.Tb(3,"div",95),C.Tb(4,"div",42),C.Tb(5,"ejs-querybuilder",96,97),C.ec("created",(function(){return C.Bc(e),C.gc().reminderQuerybuilderCreated()}))("change",(function(t){return C.Bc(e),C.gc().reminderQuerybuilderChange(t)}))("ruleChange",(function(){return C.Bc(e),C.gc().reminderQuerybuilderRuleChange()})),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Tb(7,"div",36),C.Tb(8,"button",98),C.ec("click",(function(t){return C.Bc(e),C.gc().btnClicked(t)})),C.Lc(9),C.hc(10,"translate"),C.Sb(),C.Tb(11,"button",99),C.ec("click",(function(t){return C.Bc(e),C.gc().btnClicked(t)})),C.Lc(12),C.hc(13,"translate"),C.Sb(),C.Sb(),C.Sb()}if(2&e){const e=C.gc();C.xb(4),C.nc("ngClass",e.validCondition?"":"border-color-condition"),C.xb(1),C.nc("columns",e.reminderFilter)("rule",e.reminderData),C.xb(4),C.Mc(C.ic(10,6,"BACK")),C.xb(2),C.nc("isPrimary",!0),C.xb(1),C.Mc(C.ic(13,8,"NEXT"))}}function Ze(e,t){if(1&e){const e=C.Ub();C.Tb(0,"div",100),C.Tb(1,"div",17),C.Tb(2,"div",18),C.Tb(3,"div",95),C.Tb(4,"div",42),C.Tb(5,"ejs-querybuilder",101,102),C.ec("created",(function(){return C.Bc(e),C.gc().escalationQuerybuilderCreated()}))("change",(function(t){return C.Bc(e),C.gc().escalationQuerybuilderChange(t)}))("ruleChange",(function(){return C.Bc(e),C.gc().escalationQuerybuilderRuleChange()}))("ruleChange",(function(){return C.Bc(e),C.gc().escalationQuerybuilderRuleChange()})),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Tb(7,"div",103),C.Tb(8,"button",104),C.ec("click",(function(t){return C.Bc(e),C.gc().btnClicked(t)})),C.Lc(9),C.hc(10,"translate"),C.Sb(),C.Tb(11,"button",105),C.ec("click",(function(t){return C.Bc(e),C.gc().btnClicked(t)})),C.Lc(12),C.hc(13,"translate"),C.Sb(),C.Sb()}if(2&e){const e=C.gc();C.xb(4),C.nc("ngClass",e.validCondition?"":"border-color-condition"),C.xb(1),C.nc("columns",e.escalationFilter)("rule",e.escalationData),C.xb(4),C.Mc(C.ic(10,6,"BACK")),C.xb(2),C.nc("isPrimary",!0),C.xb(1),C.Mc(C.ic(13,8,e.submitButtonText))}}function Ye(e,t){if(1&e&&(C.Ob(0,"span",106),C.hc(1,"safe")),2&e){const e=C.gc();C.nc("innerHTML",C.jc(1,1,e.commonInputValidationErrorMessage,"html"),C.Cc)}}function et(e,t){1&e&&(C.Tb(0,"div",null,108),C.Ob(2,"app-escalation-level",null,109),C.Sb())}function tt(e,t){1&e&&C.Jc(0,et,4,0,"ng-template",null,107,C.Kc)}function it(e,t){1&e&&C.Lc(0),2&e&&C.Nc(" ",t.$implicit.groupName," ")}function nt(e,t){if(1&e&&(C.Tb(0,"div",110),C.Tb(1,"div",111),C.Tb(2,"ejs-multiselect",112,113),C.hc(4,"translate"),C.hc(5,"translate"),C.Jc(6,it,1,1,"ng-template",null,114,C.Kc),C.Sb(),C.Sb(),C.Tb(8,"div",115),C.Ob(9,"ejs-multiselect",116,117),C.hc(11,"translate"),C.hc(12,"translate"),C.Sb(),C.Sb(),C.Tb(13,"div",118),C.Lc(14),C.hc(15,"translate"),C.Sb()),2&e){const e=C.gc();C.xb(2),C.oc("placeholder",C.ic(4,14,"GROUP")),C.oc("filterBarPlaceholder",C.ic(5,16,"SEARCH")),C.nc("dataSource",e.assigneeGroupDataConfig)("fields",e.assigneeGroupFieldConfig)("allowFiltering",!0)("showClearButton",!0),C.xb(7),C.oc("placeholder",C.ic(11,18,"AGENT")),C.oc("filterBarPlaceholder",C.ic(12,20,"SEARCH")),C.nc("dataSource",e.assigneeDataConfig)("fields",e.assigneeFieldConfig)("allowFiltering",!0)("showClearButton",!0)("itemTemplate",e.assigneeOrGroupItemTemplate),C.xb(5),C.Mc(C.ic(15,22,"VALIDATIONMESSAGEFORSETASSIGNEE"))}}const st={priority:U,slaTarget:$,slaReminder:W,slaEscalation:Y};let ot=(()=>{class e{constructor(e,t,i,n,s,o,r,a){this.router=e,this.activatedRoute=t,this.spinService=i,this.toastService=n,this.automationListService=s,this.slaService=o,this.cd=r,this.viewContainerRef=a,this.nameIsError=!1,this.descriptionIsError=!1,this.inputAttribute={maxlength:f.s},this.textAreaAttribute={maxlength:f.M},this.headerText=[],this.durationExceedErrorMessage=Object(g.a)("MAXIMUMDURATION"),this.invalidTimeErrorMessage=Object(g.a)("MINIMUMDURATION"),this.conditionRuleDel=!0,this.reminderOperators=[{key:"30 minutes",value:"0",typeId:2,text:"30"},{key:"1 hour",value:"1",typeId:3,text:"1"},{key:"2 hours",value:"2",typeId:3,text:"2"},{key:"4 hours",value:"3",typeId:3,text:"4"},{key:"8 hours",value:"4",typeId:3,text:"8"}],this.resolutionReminderOperators=[{key:"30 minutes",value:"0",typeId:2,text:"30"},{key:"1 hour",value:"1",typeId:3,text:"1"},{key:"2 hours",value:"2",typeId:3,text:"2"},{key:"4 hours",value:"3",typeId:3,text:"4"},{key:"8 hours",value:"4",typeId:3,text:"8"},{key:"1 day",value:"5",typeId:4,text:"1"},{key:"2 days",value:"6",typeId:4,text:"2"},{key:"3 days",value:"7",typeId:4,text:"3"},{key:"5 days",value:"8",typeId:4,text:"5"},{key:"7 days",value:"9",typeId:4,text:"7"}],this.escalationOperators=[{key:"Immediately",value:"0",typeId:2,text:"0"},{key:"After 30 minutes",value:"1",typeId:2,text:"30"},{key:"After 1 hour",value:"2",typeId:3,text:"1"},{key:"After 2 hours",value:"3",typeId:3,text:"2"},{key:"After 4 hours",value:"4",typeId:3,text:"4"},{key:"After 8 hours",value:"5",typeId:3,text:"8"},{key:"After 12 hours",value:"6",typeId:3,text:"12"},{key:"After 1 day",value:"7",typeId:4,text:"1"},{key:"After 2 days",value:"8",typeId:4,text:"2"},{key:"After 3 days",value:"9",typeId:4,text:"3"},{key:"After 5 days",value:"10",typeId:4,text:"5"},{key:"After 7 days",value:"11",typeId:4,text:"7"}],this.reminderQueryBuilderLabel=[{key:Object(g.a)("FIRSTRESPONSEREMINDER")},{key:Object(g.a)("RESPONSEREMINDER")},{key:Object(g.a)("RESOLUTIONREMINDER")}],this.escalationQueryBuilderLabel=[{key:Object(g.a)("FIRSTRESPONSEESCALATION")},{key:Object(g.a)("RESPONSEESCALATION")},{key:Object(g.a)("RESOLUTIONESCALATION")}],this.validCondition=!0,this.isReminderSection=!0,this.tabAnimationSettings={next:{effect:"None"},previous:{effect:"None"}},this.firstResponseTime=[],this.responseTime=[],this.resolutionTime=[],this.businessHour=[],this.targetTimeOptionId=2,this.reminderEnabledJson=[],this.escalationEnabledJson=[],this.businessHourIdJson=[],this.slaTargetBusinessHourColumn="4",this.slaTimeFieldsColumn="3",this.isAssignedAgent=!1,this.isAssignedGroup=!1,this.invalidResponseTime=!1,this.assigneeOrGroupTemplate={create:e=>e.field===oe.ResolutionEscalation?(this.enableResolutionEscalation=!0,this.cd.detectChanges(),this.compileTemplate(this.escalationLevel,{name:"assignee"})):this.compileTemplate(this.assigneeTemplate,{name:"assignee"}),destroy:e=>{if(e.field===oe.ResolutionEscalation)e.elements[0].parentElement.classList.remove("action-assignee-style"),e.elements[0].parentElement.parentElement.classList.remove("hd-rule-value"),this.enableResolutionEscalation=!1,this.escalationLevelContainer.nativeElement.querySelector(" .escalation-assignee-drop").ej2_instances[0].destroy(),this.cd.detectChanges();else{this.setAssigneeVaidationFail=!1,e.elements[0].parentElement.classList.remove("action-assignee-style");const t=this.slaTargetContainer.nativeElement.querySelector("#"+e.elementId+" .groupDropDown").ej2_instances[0],i=this.slaTargetContainer.nativeElement.querySelector("#"+e.elementId+" .assigneeDropDown").ej2_instances[0];t.destroy(),i.destroy()}},write:e=>{if(e.field===oe.ResolutionEscalation)setTimeout(()=>{this.escalationTemplate.getResolutionEscalationData(this.resolutionEscalation,this.isNewSLAPolicy)}),e.elements.parentElement.classList.add("action-assignee-style"),e.elements.parentElement.parentElement.classList.add("hd-rule-value");else{const t=Object(S.C)(e.elements,".e-rule-container"),i=[].slice.call(t.parentElement.children).indexOf(t),n=this.isReminderSection?this.reminderQuerybuilder:this.escalationQuerybuilder;let s,o,r,a;if(n.rule.rules[i].custom){if(n.rule.rules[i].custom.filter(e=>"groupValue"===e.key)[0]){const t=n.rule.rules[i].custom.filter(e=>"groupValue"===e.key)[0];r=JSON.parse(JSON.stringify(t));const o=t?t.value===T.v.AssignedGroup?T.w.AssignedGroup:t.value:null;Object(S.X)(o)||setTimeout(()=>{const t=this.slaTargetContainer.nativeElement.querySelector("#"+e.elements.id+" .groupDropDown");s=t.ej2_instances[0],o&&s.setProperties({query:(new p.g).addParams("includeAdditionalIds",o.toString())},!0),s.value=o||"",s.dataBind()})}if(n.rule.rules[i].custom.filter(e=>"assigneeValue"===e.key)[0]){const t=n.rule.rules[i].custom.filter(e=>"assigneeValue"===e.key)[0];a=JSON.parse(JSON.stringify(t));const s=t?t.value===T.v.AssignedAgent?T.w.AssignedAgent:t.value:null;Object(S.X)(s)||setTimeout(()=>{const t=this.slaTargetContainer.nativeElement.querySelector("#"+e.elements.id+" .assigneeDropDown");o=t.ej2_instances[0],s&&o.setProperties({query:(new p.g).addParams("userId",s.toString())},!0),o.value=s||"",o.dataBind()})}}const l=[];e.elements.parentElement.classList.add("action-assignee-style"),setTimeout(()=>{const t=n.element.querySelector("#"+e.elements.id).parentElement.parentElement,i=t.querySelector(".e-control.e-dropdownlist").ej2_instances[0].itemData,c=n.rule.rules.findIndex(e=>e.field===i.field),u=this.slaTargetContainer.nativeElement.querySelector("#"+e.elements.id+" .groupDropDown"),d=t.querySelector(" .e-rule-operator .e-control.e-dropdownlist");if(d){const e=d.ej2_instances[0].itemData;n.rule.rules[c].timeOptionId=e.typeId,n.rule.rules[c].reminderTime=e.text,n.rule.rules[c].operatorValue=e.value}s=u.ej2_instances[0],s.change.subscribe(()=>{let e=s.value?s.value:null;0===s.value.length&&(e=null);const t=s.value.map(String);if(!Object(S.X)(e))for(let n=0;n<t.length;n++)t[n]===T.w.AssignedGroup.toString()&&(t[n]=T.v.AssignedGroup);n.rule.rules[c].groupId=Object(S.X)(t)?null:t.length>0?t:null;const i=s.value;l.filter(e=>"groupValue"===e.key)[0]?l.filter(e=>"groupValue"===e.key)[0].value=i:l.push({key:"groupValue",value:i}),n.rule.rules[c].custom=l,this.queryBuildervalueUpdate(n,s.element," ")}),s.dataBound.subscribe(e=>{s.requestCount?++s.requestCount:s.requestCount=1;let t=!1;s=u.ej2_instances[0],!Object(S.X)(s.value)&&this.isNewSLAPolicy&&s.value.forEach(e=>{e==T.w.AssignedGroup&&(t=!0)});const i=e.items.length;for(let n=0;n<i;n++){if(e.items[n].userId===T.w.AssignedGroup){this.itemAddedGroup=!0;break}this.itemAddedGroup=!1}this.itemAddedGroup||t||(s.addItem({groupID:T.w.AssignedGroup,groupName:T.x.AssignedGroup},0),1===s.requestCount&&r&&r.value.length>0&&(s.value=r.value),this.itemAddedGroup=!0),s.value&&s.change.emit()});const h=this.slaTargetContainer.nativeElement.querySelector("#"+e.elements.id+" .assigneeDropDown");o=h.ej2_instances[0],o.change.subscribe(()=>{let e=o.value?o.value:null;0===o.value.length&&(e=null);const t=o.value.map(String);if(!Object(S.X)(e))for(let n=0;n<t.length;n++)t[n]===T.w.AssignedAgent.toString()&&(t[n]=T.v.AssignedAgent);n.rule.rules[c].agentId=Object(S.X)(t)?null:t.length>0?t:null;const i=o.value;l.filter(e=>"assigneeValue"===e.key)[0]?l.filter(e=>"assigneeValue"===e.key)[0].value=i:l.push({key:"assigneeValue",value:i}),n.rule.rules[c].custom=l,this.queryBuildervalueUpdate(n,o.element," ")}),o.dataBound.subscribe(e=>{o.requestCount?++o.requestCount:o.requestCount=1;let t=!1;o=h.ej2_instances[0],!Object(S.X)(o.value)&&this.isNewSLAPolicy&&o.value.forEach(e=>{e==T.w.AssignedAgent&&(t=!0)});const i=e.items.length;for(let n=0;n<i;n++){if(e.items[n].userId===T.w.AssignedAgent){this.itemAddedAssignee=!0;break}this.itemAddedAssignee=!1}this.itemAddedAssignee||t||(o.addItem({displayName:T.x.AssignedAgent,userId:T.w.AssignedAgent,emailId:"",shortCode:"AA",colorCode:"#0450cc"},0),1===o.requestCount&&a&&a.value.length>0&&(o.value=a.value),this.itemAddedAssignee=!0),o.value&&o.change.emit()})})}}},this.newItemAdded=!0,this.assigneeGroupFieldConfig={text:"groupName",value:"groupID"},this.assigneeFieldConfig={text:"displayName",value:"userId"},this.itemAddedAssignee=!1,this.itemAddedGroup=!1,this.operationalHoursFields={text:"name",value:"id"},this.slaTimeFields={text:"text",value:"value"},this.slaTimeFieldsRequired=!1,this.conditionErrorAndRule=!1,this.assigneeOrGroupItemTemplate=Object(b.B)(),this.setAssigneeVaidationFail=!1,this.reminderTempJson=[],this.reminderFieldsJson=[],this.escalationTempJson=[],this.escalationFieldsJson=[],this.reminderJsonData=[],this.escalationJsonData=[],this.isValidFields=!0,this.reminderErrorEleCount=0,this.showAddReminderButton=!0,this.showAddEscalationButton=!0,this.resolutionEscalationCount=1,this.enableResolutionEscalation=!1,this.autoCompleteAttribute={autocomplete:"anyrandomstring"},this.placeholderString=Object(g.a)("SEARCH"),this.businessHourDataConfig=[{text:Object(g.a)("ALLDAYS24*7"),value:0}],this.timeFieldsDataConfig=[{text:"Minutes",value:"2"},{text:"Hours",value:"3"},{text:"Days",value:"4"}],this.resolutionFromModificationTime=!1,this.reminderObj=[],this.escalationObj=[],this.isOperatorationalDropChanged=!1,this.reminderFilter=[{field:"firstResponseReminder",label:"First response reminder",operators:this.reminderOperators,template:this.assigneeOrGroupTemplate},{field:"responseReminder",label:"Response reminder",operators:this.reminderOperators,template:this.assigneeOrGroupTemplate},{field:"resolutionReminder",label:"Resolution reminder",operators:this.resolutionReminderOperators,template:this.assigneeOrGroupTemplate}],this.escalationFilter=[{field:"firstResponseEscalation",label:"First response escalation",operators:this.escalationOperators,template:this.assigneeOrGroupTemplate},{field:"responseEscalation",label:"Response escalation",operators:this.escalationOperators,template:this.assigneeOrGroupTemplate},{field:"resolutionEscalation",label:"Resolution escalation",operators:this.escalationOperators,template:this.assigneeOrGroupTemplate}],this.commonInputValidationErrorMessage=b.e,this.appSettings=f.e,this.format=f.e.dateFormat,this.formatWithTime=f.e.dateFormat+" "+f.e.timeFormat,this.timeZone=f.P.timeZoneOffset,this.priorityData=this.getPriority(),this.assigneeGroupDataConfig=new p.a({url:ee.a.Group,adaptor:new m.b}),this.assigneeDataConfig=new p.a({url:ee.a.Assignee,adaptor:new m.b})}getPriority(){const e=this.fetchPriority();return Object.keys(e).map(t=>e[t]).reverse()}getReminderQueryBuilderJson(e){this.reminderTempJson=[],this.reminderFieldsJson=[],Object(S.X)(e)||(Object.keys(e).map(t=>{e[t].map(e=>{this.reminderTempJson.push(e),this.reminderFieldsJson.push(e.field)})}),this.formatReminderJson(this.reminderTempJson))}getEscalationQueryBuilderJson(e){this.escalationTempJson=[],this.escalationFieldsJson=[],Object(S.X)(e)||(Object.keys(e).map(t=>{const i=t;e[t].map(e=>{this.escalationFieldsJson.push(e.field),i!==oe.ResolutionEscalation?this.escalationTempJson.push(e):1===this.resolutionEscalationCount&&(++this.resolutionEscalationCount,this.escalationTempJson.push(e))})}),this.formatEscalationJson(this.escalationTempJson))}formatReminderJson(e){return this.reminderJsonData=[],this.reminderObj=[],this.fetchSLAReminder().rules.map(e=>{this.reminderFieldsJson.includes(e.field)||this.reminderObj.push(e)}),e.map(e=>{{const t={field:e.field,label:e.label,operator:e.reminderValue.toString(),custom:Object(S.X)(e.custom)?null:e.custom,sortOrder:e.sortOrder};this.reminderJsonData.push(t)}}),this.reminderObj.length>0?(this.reminderObj.map(e=>{this.reminderJsonData.push(e)}),this.reminderJsonData.sort((e,t)=>e.sortOrder-t.sortOrder),this.reminderJsonData):(this.reminderJsonData.sort((e,t)=>e.sortOrder-t.sortOrder),this.reminderJsonData)}formatEscalationJson(e){return this.escalationJsonData=[],this.escalationObj=[],this.fetchSLAEscalation().rules.map(e=>{this.escalationFieldsJson.includes(e.field)||this.escalationObj.push(e)}),e.map(e=>{{const t={field:e.field,label:e.label,operator:e.escalationValue.toString(),custom:Object(S.X)(e.custom)?null:e.custom,sortOrder:e.sortOrder};this.escalationJsonData.push(t)}}),this.escalationObj.length>0?(this.escalationObj.map(e=>{this.escalationJsonData.push(e)}),this.escalationJsonData.sort((e,t)=>e.sortOrder-t.sortOrder),this.escalationJsonData):(this.escalationJsonData.sort((e,t)=>e.sortOrder-t.sortOrder),this.escalationJsonData)}fetchPriority(){return st.priority.default}fetchSLATarget(){return st.slaTarget.default}fetchSLAReminder(){return st.slaReminder.default}fetchSLAEscalation(){return st.slaEscalation.default}compileTemplate(e,t){const i=this.viewContainerRef.createEmbeddedView(e,{$implicit:t});i.markForCheck();const n=Object(S.F)("div"),s=i.rootNodes;return s.length>0&&s.forEach(e=>{n.appendChild(e)}),n}ngOnInit(){if(this.convertFields(),this.activatedRoute.data.subscribe(e=>{this.isNewSLAPolicy=e.newSLAPolicy}),this.isNewSLAPolicy?(this.slaTargetData=this.fetchSLATarget(),this.resolutionFromCreationTime=!0,this.submitButtonText=Object(g.a)("ADD")):(this.slaTargetData=this.slaMetricTarget,this.resolutionFromCreationTime||(this.resolutionFromModificationTime=!0),this.submitButtonText=Object(g.a)("UPDATE")),this.operationalHoursDataConfig=new p.a({url:te.a.BusinessHourList,adaptor:new m.b}),Object(S.X)(this.businessId)||(this.businessHourDropQuery=(new p.g).addParams("includeAdditionalIds",this.businessId.toString())),this.headerText=[{text:Object(g.a)("CHOOSECONDITION")},{text:Object(g.a)("SLATARGETS")},{text:Object(g.a)("ADDREMINDER")},{text:Object(g.a)("ADDESCALATION")}],this.isNewSLAPolicy)this.reminderData=this.fetchSLAReminder(),this.escalationData=this.fetchSLAEscalation();else{if(this.getReminderQueryBuilderJson(this.reminder),this.getEscalationQueryBuilderJson(this.escalation),this.reminderJsonData.length>0){const e=JSON.stringify({condition:"and",rules:this.reminderJsonData});this.reminderData=JSON.parse(e)}else this.reminderData=this.fetchSLAReminder();if(this.escalationJsonData.length>0){const e=JSON.stringify({condition:"and",rules:this.escalationJsonData});this.escalationData=JSON.parse(e)}else this.escalationData=this.fetchSLAEscalation()}}ngAfterViewInit(){Object(f.V)(!0)}convertFields(){const e=O.TicketConditionFields+"/fields";this.spinService.showSpinner(),this.automationListService.fields(e).then(e=>{this.items=e.result,this.itemClone=this.items.map(e=>Object.assign({},e)),Object(S.X)(this.ticketQuerybuilder)||this.selectQryBldr(this.ticketQuerybuilder),this.columnTemplate=[this.itemsList],this.ticketFilter=this.columnTemplate[0],setTimeout(()=>{Object(S.X)(this.ticketQuerybuilder)||(this.ticketQuerybuilder.refresh(),this.styleChange(this.ticketQuerybuilder))})}).finally(()=>{this.spinService.hideSpinner()})}policyCancel(){this.router.navigateByUrl(this.isNewSLAPolicy?location.pathname.replace("/new",""):"/admin/sla")}policyNameCreated(){setTimeout(()=>{this.policyName&&this.policyName.element&&Object(b.h)(this.policyName.element.parentElement)})}policyNameFocusOut(){if(Object(S.X)(this.policyName.value))return void(this.nameRequired=!0);const e=this.policyName.value.trim();Object(S.X)(e)||0!==e.length||(this.nameRequired=!0)}policyNameChange(){if(Object(S.X)(this.policyName.value))this.nameRequired=!1,this.nameIsError=!1;else{this.nameRequired=!1;const e=Object(b.d)(this.policyName.value);this.nameIsError=!!e}}policyNameInput(e){const t=e.value;this.nameRequired=!(!Object(S.X)(t)&&""!==t.trim());const i=Object(b.d)(t);this.nameIsError=!!i}policyDescriptionChange(){if(!Object(S.X)(this.policyDescription.value)&&this.policyDescription.value.length>0){const e=Object(b.d)(this.policyDescription.value);this.descriptionIsError=!!e}else this.descriptionIsError=!1}btnClicked(e){switch(e.target.id){case"set-sla-target":this.policyNameFocusOut(),this.operationalHourFocusOut(),this.isDefaultSLA?this.nameRequired||this.nameIsError||this.descriptionIsError||(this.operationalHourId=this.operationalHourDrop.value,this.operationalHourName=this.operationalHourDrop.text,this.isOperatorationalDropChanged&&this.setOperationalDropData(),this.tab.enableTab(1,!0),this.tab.enableTab(0,!1)):(this.isConditionTabValid(),this.validateCondition(this.ticketQuerybuilder),setTimeout(()=>{if(this.validateConditionValueField(),!this.validCondition||this.nameRequired||this.nameIsError||this.descriptionIsError||this.operationalHourRequired||this.conditionErrorAndRule||this.conditionErrorAndRule){if(this.nameRequired||this.nameIsError)this.policyName.focusIn();else if(this.descriptionIsError)this.policyDescription.focusIn();else if(this.operationalHourRequired)this.operationalHourDrop.focusIn();else if(this.ticketQuerybuilder.rule.rules.length>0&&""!==this.ticketQuerybuilder.rule.rules[0].field){const e=this.ticketQuerybuilder.element.querySelectorAll(".e-error");if(0===e.length)return;const t=e[0].querySelector(".e-dropdownlist, .e-textbox, .e-multiselect .e-control, .e-datepicker");t&&t.ej2_instances[0].focusIn()}else if(this.ticketQuerybuilder.rule.rules.length>0&&""===this.ticketQuerybuilder.rule.rules[0].field){const e=this.ticketQuerybuilder.element.querySelectorAll(".e-error")[0].querySelector(".e-dropdownlist, .e-textbox, .e-multiselect .e-control, .e-datepicker");e&&e.ej2_instances[0].focusIn()}}else this.operationalHourId=this.operationalHourDrop.value,this.operationalHourName=this.operationalHourDrop.text,this.isOperatorationalDropChanged&&this.setOperationalDropData(),this.tab.enableTab(1,!0),this.tab.enableTab(0,!1)},500));break;case"add-sla-reminder":this.validateSLAMetricTarget(),this.validateMandatorySLAMetricFields(),this.checkErrorElement(),0===this.invalidTimeCount&&this.maskedValue>0&&!this.slaTimeFieldsRequired&&!this.invalidResponseTime&&(this.tab.enableTab(2,!0),this.tab.enableTab(1,!1),this.isReminderSection=!0);break;case"add-sla-escalation":this.isReminderSection=!1,this.tab.enableTab(3,!0),this.tab.enableTab(2,!1);break;case"post-sla-policy":this.saveSLA();break;case"goto-set-condition":this.isOperatorationalDropChanged=!1,this.tab.enableTab(0,!0),this.tab.select(0),this.tab.enableTab(1,!1);break;case"goback-set-target":this.tab.enableTab(1,!0),this.tab.select(1),this.tab.enableTab(2,!1);break;case"goback-add-reminder":this.tab.enableTab(2,!0),this.tab.select(2),this.tab.enableTab(3,!1),this.isReminderSection=!0}}setQueryBuilderPlaceholder(e,t,i){const n=e.element.querySelectorAll(".e-rule-operator label");Object(S.X)(n)||n.forEach(e=>{e.innerText=i});const s=e.element.querySelectorAll(".e-rule-filter label");Object(S.X)(s)||s.forEach(e=>{e.innerText=t})}setReminderQueryBuilderLabel(e){setTimeout(()=>{const t=e.element.querySelectorAll(".e-rule-field");let i=0;t.forEach(e=>{const t=Object(S.F)("div");t.innerHTML=`<label class="font-13 query-label"> ${this.reminderQueryBuilderLabel[i].key} </label>`,e.parentElement.insertBefore(t,e),++i})})}setReminderQueryBuilderHeader(e){setTimeout(()=>{const t=e.element.querySelectorAll(".e-group-body"),i=Object(S.F)("div",{className:"flex-horizontal"});i.innerHTML=`<label class="font-13 query-header no-margin"> ${Object(g.a)("DURATION")} </label>\n            <label class="font-13 query-header no-margin" style="min-width: 187px"> ${Object(g.a)("GROUP")} </label>\n            <label class="font-13 query-header no-margin"> ${Object(g.a)("AGENT")} </label>`,t[0].parentElement.insertBefore(i,t[0])})}setEscalationQueryBuilderLabel(e){const t=e.element.querySelectorAll(".e-rule-field");let i=0;t.forEach(e=>{const t=Object(S.F)("div");t.innerHTML=`<label class="font-13 query-label"> ${this.escalationQueryBuilderLabel[i].key} </label>`,e.parentElement.insertBefore(t,e),++i})}setEscalationQueryBuilderHeader(e){setTimeout(()=>{const t=e.element.querySelectorAll(".e-group-body"),i=Object(S.F)("div",{className:"flex-horizontal"});i.innerHTML=`<label class="font-13 query-header no-margin"> ${Object(g.a)("DURATION")} </label>\n            <label class="font-13 query-header no-margin" style="min-width: 187px"> ${Object(g.a)("GROUP")} </label>\n            <label class="font-13 query-header no-margin"> ${Object(g.a)("AGENT")} </label>`,t[0].parentElement.insertBefore(i,t[0])})}tabSelecting(e){e.isSwiped&&(e.cancel=!0)}selectQryBldr(e){this.itemsList=this.items;for(let t=0;t<this.itemsList.length;t++){for(let e=0;e<this.itemsList[t].operators.length;e++){const i=this.itemsList[t].operators[e];Object(ie.n)(i)&&(this.itemsList[t].operators[e]=Object(ie.n)(i))}this.itemsList[t].template=Object(ie.b)(e,this.ticketConditionSection,this.queryBuildervalueUpdate,this.itemsList[t])}return this.itemsList}ticketQueryBuilderCreated(){setTimeout(()=>{const e=this.ticketQuerybuilder.element.querySelector(".e-addrulegroup");if(e){const t=Object(S.M)(e,"dropdown-btn");t&&(t.cssClass="e-round e-caret-hide hd-query-action-rule e-addrulegroup")}this.styleChange(this.ticketQuerybuilder)})}ticketQueryBuilderChange(e){e&&("deleteRule"!==e.type&&"insertRule"!==e.type||(this.conditionRuleDel=1===this.ticketQuerybuilder.rule.rules.length)),this.ticketQuerybuilder.rule.rules.length>0&&(this.ticketQuerybuilder.rule.rules.length>1||""!==this.ticketQuerybuilder.rule.rules[0].field)&&(this.validCondition=this.ticketQuerybuilder.validateFields()),this.styleChange(this.ticketQuerybuilder),e&&"deleteRule"===e.type&&0===this.ticketQuerybuilder.rule.rules.length&&this.ticketQuerybuilder.addRuleElement(this.ticketQuerybuilder.element.querySelector(".e-group-container"),{})}ticketQueryBuilderRuleChange(){this.validCondition=this.ticketQuerybuilder.validateFields()}reminderQuerybuilderCreated(){setTimeout(()=>{const e=this.reminderQuerybuilder.element.querySelector(".e-addrulegroup");if(e){const t=Object(S.M)(e,"dropdown-btn");t&&(t.cssClass="e-round e-caret-hide hd-query-action-rule e-addrulegroup")}}),this.styleChange(this.reminderQuerybuilder),setTimeout(()=>{this.setReminderQueryBuilderHeader(this.reminderQuerybuilder),this.setReminderQueryBuilderLabel(this.reminderQuerybuilder),this.setQueryBuilderPlaceholder(this.reminderQuerybuilder,Object(g.a)("REMINDER"),Object(g.a)("DURATION"))})}styleChange(e){const t=e.element.getElementsByClassName(".e-control .e-textbox"),i=e.element.getElementsByClassName("e-control e-dropdownlist");for(let n=0;n<t.length;n++)Object(S.M)(t[n],"textbox").dataBind();for(let n=0;n<i.length;n++){const t=Object(S.M)(i[n],"dropdownlist");t.allowFiltering=!0,e.element.classList.contains("hd-query-condition")&&t.element.parentElement.parentElement.classList.contains("e-rule-filter")&&(t.filterType="Contains",t.fields.groupBy="fieldGroupName"),t.filterBarPlaceholder=Object(g.a)("SEARCH"),t.popupHeight="200px"}}reminderQuerybuilderChange(e){this.reminderQuerybuilder.rule.rules.length>0&&(this.reminderQuerybuilder.rule.rules.length>1||""!==this.reminderQuerybuilder.rule.rules[0].field)&&(this.validCondition=this.reminderQuerybuilder.validateFields()),e&&("deleteRule"!==e.type&&"insertRule"!==e.type&&"field"!==e.type||this.framUniqFieldsInActionQB(this.reminderQuerybuilder)),this.ruleReminderRequired=!1,this.styleChange(this.reminderQuerybuilder),setTimeout(()=>{this.setQueryBuilderPlaceholder(this.reminderQuerybuilder,Object(g.a)("REMINDER"),Object(g.a)("DURATION"))})}queryBuildervalueUpdate(e,t,i){e.notifyChange(i,t)}reminderQuerybuilderRuleChange(){this.validCondition=this.reminderQuerybuilder.validateFields()}escalationQuerybuilderCreated(){setTimeout(()=>{const e=this.escalationQuerybuilder.element.querySelector(".e-addrulegroup");if(e){const t=Object(S.M)(e,"dropdown-btn");t&&(t.cssClass="e-round e-caret-hide hd-query-action-rule e-addrulegroup")}}),this.styleChange(this.escalationQuerybuilder),setTimeout(()=>{this.setEscalationQueryBuilderHeader(this.escalationQuerybuilder),this.setEscalationQueryBuilderLabel(this.escalationQuerybuilder),this.setQueryBuilderPlaceholder(this.escalationQuerybuilder,Object(g.a)("ESCALATION"),Object(g.a)("DURATION"))})}escalationQuerybuilderChange(e){this.escalationQuerybuilder.rule.rules.length>0&&(this.escalationQuerybuilder.rule.rules.length>1||""!==this.escalationQuerybuilder.rule.rules[0].field)&&(this.validCondition=this.escalationQuerybuilder.validateFields()),e&&("deleteRule"!==e.type&&"insertRule"!==e.type&&"field"!==e.type||this.framUniqFieldsInActionQB(this.escalationQuerybuilder)),this.ruleEscalationRequired=!1,this.styleChange(this.escalationQuerybuilder),setTimeout(()=>{this.setQueryBuilderPlaceholder(this.escalationQuerybuilder,Object(g.a)("ESCALATION"),Object(g.a)("DURATION"))})}escalationQuerybuilderRuleChange(){this.validCondition=this.escalationQuerybuilder.validateFields()}getCurrentDropDownObject(e,t,i){return this[e]._results.filter(e=>e.element.getAttribute("data-column")===t&&e.element.getAttribute("data-index")===i.toString())}getAllOperatorDropObject(e,t){return this[e]._results.filter(e=>e.element.getAttribute("data-column")===t)}setOperationalDropData(){setTimeout(()=>{this.getAllOperatorDropObject("dropdown",this.slaTargetBusinessHourColumn).map(e=>{if(e&&e.element){const t=this.businessHourDataConfig.filter(e=>0===e.value);this.businessHourDataConfig=t,Object(S.X)(this.operationalHourId)||0===this.operationalHourId?e.index=0:(e.addItem({text:this.operationalHourName,value:this.operationalHourId},1),e.index=1)}})})}businessHourDataBound(e,t,i){setTimeout(()=>{this.getCurrentDropDownObject("dropdown",this.slaTargetBusinessHourColumn,e).map(e=>{e&&e.element&&(this.isNewSLAPolicy?Object(S.X)(this.operationalHourId)||0===this.operationalHourId||(e.addItem({text:this.operationalHourName,value:this.operationalHourId},1),e.index=1):Object(S.X)(t)||Object(S.X)(this.operationalHourId)||0===this.operationalHourId?Object(S.X)(this.operationalHourId)||0===this.operationalHourId||(e.addItem({text:this.operationalHourName,value:this.operationalHourId},1),e.index=this.isOperatorationalDropChanged?1:0):t===this.operationalHourId?(e.addItem({text:i,value:t},1),e.index=1):(e.addItem({text:this.operationalHourName,value:this.operationalHourId},1),e.index=1)),e.popupWidth="220px"})})}getAllEj2Objects(e){return this[e]._results.filter(e=>"true"===e.element.getAttribute("data-mandatory"))}getAllObjects(e,t){return this[e]._results.filter(e=>e.element.getAttribute("data-column")===t)}getCurrentEj2Objects(e,t,i){return this[t]._results.filter("dropdown"===t?t=>t.element.getAttribute("data-index")===e.toString()&&t.placeholder===i:t=>t.element.getAttribute("data-index")===e.toString()&&t.element.className.includes(i))}firstResponseFocusOut(e,t){this.textBoxFocusOut(e,t)}everyResponseFocusOut(e,t){this.textBoxFocusOut(e,t)}resolutionFocusOut(e,t){this.textBoxFocusOut(e,t)}firstResponseChange(e,t){this.textBoxFocusOut(e,t)}everyResponseChange(e,t){this.textBoxFocusOut(e,t)}resolutionChange(e,t){this.textBoxFocusOut(e,t)}textBoxFocusOut(e,t){this.slaTimeFieldsRequired=!1;const i=this.getCurrentEj2Objects(e,"numerictextbox",t),n=this.getCurrentEj2Objects(e,"dropdown",t);if(Object(S.X)(i[0].value))return this.invalidTimeCount=0,void this.customErrorAppend(e,t,"");this.invalidTimeCount=0;const s=i[0].value,o=n[0].value;return s<30&&o===re.Minutes?(++this.invalidTimeCount,void this.customErrorAppend(e,t,this.invalidTimeErrorMessage)):s>8760&&o===re.Hours||s>365&&o===re.Days||s>525600&&o===re.Minutes?(++this.invalidTimeCount,void this.customErrorAppend(e,t,this.durationExceedErrorMessage)):0===s&&o===re.Hours||0===s&&o===re.Days?(++this.invalidTimeCount,void this.customErrorAppend(e,t,this.invalidTimeErrorMessage)):(this.invalidTimeCount=0,this.customErrorAppend(e,t,""),void this.validateSLAResolutionTime(e))}validateSLAResolutionTime(e){const t=this.getCurrentEj2Objects(e,"numerictextbox",ce.TimeToFirstReply),i=this.getCurrentEj2Objects(e,"dropdown",ce.TimeToFirstReply),n=this.getCurrentEj2Objects(e,"numerictextbox",ce.TimeToNextReply),s=this.getCurrentEj2Objects(e,"dropdown",ce.TimeToNextReply),o=this.getCurrentEj2Objects(e,"numerictextbox",ce.ResolutionTime),r=this.getCurrentEj2Objects(e,"dropdown",ce.ResolutionTime);if(!Object(S.X)(t[0].value)&&!Object(S.X)(o[0].value)){const a=t[0].value,l=n[0].value,c=o[0].value,u=i[0].value,d=s[0].value,h=r[0].value,p=u==re.Hours?60*a:u==re.Days?24*a*60:a,b=d==re.Hours?60*l:d==re.Days?24*l*60:l,m=h==re.Hours?60*c:h==re.Days?24*c*60:c;p>=m?(this.invalidResponseTime=!0,++this.invalidTimeCount,this.customErrorAppend(e,ce.TimeToFirstReply,Object(g.a)("INVALIDFIRSTRESPONSETIME"))):(this.invalidResponseTime=!1,this.invalidTimeCount>0&&--this.invalidTimeCount,this.customErrorAppend(e,ce.TimeToFirstReply,""),(p<30||p<30)&&this.textBoxFocusOut(e,ce.TimeToFirstReply)),b>=m?(this.invalidResponseTime=!0,++this.invalidTimeCount,this.customErrorAppend(e,ce.TimeToNextReply,Object(g.a)("INVALIDFIRSTRESPONSETIME"))):(this.invalidResponseTime=!1,this.invalidTimeCount>0&&--this.invalidTimeCount,this.customErrorAppend(e,ce.TimeToNextReply,""),(b<30||b<30)&&this.textBoxFocusOut(e,ce.TimeToNextReply))}}getDropObject(e,t){return this[e]._results.filter(e=>e.placeholder===t)}customErrorAppend(e,t,i){const n=this.slaForm;if(!n)return;const s=n.nativeElement.querySelectorAll(".custom-error span.error"),o=this.getCurrentElement(s,e,t);o&&this.invalidTimeCount>0?(o.classList.add("custom-error-appended"),o.innerText=i):(o.classList.remove("custom-error-appended"),o.innerText="")}checkErrorElement(){const e=this.slaForm.nativeElement.querySelectorAll(".custom-error-appended");this.invalidResponseTime=e.length>0}getCurrentElement(e,t,i){for(let n=0;n<e.length;n++)if(e[n].getAttribute("data-index")===t.toString()&&e[n].getAttribute("name")===i.toString())return e[n]}formErrorEleFocus(){if(this.slaForm&&this.slaForm.nativeElement){const e=this.slaForm.nativeElement;let t;if(t=e.querySelector(".error-msg"),t||(t=e.querySelector(".custom-error-appended")),t||(t=e.querySelector(".e-file-invalid")),t||(t=e.querySelector(".e-error")),!t)return;const i=Object(S.C)(t,".form-group");if(i){let e=i.querySelector("input");e||(e=i.querySelector("textarea")),e&&e.focus()}else e.querySelector("input").focus()}}newCondition(e,t){t.validateFields()&&t.addRuleElement(t.element.querySelector(".e-group-container"),{})}checkReminderValidation(){this.isValidFields=!!this.reminderQuerybuilder.validateFields()}checkEscalationValidation(){this.isValidFields=!!this.escalationQuerybuilder.validateFields()}getEj2ObjectsByName(e,t){return this[e]._results.filter("dropdown"===e?e=>e.element.getAttribute("data-column")===t:"switch"===e?e=>e.element.getAttribute("name")===t:e=>e.element.className.includes(t))}targetJSONConverter(){this.firstResponseTime=[],this.resolutionTime=[],this.resolutionTime=[],this.reminderEnabledJson=[],this.escalationEnabledJson=[],this.businessHourIdJson=[];const e=this.getEj2ObjectsByName("numerictextbox","first-response-time"),t=this.getEj2ObjectsByName("numerictextbox","every-response-time"),i=this.getEj2ObjectsByName("numerictextbox","resolution-time"),n=this.getDropObject("dropdown","first-response-time"),s=this.getDropObject("dropdown","every-response-time"),o=this.getDropObject("dropdown","resolution-time"),r=this.getEj2ObjectsByName("switch","reminder-enabled"),a=this.getEj2ObjectsByName("switch","escalation-enabled"),l=this.getEj2ObjectsByName("dropdown",this.slaTargetBusinessHourColumn),c=this.getTargetTimeJson(e,n,ne.FirstResponseTime,this.firstResponseTime),u=this.getTargetTimeJson(t,s,ne.ResponseTime,this.responseTime),d=this.getTargetTimeJson(i,o,ne.ResolutionTime,this.resolutionTime),h=this.getTargetReminderEscalationJson(r,ne.ReminderEnabled,this.reminderEnabledJson),p=this.getTargetReminderEscalationJson(a,ne.EscalationEnabled,this.escalationEnabledJson),b=this.getTargetBusinessHourJson(l),m=this.mergedArray(c,u),g=this.mergedArray(m,d),f=this.mergedArray(g,h),y=this.mergedArray(f,p);return this.mergedArray(y,b)}getTargetTimeJson(e,t,i,n){let s=4,o=0;return e.map(e=>{if(i===ne.FirstResponseTime){const i={field:"priority",value:s,firstResponseTime:Object(S.X)(e.value)?null:e.value,firstResponseTimeOptionId:Object(S.X)(e.value)?parseInt(re.Hours,0):parseInt(t[o].value,0)};n.push(i),--s}else if(i===ne.ResponseTime){const i={responseTime:Object(S.X)(e.value)?null:e.value,responseTimeOptionId:Object(S.X)(e.value)?parseInt(re.Hours,0):parseInt(t[o].value,0)};n.push(i)}else{const i={resolutionTime:Object(S.X)(e.value)?null:e.value,resolutionTimeOptionId:Object(S.X)(e.value)?parseInt(re.Days,0):parseInt(t[o].value,0)};n.push(i)}++o}),n}getTargetReminderEscalationJson(e,t,i){return e.map(e=>{i.push(t===ne.ReminderEnabled?{isReminderEnabled:e.checked}:{isEscalationEnabled:e.checked})}),i}getTargetBusinessHourJson(e){return e.map(e=>{this.businessHourIdJson.push({businessHourId:0!==e.itemData.value?e.itemData.value:null,businessHourText:e.itemData.text})}),this.businessHourIdJson}mergedArray(e,t){const i=[];return e.forEach((e,n)=>{i.push(Object.assign({},e,t[n]))}),i}getReminderJson(){const e=this.reminderQuerybuilder.rule.rules,t={};return Object(b.D)(e[0].field)?null:(e.map(e=>{if(!Object(b.D)(e.agentId)||!Object(b.D)(e.groupId)){const i=e.field;let n;n=i===se.FirstResponseReminder?ae.FirstResponseReminder:i===se.ResponseReminder?ae.ResponseReminder:ae.ResolutionReminder;const s=[{reminderTime:e.reminderTime.toString(),timeOptionId:e.timeOptionId,agentId:Object(b.D)(e.agentId)?null:e.agentId.toString(),groupId:Object(b.D)(e.groupId)?null:e.groupId.toString(),placeholder:"",action:"",field:e.field,label:e.label,custom:Object(b.D)(e.custom)?null:e.custom,reminderValue:e.operatorValue.toString(),sortOrder:n}];t[i]=s}}),0===Object.keys(t).length?null:t)}checkResolutionEscalationExists(){let e=0;return this.escalationQuerybuilder.rule.rules.filter(t=>{t.field===oe.ResolutionEscalation&&++e}),e}getEscalationJson(){let e;const t=this.checkResolutionEscalationExists();!Object(S.X)(this.escalationTemplate)&&t>0&&(e=this.escalationTemplate.getLevelsEscalation());const i=this.escalationQuerybuilder.rule.rules,n={};return Object(b.D)(i[0].field)?null:(i.map(e=>{{let t;if(!(e.field===oe.ResolutionEscalation||Object(b.D)(e.agentId)&&Object(b.D)(e.groupId))){const i=e.field;t=i===se.FirstResponseEscalation?le.FirstResponseEscalation:le.ResponseEscalation;const s=[{escalationTime:e.reminderTime.toString(),timeOptionId:e.timeOptionId,agentId:Object(b.D)(e.agentId)?null:e.agentId.toString(),groupId:Object(b.D)(e.groupId)?null:e.groupId.toString(),placeholder:"",action:"",field:e.field,label:e.label,custom:Object(b.D)(e.custom)?null:e.custom,escalationValue:e.operatorValue.toString(),sortOrder:t}];n[i]=s}}}),null!=e&&(n[oe.ResolutionEscalation]=e),0===Object.keys(n).length?null:n)}saveSLA(){this.policyNameFocusOut();let e={};this.nameRequired||this.nameIsError||this.descriptionIsError||this.conditionErrorAndRule||0!==this.invalidTimeCount||!this.isValidFields||0!==this.reminderErrorEleCount||(this.spinService.showSpinner(),e={name:this.policyName.value.trim(),description:Object(S.X)(this.policyDescription)||Object(S.X)(this.policyDescription.value)?null:this.policyDescription.value.trim(),businessHourId:0===this.operationalHourDrop.value?null:this.operationalHourDrop.value,isCalculateResolutionFromCreationTime:!Object(S.X)(this.creationTime)&&this.creationTime.checked,ticketTarget:this.isDefaultSLA?this.ticketTarget:JSON.stringify({condition:"and",rules:this.ticketQuerybuilder.rule.rules}),slaMetricTarget:JSON.stringify(this.targetJSONConverter()),reminder:Object(S.X)(this.getReminderJson())?null:JSON.stringify(this.getReminderJson()),escalation:Object(S.X)(this.getEscalationJson())?null:JSON.stringify(this.getEscalationJson())},this.postSLA(e))}postSLA(e){this.isNewSLAPolicy?this.slaService.addBSLA(e).then(e=>{e&&(Object(f.V)(!1),this.spinService.hideSpinner(),this.toastService.successToast(e.message),this.router.navigateByUrl("/admin/sla"))}):this.slaService.editBSLA(e,this.slaId).then(e=>{e&&(Object(f.V)(!1),this.spinService.hideSpinner(),this.toastService.successToast(e.message),this.router.navigateByUrl("/admin/sla"))})}framUniqFieldsInActionQB(e){const t=this.getColumnData(e);e.element.querySelectorAll(".e-rule-list .e-rule-field .e-rule-filter .e-control.e-dropdownlist").forEach(i=>{this.skipIndexDataSource(i.ej2_instances[0],e.columns,JSON.parse(JSON.stringify(t)))})}skipIndexDataSource(e,t,i){-1!==i.indexOf(e.value)&&i.splice(i.indexOf(e.value),1);const n=[];t.forEach(e=>{-1===i.indexOf(e.field)&&n.push(e)}),e.dataSource=n,e.dataBind()}getColumnData(e){const t=[];return e.getRules().rules.forEach(e=>{e.field&&t.push(e.field)}),t}validateSLAMetricTarget(){this.invalidTimeCount=0,this.maskedValue=0;let e=0;const t=this.getAllObjects("numerictextbox",this.slaTimeFieldsColumn),i=this.getAllObjects("dropdown",this.slaTimeFieldsColumn);return t.map(()=>{if(!Object(S.X)(t[e].value)){++this.maskedValue;const n=t[e].value,s=i[e].value;n<30&&s===re.Minutes||n>8760&&s===re.Hours||n>365&&s===re.Days||n>525600&&s===re.Minutes||0===n&&s===re.Hours||0===n&&s===re.Days?++this.invalidTimeCount:++this.maskedValue}++e}),this.maskedValue}validateMandatorySLAMetricFields(){this.mandatoryValueCount=0;let e=0;const t=this.getAllEj2Objects("numerictextbox");t.map(()=>{Object(S.X)(t[e].value)?this.slaTimeFieldsRequired=!0:(this.slaTimeFieldsRequired=!1,++e)})}isConditionTabValid(){this.nameRequired=Object(S.X)(this.policyName.value),this.validCondition=this.ticketQuerybuilder.rule.rules.length>0&&""===this.ticketQuerybuilder.rule.rules[0].field||this.ticketQuerybuilder.rule.rules.length>0&&""!==this.ticketQuerybuilder.rule.rules[0].field?this.ticketQuerybuilder.validateFields():!(this.ticketQuerybuilder.rule.rules.length>1)||this.ticketQuerybuilder.validateFields()}validateCondition(e){const t=e.element.querySelectorAll(".e-rule-value:not(.e-hide) .e-dropdownlist, .e-rule-value:not(.e-hide) .e-textbox, .e-rule-value:not(.e-hide) .e-multiselect .e-control, .e-rule-value:not(.e-hide) .e-datepicker");for(let i=0;i<t.length;i++)t[i].ej2_instances[0].blur()}validateConditionValueField(){const e=this.ticketQuerybuilder.element.querySelectorAll(".e-error");this.conditionErrorAndRule=e.length>0}assigneeOrgroupBlur(e,t,i){const n=i.querySelector(".validation-error-msg");Object(S.X)(e.value)&&Object(S.X)(t.value)?(n.classList.add("show-validation"),n.classList.remove("hide-validation")):(n.classList.remove("show-validation"),n.classList.add("hide-validation"))}validateReminder(){const e=this.reminderQuerybuilder.element.children[0].querySelectorAll(".e-rule-container");for(let t=0;t<e.length;t++){const i=e[t].querySelector(".groupDropDown").ej2_instances[0],n=e[t].querySelector(".assigneeDropDown").ej2_instances[0];this.assigneeOrgroupBlur(i,n,e[t])}}validateEscalation(){const e=this.escalationQuerybuilder.element.children[0].querySelectorAll(".e-rule-container");for(let t=0;t<e.length;t++){const i=e[t].querySelector(".groupDropDown"),n=Object(S.X)(i)?null:i.ej2_instances[0],s=e[t].querySelector(".assigneeDropDown"),o=Object(S.X)(s)?null:s.ej2_instances[0];Object(S.X)(n)||Object(S.X)(o)||this.assigneeOrgroupBlur(n,o,e[t])}}operationalHourCreated(){setTimeout(()=>{this.operationalHourDrop&&this.operationalHourDrop.element&&Object(b.h)(this.operationalHourDrop.element.parentElement)})}operationalHourFocusOut(){this.operationalHourRequired=0!==this.operationalHourDrop.value&&!this.operationalHourDrop.value}operationalHourChange(){this.isOperatorationalDropChanged=!0,this.operationalHourRequired=!!Object(S.X)(this.operationalHourDrop.value)}operationalHourDataBound(e){const t=e.items.length;for(let i=0;i<t&&!this.newItemAdded&&0!==e.items[i].id;i++);this.newItemAdded&&(this.operationalHourDrop&&this.operationalHourDrop.element&&(this.operationalHourDrop.addItem({id:0,name:Object(g.a)("ALLDAYS24*7")},0),Object(S.X)(this.businessId)&&(this.operationalHourDrop.index=0)),this.newItemAdded=!1)}setTimeFieldDropValue(e,t){return this.isNewSLAPolicy?t===ne.ResolutionTime?re.Days:re.Hours:e.toString()}}return e.\u0275fac=function(t){return new(t||e)(C.Nb(d.g),C.Nb(d.a),C.Nb(A.a),C.Nb(I.a),C.Nb(ue.a),C.Nb(P),C.Nb(C.h),C.Nb(C.O))},e.\u0275cmp=C.Hb({type:e,selectors:[["app-addedit-sla-policy"]],viewQuery:function(e,t){var i;1&e&&(C.Qc(Te,!0),C.Qc(Se,!0),C.Qc(Ce,!0),C.Qc(xe,!0),C.Qc(Ee,!0),C.Qc(Ae,!0),C.Qc(Ie,!0),C.Qc(De,!0),C.Qc(Pe,!0),C.Qc(Le,!0),C.Qc(je,!0),C.Qc(Re,!0),C.Qc(Me,!0),C.Qc(we,!0),C.Qc(_e,!0),C.Qc(Ne,!0),C.Qc(ke,!0),C.Qc(a.f,!0),C.Qc(l.e,!0),C.Qc(c.k,!0)),2&e&&(C.xc(i=C.fc())&&(t.policyName=i.first),C.xc(i=C.fc())&&(t.policyDescription=i.first),C.xc(i=C.fc())&&(t.ticketQuerybuilder=i.first),C.xc(i=C.fc())&&(t.tab=i.first),C.xc(i=C.fc())&&(t.slaForm=i.first),C.xc(i=C.fc())&&(t.reminderQuerybuilder=i.first),C.xc(i=C.fc())&&(t.slaTargetContainer=i.first),C.xc(i=C.fc())&&(t.creationTime=i.first),C.xc(i=C.fc())&&(t.assigneeTemplate=i.first),C.xc(i=C.fc())&&(t.assigneeGroupDrop=i.first),C.xc(i=C.fc())&&(t.assigneeDrop=i.first),C.xc(i=C.fc())&&(t.escalationQuerybuilder=i.first),C.xc(i=C.fc())&&(t.escalationLevel=i.first),C.xc(i=C.fc())&&(t.escalationLevelContainer=i.first),C.xc(i=C.fc())&&(t.ticketConditionSection=i.first),C.xc(i=C.fc())&&(t.escalationTemplate=i.first),C.xc(i=C.fc())&&(t.operationalHourDrop=i.first),C.xc(i=C.fc())&&(t.numerictextbox=i),C.xc(i=C.fc())&&(t.dropdown=i),C.xc(i=C.fc())&&(t.switch=i))},inputs:{name:"name",description:"description",resolutionFromCreationTime:"resolutionFromCreationTime",ticketTarget:"ticketTarget",slaMetricTarget:"slaMetricTarget",reminder:"reminder",escalation:"escalation",isDefaultSLA:"isDefaultSLA",slaId:"slaId",resolutionEscalation:"resolutionEscalation",businessId:"businessId"},decls:27,vars:6,consts:[[1,"control-section","p-3"],["slaForm",""],[1,"col-lg-12","control-section"],[1,"sla-policy-container"],[1,"control-section","pt-3"],[1,"col-lg-9","control-section","p-0"],["slaContainer",""],["showCloseButton","false",3,"animation","selecting"],["tab",""],[1,"mb-3",3,"header"],["content",""],["disabled","true",3,"header"],["errorInputValidation",""],[4,"ngIf"],["assigneeTemplate",""],["id","set-condition",1,"pt-4"],["ticketConditionSection",""],[1,"form-group","row","flex-vertical"],[1,"col"],[1,"cutom-field-label"],[1,"error"],["autocomplete","off",3,"placeholder","value","htmlAttributes","enabled","created","blur","change","input"],["policyName",""],["class","error-msg",4,"ngIf"],["autocomplete","off",3,"placeholder","value","htmlAttributes","change"],["policyDescription",""],["id","operationalHours","popupHeight","200px","index","0",3,"placeholder","dataSource","value","fields","query","allowFiltering","filterBarPlaceholder","htmlAttributes","dataBound","created","change","blur"],["operationalHourDrop",""],[1,"form-group","row","flex-horizontal","mb-4","mt-4"],[1,"padding-left-15px","pr-3"],[1,"font-14","mb-2"],[1,"col","flex-horizontal"],[1,"margin-right-20px"],["name","sla",3,"label","checked"],["creationTime",""],["class","mt-25",4,"ngIf"],[1,"btn-container","mb-3","mt-3","align-right"],["type","button","id","set-sla-target","cssClass","e-btn","ejs-button","",1,"e-lib","e-control","e-primary",3,"isPrimary","click"],[1,"error-msg"],[4,"ngTemplateOutlet"],[1,"mt-25"],[1,"query-rule-prop-container"],[1,"border-bottom",3,"ngClass"],[1,"radio-style"],[1,"fw-600"],["id","ticket-query-builder","width","100%","maxGroupCount","1","allowValidation","true","cssClass","hd-query-condition",3,"columns","rule","created","change","ruleChange"],["ticketQuerybuilder",""],[1,"p-1","pl-2","query-action-button"],["ejs-button","","iconCss","hd-icon hd-plus",1,"e-btn","e-flat","no-border",3,"click"],["id","set-target"],[1,"form-group","row","flex-vertical","no-margin"],["class","card no-border cursor-pointer",4,"ngFor","ngForOf"],["type","button","id","goto-set-condition","cssClass","e-outline","ejs-button","",1,"e-btn",3,"click"],["type","button","id","add-sla-reminder","cssClass","e-btn","ejs-button","",1,"e-btn","e-lib","e-control","e-primary",3,"isPrimary","click"],[1,"card","no-border","cursor-pointer"],[4,"ngFor","ngForOf"],[1,"sla-summary-container","card-content"],[1,"sla-contents","flex-horizontal","padding-right-0"],[1,"flex-horizontal",2,"max-width","100px"],[1,"sla-status","ellipsis","no-wrap","font-13"],[1,"priority-color"],[1,"sla-status","ellipsis","no-wrap","font-13","status-text"],[1,"align-right",2,"margin-bottom","auto"],[1,"sla-policy-property","flex-vertical","pr-3"],[1,"mb-2"],[2,"align-self","center"],["name","reminder-enabled","cssClass","switch-class",3,"checked"],[1,"sla-policy-property","flex-vertical"],["name","escalation-enabled","cssClass","switch-class",3,"checked"],[1,"sla-footer-container","flex-horizontal","border-top"],["slaTargetContainer",""],[1,"sla-footer","flex-horizontal","full-width"],[1,"flex-vertical","footer-sections",2,"max-width","200px"],[1,"no-margin","secondary","font-13","margin-bottom-10px","fw-500"],[1,"sla-time-section"],[2,"min-width","60px"],["cssClass","sla-target-textbox","format","0","autocomplete","off","decimals","0","min","0","autocomplete","off",1,"first-response-time",3,"htmlAttributes","value","blur"],[1,"sla-time-dropdown",2,"min-width","95px"],["index","1","placeholder","first-response-time","name","first-response-time",3,"dataSource","value","htmlAttributes","fields","change","blur"],[1,"flex-vertical","flex","footer-sections","full-width","editable-section",2,"max-width","200px"],["cssClass","sla-target-textbox","format","0","autocomplete","off","min","0","autocomplete","off","decimals","0",1,"every-response-time",3,"htmlAttributes","value","blur"],["index","1","placeholder","every-response-time","name","every-response-time",3,"dataSource","value","htmlAttributes","fields","change","blur"],["cssClass","sla-target-textbox","format","0","autocomplete","off","min","0","autocomplete","off","decimals","0",1,"resolution-time",3,"htmlAttributes","value","blur"],["index","2","placeholder","resolution-time","name","resolution-time",3,"dataSource","value","htmlAttributes","fields","change","blur"],[2,"min-width","150px"],["index","0","popupHeight","200px",3,"dataSource","placeholder","htmlAttributes","dataBound"],[1,"sla-footer-container","flex-horizontal"],[1,"flex-vertical","footer-sections","no-padding",2,"min-width","180px","max-width","200px"],[1,"custom-error","error-message-padding"],["name","first-response-time",1,"error","font-12"],[1,"flex-vertical","flex","footer-sections","no-padding",2,"min-width","180px","max-width","200px"],["name","every-response-time",1,"error","font-12"],["name","resolution-time",1,"error","font-12"],[1,"error","font-12"],["id","add-reminder",1,"pt-4"],[1,"query-rule-action-container"],["id","reminder-query-builder","width","100%","maxGroupCount","1","cssClass","hd-reminder-section","allowValidation","true",3,"columns","rule","created","change","ruleChange"],["reminderQuerybuilder",""],["type","button","id","goback-set-target","cssClass","e-outline","ejs-button","",1,"e-btn",3,"click"],["type","button","id","add-sla-escalation","cssClass","e-btn","ejs-button","",1,"e-btn","e-lib","e-control","e-primary",3,"isPrimary","click"],["id","add-escalation",1,"pt-4"],["id","escalation-query-builder","width","100%","maxGroupCount","1","cssClass","hd-escalation-section","allowValidation","true",3,"columns","rule","created","change","ruleChange"],["escalationQuerybuilder",""],[1,"btn-container","mb-3","mt-4","align-right"],["type","button","id","goback-add-reminder","cssClass","e-outline","ejs-button","",1,"e-btn",3,"click"],["type","button","id","post-sla-policy","ejs-button","",1,"e-btn",3,"isPrimary","click"],[1,"error",3,"innerHTML"],["escalationLevel",""],["escalationLevelContainer",""],["escalationTemplate",""],[1,"form-group","row"],[1,"col-6"],["mode","CheckBox","ngClass","groupDropDown","popupHeight","200px",1,"action-added-template","action-assignee",3,"placeholder","dataSource","fields","allowFiltering","showClearButton","filterBarPlaceholder"],["assigneeGroupDrop",""],["itemTemplate",""],[1,"col-6","padding-left-0"],["popupHeight","200px","popupWidth","250px","mode","CheckBox","ngClass","assigneeDropDown",1,"action-added-template-assignee",3,"placeholder","dataSource","fields","allowFiltering","showClearButton","filterBarPlaceholder","itemTemplate"],["assigneeDrop",""],[1,"e-error","hide-validation","validation-error-msg"]],template:function(e,t){1&e&&(C.Tb(0,"div",0,1),C.Tb(2,"div",2),C.Tb(3,"div",3),C.Tb(4,"div",4),C.Tb(5,"div",5,6),C.Tb(7,"ejs-tab",7,8),C.ec("selecting",(function(e){return t.tabSelecting(e)})),C.Tb(9,"e-tabitems"),C.Tb(10,"e-tabitem",9),C.Jc(11,Ve,52,50,"ng-template",null,10,C.Kc),C.Sb(),C.Tb(13,"e-tabitem",11),C.Jc(14,Ke,11,9,"ng-template",null,10,C.Kc),C.Sb(),C.Tb(16,"e-tabitem",11),C.Jc(17,We,14,10,"ng-template",null,10,C.Kc),C.Sb(),C.Tb(19,"e-tabitem",11),C.Jc(20,Ze,14,10,"ng-template",null,10,C.Kc),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Jc(22,Ye,2,4,"ng-template",null,12,C.Kc),C.Jc(24,tt,2,0,void 0,13),C.Jc(25,nt,16,24,"ng-template",null,14,C.Kc)),2&e&&(C.xb(7),C.nc("animation",t.tabAnimationSettings),C.xb(3),C.nc("header",t.headerText[0]),C.xb(3),C.nc("header",t.headerText[1]),C.xb(3),C.nc("header",t.headerText[2]),C.xb(3),C.nc("header",t.headerText[3]),C.xb(5),C.nc("ngIf",t.enableResolutionEscalation))},directives:[L.m,L.o,L.n,n.n,a.i,l.e,c.i,c.c,n.r,n.l,j.d,n.m,c.k,a.f,ve,l.h],pipes:[w.a,Oe.a],styles:['body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.sla-policy-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:15px}.sla-policy-container[_ngcontent-%COMP%]   .font-12px[_ngcontent-%COMP%]{font-size:12px!important}.sla-policy-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:15px 0;padding:15px 0 0;position:relative}.sla-policy-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .sla-policy-property[_ngcontent-%COMP%]{bottom:8px;position:relative}.sla-policy-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 1px 2px 0 rgba(0,0,0,.2)}.sla-policy-container[_ngcontent-%COMP%]   .sla-summary-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(.sla-footer-container){padding-left:15px}.sla-policy-container[_ngcontent-%COMP%]   .sla-contents[_ngcontent-%COMP%]   .sla-status[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center}.sla-policy-container[_ngcontent-%COMP%]   .sla-contents[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:25px}.sla-policy-container[_ngcontent-%COMP%]   .sla-contents[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sla-policy-container[_ngcontent-%COMP%]   .sla-footer-container[_ngcontent-%COMP%]   .footer-sections[_ngcontent-%COMP%]{padding:5px 15px}.sla-policy-container[_ngcontent-%COMP%]   .sla-footer-container[_ngcontent-%COMP%]   .footer-sections[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:inherit;font-size:13px;margin-bottom:14px!important;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sla-policy-container[_ngcontent-%COMP%]   .sla-footer-container[_ngcontent-%COMP%]   .footer-sections[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{height:36px;line-height:36px}.sla-policy-container[_ngcontent-%COMP%]   .sla-footer-container[_ngcontent-%COMP%]   .sla-time-section[_ngcontent-%COMP%]{display:inline-flex;width:100%}.sla-policy-container[_ngcontent-%COMP%]   .sla-footer-container[_ngcontent-%COMP%]   .e-numeric[_ngcontent-%COMP%]   .e-input-group-icon[_ngcontent-%COMP%]{display:none}.sla-policy-container[_ngcontent-%COMP%]   .sla-footer-container[_ngcontent-%COMP%]   .e-numeric.e-input-group.e-outline.e-small[_ngcontent-%COMP%]{border-radius:4px 0 0 4px!important;border-right-width:0!important}.sla-policy-container[_ngcontent-%COMP%]   .sla-footer-container[_ngcontent-%COMP%]   .sla-time-dropdown[_ngcontent-%COMP%]   .e-dropdownlist[_ngcontent-%COMP%]   .e-input-group[_ngcontent-%COMP%]{border-radius:0 4px 4px 0!important}.sla-policy-container[_ngcontent-%COMP%]   .priority-color[_ngcontent-%COMP%]{content:"";display:inline-block;height:15px;margin-right:5px;width:15px}.sla-policy-container[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{margin-left:6px;margin-top:-5px}.query-rule-action-container[_ngcontent-%COMP%], .query-rule-prop-container[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:4px;box-shadow:0 2px 4px 0 rgba(18,52,77,.06)}.query-rule-action-container[_ngcontent-%COMP%]   .query-action-button[_ngcontent-%COMP%], .query-rule-prop-container[_ngcontent-%COMP%]   .query-action-button[_ngcontent-%COMP%]{background-color:#fff}.query-rule-action-container[_ngcontent-%COMP%]   .e-query-builder[_ngcontent-%COMP%], .query-rule-prop-container[_ngcontent-%COMP%]   .e-query-builder[_ngcontent-%COMP%]{border:0!important}.border-color-action[_ngcontent-%COMP%], .border-color-condition[_ngcontent-%COMP%]{border:1px solid red!important}.hd-reminder-section[_ngcontent-%COMP%]   .e-rule-value-delete[_ngcontent-%COMP%]{display:none}.hd-reminder-section[_ngcontent-%COMP%]   .e-rule-field[_ngcontent-%COMP%]{display:flex}.hd-reminder-section[_ngcontent-%COMP%]   .e-group-header[_ngcontent-%COMP%], .hd-reminder-section[_ngcontent-%COMP%]   .e-group-header[_ngcontent-%COMP%]   .e-btn-group[_ngcontent-%COMP%]{display:none}.hd-reminder-section[_ngcontent-%COMP%]   .e-group-body[_ngcontent-%COMP%]{padding-left:0!important}.hd-reminder-section[_ngcontent-%COMP%]   .e-group-body[_ngcontent-%COMP%]   .e-rule-container[_ngcontent-%COMP%]:after, .hd-reminder-section[_ngcontent-%COMP%]   .e-group-body[_ngcontent-%COMP%]   .e-rule-container[_ngcontent-%COMP%]:before, .hd-reminder-section[_ngcontent-%COMP%]   .e-rule-filter[_ngcontent-%COMP%]{display:none}.hd-reminder-section[_ngcontent-%COMP%]   .e-rule-value[_ngcontent-%COMP%]{align-items:center;display:inline-flex}.hd-reminder-section[_ngcontent-%COMP%]   .e-rule-value.e-show[_ngcontent-%COMP%]{width:unset!important}.e-rule-field[_ngcontent-%COMP%]   .e-rule-value-delete[_ngcontent-%COMP%]   .e-rule-delete[_ngcontent-%COMP%]{float:right!important;position:absolute!important;right:10px!important;top:10px!important}.condition-update-style[_ngcontent-%COMP%]   .e-rule-value[_ngcontent-%COMP%]{width:auto!important}.condition-update-style[_ngcontent-%COMP%]   .e-template[_ngcontent-%COMP%]{display:flex}.condition-update-style[_ngcontent-%COMP%]   .e-template[_ngcontent-%COMP%]   .e-input-group[_ngcontent-%COMP%]:nth-child(2){height:36px!important;margin-left:12px!important;margin-right:12px!important;margin-top:0!important}.condition-update-style[_ngcontent-%COMP%]   .e-template[_ngcontent-%COMP%]   .e-input-group[_ngcontent-%COMP%]:nth-child(4){margin-top:0!important}.action-assignee-style[_ngcontent-%COMP%]   .e-rule-value[_ngcontent-%COMP%]{width:auto!important}.action-assignee-style[_ngcontent-%COMP%]   .e-template[_ngcontent-%COMP%]{display:flex}.action-assignee-style[_ngcontent-%COMP%]   .e-template[_ngcontent-%COMP%]   .e-input-group[_ngcontent-%COMP%]:first-child{margin-right:60px!important}.action-assignee-style[_ngcontent-%COMP%]   .e-template[_ngcontent-%COMP%]   .e-input-group[_ngcontent-%COMP%]:nth-child(2){margin-top:0!important}.hd-escalation-section[_ngcontent-%COMP%]   .e-rule-value-delete[_ngcontent-%COMP%]{display:none}.hd-escalation-section[_ngcontent-%COMP%]   .e-rule-field[_ngcontent-%COMP%]{display:flex}.hd-escalation-section[_ngcontent-%COMP%]   .e-group-header[_ngcontent-%COMP%], .hd-escalation-section[_ngcontent-%COMP%]   .e-group-header[_ngcontent-%COMP%]   .e-btn-group[_ngcontent-%COMP%]{display:none}.hd-escalation-section[_ngcontent-%COMP%]   .e-group-body[_ngcontent-%COMP%]{padding-left:0!important}.hd-escalation-section[_ngcontent-%COMP%]   .e-group-body[_ngcontent-%COMP%]   .e-rule-container[_ngcontent-%COMP%]:after, .hd-escalation-section[_ngcontent-%COMP%]   .e-group-body[_ngcontent-%COMP%]   .e-rule-container[_ngcontent-%COMP%]:before, .hd-escalation-section[_ngcontent-%COMP%]   .e-rule-filter[_ngcontent-%COMP%]{display:none}.hd-escalation-section[_ngcontent-%COMP%]   .e-rule-value[_ngcontent-%COMP%]{align-items:center;display:inline-flex}.hd-escalation-section[_ngcontent-%COMP%]   .e-rule-value.e-show[_ngcontent-%COMP%]{width:unset!important}.button-style[_ngcontent-%COMP%]{border:1px solid #dadfe3!important;border-radius:16px;left:85%;position:relative;top:11px;transform:translateX(-50%)}.hd-rule-value[_ngcontent-%COMP%]   .e-operator[_ngcontent-%COMP%]{display:none!important}.hd-rule-value[_ngcontent-%COMP%]   .e-rule-value.e-show[_ngcontent-%COMP%]:before{content:""!important;min-width:unset!important}.hd-query-condition.hd-del-icon[_ngcontent-%COMP%]   .e-rule-value-delete[_ngcontent-%COMP%]{display:none}.hd-query-condition[_ngcontent-%COMP%]   .e-rule-filter[_ngcontent-%COMP%], .hd-query-condition[_ngcontent-%COMP%]   .e-rule-value.e-show[_ngcontent-%COMP%]{min-width:230px}.hd-query-condition[_ngcontent-%COMP%]   .e-group-header[_ngcontent-%COMP%], .hd-query-condition[_ngcontent-%COMP%]   .e-group-header[_ngcontent-%COMP%]   .e-btn-group[_ngcontent-%COMP%]{display:none}.hd-query-condition[_ngcontent-%COMP%]   .e-group-body[_ngcontent-%COMP%]{padding-left:0!important}.hd-query-condition[_ngcontent-%COMP%]   .e-group-body[_ngcontent-%COMP%]   .e-rule-container[_ngcontent-%COMP%]:after, .hd-query-condition[_ngcontent-%COMP%]   .e-group-body[_ngcontent-%COMP%]   .e-rule-container[_ngcontent-%COMP%]:before{display:none}.radio-style[_ngcontent-%COMP%]{padding:12px 12px 0}.mt-25[_ngcontent-%COMP%]{margin-top:25px}.fw-600[_ngcontent-%COMP%]{font-weight:600}.fw-500[_ngcontent-%COMP%]{font-weight:500}.padding-left-15px[_ngcontent-%COMP%]{padding-left:15px}.margin-right-20px[_ngcontent-%COMP%]{margin-right:20px}.error-message-padding[_ngcontent-%COMP%]{padding-left:20px;padding-right:12px}.margin-bottom-10px[_ngcontent-%COMP%]{margin-bottom:10px!important}']}),e})(),rt=(()=>{class e{constructor(e,t,i,n,s){this.appRootService=e,this.router=t,this.seoService=i,this.spinService=n,this.activatedRoute=s;const o=Object(g.a)("ADMIN")+" / "+Object(g.a)("SLA")+" / "+Object(g.a)("EDIT")+",/admin/sla",r=Object(g.a)("EDIT")+" | "+Object(g.a)("SLA")+" | "+Object(g.a)("ADMIN");this.appRootService.setAppTitleText(o),this.seoService.setHeaderElements({title:r}),this.resolveData=this.activatedRoute.data.subscribe(e=>{this.data=e.data,this.spinService.hideSpinner()}),this.data&&(this.policyName=this.data.name,this.policyDescription=this.data.description,this.resolutionFromCreationTime=this.data.isCalculateResolutionFromCreationTime,this.ticketTarget=JSON.parse(this.data.ticketTarget),this.slaMetricTarget=JSON.parse(this.data.slaMetricTarget),this.reminder=JSON.parse(this.data.reminder),this.escalation=JSON.parse(this.data.escalation),this.isDefaultSLA=this.data.isDefault,this.businessId=this.data.businessHourId,this.resolutionEscalation=Object(S.X)(this.escalation)?null:this.escalation.resolutionEscalation),this.slaId=parseInt(this.activatedRoute.snapshot.paramMap.get("id"),10),this.appRootService.getNavigateUrl(this.router.url.replace("/"+this.slaId,""))}}return e.\u0275fac=function(t){return new(t||e)(C.Nb(x.a),C.Nb(d.g),C.Nb(E.a),C.Nb(A.a),C.Nb(d.a))},e.\u0275cmp=C.Hb({type:e,selectors:[["ng-component"]],decls:2,vars:11,consts:[[3,"name","description","resolutionFromCreationTime","ticketTarget","slaId","businessId","slaMetricTarget","reminder","escalation","isDefaultSLA","resolutionEscalation"]],template:function(e,t){1&e&&(C.Tb(0,"div"),C.Ob(1,"app-addedit-sla-policy",0),C.Sb()),2&e&&(C.xb(1),C.nc("name",t.policyName)("description",t.policyDescription)("resolutionFromCreationTime",t.resolutionFromCreationTime)("ticketTarget",t.ticketTarget)("slaId",t.slaId)("businessId",t.businessId)("slaMetricTarget",t.slaMetricTarget)("reminder",t.reminder)("escalation",t.escalation)("isDefaultSLA",t.isDefaultSLA)("resolutionEscalation",t.resolutionEscalation))},directives:[ot],encapsulation:2}),e})(),at=(()=>{class e{constructor(e,t,i){this.appRootService=e,this.router=t,this.seoService=i;const n=Object(g.a)("ADMIN")+" / "+Object(g.a)("SLA")+" / "+Object(g.a)("ADD")+",/admin/sla",s=Object(g.a)("ADD")+" | "+Object(g.a)("SLA")+" | "+Object(g.a)("ADMIN");this.appRootService.setAppTitleText(n),this.seoService.setHeaderElements({title:s}),this.appRootService.getNavigateUrl(this.router.url.replace("/add",""))}}return e.\u0275fac=function(t){return new(t||e)(C.Nb(x.a),C.Nb(d.g),C.Nb(E.a))},e.\u0275cmp=C.Hb({type:e,selectors:[["ng-component"]],decls:2,vars:0,template:function(e,t){1&e&&(C.Tb(0,"div"),C.Ob(1,"app-addedit-sla-policy"),C.Sb())},directives:[ot],encapsulation:2}),e})(),lt=(()=>{class e{constructor(e,t,i){this.http=e,this.spinService=t,this.router=i}resolve(e){return this.spinService.showSpinner(),this.http.get(O.SLAPolicyDetail+"/"+e.params.id).toPromise().catch(e=>this.router.navigateByUrl("error",{state:e.error.errors[0].errorMessage,skipLocationChange:!0}))}}return e.\u0275fac=function(t){return new(t||e)(C.bc(D.b),C.bc(A.a),C.bc(d.g))},e.\u0275prov=C.Jb({token:e,factory:e.\u0275fac}),e})();var ct=i("TSZ8");const ut=[{path:"add",component:at,data:{newSLAPolicy:!0},canDeactivate:[ct.a]},{path:"",component:V},{path:":id",component:rt,resolve:{data:lt},data:{newSLAPolicy:!1},canDeactivate:[ct.a]},{path:"**",component:h.a}];let dt=(()=>{class e{}return e.\u0275mod=C.Lb({type:e}),e.\u0275inj=C.Kb({factory:function(t){return new(t||e)},imports:[[d.k.forChild(ut)],d.k]}),e})(),ht=(()=>{class e{}return e.\u0275mod=C.Lb({type:e}),e.\u0275inj=C.Kb({factory:function(t){return new(t||e)},providers:[lt,P],imports:[[n.b,dt,s.a,o.j,r.AdminModule,a.h,l.d,c.b,c.d,u.a,c.j,L.l,j.c,a.c,l.g,a.e,c.h,L.e]]}),e})()}}]);