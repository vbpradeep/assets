(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{paHv:function(t,e,i){"use strict";i.r(e),i.d(e,"ContactGroupFormsModule",(function(){return W}));var n=i("ofXK"),o=i("ltyr"),c=i("hXFv"),a=i("np3I"),r=i("jcQU"),s=i("GJ+o"),l=i("Pk9d"),d=i("QYJQ"),p=i("SRvG"),u=i("tyNb"),h=i("mrjb"),b=i("TSZ8"),g=i("5LOs"),m=i("hCAU"),f=i("58Y9"),v=i("M9dC"),S=i("dSv1"),T=i("H552"),C=i("1gpv");const O={ContactGroupFieldsList:C.f+"contact_group_fields",ActivateContactGroupField:C.f+"contact_group_fields",DeactivateContactGroupField:C.f+"contact_group_fields",DeleteContactGroupField:C.f+"contact_group_fields",PositionChange:C.f+"contact_group_fields"};var F=i("A4Lh"),D=i("qBM0"),I=i("oRrO"),G=i("4SUy"),E=i("y5ZJ"),x=i("fXoL"),A=i("1kef"),w=i("JCZ/"),j=i("IaKf"),P=i("X8pc"),L=i("tk/3"),y=i("kR0U");let N=(()=>{class t{constructor(t){this.http=t,this.httpOptions={headers:new L.e({"Content-Type":"application/json"})}}deleteContactGroupField(t){return this.http.delete(y.a.FieldDelete+"/"+t).toPromise()}toggleContactGroupField(t,e){return this.http.post(t?y.a.FieldActiveOrDeactivate+"/"+e+"/activate":y.a.FieldActiveOrDeactivate+"/"+e+"/deactivate",this.httpOptions).toPromise()}changePosition(t,e){return this.http.put(O.PositionChange+"/"+t+"/position_change",e).toPromise()}}return t.\u0275fac=function(e){return new(e||t)(x.bc(L.b))},t.\u0275prov=x.Jb({token:t,factory:t.\u0275fac}),t})();var R=i("AjNn");const k=["contactGroupFormsListGrid"],U=["contextmenu"],B=["contactGroupFormEle"];function _(t,e){if(1&t&&(x.Tb(0,"span"),x.Tb(1,"div"),x.Ob(2,"i",20),x.Sb(),x.Sb()),2&t){const t=e.$implicit;x.xb(1),x.yb("data-non-elliptical",!0)("data-title",t.fieldType),x.xb(1),x.oc("ngClass",null!=t.fieldTypeIconCssClass?t.fieldTypeIconCssClass:"bd-custom-default-icon")}}function M(t,e){1&t&&(x.Tb(0,"span",28),x.Tb(1,"span"),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"SYSTEM"),""))}function J(t,e){1&t&&(x.Tb(0,"span",29),x.Tb(1,"span"),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"INACTIVE"),""))}function V(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",21),x.Tb(1,"div",22),x.Tb(2,"span",23),x.Tb(3,"span",24),x.Tb(4,"span",25),x.ec("click",(function(i){x.Bc(t);const n=e.$implicit,o=x.gc();return n.canEditConfiguration?o.fieldNameClick(i,n.fieldId):""})),x.Lc(5),x.Sb(),x.Sb(),x.Jc(6,M,4,3,"span",26),x.Jc(7,J,4,3,"span",27),x.Sb(),x.Sb(),x.Sb()}if(2&t){const t=e.$implicit;x.xb(4),x.nc("ngClass",t.canEditConfiguration?"primary-link-color-blue cursor-pointer":""),x.yb("data-title",t.labelForAgentPortal),x.xb(1),x.Mc(t.labelForAgentPortal),x.xb(1),x.nc("ngIf",t.isDefaultSystemField),x.xb(1),x.nc("ngIf",!t.isActive)}}function K(t,e){if(1&t){const t=x.Ub();x.Tb(0,"span",33),x.ec("click",(function(){x.Bc(t);const e=x.gc().$implicit,i=x.gc();return i.moreOptionsSelect(i.editItem,e)})),x.hc(1,"translate"),x.Sb()}2&t&&x.yb("data-title",x.ic(1,1,"EDIT"))}function q(t,e){if(1&t){const t=x.Ub();x.Tb(0,"span",34),x.ec("click",(function(e){x.Bc(t);const i=x.gc().$implicit;return x.gc().bindBtnTemplate(e,i)})),x.Sb()}}function Q(t,e){if(1&t&&(x.Tb(0,"div",30),x.Jc(1,K,2,3,"span",31),x.Jc(2,q,1,0,"span",32),x.Sb()),2&t){const t=e.$implicit;x.xb(1),x.nc("ngIf",t.canEditConfiguration),x.xb(1),x.nc("ngIf",t.canEditConfiguration&&!(t.isDefaultSystemField&&t.isActive))}}let $=(()=>{class t{constructor(t,e,i,n,o,c,a){this.appRootService=t,this.seoService=e,this.router=i,this.toastService=n,this.spinService=o,this.contactGroupFieldService=c,this.cd=a,this.perPage=F.E.toString(),this.currentpage="1",this.listItems=[{text:"Activate",id:"2"},{text:"Deactivate",id:"3"},{text:"Delete",id:"4"}],this.activeFieldItems=["Deactivate","Delete"],this.inActiveFieldItems=["Activate","Delete"],this.animation={effect:"none"},this.fieldTypeEnum=I.a,this.editItem={item:{id:D.a.Edit}},this.preventFields=[{apiName:g.d.ContactGroupName},{apiName:g.d.ContactGroupDomain}];const r=Object(S.a)("ADMIN")+" / "+Object(S.a)("CONTACTGROUPFIELDS"),s=Object(S.a)("CONTACTGROUPFIELDS")+" | "+Object(S.a)("ADMIN");this.appRootService.setAppTitleText(r),this.seoService.setHeaderElements({title:s}),this.appRootService.isSideBarNeeded(!0),this.appRootService.setBrandDropDownVisibility(!1)}ngOnInit(){let t=O.ContactGroupFieldsList;t=Object(f.i)(t,"Page",this.currentpage),t=Object(f.i)(t,"PerPage",this.perPage),this.contactGroupFormsList=new T.a({url:t,adaptor:new v.b}),this.href=this.router.url}ngAfterViewInit(){this.contactGroupFormEle.nativeElement.addEventListener("scroll",()=>{this.contextmenu.close()})}contactGroupFormsListDataBound(){this.grid.widthService.setWidthToColumns(),Object(f.a)(this.grid);const t=this.grid.getCurrentViewRecords(),e=[];t.forEach((t,i)=>{this.preventFields.forEach(n=>{n.apiName==t.apiName&&e.push(this.grid.getRowByIndex(i))})});for(let i=0;i<e.length;i++){const t=document.createElement("td");t.classList.add("intentcell"),e[i].querySelector(".e-rowdragdrop").remove(),e[i].prepend(t),i>0&&(e[i].querySelector(".intentcell").style.borderTop="1px solid #e0e0e0")}}fieldNameClick(t,e){t.stopPropagation(),this.router.navigateByUrl(this.href+"/"+e)}addContactGroupField(){this.router.navigateByUrl("/admin/contact-group-fields/add")}bindBtnTemplate(t,e){this.selectedItemData=e;const i=Object(l.f)(t.target);this.contextmenu.open(i.top+16,i.left-5,t.target)}itemBeforeEvent(){this.selectedItemData.isActive&&!this.selectedItemData.isDefaultSystemField?(this.contextmenu.hideItems(this.inActiveFieldItems),this.contextmenu.showItems(this.activeFieldItems)):(this.contextmenu.hideItems(this.activeFieldItems),this.contextmenu.showItems(this.inActiveFieldItems))}moreOptionsSelect(t,e){t.item.id===D.a.Edit?this.router.navigateByUrl(this.href+"/"+e.fieldId):t.item.id===D.a.Delete?Object(f.b)(this.updateDeleteContactGroupField,this.cancelDialog,this,Object(S.a)("DELETE")+" "+Object(S.a)("CONTACTGROUPFIELD"),Object(S.a)("CONTACTGROUPFIELDDELETEALERT")):t.item.id===D.a.Activate?(this.isEnabled=!0,Object(f.b)(this.toggleContactGroupField,this.cancelDialog,this,Object(S.a)("ACTIVATE")+" "+Object(S.a)("CONTACTGROUPFIELD"),Object(S.a)("CONTACTGROUPFIELDACTIVATEALERT"),Object(S.a)("YES")+", "+Object(S.a)("ACTIVATE"),"",!0)):(this.isEnabled=!1,Object(f.b)(this.toggleContactGroupField,this.cancelDialog,this,Object(S.a)("DEACTIVATE")+" "+Object(S.a)("CONTACTGROUPFIELD"),Object(S.a)("CONTACTGROUPFIELDDEACTIVATEALERT"),Object(S.a)("YES")+", "+Object(S.a)("DEACTIVATE")))}cancelDialog(){this.deleteDialog.hide()}loadGrid(){let t=O.ContactGroupFieldsList;t=Object(f.i)(t,"Page",this.currentpage),t=Object(f.i)(t,"PerPage",this.perPage),this.contactGroupFormsList=new T.a({url:t,adaptor:new v.b}),this.cd.detectChanges()}toggleContactGroupField(){this.spinService.showSpinner(),this.contactGroupFieldService.toggleContactGroupField(this.isEnabled,this.selectedItemData.fieldId).then(t=>{t&&(this.spinService.hideSpinner(),this.deleteDialog.hide(),this.loadGrid(),this.toastService.successToast(t.result),Object(E.c)())}).catch(t=>{const e=Object(f.q)(t.error);400===t.status&&(this.spinService.hideSpinner(),this.toastService.failureToast(e))})}updateDeleteContactGroupField(){this.spinService.showSpinner(),this.contactGroupFieldService.deleteContactGroupField(this.selectedItemData.fieldId).then(t=>{t&&(this.spinService.hideSpinner(),this.deleteDialog.hide(),this.loadGrid(),this.toastService.successToast(t.result),Object(E.c)())}).catch(t=>{const e=Object(f.q)(t.error);400===t.status&&(this.spinService.hideSpinner(),this.toastService.failureToast(e))})}contactGroupFieldDrag(t){const e=this.grid.getRowInfo(t.target).rowData;e&&this.preventFields.forEach(i=>{i.apiName==e.apiName&&(t.cancel=!0)})}contactGroupFieldDrop(t){const e=this.grid.getRowInfo(this.grid.getRowByIndex(t.dropIndex)).rowData;e&&this.preventFields.forEach(i=>{i.apiName==e.apiName&&(t.cancel=!0)});const i=t.data[0].fieldId;if(t.cancel=!0,t.fromIndex===t.dropIndex||Object(G.X)(t.dropIndex)||isNaN(t.dropIndex))return;const n={toPosition:++t.dropIndex};this.spinService.showSpinner(),this.contactGroupFieldService.changePosition(i,n).then(t=>{t&&(this.spinService.hideSpinner(),this.loadGrid(),this.toastService.successToast(t.result),Object(E.c)())}).catch(t=>{const e=Object(f.q)(t.error);400===t.status&&(this.spinService.hideSpinner(),this.toastService.failureToast(e))})}}return t.\u0275fac=function(e){return new(e||t)(x.Nb(A.a),x.Nb(w.a),x.Nb(u.g),x.Nb(j.a),x.Nb(P.a),x.Nb(N),x.Nb(x.h))},t.\u0275cmp=x.Hb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(x.Gc(k,!0),x.Qc(U,!0),x.Qc(B,!0)),2&t&&(x.xc(i=x.fc())&&(e.grid=i.first),x.xc(i=x.fc())&&(e.contextmenu=i.first),x.xc(i=x.fc())&&(e.contactGroupFormEle=i.first))},decls:31,vars:13,consts:[[1,"contact-group-forms-grid","hd-grid-full-height"],["contactGroupFormEle",""],[1,"secondary","padding-10","information-content"],[1,"bd-icon","bd-icon-info","information-icon","information-icon-position"],[1,"no-padding"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","flex-horizontal","no-margin"],[1,"grid-menu-bar"],[1,"grid-menu","width100"],[1,"add-button-container"],["type","button","ejs-button","",1,"e-btn","add-button","e-primary","e-outline",3,"click"],[1,"no-margin","pl-20","pr-20","height-100"],[1,"contact-group-form-list"],["allowResizing","true","height","100%",3,"dataSource","allowRowDragAndDrop","dataBound","rowDrop","rowDrag"],["contactGroupFormsListGrid",""],["minWidth","40","width","40"],["template",""],["field","labelForAgentPortal","minWidth","200","width","300","textAlign","Left",3,"headerText"],["minWidth","100","width","100","textAlign","Center"],[3,"items","animationSettings","beforeOpen","select"],["contextmenu",""],[1,"bd-icon",2,"font-size","16px","position","relative","top","4px",3,"ngClass"],[1,"flex-horizontal","secondary","p-1"],[1,"flex-vertical","no-wrap","ellipsis"],[1,"flex-horizontal"],[1,"e-text","no-wrap","ellipsis"],[3,"ngClass","click"],["class","grid-label status left-spacing",4,"ngIf"],["class","grid-label inactive-label status left-spacing",4,"ngIf"],[1,"grid-label","status","left-spacing"],[1,"grid-label","inactive-label","status","left-spacing"],[1,"cursor-pointer"],["class","bd-icon bd-icon-edit more-option-button",3,"click",4,"ngIf"],["class","hd-icon hd-vertical-menu more-option-button",3,"click",4,"ngIf"],[1,"bd-icon","bd-icon-edit","more-option-button",3,"click"],[1,"hd-icon","hd-vertical-menu","more-option-button",3,"click"]],template:function(t,e){1&t&&(x.Tb(0,"div",0,1),x.Tb(2,"div",2),x.Ob(3,"div",3),x.Lc(4),x.hc(5,"translate"),x.Sb(),x.Tb(6,"div",4),x.Tb(7,"div",5),x.Tb(8,"div",6),x.Tb(9,"div",7),x.Tb(10,"div",8),x.Tb(11,"button",9),x.ec("click",(function(){return e.addContactGroupField()})),x.Lc(12),x.hc(13,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(14,"div",10),x.Tb(15,"div",11),x.Tb(16,"ejs-grid",12,13),x.ec("dataBound",(function(){return e.contactGroupFormsListDataBound()}))("rowDrop",(function(t){return e.contactGroupFieldDrop(t)}))("rowDrag",(function(t){return e.contactGroupFieldDrag(t)})),x.Tb(18,"e-columns"),x.Tb(19,"e-column",14),x.Jc(20,_,3,3,"ng-template",null,15,x.Kc),x.Sb(),x.Tb(22,"e-column",16),x.hc(23,"translate"),x.Jc(24,V,8,5,"ng-template",null,15,x.Kc),x.Sb(),x.Tb(26,"e-column",17),x.Jc(27,Q,3,2,"ng-template",null,15,x.Kc),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(29,"ejs-contextmenu",18,19),x.ec("beforeOpen",(function(){return e.itemBeforeEvent()}))("select",(function(t){return e.moreOptionsSelect(t)})),x.Sb()),2&t&&(x.xb(4),x.Nc(" ",x.ic(5,7,"CONTACTGROUPFIELDSMODULEINFO"),""),x.xb(8),x.Nc(" ",x.ic(13,9,"ADDCONTACTGROUPFIELD")," "),x.xb(4),x.nc("dataSource",e.contactGroupFormsList)("allowRowDragAndDrop",!0),x.xb(6),x.oc("headerText",x.ic(23,11,"LABELFORAGENTPORATL")),x.xb(7),x.nc("items",e.listItems)("animationSettings",e.animation))},directives:[p.c,s.k,s.e,s.b,s.d,s.a,c.f,n.l,n.n],pipes:[R.a],styles:[".contact-group-forms-grid[_ngcontent-%COMP%]{height:100%!important;overflow:hidden}.contact-group-forms-grid[_ngcontent-%COMP%]   .add-button-container[_ngcontent-%COMP%]{padding:12px 5px!important}.contact-group-forms-grid[_ngcontent-%COMP%]   .contact-group-form-list[_ngcontent-%COMP%]{height:calc(100% - 100px)}.contact-group-forms-grid[_ngcontent-%COMP%]   .e-gridcontent[_ngcontent-%COMP%]{height:calc(100% - 40px)!important}.contact-group-forms-grid[_ngcontent-%COMP%]   .e-gridcontent[_ngcontent-%COMP%]   .e-content[_ngcontent-%COMP%]{height:inherit!important;overflow-y:auto!important}"],changeDetection:0}),t})(),z=(()=>{class t{constructor(t,e,i){this.http=t,this.spinService=e,this.router=i}resolve(t){return this.spinService.showSpinner(),this.http.get(O.ContactGroupFieldsList+"/"+t.params.id).toPromise().catch(t=>this.router.navigateByUrl("error",{state:t.error.errors[0].errorMessage,skipLocationChange:!0}))}}return t.\u0275fac=function(e){return new(e||t)(x.bc(L.b),x.bc(P.a),x.bc(u.g))},t.\u0275prov=x.Jb({token:t,factory:t.\u0275fac}),t})();const X=[{path:"",component:$},{path:"add",component:m.a,data:{customFieldsType:g.c.ContactGroupFields,addCustomField:!0,module:g.b.ContactGroup},canDeactivate:[b.a]},{path:":id",component:m.a,resolve:{data:z},data:{customFieldsType:g.c.ContactGroupFields,addCustomField:!1,module:g.b.ContactGroup},canDeactivate:[b.a]},{path:"**",component:h.a}];let Y=(()=>{class t{}return t.\u0275mod=x.Lb({type:t}),t.\u0275inj=x.Kb({factory:function(e){return new(e||t)},imports:[[u.k.forChild(X)],u.k]}),t})();var H=i("Pl5m");let W=(()=>{class t{}return t.\u0275mod=x.Lb({type:t}),t.\u0275inj=x.Kb({factory:function(e){return new(e||t)},providers:[N,z],imports:[[n.b,Y,o.a,H.a,s.j,c.j,a.AdminModule,r.d,l.a,d.h,p.b,p.j,c.e,p.h,p.d]]}),t})()}}]);