(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"64zv":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("58Y9"),d=i("fXoL"),c=i("qZph"),o=i("ofXK");let a=(()=>{class e{transform(e,t){if(e){const i=Object(n.t)(!0),d=Object(n.u)(e,!1),c=Math.floor((+i-+d)/1e3),o=Math.floor(c/60);if(o<1)return"1 min ago";const a={day:1440,hour:60,min:1};let l;for(const n in a){if(l=Math.floor(o/a[n]),l>0&&t)return 1===l?l+" "+n+" ago":l+" "+n+"s ago";if(l>0&&!t)return 1===l?l+" "+n+" ago":l<=7||"day"!==n?l+" "+n+"s ago":e}}return e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=d.Mb({name:"dateAgo",type:e,pure:!0}),e})(),l=(()=>{class e{transform(e){if(e){const t=Object(n.t)(!0),i=Object(n.u)(e,!1),d=Math.floor((+t-+i)/1e3);if(Math.floor(d/60)<1)return"1 min ago";const c={day:86400,hour:3600,minute:60,second:1};let o;for(const e in c)if(o=Math.floor(d/c[e]),o>0)return 1===o?o+" "+e:o+" "+e+"s"}return e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=d.Mb({name:"dateDays",type:e,pure:!0}),e})(),s=(()=>{class e{constructor(){this.format="MMM dd, yyyy hh:mm a",this.date=new Date,this.timeZoneWithUTC=Object(n.K)()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Hb({type:e,selectors:[["app-date-time"]],inputs:{timezone:"timezone",format:"format",tooltipPrefix:"tooltipPrefix",prefixString:"prefixString",suffixString:"suffixString",date:"date",enableAgo:"enableAgo",enableDays:"enableDays",enableOnlyAgo:"enableOnlyAgo"},decls:11,vars:34,consts:[["data-non-elliptical","true"]],template:function(e,t){1&e&&(d.Tb(0,"span",0),d.hc(1,"dateTimeUTC"),d.hc(2,"date"),d.Lc(3),d.hc(4,"dateAgo"),d.hc(5,"date"),d.hc(6,"dateAgo"),d.hc(7,"date"),d.hc(8,"dateDays"),d.hc(9,"date"),d.hc(10,"date"),d.Sb()),2&e&&(d.Ab("data-title","",t.tooltipPrefix," ",d.ic(1,5,d.kc(2,7,t.date,t.format,t.timezone)),""),d.xb(3),d.Pc(" ",t.prefixString," ",t.enableAgo&&!t.enableOnlyAgo?d.ic(4,11,d.kc(5,13,t.date,t.format,t.timezone)):t.enableAgo&&t.enableOnlyAgo?d.jc(6,17,d.kc(7,20,t.date,t.format,t.timezone),!0):t.enableDays?d.ic(8,24,d.kc(9,26,t.date,t.format,t.timezone)):d.kc(10,30,t.date,t.format,t.timezone)," ",t.suffixString," "))},pipes:[c.a,o.d,a,l],styles:[""]}),e})()},MMtA:function(e,t,i){"use strict";i.r(t),i.d(t,"FieldDependencyModule",(function(){return ye}));var n=i("ofXK"),d=i("ltyr"),c=i("GJ+o"),o=i("np3I"),a=i("QYJQ"),l=i("jcQU"),s=i("SRvG"),r=i("tyNb"),p=i("mrjb"),h=i("TSZ8"),b=i("dSv1"),u=i("H552"),f=i("58Y9"),D=i("4SUy"),g=i("A4Lh"),m=i("1gpv");const O={FieldDependencyList:m.f+"field_dependencies",DependencyFieldOption:m.f+"fields/collection",AddFieldDependency:m.f+"field_dependencies",FieldDependencyOptions:m.f+"field_dependencies",DependencyFieldCollection:m.f+"field_dependencies/collections",DeleteFieldDependency:m.f+"field_dependencies"};var S=function(e){return e[e.Ticket=1]="Ticket",e[e.Contact=2]="Contact",e[e.ContactGroup=3]="ContactGroup",e}({}),v=i("y5ZJ"),y=i("fXoL"),F=i("1kef"),x=i("JCZ/"),C=i("tk/3"),T=i("X8pc"),E=i("IaKf");let A=(()=>{class e{constructor(e,t,i){this.http=e,this.spinService=t,this.toastService=i,this.httpOptions={headers:new C.e({"Content-Type":"application/json"})}}getFieldOptions(e){return this.http.get(e).toPromise()}getFieldCollections(e){return this.http.get(e).toPromise()}addEditFieldDependency(e,t){return t?this.http.post(O.AddFieldDependency,e).toPromise().catch(e=>{if(400===e.status){this.spinService.hideSpinner();const t=Object(f.q)(e.error);Object(D.X)(e.error.errors)?this.toastService.failureToast(e.error.message):this.toastService.failureToast(t)}}):this.http.put(O.AddFieldDependency,e).toPromise().catch(e=>{if(400===e.status){this.spinService.hideSpinner();const t=Object(f.q)(e.error);Object(D.X)(e.error.errors)?this.toastService.failureToast(e.error.message):this.toastService.failureToast(t)}})}deleteFieldDependency(e){return this.http.delete(O.DeleteFieldDependency+"/"+e).toPromise()}}return e.\u0275fac=function(t){return new(t||e)(y.bc(C.b),y.bc(T.a),y.bc(E.a))},e.\u0275prov=y.Jb({token:e,factory:e.\u0275fac}),e})();var I=i("AjNn");const w=["parentFieldDrop"],k=["childFieldDrop"],L=["parentFieldSearch"],P=["addDependencyButton"],j=["parentFieldOptionContainer"],N=["childFieldOptionContainer"],M=["childCheckBox"],B=["selectAllCheckBox"],J=["moduleDrop"];function R(e,t){1&e&&y.Pb(0)}function _(e,t){if(1&e){const e=y.Ub();y.Tb(0,"div",17),y.Tb(1,"label"),y.Tb(2,"span",18),y.Lc(3),y.hc(4,"translate"),y.Sb(),y.Tb(5,"span",20),y.Lc(6,"*"),y.Sb(),y.Sb(),y.Tb(7,"ejs-dropdownlist",50,51),y.ec("change",(function(){return y.Bc(e),y.gc(2).fieldsDropChange()})),y.hc(9,"translate"),y.hc(10,"translate"),y.Sb(),y.Sb()}if(2&e){const e=y.gc(2);y.xb(3),y.Nc("",y.ic(4,7,"MODULE")," "),y.xb(4),y.oc("filterBarPlaceholder",y.ic(9,9,"SEARCH")),y.oc("placeholder",y.ic(10,11,"SELECT")),y.nc("htmlAttributes",e.autoCompleteAttribute)("dataSource",e.fieldsDropData)("fields",e.fieldDropFields)("value",e.moduleId)}}function X(e,t){1&e&&(y.Tb(0,"div",52),y.Tb(1,"span",20),y.Lc(2),y.hc(3,"translate"),y.Sb(),y.Sb()),2&e&&(y.xb(2),y.Nc(" ",y.ic(3,1,"FIELDREQUIRED"),""))}function U(e,t){if(1&e&&(y.Tb(0,"div",17),y.Jc(1,X,4,3,"div",27),y.Sb()),2&e){const e=y.gc(2);y.xb(1),y.nc("ngIf",e.moduleRequired)}}function q(e,t){1&e&&(y.Tb(0,"div",52),y.Tb(1,"span",20),y.Lc(2),y.hc(3,"translate"),y.Sb(),y.Sb()),2&e&&(y.xb(2),y.Nc(" ",y.ic(3,1,"FIELDREQUIRED"),""))}function H(e,t){1&e&&(y.Tb(0,"div",52),y.Tb(1,"span",20),y.Lc(2),y.hc(3,"translate"),y.Sb(),y.Sb()),2&e&&(y.xb(2),y.Nc(" ",y.ic(3,1,"FIELDREQUIRED"),""))}function Q(e,t){if(1&e&&(y.Tb(0,"span",53),y.Tb(1,"span"),y.Lc(2),y.Sb(),y.Sb()),2&e){const e=y.gc(2);y.xb(1),y.yb("data-title",e.parentFieldText),y.xb(1),y.Nc("(",e.parentFieldText,")")}}function z(e,t){if(1&e){const e=y.Ub();y.Tb(0,"span",54),y.ec("click",(function(){return y.Bc(e),y.gc(2).addNewField()})),y.Lc(1),y.hc(2,"translate"),y.Sb()}2&e&&(y.xb(1),y.Nc(" ",y.ic(2,1,"ADDNEW")," "))}function G(e,t){1&e&&(y.Tb(0,"span",62),y.Lc(1),y.hc(2,"translate"),y.Sb()),2&e&&(y.xb(1),y.Nc("(",y.ic(2,1,"READONLY"),")"))}function Y(e,t){if(1&e){const e=y.Ub();y.Tb(0,"div"),y.Tb(1,"div",57),y.ec("click",(function(){y.Bc(e);const i=t.index;return y.gc(3).parentFieldOptionClick(i)})),y.Tb(2,"div",58),y.Tb(3,"span"),y.Lc(4),y.Jc(5,G,3,3,"span",59),y.Sb(),y.Sb(),y.Tb(6,"div",60),y.Ob(7,"span",61),y.Sb(),y.Sb(),y.Sb()}if(2&e){const e=t.$implicit,i=t.index,n=y.gc(3);y.xb(1),y.Fb("active",n.parentOptionIndex===i),y.yb("data-index",i)("data-id",e.id),y.xb(2),y.yb("data-title",e.name),y.xb(1),y.Mc(e.name),y.xb(1),y.nc("ngIf",e.isReadOnly),y.xb(2),y.Fb("active-icon",n.parentOptionIndex===i)}}function K(e,t){if(1&e&&(y.Tb(0,"div",55),y.Jc(1,Y,8,9,"div",56),y.Sb()),2&e){const e=y.gc(2);y.nc("hidden",e.noParentRecordsFound),y.xb(1),y.nc("ngForOf",e.parentFieldOptionData)}}function Z(e,t){1&e&&(y.Tb(0,"div",63),y.Ob(1,"img",64),y.Sb())}function W(e,t){if(1&e&&(y.Tb(0,"span",53),y.Tb(1,"span"),y.Lc(2),y.Sb(),y.Sb()),2&e){const e=y.gc(2);y.xb(1),y.yb("data-title",e.childFieldText),y.xb(1),y.Nc(" (",e.childFieldText,") ")}}function $(e,t){if(1&e){const e=y.Ub();y.Tb(0,"span",65),y.ec("click",(function(){return y.Bc(e),y.gc(2).addNewField()})),y.Lc(1),y.hc(2,"translate"),y.Sb()}2&e&&(y.xb(1),y.Nc(" ",y.ic(2,1,"ADDNEW")," "))}function V(e,t){1&e&&(y.Tb(0,"div",73),y.Lc(1),y.hc(2,"translate"),y.Sb()),2&e&&(y.xb(1),y.Nc("(",y.ic(2,1,"READONLY"),")"))}function ee(e,t){if(1&e){const e=y.Ub();y.Tb(0,"div",66),y.Tb(1,"ejs-checkbox",71),y.ec("change",(function(i){y.Bc(e);const n=t.index;return y.gc(3).childOptionCheckBoxChange(i,n)})),y.Sb(),y.Jc(2,V,3,3,"div",72),y.Sb()}if(2&e){const e=t.$implicit,i=t.index;y.xb(1),y.nc("checked",!1)("label",e.name),y.yb("data-index",i)("data-id",e.id),y.xb(1),y.nc("ngIf",e.isReadOnly)}}function te(e,t){if(1&e){const e=y.Ub();y.Tb(0,"div",55),y.Tb(1,"div",66),y.Tb(2,"ejs-checkbox",67,68),y.ec("change",(function(t){return y.Bc(e),y.gc(2).selectAllChange(t)})),y.Sb(),y.Sb(),y.Tb(4,"div",null,69),y.Jc(6,ee,3,5,"div",70),y.Sb(),y.Sb()}if(2&e){const e=y.gc(2);y.nc("hidden",e.noChildRecordsFound),y.xb(2),y.nc("checked",!1),y.xb(4),y.nc("ngForOf",e.childFieldOptionData)}}function ie(e,t){1&e&&(y.Tb(0,"div",63),y.Ob(1,"img",64),y.Sb())}function ne(e,t){if(1&e){const e=y.Ub();y.Tb(0,"div",12),y.Tb(1,"div",13),y.Lc(2),y.hc(3,"translate"),y.Sb(),y.Tb(4,"div",14),y.Lc(5),y.hc(6,"translate"),y.Sb(),y.Tb(7,"div",15),y.Jc(8,_,11,13,"div",16),y.Tb(9,"div",17),y.Tb(10,"label"),y.Tb(11,"span",18),y.Lc(12),y.hc(13,"translate"),y.Sb(),y.Ob(14,"span",19),y.hc(15,"translate"),y.Tb(16,"span",20),y.Lc(17,"*"),y.Sb(),y.Sb(),y.Tb(18,"ejs-dropdownlist",21,22),y.ec("blur",(function(){return y.Bc(e),y.gc().parentDropFocusOut()}))("change",(function(){return y.Bc(e),y.gc().parentDropChange()})),y.hc(20,"translate"),y.hc(21,"translate"),y.Sb(),y.Sb(),y.Tb(22,"div",23),y.Tb(23,"label"),y.Tb(24,"span",18),y.Lc(25),y.hc(26,"translate"),y.Sb(),y.Ob(27,"span",19),y.hc(28,"translate"),y.Tb(29,"span",20),y.Lc(30,"*"),y.Sb(),y.Sb(),y.Tb(31,"ejs-dropdownlist",24,25),y.ec("blur",(function(){return y.Bc(e),y.gc().childDropFocusOut()}))("change",(function(){return y.Bc(e),y.gc().childDropChange()})),y.hc(33,"translate"),y.hc(34,"translate"),y.Sb(),y.Sb(),y.Sb(),y.Tb(35,"div",26),y.Jc(36,U,2,1,"div",16),y.Tb(37,"div",17),y.Jc(38,q,4,3,"div",27),y.Sb(),y.Tb(39,"div",23),y.Jc(40,H,4,3,"div",27),y.Sb(),y.Sb(),y.Ob(41,"div",28),y.Tb(42,"div",29),y.Tb(43,"div",13),y.Lc(44),y.hc(45,"translate"),y.Sb(),y.Tb(46,"div",30),y.Lc(47),y.hc(48,"translate"),y.Sb(),y.Sb(),y.Tb(49,"div",31),y.Tb(50,"div",32,33),y.Tb(52,"div",34),y.Tb(53,"label",35),y.Tb(54,"span",36),y.Lc(55),y.hc(56,"translate"),y.Sb(),y.Jc(57,Q,3,2,"span",37),y.Sb(),y.Jc(58,z,3,3,"span",38),y.Sb(),y.Tb(59,"div",39),y.Tb(60,"div",40),y.Tb(61,"ejs-textbox",41,42),y.ec("input",(function(t){return y.Bc(e),y.gc().searchParentNodes(t)})),y.hc(63,"translate"),y.Sb(),y.Sb(),y.Jc(64,K,2,2,"div",43),y.Tb(65,"div",44),y.Lc(66),y.hc(67,"translate"),y.Sb(),y.Jc(68,Z,2,0,"div",45),y.Sb(),y.Sb(),y.Tb(69,"div",46,47),y.Tb(71,"div",34),y.Tb(72,"label",35),y.Tb(73,"span",36),y.Lc(74),y.hc(75,"translate"),y.Sb(),y.Jc(76,W,3,2,"span",48),y.Sb(),y.Jc(77,$,3,3,"span",49),y.Sb(),y.Tb(78,"div",39),y.Tb(79,"div",40),y.Tb(80,"ejs-textbox",41),y.ec("input",(function(t){return y.Bc(e),y.gc().searchChildNodes(t)})),y.hc(81,"translate"),y.Sb(),y.Sb(),y.Jc(82,te,7,3,"div",43),y.Tb(83,"div",44),y.Lc(84),y.hc(85,"translate"),y.Sb(),y.Jc(86,ie,2,0,"div",45),y.Sb(),y.Sb(),y.Sb(),y.Sb()}if(2&e){const e=y.gc();y.xb(2),y.Mc(y.ic(3,50,"FIELDDEPENDENCYSELECTION")),y.xb(3),y.Mc(y.ic(6,52,"FIELDDEPENDENCYCONTENTLABEL")),y.xb(3),y.nc("ngIf",e.isAddFieldDependency),y.xb(4),y.Nc("",y.ic(13,54,"PARENTFIELD")," "),y.xb(2),y.yb("data-non-elliptical",!0)("data-title",y.ic(15,56,"PARENTFIELDTOOLTIP")),y.xb(4),y.oc("filterBarPlaceholder",y.ic(20,58,"SEARCH")),y.oc("placeholder",y.ic(21,60,"SELECTAFIELD")),y.nc("htmlAttributes",e.autoCompleteAttribute)("dataSource",e.parentFieldDropData)("fields",e.dependencyFields)("allowFiltering",!0)("value",e.parentDropId)("enabled",e.isAddFieldDependency),y.xb(7),y.Nc("",y.ic(26,62,"CHILDFIELD")," "),y.xb(2),y.yb("data-non-elliptical",!0)("data-title",y.ic(28,64,"CHILDFIELDTOOLTIP")),y.xb(4),y.oc("filterBarPlaceholder",y.ic(33,66,"SEARCH")),y.oc("placeholder",y.ic(34,68,"SELECTAFIELD")),y.nc("htmlAttributes",e.autoCompleteAttribute)("dataSource",e.childFieldDropData)("fields",e.dependencyFields)("enabled",e.enabledChildFieldDrop)("allowFiltering",!0)("value",e.childDropId),y.xb(5),y.nc("ngIf",e.isAddFieldDependency),y.xb(2),y.nc("ngIf",e.parentFieldRequired),y.xb(2),y.nc("ngIf",e.childFieldRequired),y.xb(4),y.Mc(y.ic(45,70,"MAPFIELDDEPENDENCY")),y.xb(3),y.Mc(y.ic(48,72,"MAPDEPENDENCYLABEL")),y.xb(7),y.yb("data-title",e.parentFieldText),y.xb(1),y.Nc("",y.ic(56,74,"PARENTFIELDOPTION")," "),y.xb(2),y.nc("ngIf",e.parentFieldText),y.xb(1),y.nc("ngIf",e.isAddFieldDependency&&e.childDropId>0),y.xb(2),y.nc("hidden",!e.showParentOptions),y.xb(1),y.oc("placeholder",y.ic(63,76,"SEARCH")),y.xb(3),y.nc("ngIf",e.showParentOptions),y.xb(1),y.nc("hidden",!e.noParentRecordsFound),y.xb(1),y.Nc(" ",y.ic(67,78,"NORESULTSFOUND")," "),y.xb(2),y.nc("ngIf",!e.showParentOptions),y.xb(5),y.yb("data-title",e.childFieldText),y.xb(1),y.Mc(y.ic(75,80,"CHILDFIELDOPTION")),y.xb(2),y.nc("ngIf",e.childFieldText),y.xb(1),y.nc("ngIf",e.isAddFieldDependency&&e.childDropId>0),y.xb(2),y.nc("hidden",!e.showChildOptions),y.xb(1),y.oc("placeholder",y.ic(81,82,"SEARCH")),y.xb(2),y.nc("ngIf",e.showChildOptions),y.xb(1),y.nc("hidden",!e.noChildRecordsFound),y.xb(1),y.Nc(" ",y.ic(85,84,"NORESULTSFOUND")," "),y.xb(2),y.nc("ngIf",!e.showChildOptions)}}let de=(()=>{class e{constructor(e,t,i,n,d,c,o,a){this.appRootService=e,this.seoService=t,this.activatedRoute=i,this.router=n,this.fieldDependencyService=d,this.spinService=c,this.toastService=o,this.http=a,this.showParentOptions=!1,this.showChildOptions=!1,this.parentFieldOptionData=[],this.childFieldOptionData=[],this.parentOptionTempData=[],this.childOptionTempData=[],this.noParentRecordsFound=!1,this.noChildRecordsFound=!1,this.parentOptionIndex=0,this.enabledChildFieldDrop=!1,this.isCheckedCount=0,this.addDependencyJson=[],this.isSelectAll=!1,this.fieldDependencyId=0,this.fieldsDropData=[{text:"Ticket",value:1},{text:"Contact",value:2},{text:"Contact Group",value:3}],this.autoCompleteAttribute={autocomplete:"anyrandomstring"},this.dependencyFields={text:"labelForAgentPortal",value:"fieldId"},this.fieldDropFields={text:"text",value:"value"},this.activatedRoute.data.subscribe(e=>{this.isAddFieldDependency=e.isAddFieldDependency,this.moduleId=Object(D.X)(history.state.data)?1:history.state.data.moduleId});const l=this.isAddFieldDependency?Object(b.a)("ADMIN")+" / "+Object(b.a)("FIELDDEPENDENCIES")+" / "+Object(b.a)("ADD")+",/admin/field-dependencies":Object(b.a)("ADMIN")+" / "+Object(b.a)("FIELDDEPENDENCIES")+" / "+Object(b.a)("EDIT")+",/admin/field-dependencies",s=this.isAddFieldDependency?Object(b.a)("ADD")+" | "+Object(b.a)("FIELDDEPENDENCIES")+" | "+Object(b.a)("ADMIN"):Object(b.a)("EDIT")+" | "+Object(b.a)("FIELDDEPENDENCIES")+" | "+Object(b.a)("ADMIN");this.appRootService.setAppTitleText(l),this.seoService.setHeaderElements({title:s}),this.appRootService.getNavigateUrl("/admin/field-dependencies"),this.isAddFieldDependency||(this.resolveData=this.activatedRoute.data.subscribe(e=>{this.data=e.data.result,this.spinService.hideSpinner()}),Object(D.X)(this.data)||(this.fieldDependencyId=this.data.fieldDependencyId,this.parentDropId=this.data.parentField.fieldId,this.childDropId=this.data.childField.fieldId,this.addDependencyJson=this.data.dependencyMapping))}ngAfterViewInit(){Object(g.V)(!0)}ngOnInit(){this.submitButtonText=this.isAddFieldDependency?Object(b.a)("ADD"):Object(b.a)("UPDATE");const e=Object(f.v)("moduleid",window.location.href),t=Object(f.v)("childid",window.location.href);e&&t&&(this.moduleId=e,this.childDropId=t,window.history.replaceState({},"","/admin/field-dependencies/add")),this.loadParentFieldCollections(),this.isAddFieldDependency&&!t||this.loadChildFieldCollections(t?0:this.parentDropId)}fieldsDropChange(){this.moduleId=this.moduleDrop.value,this.parentFieldDrop.value=null,this.childFieldDrop.value=null,this.enabledChildFieldDrop=!1,this.showParentOptions=!1,this.showChildOptions=!1,this.loadParentFieldCollections(),setTimeout(()=>{this.parentFieldRequired=!1,setTimeout(()=>{this.childFieldRequired=!1})}),this.isAddFieldDependency&&(this.parentFieldText=null,this.childFieldText=null)}loadParentFieldCollections(){this.spinService.showSpinner();let e=O.DependencyFieldCollection;e=Object(f.i)(e,"fieldModuleId",this.moduleId.toString()),e=Object(f.i)(e,"isParentField","true"),this.fieldDependencyService.getFieldCollections(e).then(e=>{this.parentFieldDropData=e.result,this.spinService.hideSpinner()}).catch(e=>{if(400===e.status){this.spinService.hideSpinner();const t=Object(f.q)(e.error);Object(D.X)(e.error.errors)?this.toastService.failureToast(e.error.message):this.toastService.failureToast(t)}})}loadChildFieldCollections(e){let t=O.DependencyFieldCollection;t=Object(f.i)(t,"fieldModuleId",this.moduleId.toString()),t=Object(f.i)(t,"isParentField","false"),t=Object(f.i)(t,"parentFieldId",e.toString()),this.isAddFieldDependency||(t=Object(f.i)(t,"isEditMode","true")),this.spinService.showSpinner(),this.fieldDependencyService.getFieldCollections(t).then(e=>{this.childFieldDropData=e.result,this.spinService.hideSpinner()}).catch(e=>{if(400===e.status){this.spinService.hideSpinner();const t=Object(f.q)(e.error);Object(D.X)(e.error.errors)?this.toastService.failureToast(e.error.message):this.toastService.failureToast(t)}})}fieldDependencyCancel(){this.addDependencyJson=[],this.router.navigateByUrl("/admin/field-dependencies")}fieldDependencySaveSave(){this.router.navigateByUrl("/admin/field-dependencies")}parentDropFocusOut(){this.parentFieldRequired=!this.parentFieldDrop.value}parentDropChange(){Object(D.X)(this.parentFieldDrop.value)?this.parentFieldRequired=!0:(this.isAddFieldDependency&&(this.parentFieldDrop.value===this.childFieldDrop.value&&(this.childFieldDrop.value=null),this.showChildOptions=!1),this.isAddFieldDependency&&this.loadChildFieldCollections(this.parentFieldDrop.value),this.parentFieldRequired=!1,this.parentOptionIndex=0,this.parentFieldText=this.parentFieldDrop.text,this.isAddFieldDependency&&(this.enabledChildFieldDrop=!0),this.isAddFieldDependency&&(Object(D.X)(this.childFieldDrop.value)||(this.spinService.showSpinner(),this.loadDependencyFieldOptionData(),setTimeout(()=>{this.resetActiveList(),this.unselectAllCheckBox()})))),this.isAddFieldDependency&&(this.addDependencyJson=[],this.disableAddDependencyButton())}childDropFocusOut(){this.childFieldRequired=!this.childFieldDrop.value}childDropChange(){Object(D.X)(this.childFieldDrop.value)?(this.childFieldRequired=!0,this.childDropId=null):(this.isAddFieldDependency&&(this.addDependencyJson=[]),this.childFieldRequired=!1,this.childFieldText=this.childFieldDrop.text,this.childDropId=this.childFieldDrop.value,this.spinService.showSpinner(),this.loadDependencyFieldOptionData(),setTimeout(()=>{this.resetActiveList(),this.unselectAllCheckBox()})),this.isAddFieldDependency&&(this.addDependencyJson=[]),this.disableAddDependencyButton()}loadDependencyFieldOptionData(){if(!this.parentFieldDrop.value||!this.childFieldDrop.value)return void this.spinService.hideSpinner();let e=O.FieldDependencyOptions+"/"+this.fieldDependencyId;e=Object(f.i)(e,"parentFieldId",this.parentFieldDrop.value.toString()),e=Object(f.i)(e,"childFieldId",this.childFieldDrop.value.toString()),this.http.get(e).toPromise().then(e=>{this.parentFieldOptionData=e.result.parentOptions,this.parentOptionTempData=this.parentFieldOptionData,this.childFieldOptionData=e.result.childOptions,this.childOptionDataCount=Object(D.X)(this.childFieldOptionData)?0:this.childFieldOptionData.length,this.childOptionTempData=this.childFieldOptionData,this.parentFieldOptionData.length>0?(this.showParentOptions=!0,this.isAddFieldDependency&&(this.enabledChildFieldDrop=!0)):this.showParentOptions=!1,this.showChildOptions=this.childFieldOptionData.length>0,this.isAddFieldDependency||this.resetAddDependencyButton(),setTimeout(()=>{!this.isAddFieldDependency&&this.parentFieldOptionData.length>0&&this.childFieldOptionData.length>0&&this.loadOptionsData(this.parentFieldOptionData)}),this.spinService.hideSpinner()}).catch(e=>{if(400===e.status){this.spinService.hideSpinner();const t=Object(f.q)(e.error);Object(D.X)(e.error.errors)?this.toastService.failureToast(e.error.message):this.toastService.failureToast(t)}})}loadOptionsData(e){let t=0;e.forEach(()=>{this.parentFieldOptionClick(t),++t}),setTimeout(()=>{this.parentOptionIndex=0,this.parentFieldOptionClick(this.parentOptionIndex)})}searchParentNodes(e){const t=e.value.trim(),i=new u.a(this.parentOptionTempData).executeLocal((new u.g).where("name","startswith",t,!0));Object(f.D)(t)?(this.noParentRecordsFound=!1,this.parentFieldOptionData=this.parentOptionTempData,this.parentOptionIndex=0,setTimeout(()=>{this.loadOptionsData(this.parentFieldOptionData)})):i.length?(this.parentFieldOptionData=i,this.noParentRecordsFound=!1,setTimeout(()=>{this.loadOptionsData(this.parentFieldOptionData)})):this.noParentRecordsFound=!0}searchChildNodes(e){const t=e.value.trim(),i=new u.a(this.childOptionTempData).executeLocal((new u.g).where("name","startswith",t,!0));Object(f.D)(t)?(this.noChildRecordsFound=!1,this.childFieldOptionData=this.childOptionTempData):i.length?(this.childFieldOptionData=i,this.noChildRecordsFound=!1):this.noChildRecordsFound=!0}resetAddDependencyButton(){this.parentFieldOptionData.length>0&&this.childFieldOptionData.length>0&&(this.addDependencyButton.isPrimary=!0,this.addDependencyButton.disabled=!1)}disableAddDependencyButton(){0==this.addDependencyJson.length&&(this.addDependencyButton.isPrimary=!1,this.addDependencyButton.disabled=!0)}parentFieldOptionClick(e){this.parentOptionIndex=e,this.unselectAllCheckBox(),this.setCheckBoxElement()}getActiveOptionElement(){let e;return this.parentFieldOptionContainer.nativeElement.querySelectorAll(".parent-field-items").forEach(t=>{t.getAttribute("data-index")==this.parentOptionIndex.toString()&&(e=t.querySelector(".active-option"))}),e}selectAllChange(e){e.checked||this.manipulateUnSelectAllChanges(),this.isSelectAll=!0;const t=this.childCheckBox.nativeElement.querySelectorAll(".e-checkbox");Object(D.X)(t)||t.forEach(t=>{t.ej2_instances[0].checked=e.checked}),setTimeout(()=>{this.setActiveList(),e.checked&&this.getAdddependencyJson(this.parentOptionIndex)})}setActiveList(){const e=this.getCheckBoxSelection(),t=this.getActiveOptionElement();e>0?Object(D.X)(t)||(t.classList.remove("hide-validation"),t.classList.add("show-validation")):Object(D.X)(t)||(t.classList.add("hide-validation"),t.classList.remove("show-validation"))}resetActiveList(){if(!Object(D.X)(this.parentFieldOptionContainer)){const e=this.parentFieldOptionContainer.nativeElement.querySelectorAll(".active-option");Object(D.X)(e)||e.length>0&&e.forEach(e=>{e.classList.add("hide-validation"),e.classList.remove("show-validation")})}}unselectAllCheckBox(){if(this.isSelectAll=!1,Object(D.X)(this.selectAllCheckBox)||(this.selectAllCheckBox.checked=!1),!Object(D.X)(this.childCheckBox)){const e=this.childCheckBox.nativeElement.querySelectorAll(".e-checkbox");Object(D.X)(e)||e.forEach(e=>{e.ej2_instances[0].checked=!1})}}getCheckBoxSelection(){if(this.isCheckedCount=0,!Object(D.X)(this.childCheckBox)){const e=this.childCheckBox.nativeElement.querySelectorAll(".e-checkbox");Object(D.X)(e)||e.forEach(e=>{e.checked&&++this.isCheckedCount})}return this.isCheckedCount}childOptionCheckBoxChange(e,t){this.isSelectAll=!1,this.setActiveList(),e.checked?this.getAdddependencyJson(t):(this.manipulateDepedencyJson(t),this.selectAllCheckBox.checked&&(this.selectAllCheckBox.checked=!1))}getAdddependencyJson(e){let t=null;Object(D.X)(this.getActiveOptionElement())||(t=parseInt(this.getActiveOptionElement().parentElement.getAttribute("data-id"),10));const i=[];let n,d=0;if(!Object(D.X)(t)){if(this.addDependencyJson.length>0&&(n=this.addDependencyJson.filter(e=>{if(e.parentFieldOptionId==t)return++d,e})),this.childFieldOptionContainer.nativeElement.querySelectorAll(".e-checkbox-wrapper").forEach(t=>{if(this.isSelectAll){const e=parseInt(t.getAttribute("data-id"),10);isNaN(e)||i.push(e)}else if(t.getAttribute("data-index")==e.toString()){const e=parseInt(t.getAttribute("data-id"),10);!Object(D.X)(n)&&n.length>0?n[0].childFieldOptionId.push(e):i.push(e)}}),this.getActiveCheckBoxCount()==this.childOptionDataCount&&(this.selectAllCheckBox.checked=!0),this.isSelectAll&&0==d)this.addDependencyJson.push({parentFieldOptionId:t,childFieldOptionId:i}),d=1;else if(this.isSelectAll&&d>0){const e=this.addDependencyJson.findIndex(e=>e.parentFieldOptionId==t);this.addDependencyJson[e].childFieldOptionId=i}0==d&&this.addDependencyJson.push({parentFieldOptionId:t,childFieldOptionId:i}),this.addDependencyJson.length>0&&this.resetAddDependencyButton(),this.disableAddDependencyButton()}}getActiveCheckBoxCount(){let e=0;return this.childFieldOptionContainer.nativeElement.querySelectorAll(".e-checkbox").forEach(t=>{t.checked&&++e}),e}getCurrentCheckBoxElementId(e,t){let i;return e.forEach(e=>{e.getAttribute("data-index")==t.toString()&&(i=parseInt(e.getAttribute("data-id"),10))}),i}manipulateUnSelectAllChanges(){let e=null;Object(D.X)(this.getActiveOptionElement())||(e=parseInt(this.getActiveOptionElement().parentElement.getAttribute("data-id"),10)),Object(D.X)(e)||(this.addDependencyJson.length>0&&(this.addDependencyJson=this.addDependencyJson.filter(t=>t.parentFieldOptionId!==e)),this.disableAddDependencyButton())}manipulateDepedencyJson(e){let t,i=null;if(Object(D.X)(this.getActiveOptionElement())||(i=parseInt(this.getActiveOptionElement().parentElement.getAttribute("data-id"),10)),this.addDependencyJson.length>0&&!Object(D.X)(i)){const n=this.childFieldOptionContainer.nativeElement.querySelectorAll(".e-checkbox-wrapper"),d=this.getCurrentCheckBoxElementId(n,e);this.addDependencyJson.filter(e=>{e.parentFieldOptionId==i&&(t=e.childFieldOptionId.filter(e=>e!==d))});const c=this.addDependencyJson.findIndex(e=>e.parentFieldOptionId==i);t.length>0?this.addDependencyJson[c].childFieldOptionId=t:this.addDependencyJson=this.addDependencyJson.filter(e=>e.parentFieldOptionId!==i)}this.disableAddDependencyButton()}setCheckBoxElement(){let e,t=[],i=[],n=0;if(this.addDependencyJson.length>0){if(Object(D.X)(this.getActiveOptionElement())||(e=parseInt(this.getActiveOptionElement().parentElement.getAttribute("data-id"),10)),t=this.addDependencyJson.filter(t=>{if(t.parentFieldOptionId==e)return t}),t.length>0&&(i=t[0].childFieldOptionId),i.forEach(e=>{this.childFieldOptionContainer.nativeElement.querySelectorAll(".e-checkbox-wrapper").forEach(t=>{const i=parseInt(t.getAttribute("data-id"),10);isNaN(i)||i==e&&(t.querySelector(".e-checkbox").ej2_instances[0].checked=!0,++n)})}),n>0&&!this.isAddFieldDependency){const e=this.getActiveOptionElement();Object(D.X)(e)||(e.classList.remove("hide-validation"),e.classList.add("show-validation"))}this.childOptionDataCount==n&&(this.selectAllCheckBox.checked=!0)}}saveFieldDependency(){this.parentDropFocusOut(),this.childDropFocusOut();let e={};this.isAddFieldDependency?!this.parentFieldRequired&&!this.childFieldRequired&&this.addDependencyJson.length>0&&(this.spinService.showSpinner(),e={dependencyMapping:this.addDependencyJson,parentFieldId:this.parentFieldDrop.value,childFieldId:this.childFieldDrop.value},this.postFieldDependency(e)):this.addDependencyJson.length>0&&(this.spinService.showSpinner(),e={fieldDependencyId:this.fieldDependencyId,dependencyMapping:this.addDependencyJson},this.postFieldDependency(e))}postFieldDependency(e){this.fieldDependencyService.addEditFieldDependency(e,this.isAddFieldDependency).then(e=>{e&&(Object(g.V)(!1),Object(v.c)(),this.spinService.hideSpinner(),this.toastService.successToast(e.result),this.router.navigateByUrl("/admin/field-dependencies"))})}addNewField(){this.moduleId===S.Ticket?window.open("admin/ticket-fields/add","_blank"):this.moduleId===S.Contact?window.open("admin/contact-fields/add","_blank"):this.moduleId===S.ContactGroup&&window.open("admin/contact-group-fields/add","_blank")}}return e.\u0275fac=function(t){return new(t||e)(y.Nb(F.a),y.Nb(x.a),y.Nb(r.a),y.Nb(r.g),y.Nb(A),y.Nb(T.a),y.Nb(E.a),y.Nb(C.b))},e.\u0275cmp=y.Hb({type:e,selectors:[["app-addedit-field-dependency"]],viewQuery:function(e,t){var i;1&e&&(y.Qc(w,!0),y.Qc(k,!0),y.Qc(L,!0),y.Qc(P,!0),y.Qc(j,!0),y.Qc(N,!0),y.Qc(M,!0),y.Qc(B,!0),y.Qc(J,!0)),2&e&&(y.xc(i=y.fc())&&(t.parentFieldDrop=i.first),y.xc(i=y.fc())&&(t.childFieldDrop=i.first),y.xc(i=y.fc())&&(t.parentFieldSearch=i.first),y.xc(i=y.fc())&&(t.addDependencyButton=i.first),y.xc(i=y.fc())&&(t.parentFieldOptionContainer=i.first),y.xc(i=y.fc())&&(t.childFieldOptionContainer=i.first),y.xc(i=y.fc())&&(t.childCheckBox=i.first),y.xc(i=y.fc())&&(t.selectAllCheckBox=i.first),y.xc(i=y.fc())&&(t.moduleDrop=i.first))},decls:17,vars:9,consts:[[1,"new-field-dependency-form"],[1,"new-field-dependency-part"],[1,"flex","ml-5","new-field-dependency-overflow","overflow-auto-align"],[1,"pt-2"],["fieldDependencyContainer",""],[4,"ngTemplateOutlet"],[1,"row","field-dependency-action-buttons"],[1,"col-lg-8"],["type","submit","ejs-button","",1,"mr-10","e-btn",3,"isPrimary","disabled","click"],["addDependencyButton",""],["type","button","cssClass","e-outline","ejs-button","",1,"e-btn",3,"click"],["newFieldDependency",""],[1,"form-group"],[1,"font-500","dependency-label"],[1,"secondary","padding-10"],[1,"form-group","flex-horizontal","no-margin","pt-2"],["class","col-4","style","padding-left: 10px;",4,"ngIf"],[1,"col-4",2,"padding-left","10px"],[1,"font-13"],[1,"hd-icon","hd-info"],[1,"error"],["popupHeight","200px",3,"htmlAttributes","dataSource","fields","filterBarPlaceholder","allowFiltering","placeholder","value","enabled","blur","change"],["parentFieldDrop",""],[1,"col-4"],["popupHeight","200px",3,"htmlAttributes","dataSource","filterBarPlaceholder","fields","placeholder","enabled","allowFiltering","value","blur","change"],["childFieldDrop",""],[1,"flex-horizontal"],["class","error-msg",4,"ngIf"],[1,"border-bottom","mt-4","mb-3","ml-2"],[1,"form-group","flex-vertical"],[1,"secondary","padding-10","col-10"],[1,"form-group","flex-horizontal"],[1,"col-4","pb-3",2,"padding-left","10px"],["parentFieldOptionContainer",""],[1,"flex"],[1,"no-wrap","ellipsis","flex-vertical","pr-2",2,"width","170px"],[1,"font-14","font-500"],["class","font-12 font-400 ellipsis secondary",4,"ngIf"],["class","font-14 font-500 link align-right",3,"click",4,"ngIf"],[1,"border",2,"height","310px"],[1,"search-box-padding",3,"hidden"],["showClearButton","true","autocomplete","off","maxlength","150",3,"placeholder","input"],["parentFieldSearch",""],["style","height: 255px; overflow: auto;",3,"hidden",4,"ngIf"],[1,"parent-field-items",3,"hidden"],["class","image-loader","align","center","style","padding-top: 60px;",4,"ngIf"],[1,"col-4","pb-3"],["childFieldOptionContainer",""],["class","font-12 font-400 ellipsis secondary",4,"ngIfSecondary","ngIf"],["class","link font-14 font-500 align-right",3,"click",4,"ngIf"],["popUpHeight","200px","index","0",3,"htmlAttributes","dataSource","fields","filterBarPlaceholder","placeholder","value","change"],["moduleDrop",""],[1,"error-msg"],[1,"font-12","font-400","ellipsis","secondary"],[1,"font-14","font-500","link","align-right",3,"click"],[2,"height","255px","overflow","auto",3,"hidden"],[4,"ngFor","ngForOf"],[1,"flex-horizontal","parent-field-items",3,"click"],[1,"no-wrap","ellipsis"],["class","pl-1 secondary",4,"ngIf"],[1,"align-right","hide-validation","active-option"],[1,"hd-icon","hd-tick",2,"font-size","16px"],[1,"pl-1","secondary"],["align","center",1,"image-loader",2,"padding-top","60px"],["src","./assets/images/field-dependency.png","alt","Loading","width","240px"],[1,"link","font-14","font-500","align-right",3,"click"],[2,"padding","10px"],["label","Select all",3,"checked","change"],["selectAllCheckBox",""],["childCheckBox",""],["style","padding: 10px;",4,"ngFor","ngForOf"],[3,"checked","label","change"],["class","pl-1 secondary","style","display: inline-flex;",4,"ngIf"],[1,"pl-1","secondary",2,"display","inline-flex"]],template:function(e,t){if(1&e&&(y.Tb(0,"div",0),y.Tb(1,"div",1),y.Tb(2,"div",2),y.Tb(3,"div",3,4),y.Jc(5,R,1,0,"ng-container",5),y.Sb(),y.Sb(),y.Tb(6,"div",6),y.Tb(7,"div",7),y.Tb(8,"button",8,9),y.ec("click",(function(){return t.saveFieldDependency()})),y.Lc(10),y.hc(11,"translate"),y.Sb(),y.Tb(12,"button",10),y.ec("click",(function(){return t.fieldDependencyCancel()})),y.Lc(13),y.hc(14,"translate"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Jc(15,ne,87,86,"ng-template",null,11,y.Kc)),2&e){const e=y.yc(16);y.xb(5),y.nc("ngTemplateOutlet",e),y.xb(3),y.nc("isPrimary",!1)("disabled",!0),y.xb(2),y.Nc(" ",y.ic(11,5,t.submitButtonText),""),y.xb(3),y.Mc(y.ic(14,7,"CANCEL"))}},directives:[n.r,s.c,n.n,l.e,a.i,n.m,s.e],pipes:[I.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.new-field-dependency-form[_ngcontent-%COMP%]{height:100%}.new-field-dependency-form[_ngcontent-%COMP%]   .form-builder[_ngcontent-%COMP%]{margin:0 auto 0 5%}.new-field-dependency-overflow[_ngcontent-%COMP%]{height:calc(100% - 50px)}.new-field-dependency-overflow[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:94%}.overflow-auto-align[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}.new-field-dependency-part[_ngcontent-%COMP%]{height:100%}.new-field-dependency-part[_ngcontent-%COMP%]   .field-dependency-action-buttons[_ngcontent-%COMP%]{background:#f7fafc;border-top:1px solid #e8eaed;bottom:0;height:50px;margin-left:0;padding:10px;position:fixed;width:100%}.new-field-dependency-part[_ngcontent-%COMP%]   .margin-left-20px[_ngcontent-%COMP%]{margin-left:20px!important}.new-field-dependency-part[_ngcontent-%COMP%]   .search-box-padding[_ngcontent-%COMP%]{border-bottom:1px solid #cbd2e0;overflow:hidden;padding:10px;width:inherit}.new-field-dependency-part[_ngcontent-%COMP%]   .parent-field-items[_ngcontent-%COMP%]{cursor:pointer;font-size:13px!important;padding:10px}.new-field-dependency-part[_ngcontent-%COMP%]   .parent-field-items[_ngcontent-%COMP%]:active, .new-field-dependency-part[_ngcontent-%COMP%]   .parent-field-items[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.1)}.new-field-dependency-part[_ngcontent-%COMP%]   .dependency-label[_ngcontent-%COMP%]{padding:10px 10px 4px}.new-field-dependency-part[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background:#e5efff;color:#0450cc!important;font-weight:500}.new-field-dependency-part[_ngcontent-%COMP%]   .active-icon[_ngcontent-%COMP%]{color:#0450cc!important}"]}),e})();var ce=i("M9dC"),oe=i("qBM0"),ae=i("64zv");const le=["fieldDependencyListGrid"],se=["fieldsDrop"],re=["fieldDependencyEle"],pe=["contextmenu"],he=["parentEle"],be=function(e){return{"max-width":e}};function ue(e,t){if(1&e){const e=y.Ub();y.Tb(0,"div",18),y.ec("click",(function(){y.Bc(e);const i=t.$implicit,n=y.gc();return n.moreOptionsSelect(n.editItem,i)})),y.Tb(1,"span",19,20),y.Tb(3,"span",21),y.Lc(4),y.Sb(),y.Sb(),y.Lc(5," -> "),y.Tb(6,"span",22),y.Tb(7,"span",21),y.Lc(8),y.Sb(),y.Sb(),y.Sb()}if(2&e){const e=t.$implicit,i=y.yc(2);y.yb("data-non-elliptical",!0)("data-title",e.parentField.name+" -> "+e.childField.name),y.xb(4),y.Mc(e.parentField.name),y.xb(2),y.nc("ngStyle",y.tc(5,be,"calc(100% - "+(i.offsetWidth+4)+"px)")),y.xb(2),y.Mc(e.childField.name)}}function fe(e,t){if(1&e&&(y.Tb(0,"span",23),y.Ob(1,"app-date-time",24),y.Sb()),2&e){const e=t.$implicit,i=y.gc();y.xb(1),y.nc("date",e.lastModifiedOn)("format",i.format)("timezone",i.timeZone)}}function De(e,t){if(1&e){const e=y.Ub();y.Tb(0,"div",25),y.Tb(1,"span",26),y.ec("click",(function(){y.Bc(e);const i=t.$implicit,n=y.gc();return n.moreOptionsSelect(n.editItem,i)})),y.hc(2,"translate"),y.Sb(),y.Tb(3,"span",27),y.ec("click",(function(){y.Bc(e);const i=t.$implicit,n=y.gc();return n.moreOptionsSelect(n.deleteItem,i)})),y.hc(4,"translate"),y.Sb(),y.Sb()}2&e&&(y.xb(1),y.yb("data-title",y.ic(2,2,"EDIT")),y.xb(2),y.yb("data-title",y.ic(4,4,"DELETE")))}let ge=(()=>{class e{constructor(e,t,i,n,d,c){this.appRootService=e,this.router=t,this.seoService=i,this.spinService=n,this.toastService=d,this.fieldDependencyService=c,this.autoCompleteAttribute={autocomplete:"anyrandomstring"},this.fieldDropFields={text:"text",value:"value"},this.fieldId=1,this.fieldsDropData=[{text:"Ticket",value:1},{text:"Contact",value:2},{text:"Contact Group",value:3}],this.animation={effect:"none"},this.editItem={item:{id:oe.a.Edit}},this.deleteItem={item:{id:oe.a.Delete}},this.timeZone=g.P.timeZoneOffset,this.format=g.e.dateFormat+" "+g.e.timeFormat,this.appRootService.setAppTitleText(Object(b.a)("FIELDDEPENDENCIES")),this.setSEOHeader();const o=Object(b.a)("ADMIN")+" / "+Object(b.a)("FIELDDEPENDENCIES"),a=Object(b.a)("FIELDDEPENDENCIES")+" | "+Object(b.a)("ADMIN");this.appRootService.setAppTitleText(o),this.seoService.setHeaderElements({title:a})}ngOnInit(){this.pageSettings={pageSize:g.q},this.href=this.router.url,this.loadGrid()}loadGrid(){let e=O.FieldDependencyList;e=Object(f.i)(e,"fieldModuleId",this.fieldId.toString()),this.fieldDependencyList=new u.a({url:e,adaptor:new ce.b})}setSEOHeader(){this.seoService.setHeaderElements({title:Object(b.a)("FIELDDEPENDENCIES")})}fieldDependencyListDataBound(){const e=this.grid.element.querySelector(".e-gridcontent .e-content .e-emptyrow td");e&&e.setAttribute("colspan","2"),setTimeout(()=>{this.grid.widthService.setWidthToColumns(),Object(f.a)(this.grid)})}fieldDependencyListActionBegin(e){"refresh"===e.requestType&&this.grid.searchModule.refreshSearch&&(this.grid.searchModule.refreshSearch=!1)}addFieldDependecy(){this.router.navigate([this.href+"/add"],{state:{data:{moduleId:this.fieldId}}})}fieldDependencyClick(e,t){e.stopPropagation(),this.router.navigate([this.href+"/"+t],{state:{data:{moduleId:this.fieldId}}})}cancelDialog(){this.deleteDialog.hide()}fieldsDropChange(){this.fieldId=this.fieldsDrop.value,this.loadGrid()}moreOptionsSelect(e,t){this.selectedItemData=t,e.item.id===oe.a.Edit?this.router.navigate([this.href+"/"+this.selectedItemData.id],{state:{data:{moduleId:this.fieldId}}}):Object(f.b)(this.updateDeleteFieldDependency,this.cancelDialog,this,Object(b.a)("DELETE")+" "+Object(b.a)("FIELDDEPENDENCY"),Object(b.a)("FIELDDEPENDENCYDELETEALERT"))}updateDeleteFieldDependency(){this.spinService.showSpinner(),this.fieldDependencyService.deleteFieldDependency(this.selectedItemData.id).then(e=>{e&&(this.spinService.hideSpinner(),this.deleteDialog.hide(),this.loadGrid(),this.toastService.successToast(e.result))}).catch(e=>{const t=Object(f.q)(e.error);400===e.status&&(this.spinService.hideSpinner(),this.toastService.failureToast(t))})}}return e.\u0275fac=function(t){return new(t||e)(y.Nb(F.a),y.Nb(r.g),y.Nb(x.a),y.Nb(T.a),y.Nb(E.a),y.Nb(A))},e.\u0275cmp=y.Hb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var i;1&e&&(y.Qc(le,!0),y.Qc(se,!0),y.Qc(re,!0),y.Qc(pe,!0),y.Qc(he,!0)),2&e&&(y.xc(i=y.fc())&&(t.grid=i.first),y.xc(i=y.fc())&&(t.fieldsDrop=i.first),y.xc(i=y.fc())&&(t.fieldDependencyEle=i.first),y.xc(i=y.fc())&&(t.contextmenu=i.first),y.xc(i=y.fc())&&(t.parentEle=i.first))},decls:34,vars:27,consts:[[1,"hd-grid-full-height"],["fieldDependencyEle",""],[1,"secondary","padding-10","information-content"],[1,"bd-icon","bd-icon-info","information-icon"],[1,"flex-horizontal","mt-3","mr-3","mb-3","pr-1"],[1,"pl-4","mt-1","font-500"],[1,"pl-3"],["width","150","popUpHeight","200px","index","0",3,"htmlAttributes","dataSource","fields","filterBarPlaceholder","placeholder","change"],["fieldsDrop",""],[1,"align-right"],["type","submit","ejs-button","",1,"e-btn","e-outline","e-primary",3,"click"],[1,"pl-20","pr-20"],["allowResizing","true",3,"dataSource","allowPaging","pageSettings","dataBound","actionBegin"],["fieldDependencyListGrid",""],["field","parentField","minWidth","180","width","200",3,"headerText"],["template",""],["field","lastModifiedOn","minWidth","60","width","80",3,"headerText"],["minWidth","100","width","100","textAlign","Center"],[1,"primary-link-color","cursor-pointer","width-100",3,"click"],[2,"max-width","45%","display","inline-flex"],["parentEle",""],[1,"no-wrap","ellipsis"],[2,"display","inline-flex",3,"ngStyle"],[1,"grid-text-font-color"],[3,"date","format","timezone"],[1,"cursor-pointer"],[1,"bd-icon","bd-icon-edit","more-option-button",3,"click"],[1,"bd-icon","bd-icon-delete-2","more-option-button",3,"click"]],template:function(e,t){1&e&&(y.Tb(0,"div",0,1),y.Tb(2,"div",2),y.Ob(3,"div",3),y.Lc(4),y.hc(5,"translate"),y.Sb(),y.Tb(6,"div",4),y.Tb(7,"label",5),y.Lc(8),y.hc(9,"translate"),y.Sb(),y.Tb(10,"div",6),y.Tb(11,"ejs-dropdownlist",7,8),y.ec("change",(function(){return t.fieldsDropChange()})),y.hc(13,"translate"),y.hc(14,"translate"),y.Sb(),y.Sb(),y.Tb(15,"div",9),y.Tb(16,"button",10),y.ec("click",(function(){return t.addFieldDependecy()})),y.Lc(17),y.hc(18,"translate"),y.Sb(),y.Sb(),y.Sb(),y.Tb(19,"div",11),y.Tb(20,"ejs-grid",12,13),y.ec("dataBound",(function(){return t.fieldDependencyListDataBound()}))("actionBegin",(function(e){return t.fieldDependencyListActionBegin(e)})),y.Tb(22,"e-columns"),y.Tb(23,"e-column",14),y.hc(24,"translate"),y.Jc(25,ue,9,7,"ng-template",null,15,y.Kc),y.Sb(),y.Tb(27,"e-column",16),y.hc(28,"translate"),y.Jc(29,fe,2,3,"ng-template",null,15,y.Kc),y.Sb(),y.Tb(31,"e-column",17),y.Jc(32,De,5,6,"ng-template",null,15,y.Kc),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb()),2&e&&(y.xb(4),y.Nc(" ",y.ic(5,13,"FIELDDEPENDENCYMODULEINFO"),""),y.xb(4),y.Nc(" ",y.ic(9,15,"MODULE")," "),y.xb(3),y.oc("filterBarPlaceholder",y.ic(13,17,"SEARCH")),y.oc("placeholder",y.ic(14,19,"SELECT")),y.nc("htmlAttributes",t.autoCompleteAttribute)("dataSource",t.fieldsDropData)("fields",t.fieldDropFields),y.xb(6),y.Nc(" ",y.ic(18,21,"ADDFIELDDEPENDENCY"),""),y.xb(3),y.nc("dataSource",t.fieldDependencyList)("allowPaging",!0)("pageSettings",t.pageSettings),y.xb(3),y.oc("headerText",y.ic(24,23,"PARENTFIELDHEADER")),y.xb(4),y.oc("headerText",y.ic(28,25,"LASTMODIFIED")))},directives:[l.e,s.c,c.k,c.e,c.b,c.d,c.a,n.o,ae.a],pipes:[I.a],encapsulation:2}),e})(),me=(()=>{class e{constructor(e,t,i){this.http=e,this.spinService=t,this.router=i}resolve(e){return this.spinService.showSpinner(),this.http.get(O.FieldDependencyOptions+"/"+e.params.id).toPromise().catch(e=>this.router.navigateByUrl("error",{state:e.error.errors[0].errorMessage,skipLocationChange:!0}))}}return e.\u0275fac=function(t){return new(t||e)(y.bc(C.b),y.bc(T.a),y.bc(r.g))},e.\u0275prov=y.Jb({token:e,factory:e.\u0275fac}),e})();const Oe=[{path:"",component:ge},{path:"add",component:de,data:{isAddFieldDependency:!0},canDeactivate:[h.a]},{path:":id",component:de,resolve:{data:me},data:{isAddFieldDependency:!1},canDeactivate:[h.a]},{path:"**",component:p.a}];let Se=(()=>{class e{}return e.\u0275mod=y.Lb({type:e}),e.\u0275inj=y.Kb({factory:function(t){return new(t||e)},imports:[[r.k.forChild(Oe)],r.k]}),e})();var ve=i("hXFv");let ye=(()=>{class e{}return e.\u0275mod=y.Lb({type:e}),e.\u0275inj=y.Kb({factory:function(t){return new(t||e)},providers:[A,me],imports:[[n.b,Se,d.a,c.j,o.AdminModule,a.h,l.d,s.b,s.d,ve.e]]}),e})()},mrjb:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("dSv1"),d=i("fXoL");let c=(()=>{class e{constructor(){this.title=Object(n.a)("PAGENOTFOUND"),this.message=Object(n.a)("PAGENOTFOUNDMESSAGE")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Hb({type:e,selectors:[["app-page-not-found"]],decls:10,vars:2,consts:[[1,"fallback-container","flex-vertical"],[1,"row","container","align-center","mt-100"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"fallback_image"],["height","300","width","300","src","assets/images/page-not-found.png"],[1,"fallback_message"],[1,"error-font"],[1,"message-style","font-16"]],template:function(e,t){1&e&&(d.Tb(0,"div",0),d.Tb(1,"div",1),d.Tb(2,"div",2),d.Tb(3,"div",3),d.Ob(4,"img",4),d.Sb(),d.Tb(5,"div",5),d.Tb(6,"div",6),d.Lc(7),d.Sb(),d.Tb(8,"span",7),d.Lc(9),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb()),2&e&&(d.xb(7),d.Mc(t.title),d.xb(2),d.Mc(t.message))},styles:[".fallback-container[_ngcontent-%COMP%]{height:100%;text-align:center}.fallback-container[_ngcontent-%COMP%]   .message-style[_ngcontent-%COMP%]{font-weight:400;line-height:24px;padding-top:6px}"]}),e})()},qBM0:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.Edit="1",e.Activate="2",e.Deactivate="3",e.Delete="4",e}({})},qZph:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("58Y9"),d=i("4SUy"),c=i("fXoL");let o=(()=>{class e{transform(e){if(!Object(d.X)(e))return e+" (UTC "+Object(n.K)()+")"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.Mb({name:"dateTimeUTC",type:e,pure:!0}),e})()}}]);