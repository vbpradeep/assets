(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"6+Vf":function(t,e,i){"use strict";i.r(e),i.d(e,"ContactFormsModule",(function(){return Z}));var n=i("ofXK"),c=i("ltyr"),o=i("hXFv"),a=i("np3I"),s=i("jcQU"),r=i("GJ+o"),l=i("Pk9d"),d=i("QYJQ"),h=i("SRvG"),p=i("tyNb"),b=i("mrjb"),m=i("TSZ8"),u=i("5LOs"),g=i("hCAU"),f=i("58Y9"),v=i("M9dC"),T=i("dSv1"),C=i("H552"),S=i("1gpv");const O={ContactFieldsList:S.f+"contact_fields",ActivateContactField:S.f+"contact_fields",DeactivateContactField:S.f+"contact_fields",DeleteContactField:S.f+"contact_fields",PositionChange:S.f+"contact_fields"};var I=i("A4Lh"),F=i("qBM0"),D=i("oRrO"),x=i("4SUy"),E=i("y5ZJ"),A=i("fXoL"),w=i("1kef"),L=i("JCZ/"),N=i("IaKf"),j=i("tk/3"),y=i("kR0U");let P=(()=>{class t{constructor(t){this.http=t,this.httpOptions={headers:new j.e({"Content-Type":"application/json"})}}deleteContactField(t){return this.http.delete(y.a.FieldDelete+"/"+t).toPromise()}toggleContactField(t,e){return this.http.post(t?y.a.FieldActiveOrDeactivate+"/"+e+"/activate":y.a.FieldActiveOrDeactivate+"/"+e+"/deactivate",this.httpOptions).toPromise()}changePosition(t,e){return this.http.put(O.PositionChange+"/"+t+"/position_change",e).toPromise()}}return t.\u0275fac=function(e){return new(e||t)(A.bc(j.b))},t.\u0275prov=A.Jb({token:t,factory:t.\u0275fac}),t})();var M=i("X8pc"),k=i("AjNn");const R=["contactFormsListGrid"],B=["contextmenu"],_=["contactFormEle"];function G(t,e){if(1&t&&(A.Tb(0,"span"),A.Tb(1,"div"),A.Ob(2,"i",22),A.Sb(),A.Sb()),2&t){const t=e.$implicit;A.xb(1),A.yb("data-non-elliptical",!0)("data-title",t.fieldType),A.xb(1),A.oc("ngClass",null!=t.fieldTypeIconCssClass?t.fieldTypeIconCssClass:"bd-custom-default-icon")}}function J(t,e){1&t&&(A.Tb(0,"span",30),A.Tb(1,"span"),A.Lc(2),A.hc(3,"translate"),A.Sb(),A.Sb()),2&t&&(A.xb(2),A.Nc(" ",A.ic(3,1,"SYSTEM"),""))}function U(t,e){1&t&&(A.Tb(0,"span",31),A.Tb(1,"span"),A.Lc(2),A.hc(3,"translate"),A.Sb(),A.Sb()),2&t&&(A.xb(2),A.Nc(" ",A.ic(3,1,"INACTIVE"),""))}function V(t,e){if(1&t){const t=A.Ub();A.Tb(0,"div",23),A.Tb(1,"div",24),A.Tb(2,"span",25),A.Tb(3,"span",26),A.Tb(4,"span",27),A.ec("click",(function(i){A.Bc(t);const n=e.$implicit,c=A.gc();return n.canEditConfiguration?c.fieldNameClick(i,n.fieldId):""})),A.Lc(5),A.Sb(),A.Sb(),A.Jc(6,J,4,3,"span",28),A.Jc(7,U,4,3,"span",29),A.Sb(),A.Sb(),A.Sb()}if(2&t){const t=e.$implicit;A.xb(4),A.nc("ngClass",t.canEditConfiguration?"primary-link-color-blue cursor-pointer":""),A.yb("data-title",t.labelForAgentPortal),A.xb(1),A.Mc(t.labelForAgentPortal),A.xb(1),A.nc("ngIf",t.isDefaultSystemField),A.xb(1),A.nc("ngIf",!t.isActive)}}function K(t,e){if(1&t&&(A.Tb(0,"div"),A.Tb(1,"div",32),A.Lc(2),A.hc(3,"translate"),A.hc(4,"translate"),A.Sb(),A.Sb()),2&t){const t=e.$implicit;A.xb(2),A.Nc(" ",t.isVisibleInCustomerPortal?A.ic(3,1,"YES"):A.ic(4,3,"NO"),"")}}function W(t,e){if(1&t){const t=A.Ub();A.Tb(0,"span",36),A.ec("click",(function(){A.Bc(t);const e=A.gc().$implicit,i=A.gc();return i.moreOptionsSelect(i.editItem,e)})),A.hc(1,"translate"),A.Sb()}2&t&&A.yb("data-title",A.ic(1,1,"EDIT"))}function $(t,e){if(1&t){const t=A.Ub();A.Tb(0,"span",37),A.ec("click",(function(e){A.Bc(t);const i=A.gc().$implicit;return A.gc().bindBtnTemplate(e,i)})),A.Sb()}}function q(t,e){if(1&t&&(A.Tb(0,"div",33),A.Jc(1,W,2,3,"span",34),A.Jc(2,$,1,0,"span",35),A.Sb()),2&t){const t=e.$implicit;A.xb(1),A.nc("ngIf",t.canEditConfiguration),A.xb(1),A.nc("ngIf",t.canEditConfiguration&&!(t.isDefaultSystemField&&t.isActive))}}let Q=(()=>{class t{constructor(t,e,i,n,c,o,a){this.appRootService=t,this.seoService=e,this.router=i,this.toastService=n,this.contactGroupService=c,this.spinService=o,this.cd=a,this.perPage=I.E.toString(),this.currentpage="1",this.listItems=[{text:"Activate",id:"2"},{text:"Deactivate",id:"3"},{text:"Delete",id:"4"}],this.activeFieldItems=["Deactivate","Delete"],this.inActiveFieldItems=["Activate","Delete"],this.animation={effect:"none"},this.fieldTypeEnum=D.a,this.editItem={item:{id:F.a.Edit}},this.preventFields=[{apiName:u.d.ContactName},{apiName:u.d.ContactDisplayName},{apiName:u.d.ContactEmail},{apiName:u.d.ContactGroup},{apiName:u.d.ContactGroupAccessScope}];const s=Object(T.a)("ADMIN")+" / "+Object(T.a)("CONTACTFIELDS"),r=Object(T.a)("CONTACTFIELDS")+" | "+Object(T.a)("ADMIN");this.appRootService.setAppTitleText(s),this.seoService.setHeaderElements({title:r}),this.appRootService.isSideBarNeeded(!0),this.appRootService.setBrandDropDownVisibility(!1)}ngOnInit(){let t=O.ContactFieldsList;t=Object(f.i)(t,"Page",this.currentpage),t=Object(f.i)(t,"PerPage",this.perPage),this.contactFormsList=new C.a({url:t,adaptor:new v.b}),this.href=this.router.url}ngAfterViewInit(){this.contactFormEle.nativeElement.addEventListener("scroll",()=>{this.contextmenu.close()})}contactFormsListDataBound(){this.grid.widthService.setWidthToColumns(),Object(f.a)(this.grid);const t=this.grid.getCurrentViewRecords(),e=[];t.forEach((t,i)=>{this.preventFields.forEach(n=>{n.apiName==t.apiName&&e.push(this.grid.getRowByIndex(i))})});for(let i=0;i<e.length;i++){const t=document.createElement("td");t.classList.add("intentcell"),e[i].querySelector(".e-rowdragdrop").remove(),e[i].prepend(t),i>0&&(e[i].querySelector(".intentcell").style.borderTop="1px solid #e0e0e0")}}fieldNameClick(t,e){t.stopPropagation(),this.router.navigateByUrl(this.href+"/"+e)}addContactFieldClick(){this.router.navigateByUrl("/admin/contact-fields/add")}bindBtnTemplate(t,e){this.selectedItemData=e;const i=Object(l.f)(t.target);this.contextmenu.open(i.top+16,i.left-5,t.target)}itemBeforeEvent(){this.selectedItemData.isActive&&!this.selectedItemData.isDefaultSystemField?(this.contextmenu.hideItems(this.inActiveFieldItems),this.contextmenu.showItems(this.activeFieldItems)):(this.contextmenu.hideItems(this.activeFieldItems),this.contextmenu.showItems(this.inActiveFieldItems))}moreOptionsSelect(t,e){t.item.id===F.a.Edit?this.router.navigateByUrl(this.href+"/"+e.fieldId):t.item.id===F.a.Delete?Object(f.b)(this.updateDeleteContactField,this.cancelDialog,this,Object(T.a)("DELETE")+" "+Object(T.a)("CONTACTFIELD"),Object(T.a)("CONTACTFIELDDELETEALERT")):t.item.id===F.a.Activate?(this.isEnabled=!0,Object(f.b)(this.toggleContactField,this.cancelDialog,this,Object(T.a)("ACTIVATE")+" "+Object(T.a)("CONTACTFIELD"),Object(T.a)("CONTACTFIELDACTIVATEALERT"),Object(T.a)("YES")+", "+Object(T.a)("ACTIVATE"),"",!0)):(this.isEnabled=!1,Object(f.b)(this.toggleContactField,this.cancelDialog,this,Object(T.a)("DEACTIVATE")+" "+Object(T.a)("CONTACTFIELD"),Object(T.a)("CONTACTFIELDDEACTIVATEALERT"),Object(T.a)("YES")+", "+Object(T.a)("DEACTIVATE")))}cancelDialog(){this.deleteDialog.hide()}loadGrid(){let t=O.ContactFieldsList;t=Object(f.i)(t,"Page",this.currentpage),t=Object(f.i)(t,"PerPage",this.perPage),this.contactFormsList=new C.a({url:t,adaptor:new v.b}),this.cd.detectChanges()}toggleContactField(){this.spinService.showSpinner(),this.contactGroupService.toggleContactField(this.isEnabled,this.selectedItemData.fieldId).then(t=>{t&&(this.spinService.hideSpinner(),this.deleteDialog.hide(),this.loadGrid(),this.toastService.successToast(t.result),Object(E.c)())}).catch(t=>{const e=Object(f.q)(t.error);400===t.status&&(this.spinService.hideSpinner(),this.toastService.failureToast(e))})}updateDeleteContactField(){this.spinService.showSpinner(),this.contactGroupService.deleteContactField(this.selectedItemData.fieldId).then(t=>{t&&(this.spinService.hideSpinner(),this.deleteDialog.hide(),this.loadGrid(),this.toastService.successToast(t.result),Object(E.c)())}).catch(t=>{const e=Object(f.q)(t.error);400===t.status&&(this.spinService.hideSpinner(),this.toastService.failureToast(e))})}contactFieldDrag(t){const e=this.grid.getRowInfo(t.target).rowData;e&&this.preventFields.forEach(i=>{i.apiName==e.apiName&&(t.cancel=!0)})}contactFieldDrop(t){const e=this.grid.getRowInfo(this.grid.getRowByIndex(t.dropIndex)).rowData;e&&this.preventFields.forEach(i=>{i.apiName==e.apiName&&(t.cancel=!0)});const i=t.data[0].fieldId;if(t.cancel=!0,t.fromIndex===t.dropIndex||Object(x.X)(t.dropIndex)||isNaN(t.dropIndex))return;const n={toPosition:++t.dropIndex};this.spinService.showSpinner(),this.contactGroupService.changePosition(i,n).then(t=>{t&&(this.spinService.hideSpinner(),this.loadGrid(),this.toastService.successToast(t.result),Object(E.c)())}).catch(t=>{const e=Object(f.q)(t.error);400===t.status&&(this.spinService.hideSpinner(),this.toastService.failureToast(e))})}}return t.\u0275fac=function(e){return new(e||t)(A.Nb(w.a),A.Nb(L.a),A.Nb(p.g),A.Nb(N.a),A.Nb(P),A.Nb(M.a),A.Nb(A.h))},t.\u0275cmp=A.Hb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(A.Gc(R,!0),A.Qc(B,!0),A.Qc(_,!0)),2&t&&(A.xc(i=A.fc())&&(e.grid=i.first),A.xc(i=A.fc())&&(e.contextmenu=i.first),A.xc(i=A.fc())&&(e.contactFormEle=i.first))},decls:37,vars:19,consts:[[1,"contact-forms-grid","hd-grid-full-height"],["contactFormEle",""],[1,"secondary","padding-10","information-content"],[1,"bd-icon","bd-icon-info","information-icon","information-icon-position"],[1,"no-padding"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","flex-horizontal","no-margin"],[1,"grid-menu-bar"],[1,"grid-menu","width100"],[1,"add-button-container"],["type","button","ejs-button","",1,"e-btn","add-button","e-primary","e-outline",3,"click"],[1,"no-margin","pl-20","pr-20","height-100"],[1,"contact-form-list"],["allowResizing","true","height","100%",3,"dataSource","allowRowDragAndDrop","dataBound","rowDrop","rowDrag"],["contactFormsListGrid",""],["minWidth","40","width","40"],["template",""],["field","labelForAgentPortal","minWidth","150","width","200","textAlign","Left",3,"headerText"],["field","labelForCustomerPortal","minWidth","150","width","150","textAlign","Left","clipMode","EllipsisWithTooltip",3,"headerText"],["field","isVisibleInCustomerPortal","minWidth","80","width","110","textAlign","Center","clipMode","EllipsisWithTooltip",3,"headerText"],["minWidth","100","width","100","textAlign","Center"],[3,"items","animationSettings","beforeOpen","select"],["contextmenu",""],[1,"bd-icon",2,"font-size","16px","position","relative","top","4px",3,"ngClass"],[1,"flex-horizontal","secondary","p-1"],[1,"flex-vertical","no-wrap","ellipsis"],[1,"flex-horizontal"],[1,"e-text","no-wrap","ellipsis"],[3,"ngClass","click"],["class","grid-label status left-spacing",4,"ngIf"],["class","grid-label status left-spacing inactive-label",4,"ngIf"],[1,"grid-label","status","left-spacing"],[1,"grid-label","status","left-spacing","inactive-label"],[1,"grid-text-font-color"],[1,"cursor-pointer"],["class","bd-icon bd-icon-edit more-option-button",3,"click",4,"ngIf"],["class","hd-icon hd-vertical-menu more-option-button",3,"click",4,"ngIf"],[1,"bd-icon","bd-icon-edit","more-option-button",3,"click"],[1,"hd-icon","hd-vertical-menu","more-option-button",3,"click"]],template:function(t,e){1&t&&(A.Tb(0,"div",0,1),A.Tb(2,"div",2),A.Ob(3,"div",3),A.Lc(4),A.hc(5,"translate"),A.Sb(),A.Tb(6,"div",4),A.Tb(7,"div",5),A.Tb(8,"div",6),A.Tb(9,"div",7),A.Tb(10,"div",8),A.Tb(11,"button",9),A.ec("click",(function(){return e.addContactFieldClick()})),A.Lc(12),A.hc(13,"translate"),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Tb(14,"div",10),A.Tb(15,"div",11),A.Tb(16,"ejs-grid",12,13),A.ec("dataBound",(function(){return e.contactFormsListDataBound()}))("rowDrop",(function(t){return e.contactFieldDrop(t)}))("rowDrag",(function(t){return e.contactFieldDrag(t)})),A.Tb(18,"e-columns"),A.Tb(19,"e-column",14),A.Jc(20,G,3,3,"ng-template",null,15,A.Kc),A.Sb(),A.Tb(22,"e-column",16),A.hc(23,"translate"),A.Jc(24,V,8,5,"ng-template",null,15,A.Kc),A.Sb(),A.Ob(26,"e-column",17),A.hc(27,"translate"),A.Tb(28,"e-column",18),A.hc(29,"translate"),A.Jc(30,K,5,5,"ng-template",null,15,A.Kc),A.Sb(),A.Tb(32,"e-column",19),A.Jc(33,q,3,2,"ng-template",null,15,A.Kc),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Tb(35,"ejs-contextmenu",20,21),A.ec("beforeOpen",(function(){return e.itemBeforeEvent()}))("select",(function(t){return e.moreOptionsSelect(t)})),A.Sb()),2&t&&(A.xb(4),A.Mc(A.ic(5,9,"CONTACTFIELDSMODULEINFO")),A.xb(8),A.Nc(" ",A.ic(13,11,"ADDCONTACTFIELD")," "),A.xb(4),A.nc("dataSource",e.contactFormsList)("allowRowDragAndDrop",!0),A.xb(6),A.oc("headerText",A.ic(23,13,"LABELFORAGENTPORATL")),A.xb(4),A.oc("headerText",A.ic(27,15,"LABELFORCUTOMERPORTAL")),A.xb(2),A.oc("headerText",A.ic(29,17,"VISIBLEINCUSTOMERPORTAL")),A.xb(7),A.nc("items",e.listItems)("animationSettings",e.animation))},directives:[h.c,r.k,r.e,r.b,r.d,r.a,o.f,n.l,n.n],pipes:[k.a],styles:[".contact-forms-grid[_ngcontent-%COMP%]{overflow:hidden}.contact-forms-grid[_ngcontent-%COMP%]   .add-button-container[_ngcontent-%COMP%]{padding:12px 5px!important}.contact-forms-grid[_ngcontent-%COMP%]   .contact-form-list[_ngcontent-%COMP%]{height:calc(100% - 100px)}.contact-forms-grid[_ngcontent-%COMP%]   .e-gridcontent[_ngcontent-%COMP%]{height:calc(100% - 40px)!important}.contact-forms-grid[_ngcontent-%COMP%]   .e-gridcontent[_ngcontent-%COMP%]   .e-content[_ngcontent-%COMP%]{height:inherit!important;overflow-y:auto!important}.e-dialog[cssClass=contact-dialog][_ngcontent-%COMP%]{max-height:100%!important}.e-dialog[cssClass=contact-dialog][_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]{padding:0 4px!important}"],changeDetection:0}),t})(),Y=(()=>{class t{constructor(t,e,i){this.http=t,this.spinService=e,this.router=i}resolve(t){return this.spinService.showSpinner(),this.http.get(O.ContactFieldsList+"/"+t.params.id).toPromise().catch(t=>this.router.navigateByUrl("error",{state:t.error.errors[0].errorMessage,skipLocationChange:!0}))}}return t.\u0275fac=function(e){return new(e||t)(A.bc(j.b),A.bc(M.a),A.bc(p.g))},t.\u0275prov=A.Jb({token:t,factory:t.\u0275fac}),t})();const z=[{path:"",component:Q},{path:"add",component:g.a,data:{customFieldsType:u.c.ContactFields,addCustomField:!0,module:u.b.Contact},canDeactivate:[m.a]},{path:":id",component:g.a,resolve:{data:Y},data:{customFieldsType:u.c.ContactFields,addCustomField:!1,module:u.b.Contact},canDeactivate:[m.a]},{path:"**",component:b.a}];let X=(()=>{class t{}return t.\u0275mod=A.Lb({type:t}),t.\u0275inj=A.Kb({factory:function(e){return new(e||t)},imports:[[p.k.forChild(z)],p.k]}),t})();var H=i("Pl5m");let Z=(()=>{class t{}return t.\u0275mod=A.Lb({type:t}),t.\u0275inj=A.Kb({factory:function(e){return new(e||t)},providers:[P,Y],imports:[[n.b,X,c.a,H.a,r.j,o.j,a.AdminModule,s.d,l.a,d.h,h.b,h.j,o.e,h.h,h.d]]}),t})()}}]);