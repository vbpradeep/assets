(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{EiDu:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("fXoL"),i=n("jhN1");let s=(()=>{class e{constructor(e){this.sanitizer=e}transform(e,t){switch(t){case"html":return this.sanitizer.bypassSecurityTrustHtml(e);case"style":return this.sanitizer.bypassSecurityTrustStyle(e);case"script":return this.sanitizer.bypassSecurityTrustScript(e);case"url":return this.sanitizer.bypassSecurityTrustUrl(e);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(e);default:throw new Error("Invalid safe type specified: "+t)}}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(i.c))},e.\u0275pipe=o.Mb({name:"safe",type:e,pure:!0}),e})()},GOTl:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("1gpv");const i={CannedResponses:o.f+"canned_responses",CannedResponseCategories:o.f+"canned_response_categories"}},JNPz:function(e,t,n){"use strict";n.d(t,"b",(function(){return pe})),n.d(t,"e",(function(){return be})),n.d(t,"c",(function(){return fe})),n.d(t,"d",(function(){return me})),n.d(t,"a",(function(){return Ce}));var o=n("fXoL"),i=n("bYFv"),s=n("1gpv"),c=n("G2Tp"),a=n("3v1o"),r=n("58Y9"),l=n("M9dC"),d=n("4SUy"),g=n("GOTl"),p=n("H552"),h=n("n6zm"),b=n("CRtO"),u=n("tk/3"),f=n("X8pc"),m=n("ScLb");let C=(()=>{class e{constructor(e){this.http=e}fetchCannedResponseCategories(){const e=Object(r.i)(g.a.CannedResponseCategories,"PerPage","100");return this.http.get(e).toPromise()}fetchCannedResponseList(e,t,n,o){let i=Object(r.i)(g.a.CannedResponses+"/list","categoryId",e);return n&&parseInt(n)>0&&(i=Object(r.i)(i,"perPageCount",n)),t&&(i=Object(r.i)(i,"searchText",t)),parseInt(o)>1&&(i=Object(r.i)(i,"page",o)),this.http.get(i).toPromise()}fetchCannedResponse(e){return this.http.get(g.a.CannedResponses+"/"+e).toPromise()}fetchCannedResponseDetail(e,t){return this.http.post(g.a.CannedResponses+"/"+e+"/resolve",t).toPromise()}fetchEmailPlaceHolderList(){return this.http.get(m.a.PlaceHolderList).toPromise()}}return e.\u0275fac=function(t){return new(t||e)(o.bc(u.b))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var O=n("KWhx"),S=n("ofXK"),v=n("3Pt+"),x=n("Pk9d"),P=n("jcQU"),M=n("QYJQ"),T=n("SRvG"),y=n("KDci"),R=n("AjNn");const w=["richTextEditor"],_=["placeholderDialog"],I=["responseTemplate"],j=["accordion"],L=["dropdownlistObj"],D=["tooltipObj"],F=["searchResponseObj"],k=["loadMoreBtn"];function B(e,t){if(1&e&&(o.Tb(0,"label"),o.Lc(1),o.Sb()),2&e){const e=o.gc(2);o.xb(1),o.Nc(" ",e.label,"\n")}}function U(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",7),o.Jc(1,B,2,1,"label",4),o.Tb(2,"label",8),o.Tb(3,"span",9),o.ec("mousedown",(function(){return o.Bc(e),o.gc().openPlaceholderDialog()})),o.Lc(4),o.hc(5,"translate"),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=o.gc();o.xb(1),o.nc("ngIf",e.label),o.xb(3),o.Nc(" ",o.ic(5,2,"INSERTPLACEHOLDERS")," ")}}function E(e,t){if(1&e&&(o.Tb(0,"label"),o.Lc(1),o.Tb(2,"span",10),o.Lc(3,"*"),o.Sb(),o.Sb()),2&e){const e=o.gc(2);o.xb(1),o.Nc(" ",e.label," ")}}function N(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",7),o.Jc(1,E,4,1,"label",4),o.Tb(2,"label",8),o.Tb(3,"span",9),o.ec("mousedown",(function(){return o.Bc(e),o.gc().openPlaceholderDialog()})),o.Lc(4),o.hc(5,"translate"),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=o.gc();o.xb(1),o.nc("ngIf",e.label),o.xb(3),o.Nc(" ",o.ic(5,2,"USECANNEDRESPONSE")," ")}}function z(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",11),o.Tb(1,"ejs-richtexteditor",12,13),o.ec("blur",(function(t){return o.Bc(e),o.gc().rteFocusOut(t)}))("focus",(function(t){return o.Bc(e),o.gc().rteFocus(t)}))("created",(function(){return o.Bc(e),o.gc().rteCreate()}))("imageUploading",(function(t){return o.Bc(e),o.gc().imageBeforeUpload(t)}))("imageUploadSuccess",(function(t){return o.Bc(e),o.gc().imageUploadSuccess(t)}))("dialogOpen",(function(t){return o.Bc(e),o.gc().rteDialogOpen(t)}))("dialogClose",(function(){return o.Bc(e),o.gc().rteDialogClose()}))("actionComplete",(function(t){return o.Bc(e),o.gc().rteActionComplete(t)}))("imageRemoving",(function(){return o.Bc(e),o.gc().rteImageCancelCallback()})),o.Sb(),o.Sb()}if(2&e){const e=o.gc();o.nc("formGroup",e.formGroupObj),o.xb(1),o.pc("id","",e.id,"_RTE"),o.nc("height",e.height)("value",e.value)("placeholder",e.placeholder)("toolbarSettings",e.toolbarSettings)("insertImageSettings",e.imageSettings)("formControlName",e.reactiveFormName)("pasteCleanupSettings",e.pastSettings)("htmlAttributes",e.autoCompleteAttribute)("htmlAttributes",e.htmlAttributes)}}function A(e,t){if(1&e){const e=o.Ub();o.Tb(0,"ejs-richtexteditor",14,13),o.ec("blur",(function(t){return o.Bc(e),o.gc().rteFocusOut(t)}))("focus",(function(t){return o.Bc(e),o.gc().rteFocus(t)}))("created",(function(){return o.Bc(e),o.gc().rteCreate()}))("imageUploading",(function(t){return o.Bc(e),o.gc().imageBeforeUpload(t)}))("imageUploadSuccess",(function(t){return o.Bc(e),o.gc().imageUploadSuccess(t)}))("dialogOpen",(function(t){return o.Bc(e),o.gc().rteDialogOpen(t)}))("dialogClose",(function(){return o.Bc(e),o.gc().rteDialogClose()}))("actionComplete",(function(t){return o.Bc(e),o.gc().rteActionComplete(t)}))("imageRemoving",(function(){return o.Bc(e),o.gc().rteImageCancelCallback()})),o.Sb()}if(2&e){const e=o.gc();o.pc("id","",e.id,"_RTE"),o.nc("height",e.height)("value",e.value)("placeholder",e.placeholder)("toolbarSettings",e.toolbarSettings)("insertImageSettings",e.imageSettings)("pasteCleanupSettings",e.pastSettings)("htmlAttributes",e.autoCompleteAttribute)("htmlAttributes",e.htmlAttributes)}}const J=function(e){return{"last-item":e}};function H(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div"),o.Tb(1,"div",16),o.ec("mousedown",(function(n){o.Bc(e);const i=t.$implicit;return o.gc(2).placeHolderClick(n,i.cannedResponseId)})),o.Tb(2,"div",17),o.Tb(3,"div",18),o.Tb(4,"span"),o.Lc(5),o.Sb(),o.Sb(),o.Tb(6,"div",19),o.Ob(7,"span",20),o.hc(8,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=t.$implicit,n=t.last;o.xb(1),o.nc("ngClass",o.tc(6,J,n)),o.xb(3),o.yb("data-title",e.name),o.xb(1),o.Nc(" ",e.name," "),o.xb(2),o.yb("data-title",o.ic(8,4,"ADD"))}}function $(e,t){1&e&&o.Jc(0,H,9,8,"div",15),2&e&&o.nc("ngForOf",t.$implicit)}function Q(e,t){1&e&&(o.Tb(0,"div",31),o.Lc(1),o.hc(2,"translate"),o.Sb()),2&e&&(o.xb(1),o.Mc(o.ic(2,1,"CANNEDRESPONSES")))}function G(e,t){1&e&&(o.Tb(0,"div",31),o.Lc(1),o.hc(2,"translate"),o.Sb()),2&e&&(o.xb(1),o.Mc(o.ic(2,1,"PLACEHOLDERS")))}function K(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",32),o.Tb(1,"ejs-dropdownlist",33,34),o.ec("dataBound",(function(){return o.Bc(e),o.gc(3).dataBoundCategory()}))("select",(function(t){return o.Bc(e),o.gc(3).onCategorySelect(t)})),o.Sb(),o.Tb(3,"ejs-textbox",35,36),o.ec("input",(function(t){return o.Bc(e),o.gc(3).inputText(t)})),o.hc(5,"translate"),o.Sb(),o.Sb()}if(2&e){const e=o.gc(3);o.xb(1),o.nc("dataSource",e.cannedResponseCategories)("fields",e.fields),o.xb(2),o.oc("placeholder",o.ic(5,3,"SEARCH"))}}function q(e,t){if(1&e&&(o.Tb(0,"div",37),o.Lc(1),o.hc(2,"translate"),o.hc(3,"translate"),o.Sb()),2&e){const e=o.gc(3);o.xb(1),o.Nc(" ",e.searchText&&e.searchText.length>0?o.ic(2,1,"SEARCHRESULTS"):o.ic(3,3,"MOSTUSED")," ")}}function V(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",25),o.Jc(1,Q,3,3,"div",26),o.Jc(2,G,3,3,"div",26),o.Tb(3,"div",27),o.ec("click",(function(){return o.Bc(e),o.gc(2).closeCannedResponseDialog()})),o.Ob(4,"span",28),o.hc(5,"translate"),o.Sb(),o.Sb(),o.Jc(6,K,6,5,"div",29),o.Jc(7,q,4,5,"div",30)}if(2&e){const e=o.gc(2);o.xb(1),o.nc("ngIf",e.enableCannedResponse),o.xb(1),o.nc("ngIf",e.enablePlaceholder),o.xb(2),o.yb("data-non-elliptical",!0)("data-title",o.ic(5,6,"CLOSE")),o.xb(2),o.nc("ngIf",e.enableCannedResponse),o.xb(1),o.nc("ngIf",e.enableCannedResponse&&e.cannedResponses&&e.cannedResponses.length>0)}}function X(e,t){if(1&e&&(o.Tb(0,"div",56),o.Tb(1,"span"),o.Lc(2),o.Sb(),o.Sb()),2&e){const e=o.gc().$implicit;o.xb(1),o.yb("data-title",e.category),o.xb(1),o.Nc(" ",e.category," ")}}function Y(e,t){if(1&e){const e=o.Ub();o.Tb(0,"li",49),o.ec("mouseenter",(function(n){o.Bc(e);const i=t.$implicit;return o.gc(6).showPreview(n,i.id)}))("mousedown",(function(n){o.Bc(e);const i=t.$implicit;return o.gc(6).placeHolderClick(n,i.id)})),o.Tb(1,"div",50),o.Tb(2,"div",51),o.Tb(3,"span"),o.Lc(4),o.Sb(),o.Sb(),o.Tb(5,"div",52),o.Tb(6,"div",53),o.Tb(7,"span",54),o.Lc(8),o.hc(9,"translate"),o.Sb(),o.Jc(10,X,3,2,"div",55),o.Sb(),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=t.$implicit,n=o.gc(6);o.xb(3),o.yb("data-title",e.title),o.xb(1),o.Nc(" ",e.title," "),o.xb(4),o.Nc(" ",o.ic(9,4,"INSERT")," "),o.xb(2),o.nc("ngIf","0"===n.responseCategoryId)}}function W(e,t){if(1&e&&(o.Tb(0,"div",58),o.Tb(1,"div",59),o.Tb(2,"div",60),o.Tb(3,"span"),o.Lc(4),o.Sb(),o.Sb(),o.Tb(5,"div",61),o.Tb(6,"span"),o.Lc(7),o.Sb(),o.Sb(),o.Sb(),o.Ob(8,"div",62),o.Sb()),2&e){const e=o.gc(8);o.xb(3),o.yb("data-title",e.responseDetail.name),o.xb(1),o.Mc(e.responseDetail.name),o.xb(2),o.yb("data-title",e.responseDetail.cannedResponseCategory),o.xb(1),o.Mc(e.responseDetail.cannedResponseCategory),o.xb(1),o.nc("innerHtml",e.responseDetail.description,o.Cc)}}function Z(e,t){if(1&e&&(o.Tb(0,"div"),o.Jc(1,W,9,5,"div",57),o.Sb()),2&e){const e=o.gc(7),t=o.yc(8);o.xb(1),o.nc("ngIf",e.responseDetail)("ngIfElse",t)}}function ee(e,t){if(1&e&&o.Jc(0,Z,2,2,"div",39),2&e){const e=o.gc(6),t=o.yc(10);o.nc("ngIf",!e.isPreviewLoading)("ngIfElse",t)}}function te(e,t){if(1&e){const e=o.Ub();o.Tb(0,"ejs-tooltip",41,42),o.Tb(2,"div",43),o.Tb(3,"ul",44),o.Jc(4,Y,11,6,"li",45),o.Sb(),o.Sb(),o.Tb(5,"div",46),o.Tb(6,"button",47,48),o.ec("created",(function(){return o.Bc(e),o.gc(5).loadMoreCreated()}))("click",(function(){o.Bc(e);const t=o.gc(5);return!t.loadMoreBtnClicked&&t.loadFilterResponse()})),o.Tb(8,"span"),o.Lc(9),o.hc(10,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Jc(11,ee,1,2,"ng-template",null,24,o.Kc),o.Sb()}if(2&e){const e=o.gc(5);o.nc("offsetY",0)("showTipPointer",!1),o.xb(4),o.nc("ngForOf",e.cannedResponses),o.xb(1),o.nc("hidden",!e.loadMore),o.xb(4),o.Nc(" ",o.ic(10,5,"LOADMORE"),"")}}function ne(e,t){if(1&e&&(o.Tb(0,"div"),o.Jc(1,te,13,7,"ejs-tooltip",40),o.Sb()),2&e){const e=o.gc(4),t=o.yc(8);o.xb(1),o.nc("ngIf",e.cannedResponses&&e.cannedResponses.length>0)("ngIfElse",t)}}function oe(e,t){if(1&e&&(o.Tb(0,"div"),o.Jc(1,ne,2,2,"div",39),o.Sb()),2&e){const e=o.gc(3),t=o.yc(10);o.xb(1),o.nc("ngIf",!e.isLoading)("ngIfElse",t)}}function ie(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",67,68),o.ec("mousedown",(function(t){return o.Bc(e),o.gc(6).placeHolderClick(t)})),o.Tb(2,"div",69),o.Tb(3,"span"),o.Lc(4),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=t.$implicit;o.yb("data-placeholder",e.placeholder),o.xb(3),o.yb("data-title",e.name),o.xb(1),o.Mc(e.name)}}function se(e,t){if(1&e&&(o.Tb(0,"div"),o.Tb(1,"div",64),o.Lc(2),o.Sb(),o.Tb(3,"div",65),o.Jc(4,ie,5,3,"div",66),o.Sb(),o.Sb()),2&e){const e=t.$implicit;o.xb(2),o.Mc(e.placeholderCategory),o.xb(2),o.nc("ngForOf",e.placeholders)}}function ce(e,t){if(1&e&&(o.Tb(0,"div"),o.Jc(1,se,5,2,"div",15),o.Sb()),2&e){const e=o.gc(4);o.xb(1),o.nc("ngForOf",e.emailPlaceHolderList)}}function ae(e,t){if(1&e&&(o.Tb(0,"div",63),o.Jc(1,ce,2,1,"div",39),o.Sb()),2&e){const e=o.gc(3),t=o.yc(10);o.xb(1),o.nc("ngIf",!e.isLoading)("ngIfElse",t)}}function re(e,t){if(1&e&&(o.Jc(0,oe,2,2,"div",4),o.Jc(1,ae,2,2,"div",38)),2&e){const e=o.gc(2);o.nc("ngIf",e.enableCannedResponse),o.xb(1),o.nc("ngIf",e.enablePlaceholder)}}function le(e,t){if(1&e&&(o.Tb(0,"div"),o.Tb(1,"div"),o.Tb(2,"ejs-dialog",21,22),o.Jc(4,V,8,8,"ng-template",null,23,o.Kc),o.Jc(6,re,2,2,"ng-template",null,24,o.Kc),o.Sb(),o.Sb(),o.Sb()),2&e){const e=o.gc();o.xb(2),o.nc("visible",!1)("closeOnEscape",!0)("position",e.placeholderDialogPosition)}}function de(e,t){1&e&&(o.Tb(0,"div",70),o.Tb(1,"span"),o.Lc(2),o.hc(3,"translate"),o.Sb(),o.Sb()),2&e&&(o.xb(2),o.Nc(" ",o.ic(3,1,"NORESULT")," "))}function ge(e,t){1&e&&(o.Tb(0,"div",71),o.Ob(1,"lib-shimmer",72),o.Sb()),2&e&&(o.xb(1),o.nc("stepCount",5))}const pe={allowedTypes:[".jpeg",".jpg",".png",".gif"],saveUrl:s.a.InlineImageupload,saveFormat:"Blob",path:""},he={allowedTypes:[".jpeg",".jpg",".png",".gif"],saveFormat:"Base64",path:""},be={items:["Bold","Italic","Underline","|","FontColor","BackgroundColor","|","InsertCode","Formats","Alignments","OrderedList","UnorderedList","|","CreateTable","CreateLink","Image","|","ClearFormat"]},ue={items:["Bold","Italic","Underline","|","FontColor","BackgroundColor","|","InsertCode","Formats","Alignments","OrderedList","UnorderedList","|","CreateTable","CreateLink","|","ClearFormat"]},fe={deniedAttrs:["id","title"],deniedTags:["img[href]","h1"],allowedStyleProps:["background","background-color","border","border-bottom","border-left","border-radius","border-right","border-style","border-top","border-width","clear","color","cursor","direction","display","float","font","font-size","font-weight","font-style","height","left","line-height","margin","margin-top","margin-left","margin-right","margin-bottom","max-height","max-width","min-height","min-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","right","table-layout","text-align","text-decoration","text-indent","top","vertical-align","visibility","white-space","width"],prompt:!1,keepFormat:!0};function me(e){}let Ce=(()=>{class e{constructor(e,t,n,s,c,a){this.authService=e,this.http=t,this.spinService=n,this.rteService=s,this.viewContainerRef=c,this.jwtService=a,this.height="250",this.isNeedImageUpload=!0,this.enableFloatingToolbar=!1,this.promptFormatOption=!1,this.focusIn=new o.n,this.focusOut=new o.n,this.rteCreated=new o.n,this.rteDialogOpened=new o.n,this.autoCompleteAttribute={autocomplete:"anyrandomstring"},this.imageSettings=this.isNeedImageUpload?pe:he,this.toolbarSettings=this.isNeedImageUpload?be:ue,this.pastSettings=fe,this.placeholderDialogPosition={X:"right"},this.selection=new i.e,this.fields={text:"name",value:"id"},this.listFields={text:"name",value:"id"},this.loadMoreCount=10,this.timeOut=null}ngOnInit(){this.imageSettings=this.isNeedImageUpload?pe:he,this.toolbarSettings=this.isNeedImageUpload?be:ue,this.toolbarSettings.enableFloating=this.enableFloatingToolbar,this.pastSettings.prompt=this.promptFormatOption}ngAfterViewInit(){}rteActionComplete(e){}rteFocus(e){this.focusIn.emit(e),this.isRTEFocussed=!0,this.rteDialogOpened.emit()}rteFocusOut(e){0===this.rteObj.getCharCount()&&0===this.rteObj.inputElement.querySelectorAll("img").length&&0===this.rteObj.inputElement.querySelectorAll("table").length&&(this.rteObj.value=null,this.rteObj.dataBind()),this.focusOut.emit(e),this.enableCannedResponse&&(this.isRTEFocussed=!1,this.rteRangeFocusSelection())}rteCreate(){this.rteCreated.emit()}rteImageModuleManipulation(e){e.imageToken&&(this.spinService.showSpinner(),this.http.delete(""+Object(r.x)(s.a.InlineImageDelete,"token",e.imageToken),{headers:{attachmentToken:Object(a.h)()}}).toPromise().then(e=>{Object(a.p)(e.token)}).finally(()=>{this.spinService.hideSpinner()}))}rteImageCancelCallback(){this.rteObj.imageModule.uploadObj.getFilesData().length>0&&"File uploaded successfully"===this.rteObj.imageModule.uploadObj.getFilesData()[0].status&&this.rteImageModuleManipulation(this.rteObj.imageModule.uploadObj.getFilesData()[0])}rteDialogOpen(e){e.element.classList.contains("e-rte-img-dialog")&&(this.rteObj.imageModule.uploadObj.maxFileSize=10485760,[".e-dlg-closeicon-btn",".e-footer-content .e-cancel"].forEach(t=>{e.element.querySelector(t).addEventListener("click",this.rteImageCancelCallback.bind(this),!1)}))}rteDialogClose(){this.enableCannedResponse&&this.placeholderDialog.hide()}imageUploadSuccess(e){!function(e,t){const n=JSON.parse(e.e.target.response);if(n.url){e.element?(e.element.src=n.url,e.element.setAttribute("data-name",e.file.name),e.element.setAttribute("data-size",Object(r.s)(e.file.size)),e.file.name=n.url):e.file.name=n.url,e.file.imageToken=new URL(n.url).searchParams.get("token");const o=t.element.querySelectorAll(".e-file-name")[0];o&&(o.innerHTML=e.file.name.replace(o.innerHTML,n.url),o.title=n.url)}}(e,this.rteObj)}imageBeforeUpload(e){e.currentRequest.setRequestHeader("attachmentToken",Object(a.h)()),Object(c.b)(e.currentRequest,this.authService)}openPlaceholderDialog(){this.isDialogCancel=!1,this.cannedResponseCategories=null,this.enableCannedResponse?(this.isLoading=!0,this.loadMore=!1,this.searchResponseObj&&(this.searchResponseObj.value=null,this.searchText=null),this.isLocalDataAdded?(this.cannedResponseCategories=new p.a({url:g.a.CannedResponseCategories,adaptor:new l.b}),this.dropdownlistObj.value=0,this.responseCategoryId="0",this.filterResponse()):(this.cannedResponseCategories=new p.a({url:g.a.CannedResponseCategories,adaptor:new l.b}),this.dropdownlistObj.value=0)):this.enablePlaceholder&&this.rteService.fetchEmailPlaceHolderList().then(e=>{this.emailPlaceHolderList=e.result,this.isLoading=!1}),Object(d.X)(this.saveSelection)&&this.rteRangeFocusSelection(),this.placeholderDialog.show(),this.rteObj.focusIn()}rteRangeFocusSelection(){const e=this.selection.getRange(document);this.saveSelection=this.selection.save(e,document)}placeHolderClick(e,t){const n=e.currentTarget;setTimeout(()=>{if(this.enableCannedResponse)this.spinService.showSpinner(),this.rteService.fetchCannedResponseDetail(t.toString(),this.cannedResponseResolveObj).then(e=>{const t=e.result;this.rteObj.value||this.rteObj.focusIn(),!this.isDialogCancel&&this.isRTEFocussed&&this.rteRangeFocusSelection(),0===this.rteObj.formatter.getUndoRedoStack().length&&this.rteObj.formatter.saveData(),this.saveSelection.restore(),this.rteObj.executeCommand("insertHTML",t),this.rteObj.formatter.saveData(),this.rteObj.formatter.enableUndo(this.rteObj);const n=this.selection.getRange(document);this.saveSelection=this.selection.save(n,document),this.isDialogCancel=!1,this.isRTEFocussed=!0,this.spinService.hideSpinner()}).catch(()=>{this.spinService.hideSpinner()});else if(this.enablePlaceholder){const e=document.activeElement,t=n.getAttribute("data-placeholder");if("INPUT"===e.tagName||e.classList.contains("placeholder-subject")){if("INPUT"===e.tagName&&e.classList.contains("placeholder-subject")){const n=t.length+e.selectionStart,o=e.value;e.ej2_instances[0].value=0===e.selectionStart?`${t}${o}`:`${o.substring(0,e.selectionStart)}${t}${o.substring(e.selectionStart)}`,e.ej2_instances[0].element.focus(),setTimeout(()=>{e.ej2_instances[0].element.setSelectionRange(n,n)})}}else{this.rteObj.value||this.rteObj.focusIn(),!this.isDialogCancel&&this.isRTEFocussed&&this.rteRangeFocusSelection(),0===this.rteObj.formatter.getUndoRedoStack().length&&this.rteObj.formatter.saveData(),this.saveSelection.restore(),this.rteObj.executeCommand("insertText",t),this.rteObj.formatter.saveData(),this.rteObj.formatter.enableUndo(this.rteObj);const e=this.selection.getRange(document);this.saveSelection=this.selection.save(e,document),this.isDialogCancel=!1,this.isRTEFocussed=!0}}},0),e.preventDefault(),e.stopPropagation()}closeCannedResponseDialog(){this.placeholderDialog&&this.placeholderDialog.hide(),this.isDialogCancel=!0,null!=this.selectedIndex&&this.accordionRef.expandItem(!1,this.selectedIndex)}dataBoundCategory(){this.isLocalDataAdded||(this.dropdownlistObj.addItem({id:0,name:"All Categories"},0),this.dropdownlistObj.value=0,this.responseCategoryId="0",this.loadMore=!1,this.filterResponse(),this.isLocalDataAdded=!0)}onCategorySelect(e){this.responseCategoryId=e.itemData.id.toString(),this.loadMore=!1,this.isLoading=!0,this.filterResponse()}inputText(e){this.loadMore=!1,this.searchText=e.value,this.isLoading=!0,clearTimeout(this.timeOut),this.timeOut=setTimeout(()=>{this.filterResponse()},300)}loadFilterResponse(){this.filterResponse(!0)}loadMoreCreated(){this.progressLoad=new h.c({content:this.loadMoreBtn.element.innerText,isPrimary:!0,duration:3599e3},this.loadMoreBtn.element)}filterResponse(e){this.loadMoreBtnClicked=!0,Object(r.D)(this.responseCategoryId)||(this.loadMore?(this.progressLoad.start(),this.loadMoreCount=5,++this.pageData):(this.loadMoreCount=10,this.pageData=1,this.cannedResponses=null),this.rteService.fetchCannedResponseList(this.responseCategoryId,this.searchText,this.loadMoreCount.toString(),this.pageData.toString()).then(t=>{this.cannedResponses&&this.cannedResponses.length>0&&e?t.result.forEach(e=>{this.cannedResponses.push(e)}):this.cannedResponses=t.result,this.loadMore=t.hasMore,this.isLoading=!1,setTimeout(()=>{this.loadMoreBtn&&this.loadMoreBtn.element.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})})}).finally(()=>{this.loadMoreBtnClicked=!1,this.progressLoad&&this.progressLoad.progressComplete()}))}showPreview(e,t){this.responseId=parseInt(t),this.isPreviewLoading=!0,this.responseDetail&&this.responseId===this.responseDetail.cannedResponseId?this.isPreviewLoading=!1:(clearTimeout(this.timeOut),this.timeOut=setTimeout(()=>{this.rteService.fetchCannedResponse(this.responseId.toString()).then(e=>{e&&e.result&&this.responseId===e.result.cannedResponseId?(this.responseDetail=e.result,this.isPreviewLoading=!1):this.isPreviewLoading=!0})},1e3))}compileTemplate(e,t){const n=this.viewContainerRef.createEmbeddedView(e,{$implicit:t});return n.markForCheck(),n.rootNodes}detachCompiledTemplate(e){[].slice.call(e.childNodes).forEach(e=>{Object(d.I)(e)})}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(b.a),o.Nb(u.b),o.Nb(f.a),o.Nb(C),o.Nb(o.O),o.Nb(O.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-rte"]],viewQuery:function(e,t){var n;1&e&&(o.Qc(w,!0),o.Qc(_,!0),o.Qc(I,!0),o.Qc(j,!0),o.Qc(L,!0),o.Qc(D,!0),o.Qc(F,!0),o.Qc(k,!0)),2&e&&(o.xc(n=o.fc())&&(t.rteObj=n.first),o.xc(n=o.fc())&&(t.placeholderDialog=n.first),o.xc(n=o.fc())&&(t.responseRef=n.first),o.xc(n=o.fc())&&(t.accordionRef=n.first),o.xc(n=o.fc())&&(t.dropdownlistObj=n.first),o.xc(n=o.fc())&&(t.tooltipObj=n.first),o.xc(n=o.fc())&&(t.searchResponseObj=n.first),o.xc(n=o.fc())&&(t.loadMoreBtn=n.first))},inputs:{id:"id",enabeRteTitle:"enabeRteTitle",placeholder:"placeholder",formGroupObj:"formGroupObj",formControl:"formControl",value:"value",height:"height",isNeedImageUpload:"isNeedImageUpload",enableCannedResponse:"enableCannedResponse",enablePlaceholder:"enablePlaceholder",label:"label",cannedResponseResolveObj:"cannedResponseResolveObj",reactiveFormName:"reactiveFormName",htmlAttributes:"htmlAttributes",placeholderPosition:"placeholderPosition",enableFloatingToolbar:"enableFloatingToolbar",promptFormatOption:"promptFormatOption"},outputs:{focusIn:"focusIn",focusOut:"focusOut",rteCreated:"rteCreated",rteDialogOpened:"rteDialogOpened"},features:[o.wb([i.j,i.d,i.c,i.b,i.a,i.g,i.f])],decls:11,vars:5,consts:[["style","display: flex;",4,"ngIf"],["class","mb-5",3,"formGroup",4,"ngIf"],[3,"height","value","placeholder","id","toolbarSettings","insertImageSettings","pasteCleanupSettings","htmlAttributes","blur","focus","created","imageUploading","imageUploadSuccess","dialogOpen","dialogClose","actionComplete","imageRemoving",4,"ngIf"],["responseTemplate",""],[4,"ngIf"],["noData",""],["fetching",""],[2,"display","flex"],[1,"align-right"],[1,"link",3,"mousedown"],[1,"error"],[1,"mb-5",3,"formGroup"],[3,"height","value","placeholder","id","toolbarSettings","insertImageSettings","formControlName","pasteCleanupSettings","htmlAttributes","blur","focus","created","imageUploading","imageUploadSuccess","dialogOpen","dialogClose","actionComplete","imageRemoving"],["richTextEditor",""],[3,"height","value","placeholder","id","toolbarSettings","insertImageSettings","pasteCleanupSettings","htmlAttributes","blur","focus","created","imageUploading","imageUploadSuccess","dialogOpen","dialogClose","actionComplete","imageRemoving"],[4,"ngFor","ngForOf"],[1,"cursor-pointer","content-format",3,"ngClass","mousedown"],[1,"form-group","row",2,"margin-bottom","0px"],[1,"col-10","ellipsis","no-wrap"],[1,"col-2"],[1,"on-hover-show","hd-icon","hd-plus"],["width","400px","cssClass","dlg-height customize-dlg-style",3,"visible","closeOnEscape","position"],["placeholderDialog",""],["header",""],["content",""],[1,"flex-horizontal"],["class","font-16 font-500",4,"ngIf"],[1,"align-right","pr-2",3,"click"],[1,"e-btn-icon","e-icon-dlg-close","e-icons","cursor-pointer"],["class","flex filter-action",4,"ngIf"],["class","result-info border-bottom secondary",4,"ngIf"],[1,"font-16","font-500"],[1,"flex","filter-action"],["allowFiltering","true","width","175",3,"dataSource","fields","dataBound","select"],["dropdownlistObj",""],["width","350","width","175","showClearButton","true",1,"align-right",3,"placeholder","input"],["searchResponseObj",""],[1,"result-info","border-bottom","secondary"],["style","padding:0 0 0 18px;",4,"ngIf"],[4,"ngIf","ngIfElse"],["target","#listView","cssClass","tooltip-content","height","100%","position","LeftCenter","opensOn","Auto","width","393",3,"offsetY","showTipPointer",4,"ngIf","ngIfElse"],["target","#listView","cssClass","tooltip-content","height","100%","position","LeftCenter","opensOn","Auto","width","393",3,"offsetY","showTipPointer"],["tooltipObj",""],[1,"e-listview"],["id","listView",1,"e-list-parent"],["class","e-list-item",3,"mouseenter","mousedown",4,"ngFor","ngForOf"],[1,"mb-10","text-center","mt-5",3,"hidden"],["ejs-button","",1,"e-primary","e-btn","no-border","e-link","link",3,"created","click"],["loadMoreBtn",""],[1,"e-list-item",3,"mouseenter","mousedown"],[1,"display-block"],[1,"float-left","ellipsis","no-wrap","response-title"],[1,"float-right","response-category"],[1,"flex"],[1,"show-on-hover","link"],["class","ellipsis no-wrap hide-on-hover",4,"ngIf"],[1,"ellipsis","no-wrap","hide-on-hover"],["class","tootip-info",4,"ngIf","ngIfElse"],[1,"tootip-info"],[1,"info-header","flex-vertical","border-bottom"],[1,"ellipsis","no-wrap","font-16","font-500"],[1,"ellipsis","no-wrap","font-12"],[1,"info-content",3,"innerHtml"],[2,"padding","0 0 0 18px"],[1,"font-500","font-14","pb-3","pt-2"],[1,"placeholder-list"],["class","placeholder-list-item no-wrap ellipsis",3,"mousedown",4,"ngFor","ngForOf"],[1,"placeholder-list-item","no-wrap","ellipsis",3,"mousedown"],["element",""],[1,"no-wrap","ellipsis"],[1,"error-action-msg","error-style"],[1,"ticket-fetch-loader"],[3,"stepCount"]],template:function(e,t){1&e&&(o.Jc(0,U,6,4,"div",0),o.Jc(1,N,6,4,"div",0),o.Jc(2,z,3,11,"div",1),o.Jc(3,A,2,9,"ejs-richtexteditor",2),o.Jc(4,$,1,1,"ng-template",null,3,o.Kc),o.Jc(6,le,8,3,"div",4),o.Jc(7,de,4,3,"ng-template",null,5,o.Kc),o.Jc(9,ge,2,1,"ng-template",null,6,o.Kc)),2&e&&(o.nc("ngIf",t.enablePlaceholder),o.xb(1),o.nc("ngIf",t.enableCannedResponse&&t.placeholderPosition),o.xb(1),o.nc("ngIf",t.reactiveFormName),o.xb(1),o.nc("ngIf",!t.reactiveFormName),o.xb(3),o.nc("ngIf",t.enableCannedResponse||t.enablePlaceholder))},directives:[S.n,v.h,v.c,i.i,v.g,v.b,S.m,S.l,x.b,P.e,M.i,x.d,T.c,y.a],pipes:[R.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.dlg-height[_ngcontent-%COMP%]{max-height:100%!important;top:0!important}.customize-dlg-style[_ngcontent-%COMP%]{height:100%}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%]{font-size:16px!important;width:100%}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%]   .expand-button-style[_ngcontent-%COMP%]{background:#000;cursor:pointer;height:35px;left:auto;margin-right:auto;opacity:.25;right:400px;text-align:center;top:8px;transform:rotate(180deg);width:35px}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%]   .expand-button-style[_ngcontent-%COMP%]:hover{color:#fff;left:auto}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%]   .expand-button-style[_ngcontent-%COMP%]   .hd-icon[_ngcontent-%COMP%]{color:#fff;font-size:11px;padding:0}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%]   .expand-button-style[_ngcontent-%COMP%]   .hd-icon[_ngcontent-%COMP%]:before{top:-1px}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]{font-size:14px;padding:15px 0 5px 8px}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]{border-radius:0;padding:0!important}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]{max-width:100%;padding:0 16px 0 24px}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]   .response-title[_ngcontent-%COMP%]{max-width:60%}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]   .response-category[_ngcontent-%COMP%]{max-width:40%}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]   .response-category[_ngcontent-%COMP%]   .show-on-hover[_ngcontent-%COMP%]{display:none}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]   .response-category[_ngcontent-%COMP%]   .hide-on-hover[_ngcontent-%COMP%]{display:block;max-width:100%}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]:hover{background-color:#ecf2f7;border-color:#ecf2f7}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]:hover   .response-category[_ngcontent-%COMP%]   .show-on-hover[_ngcontent-%COMP%]{display:block}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]:hover   .response-category[_ngcontent-%COMP%]   .hide-on-hover[_ngcontent-%COMP%]{display:none}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]   .e-list-item[_ngcontent-%COMP%]:active{background-color:#e5efff;border-color:#fff}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header-content[_ngcontent-%COMP%]{padding:16px!important}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header-content[_ngcontent-%COMP%]   .filter-action[_ngcontent-%COMP%]{margin-top:20px;width:100%}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header-content[_ngcontent-%COMP%]   .e-icon-dlg-close[_ngcontent-%COMP%]{border-radius:4px;bottom:0;height:25px;line-height:25px;padding:0;width:25px}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header-content[_ngcontent-%COMP%]   .e-icon-dlg-close[_ngcontent-%COMP%]:before{padding:3px;top:1px}.customize-dlg-style[_ngcontent-%COMP%]   .e-dlg-header-content[_ngcontent-%COMP%]   .e-icon-dlg-close[_ngcontent-%COMP%]:hover{background:#f4f5f7}.customize-dlg-style[_ngcontent-%COMP%]   .center-format[_ngcontent-%COMP%]{align-items:center;display:flex;height:100%;justify-content:center}.customize-dlg-style[_ngcontent-%COMP%]   .e-footer-content[_ngcontent-%COMP%]{background:inherit;font-size:14px;font-weight:500;height:45px;text-align:center}.placeholder-dlg[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]{padding:18px!important}.error-style[_ngcontent-%COMP%]{line-height:35px;margin:0!important;padding:7px 0 7px 20px!important}.modify-sidebar[_ngcontent-%COMP%]{height:calc(100% - 50px);top:50px!important}.tooltip-content[_ngcontent-%COMP%]{background-color:#fff;border-color:#fff;border-radius:4px;box-shadow:0 0 1px rgba(9,30,66,.31),0 3px 5px rgba(9,30,66,.2);left:auto!important;max-height:calc(100% - 100px);opacity:1;right:410px!important;top:50px!important}.tooltip-content[_ngcontent-%COMP%]   .e-tip-content[_ngcontent-%COMP%]{color:var(--primary-color);overflow:hidden;padding:0}.tooltip-content[_ngcontent-%COMP%]   .e-tip-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{height:100%}.tooltip-content[_ngcontent-%COMP%]   .e-tip-content[_ngcontent-%COMP%]   .tootip-info[_ngcontent-%COMP%]{height:100%;padding:15px 0 0 15px}.tooltip-content[_ngcontent-%COMP%]   .e-tip-content[_ngcontent-%COMP%]   .tootip-info[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]{height:10%;padding:0 15px 0 0}.tooltip-content[_ngcontent-%COMP%]   .e-tip-content[_ngcontent-%COMP%]   .tootip-info[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{max-height:90%;overflow-x:hidden;overflow-y:auto;padding:20px 15px 15px 0}"]}),e})()}}]);