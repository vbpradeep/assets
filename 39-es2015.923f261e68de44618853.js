(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"2edR":function(t,e,c){"use strict";c.r(e),c.d(e,"ContactModule",(function(){return Gc}));var i=c("ofXK"),n=c("GJ+o"),o=c("5OZa"),a=c("SRvG"),s=c("hXFv"),r=c("Pk9d"),l=c("QYJQ"),d=c("jcQU"),h=c("tyNb"),b=c("H552"),u=c("sc+i"),p=c("M9dC"),m=c("58Y9"),g=c("DuxZ"),C=c("4SUy"),f=c("uHvQ"),T=c("A4Lh"),S=c("znO6"),v=c("dSv1"),O=c("1gpv"),x=c("fXoL"),k=c("1kef"),E=c("tk/3"),D=c("CU1o"),A=c("I4Xp"),y=c("wch8"),N=c("X8pc"),M=c("IaKf");let I=(()=>{class t{constructor(t,e,c,i){this.http=t,this.contactRootService=e,this.spinService=c,this.toastService=i,this.httpOptions={headers:new E.e({"Content-Type":"application/json"})}}getContactByUserId(t){return this.http.get(D.a.GetContactByUserId+t,this.httpOptions).toPromise().catch(t=>{this.contactRootService.userModuleErrorHandling(t,"getContactByUserId")})}addContact(t){return this.http.post(D.a.AddContact,t).toPromise()}editContact(t,e){return this.http.put(D.a.AddContact+"/"+e,t,this.httpOptions).toPromise()}blockContact(t,e){return this.http.post(D.a.GetContactByUserId+t+"/block?markTicketAsSpam="+e,e).toPromise().catch(t=>{this.contactRootService.userModuleErrorHandling(t,"blockContact")})}unblockContact(t,e){return this.http.post(D.a.GetContactByUserId+t+"/unblock?removeTicketFromSpam="+e,e).toPromise().catch(t=>{this.contactRootService.userModuleErrorHandling(t,"unblockContact")})}deleteContact(t,e){const c={headers:new E.e({"Content-Type":"application/json"}),body:{contactId:[t],isMarkTicketAsSpam:e}};return this.http.delete(D.a.GetContactByUserId,c).toPromise()}restoreContact(t,e){return this.http.post(D.a.GetContactByUserId+t+"/restore?removeTicketFromSpam="+e,e).toPromise().catch(t=>{this.contactRootService.userModuleErrorHandling(t,"restoreContact")})}sendEmailAction(t,e){return t===g.a.VerifyNow?this.verifyNow(e):t===g.a.SendResetPasswordEmail?this.sendResetPasswordMail(e):t===g.a.SendVerificationEmail?this.sendVerificationMail(e):void 0}sendResetPasswordMail(t){return this.http.post(D.a.SendResetPassword+t,this.httpOptions).toPromise()}sendVerificationMail(t){return this.http.post(D.a.SendVerificationMail+t,this.httpOptions).toPromise()}verifyNow(t){return this.http.post(D.a.UserVerifyManually+t,this.httpOptions).toPromise()}requestToImpersonateGuidId(t){return this.http.get(D.a.requestToIpersonateContact.replace("userid",t.toString()),this.httpOptions).toPromise()}getContactForm(){let t=A.a.ContactForm;return t=Object(m.i)(t,"isExcludeDefaultFields","true"),this.http.get(t,this.httpOptions).toPromise().catch(t=>{if(this.spinService.hideSpinner(),400===t.status){const e=Object(m.q)(t.error);this.toastService.failureToast(e)}})}contactstatus(t){return this.http.get(D.a.requestToContactStatus+t).toPromise()}convertContactToAgent(t,e){return this.http.put(D.a.requestToConvertToAgent+t,e).toPromise()}}return t.\u0275fac=function(e){return new(e||t)(x.bc(E.b),x.bc(y.a),x.bc(N.a),x.bc(M.a))},t.\u0275prov=x.Jb({token:t,factory:t.\u0275fac}),t})();var B=c("JCZ/"),L=c("5CqK"),P=c("KWhx"),R=c("0DEJ"),w=c("yVji"),F=c("AjNn");const j=["convertContactToAgentDialog"],U=["agentName"],_=["agentDisplayName"],G=["userEmail"],V=["timeZones"],q=["agentAccessScope"],J=["allBrandAccess"],K=["userBrands"],X=["userRole"],Q=["contentAddAgentForm"];function H(t,e){1&t&&(x.Tb(0,"div"),x.Lc(1),x.hc(2,"translate"),x.Sb()),2&t&&(x.xb(1),x.Nc(" ",x.ic(2,1,"CONVERTTOAGENT")," "))}function z(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",5),x.Tb(1,"div",6),x.Tb(2,"button",7),x.ec("click",(function(){x.Bc(t);const e=x.gc(),c=x.yc(1);return e.overlayClick(c)})),x.Lc(3),x.hc(4,"translate"),x.Sb(),x.Tb(5,"button",8),x.ec("click",(function(){return x.Bc(t),x.gc().convertContact()})),x.Lc(6),x.hc(7,"translate"),x.Sb(),x.Sb(),x.Sb()}2&t&&(x.xb(3),x.Mc(x.ic(4,2,"CANCEL")),x.xb(3),x.Mc(x.ic(7,4,"UPDATE")))}function Z(t,e){1&t&&(x.Tb(0,"div"),x.Tb(1,"span",40),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"FIELDREQUIRED"),""))}function W(t,e){1&t&&(x.Tb(0,"div"),x.Tb(1,"span",40),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"INVALIDNAME"),""))}function $(t,e){1&t&&(x.Tb(0,"div"),x.Tb(1,"span",40),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"FIELDREQUIRED"),""))}function Y(t,e){1&t&&(x.Tb(0,"div"),x.Tb(1,"span",40),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"INVALIDDISPLAYNAME"),""))}function tt(t,e){1&t&&(x.Tb(0,"div"),x.Tb(1,"span",40),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"FIELDREQUIRED"),""))}function et(t,e){if(1&t&&(x.Tb(0,"div",41),x.Tb(1,"div",42),x.Tb(2,"span",43),x.Lc(3),x.Sb(),x.Tb(4,"span",43),x.Tb(5,"span",44),x.Lc(6),x.Sb(),x.Sb(),x.Sb(),x.Sb()),2&t){const t=e.$implicit;x.xb(3),x.Nc(" ",t.text," "),x.xb(3),x.Mc(t.description)}}function ct(t,e){1&t&&(x.Tb(0,"div"),x.Tb(1,"span",40),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"FIELDREQUIRED"),""))}function it(t,e){1&t&&(x.Tb(0,"div"),x.Tb(1,"span",40),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"FIELDREQUIRED"),""))}function nt(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",null,9),x.Tb(2,"div"),x.Tb(3,"div",10),x.Tb(4,"label",11),x.Lc(5),x.hc(6,"translate"),x.Tb(7,"span",12),x.Lc(8,"*"),x.Sb(),x.Sb(),x.Tb(9,"ejs-textbox",13,14),x.ec("blur",(function(){return x.Bc(t),x.gc().agentNameFocusOut()}))("change",(function(){return x.Bc(t),x.gc().agentNameChange()}))("input",(function(e){return x.Bc(t),x.gc().agentNameInput(e)})),x.hc(11,"translate"),x.Sb(),x.Jc(12,Z,4,3,"div",15),x.Jc(13,W,4,3,"div",15),x.Tb(14,"span",16),x.Ob(15,"span",12),x.Sb(),x.Sb(),x.Tb(16,"div",17),x.Tb(17,"label",11),x.Lc(18),x.hc(19,"translate"),x.Tb(20,"span",12),x.Lc(21,"*"),x.Sb(),x.Sb(),x.Tb(22,"ejs-textbox",18,19),x.ec("blur",(function(){return x.Bc(t),x.gc().agentDisplayNameFocusOut()}))("change",(function(){return x.Bc(t),x.gc().agentDisplayNameChange()}))("input",(function(e){return x.Bc(t),x.gc().agentDisplayNameInput(e)})),x.hc(24,"translate"),x.Sb(),x.Jc(25,$,4,3,"div",15),x.Jc(26,Y,4,3,"div",15),x.Tb(27,"span",16),x.Ob(28,"span",12),x.Sb(),x.Sb(),x.Tb(29,"div",20),x.Tb(30,"label",11),x.Lc(31),x.hc(32,"translate"),x.Tb(33,"span",12),x.Lc(34,"*"),x.Sb(),x.Sb(),x.Tb(35,"ejs-textbox",21,22),x.ec("blur",(function(){return x.Bc(t),x.gc().userEmailFocusOut()}))("change",(function(){return x.Bc(t),x.gc().userEmailChange()}))("input",(function(e){return x.Bc(t),x.gc().userEmailInput(e)})),x.hc(37,"translate"),x.Sb(),x.Tb(38,"span",16),x.Ob(39,"span",12),x.Sb(),x.Sb(),x.Tb(40,"div",23),x.Tb(41,"label",11),x.Lc(42),x.hc(43,"translate"),x.Tb(44,"span",12),x.Lc(45,"*"),x.Sb(),x.Sb(),x.Tb(46,"ejs-dropdownlist",24,25),x.ec("blur",(function(){return x.Bc(t),x.gc().timeZoneFocusOut()}))("change",(function(){return x.Bc(t),x.gc().timeZoneChange()})),x.hc(48,"translate"),x.hc(49,"translate"),x.Sb(),x.Jc(50,tt,4,3,"div",15),x.Sb(),x.Tb(51,"div",26),x.Tb(52,"label",11),x.Lc(53),x.hc(54,"translate"),x.Tb(55,"span",12),x.Lc(56,"*"),x.Sb(),x.Sb(),x.Tb(57,"ejs-dropdownlist",27,28),x.ec("blur",(function(){return x.Bc(t),x.gc().agentAccessScopeFocusOut()}))("change",(function(){return x.Bc(t),x.gc().agentAccessScopeChange()})),x.hc(59,"translate"),x.Jc(60,et,7,2,"ng-template",null,29,x.Kc),x.Sb(),x.Jc(62,ct,4,3,"div",15),x.Tb(63,"span",16),x.Ob(64,"span",12),x.Sb(),x.Sb(),x.Tb(65,"div",30),x.Tb(66,"ejs-checkbox",31,32),x.ec("change",(function(){return x.Bc(t),x.gc().accessChange()})),x.hc(68,"translate"),x.hc(69,"translate"),x.Sb(),x.Sb(),x.Tb(70,"div",33),x.Tb(71,"div",34),x.Tb(72,"label",11),x.Lc(73),x.hc(74,"translate"),x.Sb(),x.Tb(75,"ejs-multiselect",35,36),x.ec("change",(function(e){return x.Bc(t),x.gc().userBrandChange(e)}))("removed",(function(e){return x.Bc(t),x.gc().userBrandChange(e)})),x.hc(77,"translate"),x.Sb(),x.Tb(78,"span",16),x.Ob(79,"span",12),x.Sb(),x.Sb(),x.Sb(),x.Tb(80,"div",37),x.Tb(81,"label",11),x.Lc(82),x.hc(83,"translate"),x.Tb(84,"span",12),x.Lc(85,"*"),x.Sb(),x.Sb(),x.Tb(86,"ejs-multiselect",38,39),x.ec("blur",(function(){return x.Bc(t),x.gc().userRoleFocusOut()}))("change",(function(e){return x.Bc(t),x.gc().userRoleChange(e)}))("removed",(function(e){return x.Bc(t),x.gc().userRoleChange(e)})),x.hc(88,"translate"),x.hc(89,"translate"),x.Sb(),x.Jc(90,it,4,3,"div",15),x.Tb(91,"span",16),x.Ob(92,"span",12),x.Sb(),x.Sb(),x.Sb(),x.Sb()}if(2&t){const t=x.gc();x.xb(5),x.Nc(" ",x.ic(6,47,"NAME")," "),x.xb(4),x.oc("placeholder",x.ic(11,49,"TEXTBOXPLACEHOLDER")),x.nc("htmlAttributes",t.textAreaAttribute),x.xb(3),x.nc("ngIf",t.nameRequired),x.xb(1),x.nc("ngIf",t.agentNameValidation),x.xb(5),x.Nc(" ",x.ic(19,51,"DISPLAYNAME")," "),x.xb(4),x.oc("placeholder",x.ic(24,53,"TEXTBOXPLACEHOLDER")),x.nc("htmlAttributes",t.textAreaAttribute),x.xb(3),x.nc("ngIf",t.displayNameRequired),x.xb(1),x.nc("ngIf",t.agentDisplayNameValidation),x.xb(5),x.Nc(" ",x.ic(32,55,"EMAIL")," "),x.xb(4),x.oc("placeholder",x.ic(37,57,"TEXTBOXPLACEHOLDER")),x.xb(7),x.Nc(" ",x.ic(43,59,"TIMEZONE")," "),x.xb(4),x.oc("placeholder",x.ic(48,61,"DROPDOWNPLACEHOLDER")),x.oc("filterBarPlaceholder",x.ic(49,63,"TIMEZONE")),x.nc("dataSource",t.timeZone)("fields",t.timezoneFields)("allowFiltering",!0)("filterType",t.filterType)("showClearButton",!1)("htmlAttributes",t.autoCompleteAttribute),x.xb(4),x.nc("ngIf",t.timeZoneRequired),x.xb(3),x.Nc(" ",x.ic(54,65,"TICKETSCOPE")," "),x.xb(4),x.oc("placeholder",x.ic(59,67,"DROPDOWNPLACEHOLDER")),x.nc("dataSource",t.agentAccess)("fields",t.agentAccessScopeFields)("htmlAttributes",t.autoCompleteAttribute),x.xb(5),x.nc("ngIf",t.agentAccessRequired),x.xb(4),x.oc("label",t.isMultiBrand?x.ic(68,69,"CANACCESSALLBRANDTICKETS"):x.ic(69,71,"CANACCESSBRANDTICKETS")),x.nc("checked",!1),x.xb(4),x.nc("hidden",!t.showBrand),x.xb(3),x.Nc(" ",x.ic(74,73,"TICKETBRANDACCESS")," "),x.xb(2),x.oc("placeholder",x.ic(77,75,"MULTISELECTDROPDOWNPLACEHOLDER")),x.nc("dataSource",t.userBrand)("fields",t.defaultBrandFields)("allowFiltering",!0)("showDropDownIcon",!0)("htmlAttributes",t.autoCompleteAttribute),x.xb(7),x.Nc(" ",x.ic(83,77,"ROLE")," "),x.xb(4),x.oc("placeholder",x.ic(88,79,"MULTISELECTDROPDOWNPLACEHOLDER")),x.oc("filterBarPlaceholder",x.ic(89,81,"SEARCH")),x.nc("dataSource",t.userRoles)("allowFiltering",!0)("fields",t.roleFields)("showClearButton",!1)("htmlAttributes",t.autoCompleteAttribute),x.xb(4),x.nc("ngIf",t.roleRequired)}}let ot=(()=>{class t{constructor(t,e,c,i,n,o,a){this.appRootService=t,this.route=e,this.router=c,this.contactAPIService=i,this.contactRootService=n,this.spinService=o,this.toastService=a,this.dialogAgentPosition={X:"right"},this.timezoneFields={text:"description",value:"id"},this.filterType="Contains",this.autoCompleteAttribute={autocomplete:"anyrandomstring"},this.agentAccessScopeFields={value:"id",text:"text"},this.defaultBrandFields={text:"text",value:"key"},this.roleFields={text:"name",value:"id"},this.textAreaAttribute={maxlength:T.M,autocomplete:"anyrandomstring"},this.isMultiBrand=T.e.isMultiBrand,this.agentAccess=[{text:"Global",description:"Can view all tickets",id:"1"},{text:"Group",description:"Can view all tickets in the group and assigned to them",id:"2"},{text:"Restricted",description:"Can only view tickets assigned to them",id:"3"}]}ngOnInit(){this.appRootService.getTimeZoneList().then(t=>{const e=JSON.parse(JSON.stringify(t.result));0===e.filter(t=>0===t.id).length&&e.splice(0,0,{id:0,description:Object(v.a)("INHERITFROMGLOBALSETTINGS")}),this.timeZone=e}),this.userRoles=new b.a({url:D.a.UserRoles,adaptor:new p.b}),this.userBrand=new b.a({url:D.a.UserBrands,adaptor:new p.c})}convertContactClick(t){Object(C.X)(t)||(this.contactId=t,this.spinService.showSpinner(),this.contactAPIService.getContactByUserId(t).then(t=>{Object(C.X)(t)||(this.contactDetail=t,this.setValue(this.contactDetail))}).finally(()=>{this.spinService.hideSpinner()}),this.convertContactToAgentDialog.position=this.dialogAgentPosition,this.convertContactToAgentDialog.width="500px",this.convertContactToAgentDialog.height="100%",this.convertContactToAgentDialog.showCloseIcon=!0)}setValue(t){this.agentName.value=t.contactName,this.agentDisplayName.value=t.contactDisplayName,this.userEmail.value=t.emailId,this.timeZones.value=t.timeZoneId?t.timeZoneId.id:null,this.convertContactToAgentDialog.show()}agentNameFocusOut(){if(Object(C.X)(this.agentName.value))return this.agentNameValidation=!1,void(this.nameRequired=!0);const t=this.agentName.value.trim();if(t&&t.length>0){if(!R.j.test(t.trim()))return void(this.agentNameValidation=!0);this.agentNameValidation=!1}else this.agentNameValidation=!1,this.nameRequired=!0}agentNameChange(){null!=this.agentName.value?(this.nameRequired=!1,this.errorMessage=null):this.nameRequired=!1}agentNameInput(t){const e=t.value;if(this.nameRequired=!(!Object(C.X)(e)&&""!==e.trim()),this.nameRequired)this.agentNameValidation=!1;else if(e&&e.trim().length>0){if(!R.j.test(e.trim()))return void(this.agentNameValidation=!0);this.agentNameValidation=!1}this.removeCustmError(t)}removeCustmError(t){if(!Object(C.X)(t.container)&&!Object(C.X)(t.container.parentElement)){const e=t.container.parentElement.parentElement.querySelector(".custom-error span.error");e.classList.remove("custom-error-appended"),e.innerText=""}}agentDisplayNameFocusOut(){if(Object(C.X)(this.agentDisplayName.value))return this.agentDisplayNameValidation=!1,void(this.displayNameRequired=!0);const t=this.agentDisplayName.value.trim();if(t&&t.length>0){if(!R.c.test(t.trim()))return void(this.agentDisplayNameValidation=!0);this.agentDisplayNameValidation=!1}else this.agentDisplayNameValidation=!1,this.displayNameRequired=!0}agentDisplayNameChange(){null!=this.agentDisplayName.value?(this.displayNameRequired=!1,this.errorMessage=null):this.displayNameRequired=!1}agentDisplayNameInput(t){const e=t.value;if(this.displayNameRequired=!(!Object(C.X)(e)&&""!==e.trim()),this.displayNameRequired)this.agentDisplayNameValidation=!1;else if(e&&e.trim().length>0){if(!R.c.test(e.trim()))return void(this.agentDisplayNameValidation=!0);this.agentDisplayNameValidation=!1}this.removeCustmError(t)}userEmailFocusOut(){if(Object(C.X)(this.userEmail.value))return this.agentEmailValidation=!1,void(this.emailRequired=!0);const t=this.userEmail.value.trim();if(t&&t.length>0){if(!R.e.test(t.trim()))return void(this.agentEmailValidation=!0);this.agentEmailValidation=!1}else this.agentEmailValidation=!1,this.emailRequired=!0}userEmailChange(){null!=this.userEmail.value?(this.emailRequired=!1,this.errorMessage=null):this.emailRequired=!1}userEmailInput(t){const e=t.value;this.emailRequired=!(!Object(C.X)(e)&&""!==e.trim()),this.agentEmailValidation=!1,this.removeCustmError(t)}timeZoneFocusOut(){this.timeZoneRequired=Object(C.X)(this.timeZones.value)||0===this.timeZones.value.toString().length}timeZoneChange(){Object(C.X)(this.timeZones.value)||0===this.timeZones.value.toString().length?this.timeZoneRequired=!1:(this.timeZoneRequired=!1,this.errorMessage=null)}agentAccessScopeFocusOut(){this.agentAccessRequired=Object(C.X)(this.agentAccessScope.value)||0===this.agentAccessScope.value.toString().length}agentAccessScopeChange(){Object(C.X)(this.agentAccessScope.value)||0===this.agentAccessScope.value.toString().length?this.agentAccessRequired=!1:(this.agentAccessRequired=!1,this.errorMessage=null)}accessChange(){this.isMultiBrand?this.allBrandAccess.checked?(this.showBrand=!1,this.userBrands.value=null):this.showBrand=!0:this.showBrand=!1}agentDialogBeforeOpen(){Object(T.V)(!0),this.nameRequired=!1,this.displayNameRequired=!1,this.emailRequired=!1,this.roleRequired=!1,this.agentNameValidation=!1,this.agentDisplayNameValidation=!1,this.agentEmailValidation=!1,this.userRole.value=null,this.isMultiBrand&&(this.userBrands.value=null),this.allBrandAccess.checked=!1,this.showBrand=!0}userBrandChange(t){Object(C.X)(this.userBrands.value)||0===this.userBrands.value.length||(this.errorMessage=null),this.removeCustmError(t)}userRoleFocusOut(){this.roleRequired=Object(C.X)(this.userRole.value)||0===this.userRole.value.length}userRoleChange(t){Object(C.X)(this.userRole.value)||0===this.userRole.value.length||(this.errorMessage=null),this.removeCustmError(t)}convertContact(){let t;if(this.clearCustomErrors(),this.errorMessage=null,this.agentNameFocusOut(),this.agentDisplayNameFocusOut(),this.userEmailFocusOut(),this.agentAccessScopeFocusOut(),this.userRoleFocusOut(),this.timeZoneFocusOut(),this.validationCheck()){if(this.userRole.value.length>0){this.errorMessage=null,this.spinService.showSpinner(),this.isMultiBrand&&(this.brands=!Object(C.X)(this.userBrands.value)&&this.userBrands.value.length>0?this.userBrands.value.join(","):null);const e=this.userRole.value.join(",");t=this.isMultiBrand?{name:Object(C.X)(this.agentName.value)?null:this.agentName.value.trim(),displayName:Object(C.X)(this.agentDisplayName.value)?null:this.agentDisplayName.value.trim(),emailId:Object(C.X)(this.userEmail)?null:this.userEmail.value.trim(),timeZoneId:this.timeZones.value,hasAllBrandAccess:this.allBrandAccess.checked,brandIds:this.brands,roleIds:e,ticketAccessScopeId:+this.agentAccessScope.value}:{name:this.agentName.value.trim(),displayName:this.agentDisplayName.value.trim(),emailId:this.userEmail.value.trim(),timeZoneId:this.timeZones.value,hasAllBrandAccess:this.allBrandAccess.checked,brandIds:this.allBrandAccess.checked?T.e.singleBrandId.toString():null,roleIds:e},this.contactAPIService.convertContactToAgent(this.contactId,t).then(t=>{t&&(Object(T.V)(!1),this.toastService.successToast(t.message),this.router.navigateByUrl("/admin/agents/"+this.contactId))}).catch(t=>{400===t.status&&t.error&&t.error.errors.length>0&&(this.spinService.hideSpinner(),this.toastService.failureToast(t.error.errors[0].errorMessage))}).finally(()=>{this.spinService.hideSpinner(),this.convertContactToAgentDialog.hide()})}}else setTimeout(()=>{this.formErrorEleFocus()})}clearCustomErrors(){this.addAgentForm&&[].slice.call(this.addAgentForm.nativeElement.querySelectorAll(".custom-error span.error")).forEach(t=>{t.classList.remove("custom-error-appended"),t.innerText=""})}validationCheck(){return!(this.nameRequired||this.agentNameValidation||this.displayNameRequired||this.agentDisplayNameValidation||this.emailRequired||this.agentEmailValidation||this.roleRequired||this.agentAccessRequired||this.timeZoneRequired)}formErrorEleFocus(){const t=this.addAgentForm;if(t&&t.nativeElement){const e=t.nativeElement;let c;if(c=t.nativeElement.querySelector(".required"),c||(c=t.nativeElement.querySelector(".custom-error-appended")),c||(c=e.querySelector(".e-error")),!c)return;const i=Object(C.C)(c,".form-group");if(i){const t=i.querySelector("input");Object(C.X)(t)?i.querySelector("textarea").focus():t.focus()}else e.querySelector("input").focus()}}overlayClick(t){t.closeIcon.click()}agentDialogBeforeClose(t){if(!t.isInteracted)return;const e=window.confirm(""+Object(v.a)("CONFORMDATALOSE"));t.cancel=!e,t.cancel||Object(T.V)(!1)}dialogClose(){this.resetErrorMessage()}resetErrorMessage(){this.nameRequired=!1,this.emailRequired=!1,this.roleRequired=!1,this.agentEmailValidation=!1,this.agentNameValidation=!1,this.agentAccessRequired=!1,this.timeZoneRequired=!1,this.agentName.value=null,this.agentDisplayName.value=null,this.userEmail.value=null,this.userRole.value=null,this.agentAccessScope.value=null,this.isMultiBrand&&(this.userBrands.value=null),this.errorMessage=null,this.clearCustomErrors()}}return t.\u0275fac=function(e){return new(e||t)(x.Nb(k.a),x.Nb(h.a),x.Nb(h.g),x.Nb(I),x.Nb(y.a),x.Nb(w.a),x.Nb(w.b))},t.\u0275cmp=x.Hb({type:t,selectors:[["convert-contact-agent"]],viewQuery:function(t,e){var c;1&t&&(x.Qc(j,!0),x.Qc(U,!0),x.Qc(_,!0),x.Qc(G,!0),x.Qc(V,!0),x.Qc(q,!0),x.Qc(J,!0),x.Qc(K,!0),x.Qc(X,!0),x.Qc(Q,!0)),2&t&&(x.xc(c=x.fc())&&(e.convertContactToAgentDialog=c.first),x.xc(c=x.fc())&&(e.agentName=c.first),x.xc(c=x.fc())&&(e.agentDisplayName=c.first),x.xc(c=x.fc())&&(e.userEmail=c.first),x.xc(c=x.fc())&&(e.timeZones=c.first),x.xc(c=x.fc())&&(e.agentAccessScope=c.first),x.xc(c=x.fc())&&(e.allBrandAccess=c.first),x.xc(c=x.fc())&&(e.userBrands=c.first),x.xc(c=x.fc())&&(e.userRole=c.first),x.xc(c=x.fc())&&(e.addAgentForm=c.first))},decls:8,vars:2,consts:[["id","convertContactToAgentDialog","width","400px","isModal","true","showCloseIcon","true","closeOnEscape","true","height","100%","cssClass","dialog-height rounded-0",3,"visible","position","beforeOpen","close","overlayClick","beforeClose"],["convertContactToAgentDialog",""],["header",""],["footerTemplate",""],["content",""],[1,"flex-horizontal"],[1,"align-right"],["data-ripple","true","autofocus","",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat",3,"click"],["contentAddAgentForm",""],[1,"form-group","pt-1","name"],[1,"cutom-field-label"],[1,"error"],["id","userNameField","autocomplete","off",3,"placeholder","htmlAttributes","blur","change","input"],["agentName",""],[4,"ngIf"],[1,"col","custom-error","no-padding"],[1,"form-group","pt-2","displayname"],["id","displayNameField","autocomplete","off",3,"placeholder","htmlAttributes","blur","change","input"],["agentDisplayName",""],[1,"form-group","pt-2","emailid","agent"],["id","userEmailField","maxlength","150","autocomplete","off","disabled","true",3,"placeholder","blur","change","input"],["userEmail",""],[1,"form-group","pt-2","timezoneid"],["cssClass","dropdown-item-seperation",3,"placeholder","dataSource","fields","allowFiltering","filterType","filterBarPlaceholder","showClearButton","htmlAttributes","blur","change"],["timeZones",""],[1,"form-group","pt-2","ticketaccessscopeid"],["id","agentAccess","popupHeight","200px","showDropDownIcon","true",3,"dataSource","fields","placeholder","htmlAttributes","blur","change"],["agentAccessScope",""],["itemTemplate",""],[1,"pt-2","mb-2"],[3,"label","checked","change"],["allBrandAccess",""],[3,"hidden"],[1,"form-group","pt-2","brandids"],["id","brandField","mode","CheckBox","popupHeight","200px",3,"dataSource","fields","placeholder","allowFiltering","showDropDownIcon","htmlAttributes","change","removed"],["userBrands",""],[1,"form-group","pt-2","roleids"],["id","agentRoleField","mode","CheckBox","popupHeight","200px","showDropDownIcon","true",3,"dataSource","placeholder","allowFiltering","fields","showClearButton","htmlAttributes","filterBarPlaceholder","blur","change","removed"],["userRole",""],[1,"required"],[1,"flex-horizontal","secondary","p-2"],[1,"flex-vertical","no-wrap","ellipsis"],[1,"e-text"],[1,"font-12"]],template:function(t,e){if(1&t){const t=x.Ub();x.Tb(0,"ejs-dialog",0,1),x.ec("beforeOpen",(function(){return e.agentDialogBeforeOpen()}))("close",(function(){return e.dialogClose()}))("overlayClick",(function(){x.Bc(t);const c=x.yc(1);return e.overlayClick(c)}))("beforeClose",(function(t){return e.agentDialogBeforeClose(t)})),x.Jc(2,H,3,3,"ng-template",null,2,x.Kc),x.Jc(4,z,8,6,"ng-template",null,3,x.Kc),x.Jc(6,nt,93,83,"ng-template",null,4,x.Kc),x.Sb()}2&t&&x.nc("visible",!1)("position",e.dialogAgentPosition)},directives:[r.b,l.i,i.n,d.e,a.e,d.h],pipes:[F.a],encapsulation:2}),t})();var at=c("KDci"),st=c("S/i4");const rt=["usersideBar"],lt=["contactSideBar"],dt=["userListGrid"],ht=["blockUnblockContactDialog"],bt=["markAllTicketsSpam"],ut=["removeAllTicketsSpam"],pt=["deleteRestoreContactDialog"],mt=["markDeletedTicketTicketsSpam"],gt=["removeRestoredTicketsSpam"],Ct=["errorDialog"],ft=["contactListEle"],Tt=["contactGridEle"],St=["moreOptionsContextMenu"],vt=["contacttitle"],Ot=["convertAgent"];function xt(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",34),x.Tb(1,"button",35),x.ec("click",(function(){return x.Bc(t),x.gc().createNewContactClick()})),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()}2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"ADDCONTACT")," "))}function kt(t,e){1&t&&(x.Tb(0,"div",36),x.Ob(1,"lib-shimmer",37),x.Sb())}function Et(t,e){1&t&&(x.Tb(0,"div",38),x.Tb(1,"div",39),x.Ob(2,"img",40),x.Sb(),x.Tb(3,"div",41),x.Lc(4),x.hc(5,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(4),x.Mc(x.ic(5,1,"NOCONTACTSFOUND")))}const Dt=function(t){return{background:t}};function At(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",42),x.Tb(1,"div",43),x.Lc(2),x.Sb(),x.Tb(3,"div",44),x.Tb(4,"span",45),x.ec("click",(function(c){x.Bc(t);const i=e.$implicit;return x.gc().userDetails(c,i)})),x.Lc(5),x.Sb(),x.Sb(),x.Sb()}if(2&t){const t=e.$implicit;x.xb(1),x.nc("ngStyle",x.tc(4,Dt,t.colorCode)),x.xb(1),x.Nc(" ",t.shortCode," "),x.xb(2),x.yb("data-title",t.contactName),x.xb(1),x.Nc(" ",t.contactName," ")}}function yt(t,e){if(1&t&&(x.Tb(0,"span",46),x.Lc(1),x.Sb()),2&t){const t=e.$implicit,c=x.gc();x.xb(1),x.Nc(" ",null!=t.contactGroup&&t.contactGroup.length>0?c.getNameFieldFromDropDownArray(t.contactGroup):"--"," ")}}function Nt(t,e){if(1&t&&(x.Tb(0,"div",47),x.Ob(1,"div",48),x.Tb(2,"div",44),x.Lc(3),x.Sb(),x.Sb()),2&t){const t=e.$implicit;x.xb(1),x.nc("ngClass",!t.isVerified||t.isDeleted||t.isBlocked?t.isVerified||t.isDeleted||t.isBlocked?t.isBlocked?"bd-icon bd-icon-error error":"bd-icon bd-icon-delete error":"bd-icon bd-icon-circleclose failure":"bd-icon bd-icon-ok success"),x.xb(2),x.Nc(" ",!t.isVerified||t.isDeleted||t.isBlocked?t.isVerified||t.isDeleted||t.isBlocked?t.isBlocked?"Blocked":"Deleted":"Unverified":"Verified"," ")}}function Mt(t,e){if(1&t){const t=x.Ub();x.Tb(0,"span",51),x.ec("click",(function(){x.Bc(t);const e=x.gc().$implicit,c=x.gc();return c.moreOptionsSelect(c.editItem,e)})),x.hc(1,"translate"),x.Sb()}2&t&&x.yb("data-title",x.ic(1,1,"EDIT"))}function It(t,e){if(1&t){const t=x.Ub();x.Tb(0,"span",53),x.ec("click",(function(e){x.Bc(t);const c=x.gc(2).$implicit;return x.gc().moreOptionButtonClick(e,c)})),x.Sb()}}function Bt(t,e){if(1&t){const t=x.Ub();x.Tb(0,"span",53),x.ec("click",(function(e){x.Bc(t);const c=x.gc(2).$implicit;return x.gc().moreOptionButtonClick(e,c)})),x.Sb()}}function Lt(t,e){if(1&t){const t=x.Ub();x.Tb(0,"span",53),x.ec("click",(function(e){x.Bc(t);const c=x.gc(3).$implicit;return x.gc().moreOptionButtonClick(e,c)})),x.Sb()}}function Pt(t,e){if(1&t&&(x.Tb(0,"span"),x.Jc(1,Lt,1,0,"span",52),x.Sb()),2&t){const t=x.gc(2).$implicit,e=x.gc();x.xb(1),x.nc("ngIf",e.accessToCreateOrEdit&&!t.isBlocked&&!t.isDeleted||e.accessToImpersonate&&!t.isBlocked&&!t.isDeleted&&t.isVerified||e.accessToDeleteOrRestoreContact||e.accessToBlockOrUnBlockContact)}}function Rt(t,e){if(1&t&&(x.Tb(0,"span"),x.Jc(1,It,1,0,"span",52),x.Jc(2,Bt,1,0,"span",52),x.Jc(3,Pt,2,1,"span",50),x.Sb()),2&t){const t=x.gc().$implicit,e=x.gc();x.xb(1),x.nc("ngIf",e.permissionToOnlyImpersonate&&!t.isBlocked&&!t.isDeleted),x.xb(1),x.nc("ngIf",e.permissionToOnlyEdit&&!t.isBlocked&&!t.isDeleted),x.xb(1),x.nc("ngIf",!e.permissionToOnlyImpersonate&&!e.permissionToOnlyEdit)}}function wt(t,e){if(1&t){const t=x.Ub();x.Tb(0,"span",53),x.ec("click",(function(e){x.Bc(t);const c=x.gc(2).$implicit;return x.gc().moreOptionButtonClick(e,c)})),x.Sb()}}function Ft(t,e){if(1&t&&(x.Tb(0,"span"),x.Jc(1,wt,1,0,"span",52),x.Sb()),2&t){const t=x.gc().$implicit;x.xb(1),x.nc("ngIf",!t.isBlocked&&!t.isDeleted)}}function jt(t,e){if(1&t&&(x.Jc(0,Mt,2,3,"span",49),x.Jc(1,Rt,4,3,"span",50),x.Jc(2,Ft,2,1,"span",50)),2&t){const t=e.$implicit,c=x.gc();x.nc("ngIf",c.accessToCreateOrEdit&&!t.isDeleted&&!t.isBlocked),x.xb(1),x.nc("ngIf",c.showActionButton),x.xb(1),x.nc("ngIf",!c.showActionButton)}}function Ut(t,e){if(1&t){const t=x.Ub();x.Tb(0,"app-contact-module-side-bar",54,55),x.ec("chipClick",(function(e){return x.Bc(t),x.gc().sideBarClick(e)})),x.Sb()}if(2&t){const t=x.gc();x.nc("activateActive",t.activateActive)("activeItem",t.currentFilterUrl)("isResponseComplete",!t.stillFetching)}}function _t(t,e){if(1&t&&(x.Tb(0,"div",61),x.Lc(1),x.hc(2,"translate"),x.Sb(),x.Tb(3,"div",61),x.Lc(4),x.hc(5,"translate"),x.Sb()),2&t){const t=x.gc(2);x.nc("hidden",!t.blockContact),x.xb(1),x.Mc(x.ic(2,4,"BLOCKCONTACT")),x.xb(2),x.nc("hidden",!t.UnblockContact),x.xb(1),x.Mc(x.ic(5,6,"UNBLOCKCONTACT"))}}function Gt(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",61),x.Tb(1,"button",62),x.ec("click",(function(){x.Bc(t),x.gc();const e=x.yc(1);return x.gc().cancelDialog(e)})),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Tb(4,"button",63),x.ec("click",(function(){return x.Bc(t),x.gc(2).updateBlockContact()})),x.Lc(5),x.hc(6,"translate"),x.Sb(),x.Sb(),x.Tb(7,"div",61),x.Tb(8,"button",64),x.ec("click",(function(){x.Bc(t),x.gc();const e=x.yc(1);return x.gc().cancelDialog(e)})),x.Lc(9),x.hc(10,"translate"),x.Sb(),x.Tb(11,"button",65),x.ec("click",(function(){return x.Bc(t),x.gc(2).updateUnblockContact()})),x.Lc(12),x.hc(13,"translate"),x.Sb(),x.Sb()}if(2&t){const t=x.gc(2);x.nc("hidden",!t.blockContact),x.xb(2),x.Mc(x.ic(3,6,"CANCEL")),x.xb(3),x.Mc(x.ic(6,8,"BLOCKCONTACT")),x.xb(2),x.nc("hidden",!t.UnblockContact),x.xb(2),x.Mc(x.ic(10,10,"CANCEL")),x.xb(3),x.Mc(x.ic(13,12,"UNBLOCKCONTACT"))}}function Vt(t,e){if(1&t&&(x.Tb(0,"div",null,66),x.Tb(2,"div",61),x.Tb(3,"div",67),x.Ob(4,"ejs-checkbox",68,69),x.hc(6,"translate"),x.Sb(),x.Ob(7,"div",70),x.Tb(8,"div",71),x.Tb(9,"div",67),x.Lc(10),x.hc(11,"translate"),x.Sb(),x.Tb(12,"ul",72),x.Tb(13,"li"),x.Lc(14),x.hc(15,"translate"),x.Sb(),x.Tb(16,"li"),x.Lc(17),x.hc(18,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(19,"div",61),x.Tb(20,"div",67),x.Ob(21,"ejs-checkbox",68,73),x.hc(23,"translate"),x.Sb(),x.Ob(24,"div",70),x.Tb(25,"div",71),x.Tb(26,"div",67),x.Lc(27),x.hc(28,"translate"),x.Sb(),x.Tb(29,"ul",72),x.Tb(30,"li"),x.Lc(31),x.hc(32,"translate"),x.Sb(),x.Tb(33,"li"),x.Lc(34),x.hc(35,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb()),2&t){const t=x.gc(2);x.xb(2),x.nc("hidden",!t.blockContact),x.xb(2),x.oc("label",x.ic(6,12,"BLOCKCHECKBOX")),x.nc("checked",!0),x.xb(6),x.Nc("",x.ic(11,14,"BLOCKCONTACTACTIONS"),":"),x.xb(4),x.Mc(x.ic(15,16,"BLOCKCONTACTACTIONONE")),x.xb(3),x.Mc(x.ic(18,18,"BLOCKCONTACTACTIONTWO")),x.xb(2),x.nc("hidden",!t.UnblockContact),x.xb(2),x.oc("label",x.ic(23,20,"UNBLOCKCHECKBOX")),x.nc("checked",!1),x.xb(6),x.Nc("",x.ic(28,22,"UNBLOCKCONTACTACTIONS"),":"),x.xb(4),x.Mc(x.ic(32,24,"UNBLOCKCONTACTSPAMACTIONTWO")),x.xb(3),x.Mc(x.ic(35,26,"UNBLOCKCONTACTACTIONONE"))}}function qt(t,e){if(1&t){const t=x.Ub();x.Tb(0,"ejs-dialog",56,57),x.ec("overlayClick",(function(){x.Bc(t);const e=x.yc(1);return x.gc().overlayClick(e)}))("open",(function(){return x.Bc(t),x.gc().blockUnblockDialogOpen()})),x.Jc(2,_t,6,8,"ng-template",null,58,x.Kc),x.Jc(4,Gt,14,14,"ng-template",null,59,x.Kc),x.Jc(6,Vt,36,28,"ng-template",null,60,x.Kc),x.Sb()}2&t&&x.nc("visible",!1)}function Jt(t,e){if(1&t&&(x.Tb(0,"div",61),x.Lc(1),x.hc(2,"translate"),x.Sb(),x.Tb(3,"div",61),x.Lc(4),x.hc(5,"translate"),x.Sb()),2&t){const t=x.gc(2);x.nc("hidden",!t.deleteContact),x.xb(1),x.Mc(x.ic(2,4,"DELETECONTACT")),x.xb(2),x.nc("hidden",!t.restoreContact),x.xb(1),x.Mc(x.ic(5,6,"RESTORECONTACT"))}}function Kt(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",61),x.Tb(1,"button",62),x.ec("click",(function(){x.Bc(t),x.gc();const e=x.yc(1);return x.gc().cancelDialog(e)})),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Tb(4,"button",63),x.ec("click",(function(){return x.Bc(t),x.gc(2).updateDeleteContact()})),x.Lc(5),x.hc(6,"translate"),x.Sb(),x.Sb(),x.Tb(7,"div",61),x.Tb(8,"button",64),x.ec("click",(function(){x.Bc(t),x.gc();const e=x.yc(1);return x.gc().cancelDialog(e)})),x.Lc(9),x.hc(10,"translate"),x.Sb(),x.Tb(11,"button",65),x.ec("click",(function(){return x.Bc(t),x.gc(2).updateRestoreContact()})),x.Lc(12),x.hc(13,"translate"),x.Sb(),x.Sb()}if(2&t){const t=x.gc(2);x.nc("hidden",!t.deleteContact),x.xb(2),x.Mc(x.ic(3,6,"CANCEL")),x.xb(3),x.Mc(x.ic(6,8,"DELETECONTACT")),x.xb(2),x.nc("hidden",!t.restoreContact),x.xb(2),x.Mc(x.ic(10,10,"CANCEL")),x.xb(3),x.Mc(x.ic(13,12,"RESTORECONTACT"))}}function Xt(t,e){if(1&t&&(x.Tb(0,"div",null,76),x.Tb(2,"div",61),x.Tb(3,"div",67),x.Ob(4,"ejs-checkbox",68,77),x.hc(6,"translate"),x.Sb(),x.Ob(7,"div",70),x.Tb(8,"div",71),x.Tb(9,"div",67),x.Lc(10),x.hc(11,"translate"),x.Sb(),x.Tb(12,"ul",72),x.Tb(13,"li"),x.Lc(14),x.hc(15,"translate"),x.Sb(),x.Tb(16,"li"),x.Lc(17),x.hc(18,"translate"),x.Sb(),x.Tb(19,"li"),x.Lc(20),x.hc(21,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(22,"div",61),x.Tb(23,"div",67),x.Ob(24,"ejs-checkbox",68,78),x.hc(26,"translate"),x.Sb(),x.Ob(27,"div",70),x.Tb(28,"div",71),x.Tb(29,"div",79),x.Lc(30),x.hc(31,"translate"),x.Sb(),x.Tb(32,"ul",72),x.Tb(33,"li"),x.Lc(34),x.hc(35,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb()),2&t){const t=x.gc(2);x.xb(2),x.nc("hidden",!t.deleteContact),x.xb(2),x.oc("label",x.ic(6,12,"BLOCKCHECKBOX")),x.nc("checked",!0),x.xb(6),x.Nc("",x.ic(11,14,"DELETECONTACTACTIONS"),":"),x.xb(4),x.Mc(x.ic(15,16,"DELETECONTACTACTIONONE")),x.xb(3),x.Mc(x.ic(18,18,"DELETECONTACTACTIONTWO")),x.xb(3),x.Mc(x.ic(21,20,"DELETECONTACTACTIONTHREE")),x.xb(2),x.nc("hidden",!t.restoreContact),x.xb(2),x.oc("label",x.ic(26,22,"UNBLOCKCHECKBOX")),x.nc("checked",!1),x.xb(6),x.Nc("",x.ic(31,24,"RESTORECONTACTACTIONS"),":"),x.xb(4),x.Mc(x.ic(35,26,"RESTORECONTACTACTIONONE"))}}function Qt(t,e){if(1&t){const t=x.Ub();x.Tb(0,"ejs-dialog",74,75),x.ec("overlayClick",(function(){x.Bc(t);const e=x.yc(1);return x.gc().overlayClick(e)})),x.Jc(2,Jt,6,8,"ng-template",null,58,x.Kc),x.Jc(4,Kt,14,14,"ng-template",null,59,x.Kc),x.Jc(6,Xt,36,28,"ng-template",null,60,x.Kc),x.Sb()}2&t&&x.nc("visible",!1)}function Ht(t,e){1&t&&(x.Tb(0,"div"),x.Lc(1),x.hc(2,"translate"),x.Sb()),2&t&&(x.xb(1),x.Mc(x.ic(2,1,"DELETECONTACT")))}function zt(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div"),x.Tb(1,"button",82),x.ec("click",(function(){return x.Bc(t),x.gc(2).errorDialogOkay()})),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()}2&t&&(x.xb(2),x.Mc(x.ic(3,1,"OKAY")))}function Zt(t,e){if(1&t&&(x.Tb(0,"div",null,83),x.Tb(2,"div",61),x.Tb(3,"div"),x.Lc(4),x.Sb(),x.Sb(),x.Sb()),2&t){const t=x.gc(2);x.xb(2),x.nc("hidden",!t.deleteContact),x.xb(2),x.Mc(t.deleteFailErrorMessage)}}function Wt(t,e){1&t&&(x.Tb(0,"ejs-dialog",80,81),x.Jc(2,Ht,3,3,"ng-template",null,58,x.Kc),x.Jc(4,zt,4,3,"ng-template",null,59,x.Kc),x.Jc(6,Zt,5,2,"ng-template",null,60,x.Kc),x.Sb()),2&t&&x.nc("visible",!1)}function $t(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",84),x.Tb(1,"div",85),x.Tb(2,"div",86),x.Tb(3,"span"),x.hc(4,"translate"),x.hc(5,"translate"),x.Lc(6),x.hc(7,"translate"),x.Sb(),x.Sb(),x.Tb(8,"div",87),x.Tb(9,"span",88),x.ec("click",(function(){return x.Bc(t),x.gc().refrehsGrid()})),x.hc(10,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Sb()}2&t&&(x.xb(3),x.Ab("data-title","",x.ic(4,4,"CONTACTS")," (",x.ic(5,6,"CUSTOMERS"),")"),x.xb(3),x.Mc(x.ic(7,8,"CONTACTS")),x.xb(3),x.yb("data-title",x.ic(10,10,"REFRESH")))}let Yt=(()=>{class t{constructor(t,e,c,i,n,o,a,s,r,l){this.appRootService=t,this.route=e,this.router=c,this.contactAPIService=i,this.seoService=n,this.contactRootService=o,this.spinService=a,this.appPermissionService=s,this.toastService=r,this.jwtService=l,this.showActionButton=!0,this.searchPlaceholder=Object(v.a)("SEARCH"),this.block=Object(v.a)("BLOCKCONTACT"),this.unBlockContact=Object(v.a)("UNBLOCKCONTACT"),this.delete=Object(v.a)("DELETECONTACT"),this.restore=Object(v.a)("RESTORECONTACT"),this.sendVerifyEmail=Object(v.a)("SENDVERIFICATIONEMAIL"),this.sendResetPass=Object(v.a)("SENDRESETPASSWORD"),this.convert=Object(v.a)("CONVERTTOAGENT"),this.verifyManually=Object(v.a)("VERIFYMANUALLY"),this.impersonateContact=Object(v.a)("IMPERSONATE"),this.stillFetching=!0,this.nodataFound=!1,this.moreOptionsContacts=[{text:this.convert,id:"9",iconCss:"bd-icon bd-icon-groups"},{text:this.impersonateContact,id:"8",iconCss:"bd-icon bd-icon-groups"},{text:this.sendVerifyEmail,id:"5",iconCss:"bd-icon bd-icon-mail"},{text:this.sendResetPass,id:"6",iconCss:"bd-icon bd-icon-mail"},{text:this.verifyManually,id:"7",iconCss:"bd-icon bd-icon-tick24"},{text:this.unBlockContact,id:"2",iconCss:"bd-icon bd-icon-permissions1"},{text:this.restore,id:"4",iconCss:"bd-icon bd-icon-history"},{text:this.block,id:"1",iconCss:"bd-icon bd-icon-error"},{text:this.delete,id:"3",iconCss:"bd-icon bd-icon-delete"}],this.editItem={item:{id:g.a.Edit}},this.route.data.subscribe(()=>{this.currentFilterUrl=Object(C.X)(history.state.data)||Object(C.X)(history.state.data.name)?"all-contacts":history.state.data.name,this.userSideBarDataNeed=!!Object(C.X)(history.state.data)||history.state.data.userSideBarDataNeed}),setTimeout(()=>{this.appRootService.setAppTitleText(this.ContactTitle)}),this.appRootService.isSideBarNeeded(!0),this.appRootService.getNavigateUrl("/tickets"),this.setSEOHeader(),this.accessToCreateOrEdit=this.appPermissionService.hasPermission([S.a.CreateOrEditContact,S.a.ViewContact]),this.accessToBlockOrUnBlockContact=this.appPermissionService.hasPermission([S.a.BlockOrUnblockContactAndDeleteOrSpamAssociatedTickets,S.a.ViewContact])&&T.P.ticketAccessScopeId===g.b.Global&&T.P.hasAllBrandAccess,this.accessToDeleteOrRestoreContact=this.appPermissionService.hasPermission([S.a.DeleteOrRestoreContactAndDeleteOrSpamAssociatedTickets,S.a.ViewContact])&&T.P.ticketAccessScopeId===g.b.Global&&T.P.hasAllBrandAccess,this.accessToImpersonate=this.appPermissionService.hasPermission([S.a.ImpersonateContact])&&!this.jwtService.isImpersonated(),this.permissionToOnlyImpersonate=!(this.accessToBlockOrUnBlockContact||this.accessToCreateOrEdit||this.accessToDeleteOrRestoreContact)&&this.accessToImpersonate,this.permissionToOnlyEdit=!(this.accessToBlockOrUnBlockContact||this.accessToImpersonate||this.accessToDeleteOrRestoreContact)&&this.accessToCreateOrEdit,this.contactGroupId=Object(C.X)(history.state.data)?null:history.state.data.contactGroupId,this.canConvertContact=this.appPermissionService.hasPermission([S.a.ManageAgents]),this.accessToCreateOrEdit||this.accessToDeleteOrRestoreContact||this.accessToBlockOrUnBlockContact||this.accessToImpersonate||(this.showActionButton=!1)}ngAfterViewInit(){this.gridAction=this.contactRootService.contactGridActionObserve.subscribe(t=>{"refreshData"===t&&(this.contactListGrid.dataSource=new b.a({url:u.a.UserList,adaptor:new p.a}))}),this.sideBarAction=this.contactRootService.sidebarActionObserver.subscribe(t=>{this.chipClick(t.event,t.action)}),this.contactListGrid.query=(new b.g).addParams("view",this.currentFilterUrl),this.contactListEle.nativeElement.addEventListener("keydown",t=>{Object(m.l)(t,this.contactListEle.nativeElement)}),this.contactGridEle.nativeElement.addEventListener("scroll",()=>{this.CloseOtherPopups()}),setTimeout(()=>{this.gridColumnAction(this.currentFilterUrl)}),this.contactGroupId&&setTimeout(()=>{this.createNewContactClick(),this.contactRootService.setContactGroupWhileLoad(this.contactGroupId.toString())})}CloseOtherPopups(){this.moreOptionsMenu&&this.moreOptionsMenu.close()}refrehsGrid(){this.contactListGrid.dataSource=new b.a({url:u.a.UserList,adaptor:new p.a})}findIndexInArray(t,e){return e.findIndex(e=>e.id===t)}ngOnInit(){this.customerData=new b.a({url:u.a.UserList,adaptor:new p.a}),this.userSideBarDataNeed&&setTimeout(()=>{this.appRootService.setSideBarContent(this.usersideBar),this.activateActive=!0,this.appRootService.triggerContactSidebar(this.currentFilterUrl)}),document.querySelector(".body-content").classList.remove("custom-collapse"),this.toolbarOptions=this.accessToCreateOrEdit?[{text:Object(v.a)("ADDCONTACT"),prefixIcon:"hd-icon hd-plus",id:"addcontact"},"Search"]:["Search"],this.pageSettings={pageSize:f.g}}ngOnDestroy(){this.gridAction.unsubscribe(),this.sideBarAction.unsubscribe()}gridColumnAction(t){"unverified-contacts"===t||"deleted-contacts"===t?this.contactListGrid.hideColumns("Verified"):this.contactListGrid.showColumns("Verified"),this.showActionButton&&this.contactListGrid.showColumns("action"),"deleted-contacts"!==t&&"blocked-contacts"!==t||(this.accessToBlockOrUnBlockContact||this.accessToDeleteOrRestoreContact||!this.showActionButton?this.contactListGrid.showColumns("action"):this.contactListGrid.hideColumns("action")),"unverified-contacts"===t&&(!this.accessToImpersonate||this.accessToBlockOrUnBlockContact||this.accessToDeleteOrRestoreContact||this.accessToCreateOrEdit?this.contactListGrid.showColumns("action"):this.contactListGrid.hideColumns("action"))}chipClick(t,e){if(this.gridColumnAction(e),this.currentFilterUrl!==e){const c=t.currentTarget.parentElement.parentElement.children;for(const t of Array.from(c))t.firstElementChild.classList.remove("active");t.currentTarget.classList.add("active"),this.filterGridByUser(e)}}filterGridByUser(t){this.currentFilterUrl=t,this.contactListGrid.setProperties({query:(new b.g).addParams("view",t)},1!==this.contactListGrid.pageSettings.currentPage),1!==this.contactListGrid.pageSettings.currentPage&&(this.contactListGrid.pageSettings.currentPage=1,this.contactListGrid.dataBind())}userDetails(t,e){this.router.navigateByUrl("/contacts/"+e.userId)}getNameFieldFromDropDownArray(t){return!Object(C.X)(t)&&t.length>0?t.map(t=>t.name):null}setSEOHeader(){this.seoService.setHeaderElements({title:" Contacts "})}gridBeforedataBound(t){0===t.count?(this.stillFetching=!1,this.nodataFound=!0):(this.stillFetching=!0,this.nodataFound=!1)}userListGridDataBound(){this.stillFetching=!1}toolbarClick(t){if(t.item.text===Object(v.a)("ADDCONTACT"))this.contactRootService.setContactDialogTitle("ADDCONTACT"),this.contactRootService.setContactDialogSubmitText("ADD"),this.contactRootService.showAddEditContactForm("Add");else if("Excel Export"===t.item.text){const t=this.contactListGrid.columns;t[6].visible=!1,this.contactListGrid.columns=t,this.contactListGrid.excelExport({fileName:"contacts.xlsx"})}}rowSelect(t,e){if(!Object(C.X)(t.target)&&t.target.classList.contains("more-option-button"))t.cancel=!0;else if("blocked-contacts"===this.currentFilterUrl||"deleted-contacts"===this.currentFilterUrl)t.cancel=!0;else{const t=e;t&&this.contactEditClick(t.userId)}}contactEditClick(t){Object(C.X)(t)||(this.spinService.showSpinner(),this.contactAPIService.getContactByUserId(t).then(t=>{Object(C.X)(t)||this.contactRootService.setContactObjectOnEditDialog(t)}),this.contactRootService.setContactDialogTitle("EDITCONTACT"),this.contactRootService.setContactDialogSubmitText("UPDATE"),this.contactRootService.showAddEditContactForm("Edit"))}contactListGridActionBegin(t){"refresh"===t.requestType&&this.contactListGrid.searchModule.refreshSearch&&(this.contactListGrid.searchModule.refreshSearch=!1,this.stillFetching=!0)}moreOptionsButtonOpen(){const t=this.contactListEle.nativeElement.querySelectorAll(".more-option-button-background.e-active");if(t.length>1){const e=t;e&&e[0].ej2_instances[0].toggle()}}moreOptionButtonClick(t,e){const c=t.target,i=Object(r.f)(c);this.contactListGrid.clearSelection(),this.contactData=e,this.moreOptionsMenu.open(i.top+25,i.left,c)}contextMenuBeforeOpen(t,e){if(e.isBlocked||e.isDeleted||!e.isVerified)if(e.isBlocked||e.isDeleted||e.isVerified)if(!e.isBlocked&&e.isDeleted){const t=[],e=[this.unBlockContact,this.sendResetPass,this.verifyManually,this.sendVerifyEmail,this.delete,this.convert];this.accessToDeleteOrRestoreContact?t.push(this.restore):e.push(this.restore),this.accessToBlockOrUnBlockContact?t.push(this.block):e.push(this.block),e.push(this.impersonateContact),this.moreOptionsMenu.hideItems(e),this.moreOptionsMenu.showItems(t)}else if(e.isBlocked&&!e.isDeleted){const t=[],e=[this.restore,this.sendResetPass,this.verifyManually,this.sendVerifyEmail,this.block,this.convert];this.accessToDeleteOrRestoreContact?t.push(this.delete):e.push(this.delete),this.accessToBlockOrUnBlockContact?t.push(this.unBlockContact):e.push(this.unBlockContact),e.push(this.impersonateContact),this.moreOptionsMenu.hideItems(e),this.moreOptionsMenu.showItems(t)}else{const t=[],e=[this.sendResetPass,this.verifyManually,this.delete,this.sendVerifyEmail,this.block,this.convert];this.accessToDeleteOrRestoreContact?t.push(this.restore):e.push(this.restore),this.accessToBlockOrUnBlockContact?t.push(this.unBlockContact):e.push(this.unBlockContact),e.push(this.impersonateContact),this.moreOptionsMenu.hideItems(e),this.moreOptionsMenu.showItems(t)}else{const t=[],e=[this.unBlockContact,this.sendResetPass,this.restore];this.accessToCreateOrEdit?(t.push(this.sendVerifyEmail),t.push(this.verifyManually)):(e.push(this.sendVerifyEmail),e.push(this.verifyManually)),this.accessToDeleteOrRestoreContact?t.push(this.delete):e.push(this.delete),this.accessToBlockOrUnBlockContact?t.push(this.block):e.push(this.block),t.push(this.convert),e.push(this.impersonateContact),this.moreOptionsMenu.hideItems(e),this.moreOptionsMenu.showItems(t)}else{const t=[],e=[this.unBlockContact,this.sendVerifyEmail,this.verifyManually,this.restore];this.accessToCreateOrEdit?t.push(this.sendResetPass):e.push(this.sendResetPass),this.accessToDeleteOrRestoreContact?t.push(this.delete):e.push(this.delete),this.accessToBlockOrUnBlockContact?t.push(this.block):e.push(this.block),this.accessToImpersonate?t.push(this.impersonateContact):e.push(this.impersonateContact),t.push(this.convert),this.moreOptionsMenu.hideItems(e),this.moreOptionsMenu.showItems(t)}}moreOptionsClick(){this.contactListGrid.clearSelection()}moreOptionsSelect(t,e){t.item.id===g.a.Edit&&(Object(C.X)(e)||this.contactEditClick(e.userId)),t.item.id===g.a.Block&&(this.id=this.contactData.userId,this.blockUnblockContactDialog.show(),this.UnblockContact=!1,this.blockContact=!0,this.deleteContact=!1,this.restoreContact=!1,this.markAllTicketsSpam.checked=!0),t.item.id===g.a.Unblock&&(this.id=this.contactData.userId,this.blockUnblockContactDialog.show(),this.UnblockContact=!0,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.removeAllTicketsSpam.checked=!0),t.item.id===g.a.Delete&&(this.id=this.contactData.userId,this.deleteRestoreContactDialog.show(),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!0,this.restoreContact=!1,this.markDeletedTicketTicketsSpam.checked=!0),t.item.id===g.a.Restore&&(this.id=this.contactData.userId,this.deleteRestoreContactDialog.show(),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!0,this.removeRestoredTicketsSpam.checked=!0),t.item.id===g.a.SendVerificationEmail&&(this.id=this.contactData.userId,this.sendEmailAction(g.a.SendVerificationEmail),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.sendInvitation=!0),t.item.id===g.a.SendResetPasswordEmail&&(this.id=this.contactData.userId,this.sendEmailAction(g.a.SendResetPasswordEmail),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.sendResetPasswordMail=!0),t.item.id===g.a.VerifyNow&&(this.id=this.contactData.userId,this.sendEmailAction(g.a.VerifyNow),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.verifyNow=!0),t.item.id===g.a.ImpersonateContact&&(this.spinService.showSpinner(),this.contactAPIService.requestToImpersonateGuidId(this.contactData.userId).then(t=>{Object(m.j)(),window.location.href=O.b+t.guidId}).catch(t=>{const e=Object(m.q)(t.error);400===t.status&&this.toastService.failureToast(e),this.spinService.hideSpinner()}).finally(()=>{})),t.item.id===g.a.ConvertToAgent&&(this.canConvertContact?this.convertAgent.convertContactClick(this.contactData.userId):this.toastService.failureToast(Object(v.a)("NOPERMISSIONTOCONVERT")))}contactListExcelQueryCellInfo(t){if("timeZone"===t.column.field)t.value=t.value.name;else if("contactGroup"===t.column.field){const e=t.value.map(t=>t.name).join(",");t.value=e}else"name"===t.column.field?t.value=t.data.name+"\n"+t.data.emailId:"isVerified"===t.column.field&&(t.value=t.value?"Yes":"No")}excelExportComplete(){this.contactListGrid.columns[6].visible=!0}updateBlockContact(){this.spinService.showSpinner();const t=+this.id;this.markTicketAsSpam=!!this.markAllTicketsSpam.checked,this.contactAPIService.blockContact(t,this.markTicketAsSpam).then(t=>{t&&(this.blockUnblockContactDialog.hide(),this.toastService.successToast(t.message),this.contactRootService.setContactGridAction("refreshData"))}).finally(()=>{this.blockUnblockContactDialog.hide(),this.spinService.hideSpinner()})}updateDeleteContact(){this.spinService.showSpinner();const t=+this.id;this.markConatctTicketAsSpam=!!this.markDeletedTicketTicketsSpam.checked,this.contactAPIService.deleteContact(t,this.markConatctTicketAsSpam).then(t=>{t&&(this.deleteRestoreContactDialog.hide(),this.toastService.successToast(t.message),this.contactRootService.setContactGridAction("refreshData"))}).catch(t=>{this.deleteFailErrorMessage=t.error.errors[0].errorMessage,this.errorDialog.show()}).finally(()=>{this.deleteRestoreContactDialog.hide(),this.spinService.hideSpinner()})}updateUnblockContact(){this.spinService.showSpinner();const t=+this.id;this.removeTicketFromSpam=!!this.removeAllTicketsSpam.checked,this.contactAPIService.unblockContact(t,this.removeTicketFromSpam).then(t=>{t&&(this.blockUnblockContactDialog.hide(),this.toastService.successToast(t.message),this.contactRootService.setContactGridAction("refreshData"))}).finally(()=>{this.blockUnblockContactDialog.hide(),this.spinService.hideSpinner()})}updateRestoreContact(){this.spinService.showSpinner();const t=+this.id;this.removeContactTicketFromSpam=!!this.removeRestoredTicketsSpam.checked,this.contactAPIService.restoreContact(t,this.removeContactTicketFromSpam).then(t=>{t&&(this.deleteRestoreContactDialog.hide(),this.toastService.successToast(t.message),this.contactRootService.setContactGridAction("refreshData"))}).finally(()=>{this.deleteRestoreContactDialog.hide(),this.spinService.hideSpinner()})}sendEmailAction(t){this.spinService.showSpinner(),this.contactAPIService.sendEmailAction(t,+this.id).then(e=>{e&&this.toastService.successToast(e.message),t===g.a.VerifyNow&&this.refrehsGrid()}).catch(t=>{const e=Object(m.q)(t.error);400===t.status&&this.toastService.failureToast(e)}).finally(()=>{this.spinService.hideSpinner()})}overlayClick(t){t.closeIcon.click()}blockUnblockDialogOpen(){this.blockUnblockContactDialog.showCloseIcon=!0}cancelDialog(t){t.closeIcon.click()}errorDialogOkay(){this.errorDialog.hide()}sideBarClick(t){this.nodataFound=!1;const e=t.event,c=t.name;location.pathname.includes("contact-groups")?this.router.navigate(["/contacts"],{state:{data:{name:c}}}):this.contactRootService.sideBarActionFn({event:e,action:c})}searchNodes(){const t=this.contactListEle.nativeElement.querySelector("#search").ej2_instances[0].value;this.contactListGrid.search(t)}createNewContactClick(){this.contactRootService.setContactDialogTitle("ADDCONTACT"),this.contactRootService.setContactDialogSubmitText("ADD"),this.contactRootService.showAddEditContactForm("Add")}}return t.\u0275fac=function(e){return new(e||t)(x.Nb(k.a),x.Nb(h.a),x.Nb(h.g),x.Nb(I),x.Nb(B.a),x.Nb(y.a),x.Nb(N.a),x.Nb(L.a),x.Nb(M.a),x.Nb(P.a))},t.\u0275cmp=x.Hb({type:t,selectors:[["user-contact"]],viewQuery:function(t,e){var c;1&t&&(x.Gc(rt,!0),x.Qc(lt,!0),x.Qc(dt,!0),x.Qc(ht,!0),x.Qc(bt,!0),x.Qc(ut,!0),x.Qc(pt,!0),x.Qc(mt,!0),x.Qc(gt,!0),x.Qc(Ct,!0),x.Qc(ft,!0),x.Qc(Tt,!0),x.Qc(St,!0),x.Gc(vt,!0),x.Qc(Ot,!0)),2&t&&(x.xc(c=x.fc())&&(e.usersideBar=c.first),x.xc(c=x.fc())&&(e.contactSideBar=c.first),x.xc(c=x.fc())&&(e.contactListGrid=c.first),x.xc(c=x.fc())&&(e.blockUnblockContactDialog=c.first),x.xc(c=x.fc())&&(e.markAllTicketsSpam=c.first),x.xc(c=x.fc())&&(e.removeAllTicketsSpam=c.first),x.xc(c=x.fc())&&(e.deleteRestoreContactDialog=c.first),x.xc(c=x.fc())&&(e.markDeletedTicketTicketsSpam=c.first),x.xc(c=x.fc())&&(e.removeRestoredTicketsSpam=c.first),x.xc(c=x.fc())&&(e.errorDialog=c.first),x.xc(c=x.fc())&&(e.contactListEle=c.first),x.xc(c=x.fc())&&(e.contactGridEle=c.first),x.xc(c=x.fc())&&(e.moreOptionsMenu=c.first),x.xc(c=x.fc())&&(e.ContactTitle=c.first),x.xc(c=x.fc())&&(e.convertAgent=c.first))},decls:49,vars:31,consts:[[1,"contact-container"],[1,"height-100"],[1,"contact-chip-list","contact-grid",2,"height","100%"],["contactListEle",""],[2,"height","56px","border-bottom","1px solid #E2E8F0"],[2,"height","100%"],[1,"search-box"],["id","search","showClearButton","true","autocomplete","off","maxlength","150",3,"placeholder","change"],["search",""],["class","add-button-container",4,"ngIf"],[2,"height","calc(100% - 56px)","overflow","auto","padding","8px"],["contactGridEle",""],["class","pt-2",4,"ngIf"],["class","no-list-found text-center",4,"ngIf"],["id","userListGrid",3,"dataSource","allowSorting","allowPaging","pageSettings","allowExcelExport","hidden","showColumnChooser","allowResizing","excelQueryCellInfo","beforeDataBound","excelExportComplete","dataBound","actionBegin"],["userListGrid",""],["field","name","minWidth","120","width","160",3,"headerText"],["template",""],["field","emailId","minWidth","160","width","180","clipMode","EllipsisWithTooltip",3,"headerText","allowSorting"],["field","contactGroup","minWidth","100","width","120","clipMode","EllipsisWithTooltip",3,"headerText","allowSorting"],["field","isVerified","minWidth","60","width","80","clipMode","EllipsisWithTooltip",3,"headerText","allowSorting"],["minWidth","100","width","100","textAlign","Center","name","action"],["id","contextmenu","cssClass","context-view-more-options",3,"items","select","beforeOpen"],["moreOptionsContextMenu",""],["usersideBar",""],[1,"block-conatct-dialog"],["id","blockUnblockContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick","open",4,"ngIf"],[1,"delete-conatct-dialog"],["id","deleteRestoreContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick",4,"ngIf"],[1,"error-dialog"],["id","errorDialog","width","480px","isModal","true","height","Auto","closeOnEscape","true",3,"visible",4,"ngIf"],["contacttitle",""],[1,"convert-contact-to-agent-dialog"],["convertAgent",""],[1,"add-button-container"],["type","button","ejs-button","",1,"e-btn","add-button","e-primary","e-outline",3,"click"],[1,"pt-2"],["type","grid"],[1,"no-list-found","text-center"],[1,"ticket-no-records"],["src","assets/images/group.png","alt","Loading",1,"no-contact-image"],[1,"no-ticket-text"],[1,"flex-horizontal"],[1,"e-avatar","e-avatar-small","e-avatar-circle",3,"ngStyle"],[1,"no-wrap","ellipsis"],[1,"primary-link-color","cursor-pointer",3,"click"],[1,"grid-text-font-color"],[1,"flex-horizontal",2,"height","inherit"],[2,"padding-left","0",3,"ngClass"],["class","more-option-button bd-icon bd-icon-edit",3,"click",4,"ngIf"],[4,"ngIf"],[1,"more-option-button","bd-icon","bd-icon-edit",3,"click"],["class","hd-icon hd-vertical-menu more-option-button",3,"click",4,"ngIf"],[1,"hd-icon","hd-vertical-menu","more-option-button",3,"click"],[3,"activateActive","activeItem","isResponseComplete","chipClick"],["contactSideBar",""],["id","blockUnblockContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick","open"],["blockUnblockContactDialog",""],["header",""],["footerTemplate",""],["content",""],[3,"hidden"],["data-ripple","true","autofocus","",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat","block-contact-button",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true","autofocus","",1,"e-control","e-btn","e-primary","e-flat","unblock-contact-button",3,"click"],["blockUnblockForm",""],[1,"mb-5"],[3,"label","checked"],["markAllTicketsSpam",""],[1,"pb-3"],[1,"spam-action-font-size"],[1,"contact-details"],["removeAllTicketsSpam",""],["id","deleteRestoreContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick"],["deleteRestoreContactDialog",""],["deleteRestoreForm",""],["markDeletedTicketTicketsSpam",""],["removeRestoredTicketsSpam",""],[2,"margin-bottom","5px"],["id","errorDialog","width","480px","isModal","true","height","Auto","closeOnEscape","true",3,"visible"],["errorDialog",""],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat",3,"click"],["errorForm",""],[1,"flex-horizontal","width-100"],["cssClass","title-text-view",1,"flex-horizontal","title-view-widths"],[1,"view-title-text","ellipsis"],[1,"title-view-buttons","ticket-view-refresh-button",2,"margin-left","8px"],["data-non-elliptical","true",1,"bd-icon","bd-icon-reset","e-btn","no-border","e-btn-icon",3,"click"]],template:function(t,e){1&t&&(x.Tb(0,"div",0),x.Tb(1,"div",1),x.Tb(2,"div",2,3),x.Tb(4,"div",4),x.Tb(5,"div",5),x.Tb(6,"div",6),x.Tb(7,"ejs-textbox",7,8),x.ec("change",(function(){return e.searchNodes()})),x.Sb(),x.Sb(),x.Jc(9,xt,4,3,"div",9),x.Sb(),x.Sb(),x.Tb(10,"div",10,11),x.Jc(12,kt,2,0,"div",12),x.Jc(13,Et,6,3,"div",13),x.Tb(14,"ejs-grid",14,15),x.ec("excelQueryCellInfo",(function(t){return e.contactListExcelQueryCellInfo(t)}))("beforeDataBound",(function(t){return e.gridBeforedataBound(t)}))("excelExportComplete",(function(){return e.excelExportComplete()}))("dataBound",(function(){return e.userListGridDataBound()}))("actionBegin",(function(t){return e.contactListGridActionBegin(t)})),x.Tb(16,"e-columns"),x.Tb(17,"e-column",16),x.hc(18,"translate"),x.Jc(19,At,6,6,"ng-template",null,17,x.Kc),x.Sb(),x.Ob(21,"e-column",18),x.hc(22,"translate"),x.Tb(23,"e-column",19),x.hc(24,"translate"),x.Jc(25,yt,2,1,"ng-template",null,17,x.Kc),x.Sb(),x.Tb(27,"e-column",20),x.hc(28,"translate"),x.Jc(29,Nt,4,2,"ng-template",null,17,x.Kc),x.Sb(),x.Tb(31,"e-column",21),x.Jc(32,jt,3,3,"ng-template",null,17,x.Kc),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(34,"ejs-contextmenu",22,23),x.ec("select",(function(t){return e.moreOptionsSelect(t)}))("beforeOpen",(function(t){return e.contextMenuBeforeOpen(t,e.contactData)})),x.Sb(),x.Jc(36,Ut,2,3,"ng-template",null,24,x.Kc),x.Tb(38,"div",25),x.Jc(39,qt,8,1,"ejs-dialog",26),x.Sb(),x.Tb(40,"div",27),x.Jc(41,Qt,8,1,"ejs-dialog",28),x.Sb(),x.Tb(42,"div",29),x.Jc(43,Wt,8,1,"ejs-dialog",30),x.Sb(),x.Jc(44,$t,11,12,"ng-template",null,31,x.Kc),x.Tb(46,"div",32),x.Ob(47,"convert-contact-agent",null,33),x.Sb()),2&t&&(x.xb(7),x.nc("placeholder",e.searchPlaceholder),x.xb(2),x.nc("ngIf",e.accessToCreateOrEdit),x.xb(3),x.nc("ngIf",e.stillFetching),x.xb(1),x.nc("ngIf",!e.stillFetching&&e.nodataFound),x.xb(1),x.nc("dataSource",e.customerData)("allowSorting",!0)("allowPaging",!0)("pageSettings",e.pageSettings)("allowExcelExport",!0)("hidden",e.stillFetching||e.nodataFound)("showColumnChooser",!0)("allowResizing",!0),x.xb(3),x.oc("headerText",x.ic(18,23,"NAME")),x.xb(4),x.oc("headerText",x.ic(22,25,"EMAIL")),x.nc("allowSorting",!0),x.xb(2),x.oc("headerText",x.ic(24,27,"CONTACTGROUP")),x.nc("allowSorting",!1),x.xb(4),x.oc("headerText",x.ic(28,29,"STATUS")),x.nc("allowSorting",!1),x.xb(7),x.nc("items",e.moreOptionsContacts),x.xb(5),x.nc("ngIf",e.accessToBlockOrUnBlockContact),x.xb(2),x.nc("ngIf",e.accessToDeleteOrRestoreContact),x.xb(2),x.nc("ngIf",e.accessToDeleteOrRestoreContact))},directives:[l.i,i.n,n.k,n.e,n.b,n.d,n.a,s.f,ot,a.c,at.a,i.o,i.l,st.a,r.b,a.e],pipes:[F.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.success[_ngcontent-%COMP%]{color:#0dbfb0}.failure[_ngcontent-%COMP%]{color:#777}.contact-grid[_ngcontent-%COMP%]   .e-btn[_ngcontent-%COMP%]{padding-bottom:0!important;padding-top:0!important}.contact-grid[_ngcontent-%COMP%]   .e-btn[_ngcontent-%COMP%]:active{box-shadow:none!important}.contact-grid[_ngcontent-%COMP%]   .e-icon-btn[_ngcontent-%COMP%]{padding-bottom:0!important;padding-top:0!important}.contact-grid[_ngcontent-%COMP%]   .hd-icon[_ngcontent-%COMP%]{padding:0!important}.contact-grid[_ngcontent-%COMP%]   .e-content[_ngcontent-%COMP%]{overflow-y:auto!important}.contact-grid[_ngcontent-%COMP%]   .cursor-auto[_ngcontent-%COMP%]{cursor:auto!important}.contact-details[_ngcontent-%COMP%]{line-height:25px;padding-left:20px;padding-right:10px}.block-contact-button[_ngcontent-%COMP%]{background-color:red!important;border-color:red!important;max-width:160px!important}.unblock-contact-button[_ngcontent-%COMP%]{max-width:195px!important}.mb-5[_ngcontent-%COMP%]{margin-bottom:5px!important}.spam-action-font-size[_ngcontent-%COMP%]{font-size:13px!important}.contact-container[_ngcontent-%COMP%], .height-100[_ngcontent-%COMP%]{height:100%}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]{overflow:hidden}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]{box-sizing:content-box;min-height:50px}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .e-chip[_ngcontent-%COMP%]{background:#fff!important}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .e-chip[_ngcontent-%COMP%]   .e-chip-text[_ngcontent-%COMP%]{font-size:14px}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%], .contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .e-chip[_ngcontent-%COMP%]:hover{background:#f5f9fd!important;border-color:#4a90e2!important}.context-view-more-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .e-menu-item[_ngcontent-%COMP%]   .e-menu-icon[_ngcontent-%COMP%]{padding:0}",".contact-container[_ngcontent-%COMP%]   .contact-list-contant[_ngcontent-%COMP%], .contact-group-container[_ngcontent-%COMP%]   .contact-list-contant[_ngcontent-%COMP%]{border-radius:0;height:32px;width:432px}.contact-container[_ngcontent-%COMP%]   .add-button-container[_ngcontent-%COMP%], .contact-group-container[_ngcontent-%COMP%]   .add-button-container[_ngcontent-%COMP%]{padding:12px!important}"]}),t})();var te=c("JxJv"),ee=c("HuM0"),ce=c("OPsy"),ie=c("64zv"),ne=c("hY80");const oe=["contactGroupDetailSideBar"],ae=["moreOptionsContextMenu"],se=["deleteRestoreContactDialog"],re=["blockUnblockContactDialog"],le=["errorDialog"],de=["markAllTicketsSpam"],he=["removeAllTicketsSpam"],be=["markDeletedTicketTicketsSpam"],ue=["removeRestoredTicketsSpam"],pe=["contactDetailEleRef"],me=["convertAgent"],ge=["agentSettingsTab"];function Ce(t,e){if(1&t){const t=x.Ub();x.Tb(0,"button",62),x.ec("click",(function(){return x.Bc(t),x.gc(2).editClick()})),x.Lc(1),x.hc(2,"translate"),x.Sb()}2&t&&(x.xb(1),x.Mc(x.ic(2,1,"EDIT")))}function fe(t,e){if(1&t){const t=x.Ub();x.Tb(0,"button",62),x.ec("click",(function(){return x.Bc(t),x.gc(2).deleteContactClick()})),x.Lc(1),x.hc(2,"translate"),x.Sb()}2&t&&(x.xb(1),x.Mc(x.ic(2,1,"DELETE")))}function Te(t,e){if(1&t){const t=x.Ub();x.Tb(0,"span",66),x.ec("click",(function(e){x.Bc(t);const c=x.gc(3);return c.moreOptionButtonClick(e,c.customerDetailList)})),x.Ob(1,"i",67),x.Sb()}}function Se(t,e){if(1&t){const t=x.Ub();x.Tb(0,"span",66),x.ec("click",(function(e){x.Bc(t);const c=x.gc(3);return c.moreOptionButtonClick(e,c.customerDetailList)})),x.Ob(1,"i",67),x.Sb()}}function ve(t,e){if(1&t){const t=x.Ub();x.Tb(0,"span",66),x.ec("click",(function(e){x.Bc(t);const c=x.gc(3);return c.moreOptionButtonClick(e,c.customerDetailList)})),x.Ob(1,"i",67),x.Sb()}}function Oe(t,e){if(1&t){const t=x.Ub();x.Tb(0,"span",66),x.ec("click",(function(e){x.Bc(t);const c=x.gc(4);return c.moreOptionButtonClick(e,c.customerDetailList)})),x.Ob(1,"i",67),x.Sb()}}function xe(t,e){if(1&t&&(x.Tb(0,"span"),x.Jc(1,Oe,2,0,"span",65),x.Sb()),2&t){const t=x.gc(3);x.xb(1),x.nc("ngIf",t.accessToCreateOrEdit&&!t.customerDetailList.isBlocked&&!t.customerDetailList.isDeleted||t.accessToImpersonate&&!t.customerDetailList.isBlocked&&!t.customerDetailList.isDeleted&&t.customerDetailList.isVerified||t.accessToBlockOrUnBlockContact||t.accessToDeleteOrRestoreContact)}}function ke(t,e){if(1&t&&(x.Tb(0,"span",63),x.Tb(1,"div",64),x.Jc(2,Te,2,0,"span",65),x.Jc(3,Se,2,0,"span",65),x.Jc(4,ve,2,0,"span",65),x.Jc(5,xe,2,1,"span",43),x.Sb(),x.Sb()),2&t){const t=x.gc(2);x.xb(2),x.nc("ngIf",t.permissionToOnlyImpersonate&&!t.customerDetailList.isBlocked&&!t.customerDetailList.isDeleted),x.xb(1),x.nc("ngIf",t.permissionToOnlyEdit&&!t.customerDetailList.isBlocked&&!t.customerDetailList.isDeleted),x.xb(1),x.nc("ngIf",t.permissionToOnlyDelete&&t.customerDetailList.isDeleted),x.xb(1),x.nc("ngIf",!t.permissionToOnlyImpersonate&&!t.permissionToOnlyEdit&&!t.permissionToOnlyDelete)}}function Ee(t,e){if(1&t){const t=x.Ub();x.Tb(0,"span",66),x.ec("click",(function(e){x.Bc(t);const c=x.gc(3);return c.moreOptionButtonClick(e,c.customerDetailList)})),x.Ob(1,"i",67),x.Sb()}}function De(t,e){if(1&t&&(x.Tb(0,"span",68),x.Jc(1,Ee,2,0,"span",65),x.Sb()),2&t){const t=x.gc(2);x.xb(1),x.nc("ngIf",!t.customerDetailList.isBlocked&&!t.customerDetailList.isDeleted)}}function Ae(t,e){1&t&&(x.Tb(0,"div"),x.Ob(1,"lib-shimmer",69),x.Sb())}function ye(t,e){1&t&&(x.Tb(0,"div",70),x.Tb(1,"div",71),x.Ob(2,"img",72),x.Sb(),x.Tb(3,"div",73),x.Lc(4),x.hc(5,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(4),x.Mc(x.ic(5,1,"NOTICKETSFOUND")))}function Ne(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",74),x.ec("click",(function(){x.Bc(t);const c=e.$implicit;return x.gc(2).ticketLinkClick(c.ticketId)})),x.Tb(1,"span",75),x.Lc(2),x.Sb(),x.Sb()}if(2&t){const t=e.$implicit;x.xb(2),x.Nc(" ",t.ticketId,"")}}function Me(t,e){if(1&t&&(x.Tb(0,"div",76),x.Lc(1),x.Sb()),2&t){const t=e.$implicit;x.xb(1),x.Nc(" ",t.title," ")}}function Ie(t,e){if(1&t&&(x.Tb(0,"span"),x.Ob(1,"app-date-time",60),x.Sb()),2&t){const t=e.$implicit,c=x.gc(2);x.xb(1),x.nc("date",t.createdOn)("format",c.format)("timezone",c.timeZone)}}function Be(t,e){if(1&t&&(x.Tb(0,"div",76),x.Lc(1),x.Sb()),2&t){const t=e.$implicit;x.xb(1),x.Nc(" ",t.brand?t.brand:"--"," ")}}function Le(t,e){if(1&t&&(x.Tb(0,"div",77),x.Tb(1,"div",78),x.hc(2,"ticketStatus"),x.Tb(3,"span",79),x.Lc(4),x.Sb(),x.Sb(),x.Sb()),2&t){const t=e.$implicit;x.xb(1),x.Hc("--status-detail-color: ",x.ic(2,5,t.status.backgroundColor),""),x.xb(2),x.yb("data-title",t.status.description),x.xb(1),x.Mc(t.status.description)}}function Pe(t,e){1&t&&(x.Tb(0,"span"),x.Lc(1),x.hc(2,"translate"),x.Sb()),2&t&&(x.xb(1),x.Nc(" ",x.ic(2,1,"VERIFIED"),""))}function Re(t,e){1&t&&(x.Tb(0,"span"),x.Lc(1),x.hc(2,"translate"),x.Sb()),2&t&&(x.xb(1),x.Nc(" ",x.ic(2,1,"UNVERIFIED"),""))}function we(t,e){1&t&&(x.Tb(0,"span"),x.Lc(1),x.hc(2,"translate"),x.Sb()),2&t&&(x.xb(1),x.Mc(x.ic(2,1,"BLOCKED")))}function Fe(t,e){1&t&&(x.Tb(0,"span"),x.Lc(1),x.hc(2,"translate"),x.Sb()),2&t&&(x.xb(1),x.Mc(x.ic(2,1,"DELETED")))}function je(t,e){if(1&t&&(x.Tb(0,"div"),x.Tb(1,"div",58),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Tb(4,"div",59),x.Tb(5,"span"),x.Lc(6),x.Sb(),x.Sb(),x.Sb()),2&t){const t=x.gc(2);x.xb(2),x.Nc(" ",x.ic(3,3,"CONTACTACCESSSCOPE")," "),x.xb(3),x.yb("data-title",t.customerDetailList.contactGroup?1===t.customerDetailList.contactGroup[0].accessScopeId?t.accessList[0].text:t.accessList[1].text:"--"),x.xb(1),x.Nc(" ",t.customerDetailList.contactGroup?1===t.customerDetailList.contactGroup[0].accessScopeId?t.accessList[0].text:t.accessList[1].text:"--"," ")}}function Ue(t,e){if(1&t&&(x.Tb(0,"div",83),x.Tb(1,"span"),x.Lc(2),x.Sb(),x.Sb()),2&t){const t=x.gc().$implicit;x.xb(1),x.yb("data-title",t.label),x.xb(1),x.Mc(t.label)}}function _e(t,e){if(1&t&&(x.Tb(0,"div",83),x.Tb(1,"span"),x.Lc(2),x.Sb(),x.Sb()),2&t){const t=x.gc().$implicit;x.xb(1),x.yb("data-title",t.checkBoxGroups[0].label),x.xb(1),x.Mc(t.checkBoxGroups[0].label)}}function Ge(t,e){if(1&t&&(x.Tb(0,"div"),x.Tb(1,"div",59),x.Tb(2,"span"),x.Lc(3),x.Sb(),x.Sb(),x.Sb()),2&t){const t=x.gc().$implicit;x.xb(2),x.yb("data-title",t.text),x.xb(1),x.Mc(t.text?t.text:"--")}}function Ve(t,e){if(1&t&&(x.Tb(0,"div",59),x.Tb(1,"span"),x.Lc(2),x.Sb(),x.Sb()),2&t){const t=x.gc().$implicit;x.xb(1),x.yb("data-title",t.value),x.xb(1),x.Mc(t.value?t.value:"--")}}function qe(t,e){if(1&t&&(x.Tb(0,"span"),x.Ob(1,"app-date-time",60),x.Sb()),2&t){const t=x.gc(2).$implicit,e=x.gc(2);x.xb(1),x.nc("date",t.value)("format",e.format)("timezone",e.timeZone)}}function Je(t,e){1&t&&(x.Tb(0,"span"),x.Lc(1,"--"),x.Sb())}function Ke(t,e){if(1&t&&(x.Tb(0,"div",84),x.Jc(1,qe,2,3,"span",43),x.Jc(2,Je,2,0,"span",43),x.Sb()),2&t){const t=x.gc().$implicit;x.xb(1),x.nc("ngIf",t.value),x.xb(1),x.nc("ngIf",!t.value)}}function Xe(t,e){if(1&t&&(x.Tb(0,"div",84),x.Lc(1),x.Sb()),2&t){const t=x.gc().$implicit;x.xb(1),x.Nc(" ",t.value?t.value:"--"," ")}}function Qe(t,e){if(1&t&&(x.Tb(0,"div",84),x.Lc(1),x.Sb()),2&t){const t=x.gc().$implicit;x.xb(1),x.Nc(" ",t.value," ")}}function He(t,e){if(1&t&&(x.Tb(0,"div",84),x.Lc(1),x.Sb()),2&t){const t=x.gc().$implicit;x.xb(1),x.Nc(" ",t.radioGroups[0].checked?t.radioGroups[0].label:t.radioGroups[1].label," ")}}function ze(t,e){if(1&t&&(x.Tb(0,"div"),x.Jc(1,Ue,3,2,"div",80),x.Jc(2,_e,3,2,"div",80),x.Jc(3,Ge,4,2,"div",43),x.Jc(4,Ve,3,2,"div",81),x.Jc(5,Ke,3,2,"div",82),x.Jc(6,Xe,2,1,"div",82),x.Jc(7,Qe,2,1,"div",82),x.Jc(8,He,2,1,"div",82),x.Sb()),2&t){const t=e.$implicit;x.xb(1),x.nc("ngIf","checkbox"!==t.type),x.xb(1),x.nc("ngIf","checkbox"===t.type),x.xb(1),x.nc("ngIf","multiSelect"===t.type||"dropdown"===t.type||"tag"===t.type),x.xb(1),x.nc("ngIf","multiSelect"!==t.type&&"dropdown"!==t.type&&"tag"!==t.type&&"date"!==t.type&&"datetime"!==t.type&&"checkbox"!==t.type&&"radio"!==t.type),x.xb(1),x.nc("ngIf","datetime"===t.type),x.xb(1),x.nc("ngIf","date"===t.type),x.xb(1),x.nc("ngIf","checkbox"===t.type),x.xb(1),x.nc("ngIf","radio"===t.type)}}const Ze=function(t){return{background:t}};function We(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",13),x.Tb(1,"div",14),x.Tb(2,"div",15),x.Tb(3,"div",16),x.Lc(4),x.Sb(),x.Tb(5,"div",17),x.Tb(6,"div",18),x.Tb(7,"span"),x.Lc(8),x.Sb(),x.Sb(),x.Tb(9,"div",19),x.Tb(10,"span"),x.Lc(11),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(12,"div",20),x.Jc(13,Ce,3,3,"button",21),x.Tb(14,"span",22),x.Jc(15,fe,3,3,"button",21),x.Sb(),x.Jc(16,ke,6,4,"span",23),x.Jc(17,De,2,1,"span",24),x.Sb(),x.Sb(),x.Tb(18,"div",25),x.Tb(19,"div",26),x.Tb(20,"div",27),x.Tb(21,"div",28),x.Tb(22,"div",29),x.Tb(23,"div",30),x.Lc(24),x.Sb(),x.Tb(25,"div",31),x.Lc(26),x.hc(27,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Tb(28,"div",32),x.Tb(29,"div",29),x.Tb(30,"div",33),x.Lc(31),x.Sb(),x.Tb(32,"div",31),x.Lc(33),x.hc(34,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Tb(35,"div",32),x.Tb(36,"div",29),x.Tb(37,"div",34),x.Lc(38),x.Sb(),x.Tb(39,"div",31),x.Lc(40),x.hc(41,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Tb(42,"div",32),x.Tb(43,"div",29),x.Tb(44,"div",34),x.Lc(45),x.Sb(),x.Tb(46,"div",31),x.Lc(47),x.hc(48,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(49,"div",35),x.Tb(50,"ejs-tab",36,37),x.Tb(52,"div",38),x.Tb(53,"div"),x.Tb(54,"span",39),x.Lc(55),x.hc(56,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Tb(57,"div",40,41),x.Tb(59,"div",42),x.Jc(60,Ae,2,0,"div",43),x.Jc(61,ye,6,3,"div",44),x.Tb(62,"ejs-grid",45,46),x.ec("beforeDataBound",(function(e){return x.Bc(t),x.gc().gridBeforedataBound(e)}))("dataBound",(function(){return x.Bc(t),x.gc().ticketListDataBound()})),x.Tb(64,"e-columns"),x.Tb(65,"e-column",47),x.hc(66,"translate"),x.Jc(67,Ne,3,1,"ng-template",null,48,x.Kc),x.Sb(),x.Tb(69,"e-column",49),x.hc(70,"translate"),x.Jc(71,Me,2,1,"ng-template",null,48,x.Kc),x.Sb(),x.Tb(73,"e-column",50),x.hc(74,"translate"),x.Jc(75,Ie,2,3,"ng-template",null,48,x.Kc),x.Sb(),x.Tb(77,"e-column",51),x.hc(78,"translate"),x.Jc(79,Be,2,1,"ng-template",null,48,x.Kc),x.Sb(),x.Tb(81,"e-column",52),x.hc(82,"translate"),x.Jc(83,Le,5,7,"ng-template",null,48,x.Kc),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(85,"div",53),x.Tb(86,"div",54),x.Ob(87,"div",55),x.Tb(88,"div",56),x.Lc(89),x.hc(90,"translate"),x.Sb(),x.Sb(),x.Tb(91,"div",57),x.Tb(92,"div"),x.Tb(93,"div",58),x.Lc(94),x.hc(95,"translate"),x.Sb(),x.Tb(96,"div",59),x.Ob(97,"app-date-time",60),x.Sb(),x.Sb(),x.Tb(98,"div"),x.Tb(99,"div",58),x.Lc(100),x.hc(101,"translate"),x.Sb(),x.Tb(102,"div",59),x.Jc(103,Pe,3,3,"span",43),x.Jc(104,Re,3,3,"span",43),x.Jc(105,we,3,3,"span",43),x.Jc(106,Fe,3,3,"span",43),x.Sb(),x.Sb(),x.Tb(107,"div"),x.Tb(108,"div",58),x.Lc(109),x.hc(110,"translate"),x.Sb(),x.Tb(111,"div",59),x.Tb(112,"span"),x.Lc(113),x.Sb(),x.Sb(),x.Sb(),x.Tb(114,"div"),x.Tb(115,"div",58),x.Lc(116),x.hc(117,"translate"),x.Sb(),x.Tb(118,"div",59),x.Tb(119,"span"),x.Lc(120),x.Sb(),x.Sb(),x.Sb(),x.Tb(121,"div"),x.Tb(122,"div",58),x.Lc(123),x.hc(124,"translate"),x.Sb(),x.Tb(125,"div",59),x.Tb(126,"span"),x.Lc(127),x.Sb(),x.Sb(),x.Sb(),x.Jc(128,je,7,5,"div",43),x.Tb(129,"div"),x.Jc(130,ze,9,8,"div",61),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb()}if(2&t){const t=x.gc();x.xb(3),x.nc("ngStyle",x.tc(87,Ze,t.customerDetailList.colorCode)),x.xb(1),x.Nc(" ",t.customerDetailList.shortCode," "),x.xb(3),x.yb("data-title",t.customerDetailList.contactName),x.xb(1),x.Nc(" ",t.customerDetailList.contactDisplayName," "),x.xb(2),x.yb("data-title",t.customerDetailList.emailId),x.xb(1),x.Nc(" ",t.customerDetailList.emailId," "),x.xb(2),x.nc("ngIf",t.accessToCreateOrEdit&&!t.customerDetailList.isDeleted&&!t.customerDetailList.isBlocked),x.xb(2),x.nc("ngIf",t.accessToDeleteOrRestoreContact&&!t.customerDetailList.isDeleted),x.xb(1),x.nc("ngIf",t.showActionButton),x.xb(1),x.nc("ngIf",!t.showActionButton),x.xb(4),x.yb("data-href","tickets/"),x.xb(3),x.Nc("",t.statusCollection?t.statusCollection.allTicketsCount:"--"," "),x.xb(2),x.Nc(" ",x.ic(27,55,"ALLTICKETS"),""),x.xb(5),x.Nc(" ",t.statusCollection?t.statusCollection.pendingTicketsCount?t.statusCollection.pendingTicketsCount:0:"--"," "),x.xb(2),x.Mc(x.ic(34,57,"PENDINGTICKETS")),x.xb(5),x.Nc(" ",t.statusCollection?t.statusCollection.holdTicketsCount?t.statusCollection.holdTicketsCount:0:"--"," "),x.xb(2),x.Mc(x.ic(41,59,"HOLDTICKETS")),x.xb(5),x.Nc(" ",t.statusCollection?t.statusCollection.closedTicketsCount:"--",""),x.xb(2),x.Mc(x.ic(48,61,"CLOSEDTICKETS")),x.xb(3),x.nc("animation",t.tabAnimationSettings),x.xb(5),x.Nc(" ",x.ic(56,63,"TICKET")," "),x.xb(2),x.nc("ngClass",t.stillFetching?"overflow-hidden":"overflow-auto"),x.xb(3),x.nc("ngIf",t.stillFetching),x.xb(1),x.nc("ngIf",!t.stillFetching&&t.nodataFound),x.xb(1),x.nc("dataSource",t.ticketDataSource)("hidden",t.stillFetching||t.nodataFound)("pageSettings",t.pageSettings)("allowSorting",!0),x.xb(3),x.oc("headerText",x.ic(66,65,"ID")),x.xb(4),x.oc("headerText",x.ic(70,67,"SUBJECT")),x.xb(4),x.oc("headerText",x.ic(74,69,"CREATEDDATE")),x.xb(4),x.oc("headerText",x.ic(78,71,"BRAND")),x.xb(4),x.oc("headerText",x.ic(82,73,"STATUS")),x.nc("allowSorting",!1),x.xb(8),x.Mc(x.ic(90,75,"DETAILS")),x.xb(5),x.Nc(" ",x.ic(95,77,"CREATEDDATE")," "),x.xb(3),x.nc("date",t.customerDetailList.createdOn)("format",t.format)("timezone",t.timeZone),x.xb(3),x.Nc(" ",x.ic(101,79,"STATUS")," "),x.xb(3),x.nc("ngIf",t.customerDetailList.isVerified&&!t.customerDetailList.isDeleted&&!t.customerDetailList.isBlocked),x.xb(1),x.nc("ngIf",!t.customerDetailList.isVerified&&!t.customerDetailList.isDeleted&&!t.customerDetailList.isBlocked),x.xb(1),x.nc("ngIf",t.customerDetailList.isBlocked),x.xb(1),x.nc("ngIf",t.customerDetailList.isDeleted),x.xb(3),x.Nc(" ",x.ic(110,81,"EMAIL")," "),x.xb(3),x.yb("data-title",t.customerDetailList.emailId),x.xb(1),x.Mc(t.customerDetailList.emailId),x.xb(3),x.Nc(" ",x.ic(117,83,"DISPLAYNAME")," "),x.xb(3),x.yb("data-title",t.customerDetailList.contactDisplayName),x.xb(1),x.Mc(t.customerDetailList.contactDisplayName),x.xb(3),x.Nc(" ",x.ic(124,85,"CONTACTGROUP")," "),x.xb(3),x.zb("data-title"," ",t.customerDetailList.contactGroup?t.customerDetailList.contactGroup[0].name:"--",""),x.xb(1),x.Nc(" ",t.customerDetailList.contactGroup?t.customerDetailList.contactGroup[0].name:"--"," "),x.xb(1),x.nc("ngIf",t.customerDetailList.contactGroup),x.xb(2),x.nc("ngForOf",t.detailsList)}}function $e(t,e){if(1&t&&(x.Tb(0,"div",90),x.Lc(1),x.hc(2,"translate"),x.Sb(),x.Tb(3,"div",90),x.Lc(4),x.hc(5,"translate"),x.Sb()),2&t){const t=x.gc(2);x.nc("hidden",!t.blockContact),x.xb(1),x.Mc(x.ic(2,4,"BLOCKCONTACT")),x.xb(2),x.nc("hidden",!t.UnblockContact),x.xb(1),x.Mc(x.ic(5,6,"UNBLOCKCONTACT"))}}function Ye(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",90),x.Tb(1,"button",91),x.ec("click",(function(){x.Bc(t),x.gc();const e=x.yc(1);return x.gc().cancelDialog(e)})),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Tb(4,"button",92),x.ec("click",(function(){return x.Bc(t),x.gc(2).updateBlockContact()})),x.Lc(5),x.hc(6,"translate"),x.Sb(),x.Sb(),x.Tb(7,"div",90),x.Tb(8,"button",93),x.ec("click",(function(){x.Bc(t),x.gc();const e=x.yc(1);return x.gc().cancelDialog(e)})),x.Lc(9),x.hc(10,"translate"),x.Sb(),x.Tb(11,"button",94),x.ec("click",(function(){return x.Bc(t),x.gc(2).updateUnblockContact()})),x.Lc(12),x.hc(13,"translate"),x.Sb(),x.Sb()}if(2&t){const t=x.gc(2);x.nc("hidden",!t.blockContact),x.xb(2),x.Mc(x.ic(3,6,"CANCEL")),x.xb(3),x.Mc(x.ic(6,8,"BLOCKCONTACT")),x.xb(2),x.nc("hidden",!t.UnblockContact),x.xb(2),x.Mc(x.ic(10,10,"CANCEL")),x.xb(3),x.Mc(x.ic(13,12,"UNBLOCKCONTACT"))}}function tc(t,e){if(1&t&&(x.Tb(0,"div",null,95),x.Tb(2,"div",90),x.Tb(3,"div",96),x.Ob(4,"ejs-checkbox",97,98),x.hc(6,"translate"),x.Sb(),x.Ob(7,"div",99),x.Tb(8,"div",100),x.Tb(9,"div",96),x.Lc(10),x.hc(11,"translate"),x.Sb(),x.Tb(12,"ul",101),x.Tb(13,"li"),x.Lc(14),x.hc(15,"translate"),x.Sb(),x.Tb(16,"li"),x.Lc(17),x.hc(18,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(19,"div",90),x.Tb(20,"div",96),x.Ob(21,"ejs-checkbox",97,102),x.hc(23,"translate"),x.Sb(),x.Ob(24,"div",99),x.Tb(25,"div",100),x.Tb(26,"div",96),x.Lc(27),x.hc(28,"translate"),x.Sb(),x.Tb(29,"ul",101),x.Tb(30,"li"),x.Lc(31),x.hc(32,"translate"),x.Sb(),x.Tb(33,"li"),x.Lc(34),x.hc(35,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb()),2&t){const t=x.gc(2);x.xb(2),x.nc("hidden",!t.blockContact),x.xb(2),x.oc("label",x.ic(6,12,"BLOCKCHECKBOX")),x.nc("checked",!0),x.xb(6),x.Nc("",x.ic(11,14,"BLOCKCONTACTACTIONS"),":"),x.xb(4),x.Mc(x.ic(15,16,"BLOCKCONTACTACTIONONE")),x.xb(3),x.Mc(x.ic(18,18,"BLOCKCONTACTACTIONTWO")),x.xb(2),x.nc("hidden",!t.UnblockContact),x.xb(2),x.oc("label",x.ic(23,20,"UNBLOCKCHECKBOX")),x.nc("checked",!1),x.xb(6),x.Nc("",x.ic(28,22,"UNBLOCKCONTACTACTIONS"),":"),x.xb(4),x.Mc(x.ic(32,24,"UNBLOCKCONTACTSPAMACTIONTWO")),x.xb(3),x.Mc(x.ic(35,26,"UNBLOCKCONTACTACTIONONE"))}}function ec(t,e){if(1&t){const t=x.Ub();x.Tb(0,"ejs-dialog",85,86),x.ec("overlayClick",(function(){x.Bc(t);const e=x.yc(1);return x.gc().overlayClick(e)}))("open",(function(){return x.Bc(t),x.gc().blockUnblockDialogOpen()})),x.Jc(2,$e,6,8,"ng-template",null,87,x.Kc),x.Jc(4,Ye,14,14,"ng-template",null,88,x.Kc),x.Jc(6,tc,36,28,"ng-template",null,89,x.Kc),x.Sb()}2&t&&x.nc("visible",!1)}function cc(t,e){if(1&t&&(x.Tb(0,"div",90),x.Lc(1),x.hc(2,"translate"),x.Sb(),x.Tb(3,"div",90),x.Lc(4),x.hc(5,"translate"),x.Sb()),2&t){const t=x.gc(2);x.nc("hidden",!t.deleteContact),x.xb(1),x.Mc(x.ic(2,4,"DELETECONTACT")),x.xb(2),x.nc("hidden",!t.restoreContact),x.xb(1),x.Mc(x.ic(5,6,"RESTORECONTACT"))}}function ic(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",90),x.Tb(1,"button",91),x.ec("click",(function(){x.Bc(t),x.gc();const e=x.yc(1);return x.gc().cancelDialog(e)})),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Tb(4,"button",92),x.ec("click",(function(){return x.Bc(t),x.gc(2).updateDeleteContact()})),x.Lc(5),x.hc(6,"translate"),x.Sb(),x.Sb(),x.Tb(7,"div",90),x.Tb(8,"button",93),x.ec("click",(function(){x.Bc(t),x.gc();const e=x.yc(1);return x.gc().cancelDialog(e)})),x.Lc(9),x.hc(10,"translate"),x.Sb(),x.Tb(11,"button",94),x.ec("click",(function(){return x.Bc(t),x.gc(2).updateRestoreContact()})),x.Lc(12),x.hc(13,"translate"),x.Sb(),x.Sb()}if(2&t){const t=x.gc(2);x.nc("hidden",!t.deleteContact),x.xb(2),x.Mc(x.ic(3,6,"CANCEL")),x.xb(3),x.Mc(x.ic(6,8,"DELETECONTACT")),x.xb(2),x.nc("hidden",!t.restoreContact),x.xb(2),x.Mc(x.ic(10,10,"CANCEL")),x.xb(3),x.Mc(x.ic(13,12,"RESTORECONTACT"))}}function nc(t,e){if(1&t&&(x.Tb(0,"div",null,105),x.Tb(2,"div",90),x.Tb(3,"div",96),x.Ob(4,"ejs-checkbox",97,106),x.hc(6,"translate"),x.Sb(),x.Ob(7,"div",99),x.Tb(8,"div",100),x.Tb(9,"div",96),x.Lc(10),x.hc(11,"translate"),x.Sb(),x.Tb(12,"ul",101),x.Tb(13,"li"),x.Lc(14),x.hc(15,"translate"),x.Sb(),x.Tb(16,"li"),x.Lc(17),x.hc(18,"translate"),x.Sb(),x.Tb(19,"li"),x.Lc(20),x.hc(21,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(22,"div",90),x.Tb(23,"div",96),x.Ob(24,"ejs-checkbox",97,107),x.hc(26,"translate"),x.Sb(),x.Ob(27,"div",99),x.Tb(28,"div",100),x.Tb(29,"div",108),x.Lc(30),x.hc(31,"translate"),x.Sb(),x.Tb(32,"ul",101),x.Tb(33,"li"),x.Lc(34),x.hc(35,"translate"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb()),2&t){const t=x.gc(2);x.xb(2),x.nc("hidden",!t.deleteContact),x.xb(2),x.oc("label",x.ic(6,12,"BLOCKCHECKBOX")),x.nc("checked",!0),x.xb(6),x.Nc("",x.ic(11,14,"DELETECONTACTACTIONS"),":"),x.xb(4),x.Mc(x.ic(15,16,"DELETECONTACTACTIONONE")),x.xb(3),x.Mc(x.ic(18,18,"DELETECONTACTACTIONTWO")),x.xb(3),x.Mc(x.ic(21,20,"DELETECONTACTACTIONTHREE")),x.xb(2),x.nc("hidden",!t.restoreContact),x.xb(2),x.oc("label",x.ic(26,22,"UNBLOCKCHECKBOX")),x.nc("checked",!1),x.xb(6),x.Nc("",x.ic(31,24,"RESTORECONTACTACTIONS"),":"),x.xb(4),x.Mc(x.ic(35,26,"RESTORECONTACTACTIONONE"))}}function oc(t,e){if(1&t){const t=x.Ub();x.Tb(0,"ejs-dialog",103,104),x.ec("overlayClick",(function(){x.Bc(t);const e=x.yc(1);return x.gc().overlayClick(e)})),x.Jc(2,cc,6,8,"ng-template",null,87,x.Kc),x.Jc(4,ic,14,14,"ng-template",null,88,x.Kc),x.Jc(6,nc,36,28,"ng-template",null,89,x.Kc),x.Sb()}2&t&&x.nc("visible",!1)}function ac(t,e){1&t&&(x.Tb(0,"div"),x.Lc(1),x.hc(2,"translate"),x.Sb()),2&t&&(x.xb(1),x.Mc(x.ic(2,1,"DELETECONTACT")))}function sc(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div"),x.Tb(1,"button",111),x.ec("click",(function(){return x.Bc(t),x.gc(2).errorDialogOkay()})),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()}2&t&&(x.xb(2),x.Mc(x.ic(3,1,"OKAY")))}function rc(t,e){if(1&t&&(x.Tb(0,"div",null,112),x.Tb(2,"div",90),x.Tb(3,"div"),x.Lc(4),x.Sb(),x.Sb(),x.Sb()),2&t){const t=x.gc(2);x.xb(2),x.nc("hidden",!t.deleteContact),x.xb(2),x.Mc(t.deleteFailErrorMessage)}}function lc(t,e){1&t&&(x.Tb(0,"ejs-dialog",109,110),x.Jc(2,ac,3,3,"ng-template",null,87,x.Kc),x.Jc(4,sc,4,3,"ng-template",null,88,x.Kc),x.Jc(6,rc,5,2,"ng-template",null,89,x.Kc),x.Sb()),2&t&&x.nc("visible",!1)}let dc=(()=>{class t{constructor(t,e,c,i,n,o,a,s,r,l){this.appRootService=t,this.spinService=e,this.route=c,this.seoService=i,this.appPermissionService=n,this.jwtService=o,this.contactAPIService=a,this.contactRootService=s,this.router=r,this.toastService=l,this.block=Object(v.a)("BLOCKCONTACT"),this.unBlockContact=Object(v.a)("UNBLOCKCONTACT"),this.restore=Object(v.a)("RESTORECONTACT"),this.sendVerifyEmail=Object(v.a)("SENDVERIFICATIONEMAIL"),this.sendResetPass=Object(v.a)("SENDRESETPASSWORD"),this.verifyManually=Object(v.a)("VERIFYMANUALLY"),this.impersonateContact=Object(v.a)("IMPERSONATE"),this.convert=Object(v.a)("CONVERTTOAGENT"),this.moreOptionsContacts=[{text:this.convert,id:"9",iconCss:"bd-icon bd-icon-groups"},{text:this.impersonateContact,id:"8",iconCss:"bd-icon bd-icon-groups"},{text:this.sendVerifyEmail,id:"5",iconCss:"bd-icon bd-icon-mail"},{text:this.sendResetPass,id:"6",iconCss:"bd-icon bd-icon-mail"},{text:this.verifyManually,id:"7",iconCss:"bd-icon bd-icon-tick24"},{text:this.unBlockContact,id:"2",iconCss:"hd-icon hd-forward"},{text:this.restore,id:"4",iconCss:"hd-icon hd-forward"},{text:this.block,id:"1",iconCss:"bd-icon bd-icon-error"}],this.tabAnimationSettings={next:{effect:"None"},previous:{effect:"None"}},this.showActionButton=!0,this.accessList=[{value:1,text:Object(v.a)("CONTACTACCESSSCOPE1")},{value:2,text:Object(v.a)("CONTACTACCESSSCOPE2")}],this.stillFetching=!0,this.customerId=this.route.snapshot.paramMap.get("customerId"),this.route.data.subscribe(t=>{this.customerDetailList=t.data,this.spinService.hideSpinner()}),this.appRootService.isSideBarNeeded(!1),this.appRootService.setAppTitleText(Object(v.a)("CONTACT")+" / "+this.customerDetailList.contactName),this.seoService.setHeaderElements({title:Object(v.a)("PROFILE")+" | "+Object(v.a)("CONTACT")}),this.accessToCreateOrEdit=this.appPermissionService.hasPermission([S.a.CreateOrEditContact,S.a.ViewContact]),this.accessToBlockOrUnBlockContact=this.appPermissionService.hasPermission([S.a.BlockOrUnblockContactAndDeleteOrSpamAssociatedTickets,S.a.ViewContact])&&T.P.ticketAccessScopeId===g.b.Global&&T.P.hasAllBrandAccess,this.accessToDeleteOrRestoreContact=this.appPermissionService.hasPermission([S.a.DeleteOrRestoreContactAndDeleteOrSpamAssociatedTickets,S.a.ViewContact])&&T.P.ticketAccessScopeId===g.b.Global&&T.P.hasAllBrandAccess,this.accessToImpersonate=this.appPermissionService.hasPermission([S.a.ImpersonateContact])&&!this.jwtService.isImpersonated(),this.permissionToOnlyImpersonate=!(this.accessToBlockOrUnBlockContact||this.accessToCreateOrEdit||this.accessToDeleteOrRestoreContact)&&this.accessToImpersonate,this.permissionToOnlyEdit=!(this.accessToBlockOrUnBlockContact||this.accessToImpersonate||this.accessToDeleteOrRestoreContact)&&this.accessToCreateOrEdit,this.contactAPIService.contactstatus(+this.customerId).then(t=>{t&&(this.statusCollection=t)}).catch(t=>{const e=Object(m.q)(t.error);400===t.status&&this.toastService.failureToast(e)}),this.format=T.e.dateFormat+" "+T.e.timeFormat,this.timeZone=T.P.timeZoneOffset,this.permissionToOnlyDelete=!(this.accessToBlockOrUnBlockContact||this.accessToImpersonate||this.accessToCreateOrEdit)&&this.accessToDeleteOrRestoreContact,this.canConvertContact=this.appPermissionService.hasPermission([S.a.ManageAgents])}ngOnInit(){let t=D.a.requestToContactTickets+this.customerId;t=Object(m.i)(t,"Page","1"),t=Object(m.i)(t,"PerPage","99"),this.ticketDataSource=new b.a({url:t,adaptor:new p.a}),this.pageSettings={pageSize:f.g},this.accessToBlockOrUnBlockContact||this.accessToImpersonate||this.accessToDeleteOrRestoreContact||this.accessToCreateOrEdit||(this.showActionButton=!1)}ngAfterViewInit(){const t=this.contactDetailEleRef.nativeElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;t.querySelectorAll(".sidebar-expand-button")[0]&&(t.querySelectorAll(".sidebar-expand-button")[0].style.display="none"),this.contactAPIService.getContactForm().then(t=>{this.contactCollection=Object(te.b)(t.result,this.customerDetailList,"contact"),this.detailsList=this.contactCollection.formComponents}).catch(t=>{const e=Object(m.q)(t.error);400===t.status&&this.toastService.failureToast(e)})}editClick(){Object(C.X)(this.customerId)||(this.spinService.showSpinner(),this.contactAPIService.getContactByUserId(+this.customerId).then(t=>{Object(C.X)(t)||this.contactRootService.setContactObjectOnEditDialog(t)}).catch(t=>{const e=Object(m.q)(t.error);400===t.status&&this.toastService.failureToast(e)}),this.contactRootService.setContactDialogTitle("EDITCONTACT"),this.contactRootService.setContactDialogSubmitText("UPDATE"),this.contactRootService.showAddEditContactForm("Edit"),this.contactRootService.setProfileOrAddEdit(!0))}deleteContactClick(){this.deleteRestoreContactDialog.show(),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!0,this.restoreContact=!1,this.markDeletedTicketTicketsSpam.checked=!0}moreOptionButtonClick(t,e){const c=t.target,i=Object(r.f)(c);this.contactData=e,this.moreOptionsMenu.open(i.top+25,i.left,c)}contextMenuBeforeOpen(t){if(t.isBlocked||t.isDeleted||!t.isVerified)if(t.isBlocked||t.isDeleted||t.isVerified)if(!t.isBlocked&&t.isDeleted){const t=[],e=[this.unBlockContact,this.sendResetPass,this.verifyManually,this.sendVerifyEmail,this.convert];this.accessToDeleteOrRestoreContact?t.push(this.restore):e.push(this.restore),this.accessToBlockOrUnBlockContact?t.push(this.block):e.push(this.block),e.push(this.impersonateContact),this.moreOptionsMenu.hideItems(e),this.moreOptionsMenu.showItems(t)}else if(t.isBlocked&&!t.isDeleted){const t=[],e=[this.restore,this.sendResetPass,this.verifyManually,this.sendVerifyEmail,this.block,this.convert];this.accessToBlockOrUnBlockContact?t.push(this.unBlockContact):e.push(this.unBlockContact),e.push(this.impersonateContact),this.moreOptionsMenu.hideItems(e),this.moreOptionsMenu.showItems(t)}else{const t=[],e=[this.sendResetPass,this.verifyManually,this.sendVerifyEmail,this.block,this.convert];this.accessToDeleteOrRestoreContact?t.push(this.restore):e.push(this.restore),this.accessToBlockOrUnBlockContact?t.push(this.unBlockContact):e.push(this.unBlockContact),e.push(this.impersonateContact),this.moreOptionsMenu.hideItems(e),this.moreOptionsMenu.showItems(t)}else{const t=[],e=[this.unBlockContact,this.sendResetPass,this.restore];this.accessToCreateOrEdit?(t.push(this.sendVerifyEmail),t.push(this.verifyManually)):(e.push(this.sendVerifyEmail),e.push(this.verifyManually)),this.accessToBlockOrUnBlockContact?t.push(this.block):e.push(this.block),t.push(this.convert),e.push(this.impersonateContact),this.moreOptionsMenu.hideItems(e),this.moreOptionsMenu.showItems(t)}else{const t=[],e=[this.unBlockContact,this.sendVerifyEmail,this.verifyManually,this.restore];this.accessToCreateOrEdit?t.push(this.sendResetPass):e.push(this.sendResetPass),this.accessToBlockOrUnBlockContact?t.push(this.block):e.push(this.block),this.accessToImpersonate?t.push(this.impersonateContact):e.push(this.impersonateContact),t.push(this.convert),this.moreOptionsMenu.hideItems(e),this.moreOptionsMenu.showItems(t)}}addTicketClick(){this.router.navigateByUrl("tickets/create",{state:{data:{customerId:this.customerId}}})}ticketLinkClick(t){this.router.navigateByUrl("tickets/"+t)}cancelDialog(t){t.closeIcon.click()}moreOptionsSelect(t){t.item.id===g.a.Block?(this.blockUnblockContactDialog.show(),this.UnblockContact=!1,this.blockContact=!0,this.deleteContact=!1,this.restoreContact=!1,this.markAllTicketsSpam.checked=!0):t.item.id===g.a.Unblock?(this.blockUnblockContactDialog.show(),this.UnblockContact=!0,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.removeAllTicketsSpam.checked=!0):t.item.id===g.a.Restore?(this.deleteRestoreContactDialog.show(),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!0,this.removeRestoredTicketsSpam.checked=!0):t.item.id===g.a.SendVerificationEmail?(this.sendEmailAction(g.a.SendVerificationEmail),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.sendInvitation=!0):t.item.id===g.a.SendResetPasswordEmail?(this.sendEmailAction(g.a.SendResetPasswordEmail),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.sendResetPasswordMail=!0):t.item.id===g.a.VerifyNow?(this.sendEmailAction(g.a.VerifyNow),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.verifyNow=!0):t.item.id===g.a.ImpersonateContact?(this.spinService.showSpinner(),this.contactAPIService.requestToImpersonateGuidId(this.contactData.userId).then(t=>{Object(m.j)(),window.location.href=O.b+t.guidId}).catch(t=>{const e=Object(m.q)(t.error);400===t.status&&this.toastService.failureToast(e),this.spinService.hideSpinner()}).finally(()=>{})):t.item.id===g.a.ConvertToAgent&&(this.canConvertContact?(this.convertAgent.convertContactClick(this.contactData.userId),this.contactRootService.setProfileOrAddEdit(!0)):this.toastService.failureToast(Object(v.a)("NOPERMISSIONTOCONVERT")))}sendEmailAction(t){this.spinService.showSpinner(),this.contactAPIService.sendEmailAction(t,+this.customerId).then(e=>{e&&this.toastService.successToast(e.message),t===g.a.VerifyNow&&this.router.navigateByUrl("contacts")}).catch(t=>{const e=Object(m.q)(t.error);400===t.status&&this.toastService.failureToast(e)}).finally(()=>{this.spinService.hideSpinner()})}updateDeleteContact(){this.spinService.showSpinner();const t=+this.customerId;this.markConatctTicketAsSpam=!!this.markDeletedTicketTicketsSpam.checked,this.contactAPIService.deleteContact(t,this.markConatctTicketAsSpam).then(t=>{t&&(this.deleteRestoreContactDialog.hide(),this.toastService.successToast(t.message),this.router.navigateByUrl("contacts"))}).catch(t=>{this.deleteFailErrorMessage=t.error.errors[0].errorMessage,this.errorDialog.show()}).finally(()=>{this.deleteRestoreContactDialog.hide(),this.spinService.hideSpinner()})}updateBlockContact(){this.spinService.showSpinner();const t=+this.customerId;this.markTicketAsSpam=!!this.markAllTicketsSpam.checked,this.contactAPIService.blockContact(t,this.markTicketAsSpam).then(t=>{t&&(this.blockUnblockContactDialog.hide(),this.toastService.successToast(t.message),this.router.navigateByUrl("contacts"))}).catch(t=>{const e=Object(m.q)(t.error);400===t.status&&this.toastService.failureToast(e)}).finally(()=>{this.blockUnblockContactDialog.hide(),this.spinService.hideSpinner()})}updateUnblockContact(){this.spinService.showSpinner();const t=+this.customerId;this.removeTicketFromSpam=!!this.removeAllTicketsSpam.checked,this.contactAPIService.unblockContact(t,this.removeTicketFromSpam).then(t=>{t&&(this.blockUnblockContactDialog.hide(),this.toastService.successToast(t.message),this.router.navigateByUrl("contacts"))}).finally(()=>{this.blockUnblockContactDialog.hide(),this.spinService.hideSpinner()})}errorDialogOkay(){this.errorDialog.hide()}blockUnblockDialogOpen(){this.blockUnblockContactDialog.showCloseIcon=!0}overlayClick(t){t.closeIcon.click()}updateRestoreContact(){this.spinService.showSpinner();const t=+this.customerId;this.removeContactTicketFromSpam=!!this.removeRestoredTicketsSpam.checked,this.contactAPIService.restoreContact(t,this.removeContactTicketFromSpam).then(t=>{t&&(this.deleteRestoreContactDialog.hide(),this.toastService.successToast(t.message),this.router.navigateByUrl("contacts"))}).finally(()=>{this.deleteRestoreContactDialog.hide(),this.spinService.hideSpinner()})}gridBeforedataBound(t){0===t.count?(this.stillFetching=!1,this.nodataFound=!0):(this.stillFetching=!0,this.nodataFound=!1)}ticketListDataBound(){this.stillFetching=!1,this.agentSettingsTab.element.querySelector(".e-content").scrollTop=0}}return t.\u0275fac=function(e){return new(e||t)(x.Nb(k.a),x.Nb(N.a),x.Nb(h.a),x.Nb(B.a),x.Nb(ee.b),x.Nb(ce.c),x.Nb(I),x.Nb(y.a),x.Nb(h.g),x.Nb(w.b))},t.\u0275cmp=x.Hb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var c;1&t&&(x.Gc(oe,!0),x.Qc(ae,!0),x.Qc(se,!0),x.Qc(re,!0),x.Qc(le,!0),x.Qc(de,!0),x.Qc(he,!0),x.Qc(be,!0),x.Qc(ue,!0),x.Qc(pe,!0),x.Qc(me,!0),x.Qc(ge,!0)),2&t&&(x.xc(c=x.fc())&&(e.contactGroupDetailSideBar=c.first),x.xc(c=x.fc())&&(e.moreOptionsMenu=c.first),x.xc(c=x.fc())&&(e.deleteRestoreContactDialog=c.first),x.xc(c=x.fc())&&(e.blockUnblockContactDialog=c.first),x.xc(c=x.fc())&&(e.errorDialog=c.first),x.xc(c=x.fc())&&(e.markAllTicketsSpam=c.first),x.xc(c=x.fc())&&(e.removeAllTicketsSpam=c.first),x.xc(c=x.fc())&&(e.markDeletedTicketTicketsSpam=c.first),x.xc(c=x.fc())&&(e.removeRestoredTicketsSpam=c.first),x.xc(c=x.fc())&&(e.contactDetailEleRef=c.first),x.xc(c=x.fc())&&(e.convertAgent=c.first),x.xc(c=x.fc())&&(e.agentSettingsTab=c.first))},decls:14,vars:5,consts:[[1,"contact-detail","height100"],["contactDetailEleRef",""],["class","height100",4,"ngIf"],[1,"block-conatct-dialog"],["id","blockUnblockContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick","open",4,"ngIf"],[1,"delete-conatct-dialog"],["id","deleteRestoreContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick",4,"ngIf"],[1,"error-dialog"],["id","errorDialog","width","480px","isModal","true","height","Auto","closeOnEscape","true",3,"visible",4,"ngIf"],[1,"convert-contact-to-agent-dialog"],["convertAgent",""],["id","contextmenu","cssClass","context-view-more-options",3,"items","select","beforeOpen"],["moreOptionsContextMenu",""],[1,"height100"],[1,"flex-horizontal","pl-32","pt-3","pb-3"],[1,"flex-horizontal","title-width"],[1,"e-avatar","e-avatar-small","e-avatar-circle","short-code",3,"ngStyle"],[1,"no-wrap","ellipsis","flex-vertical","pl-2","contact-overview-name-header"],[1,"font-16","ellipsis","no-wrap"],[1,"font-12","ellipsis","no-wrap"],[1,"align-right"],["ejs-button","","class","e-flat e-btn e-outline edit-button",3,"click",4,"ngIf"],[1,"pl-3"],["class","pl-3 pr-3",4,"ngIf"],["class","cursor-pointer pl-3 pr-3 ",4,"ngIf"],[1,"flex-horizontal",2,"height","calc(100% - 74px)"],[1,"flex-vertical","ticket-count-banner","height100"],[1,"flex-horizontal","pl-32","height-100px","pr-32"],[1,"all-tickets","cursor-pointer","flex","width-100"],[1,"count-style","flex-vertical","align-center"],[1,"total-count"],[1,"count-description","no-wrap"],[1,"all-tickets","margin-left-52","flex","width-100"],[1,"total-count","green-color"],[1,"total-count","orange-color"],[1,"tab-style"],["id","element","height","100%",3,"animation"],["agentSettingsTab",""],[1,"e-tab-header"],[1,"flex","align-center"],[1,"e-content",2,"padding-top","18px","height","calc(100% - 40px) !important",3,"ngClass"],["tabConntent",""],[2,"height","100%"],[4,"ngIf"],["class","no-list-found text-center",4,"ngIf"],["id","userListGrid","allowPaging","true","allowResizing","true","locale","customNoRecordsFoundTemplate",3,"dataSource","hidden","pageSettings","allowSorting","beforeDataBound","dataBound"],["userListGrid",""],["field","ticketId","minWidth","80","width","100",3,"headerText"],["template",""],["field","title","minWidth","150","width","180","clipMode","EllipsisWithTooltip",3,"headerText"],["field","createdOn","minWidth","120px","width","130",3,"headerText"],["field","brand","minWidth","80px","width","120","clipMode","EllipsisWithTooltip",3,"headerText"],["field","status","width","120","minWidth","80px","textAlign","Center",3,"headerText","allowSorting"],[1,"property-style"],[1,"property-header","flex-horizontal"],[1,"bd-icon","bd-icon-profile","user-icon-style"],[1,"header-style"],[2,"padding-left","17px","overflow","auto","height","calc(100% - 48px)"],[1,"label-style","secondary"],[1,"label-value-style","ellipsis","no-wrap"],[3,"date","format","timezone"],[4,"ngFor","ngForOf"],["ejs-button","",1,"e-flat","e-btn","e-outline","edit-button",3,"click"],[1,"pl-3","pr-3"],[1,"cursor-pointer"],["class","e-btn e-flat icon-rotate e-icon-btn more-option-button no-border more-option-button-background",3,"click",4,"ngIf"],[1,"e-btn","e-flat","icon-rotate","e-icon-btn","more-option-button","no-border","more-option-button-background",3,"click"],[1,"hd-icon","hd-vertical-menu"],[1,"cursor-pointer","pl-3","pr-3"],["type","grid"],[1,"no-list-found","text-center"],[1,"no-records"],["height","250","width","250","src","assets/images/no-tickets.png","alt","Loading",1,"no-ticket-image"],[1,"no-ticket-text"],[1,"no-wrap","ellipsis",3,"click"],[1,"primary-link-color","cursor-pointer"],[1,"no-wrap","ellipsis"],[2,"width","100%","max-width","120px","margin","0 auto"],[1,"ticket-status-label-grid","ellipsis","no-wrap","font-13","px-0"],[2,"padding","0 2px"],["class","label-style secondary ellipsis no-wrap",4,"ngIf"],["class","label-value-style ellipsis no-wrap",4,"ngIf"],["class","label-value-style",4,"ngIf"],[1,"label-style","secondary","ellipsis","no-wrap"],[1,"label-value-style"],["id","blockUnblockContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick","open"],["blockUnblockContactDialog",""],["header",""],["footerTemplate",""],["content",""],[3,"hidden"],["data-ripple","true","autofocus","",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat","block-contact-button",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true","autofocus","",1,"e-control","e-btn","e-primary","e-flat","unblock-contact-button",3,"click"],["blockUnblockForm",""],[1,"mb-5"],[3,"label","checked"],["markAllTicketsSpam",""],[1,"pb-3"],[1,"spam-action-font-size"],[1,"contact-details"],["removeAllTicketsSpam",""],["id","deleteRestoreContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick"],["deleteRestoreContactDialog",""],["deleteRestoreForm",""],["markDeletedTicketTicketsSpam",""],["removeRestoredTicketsSpam",""],[2,"margin-bottom","5px"],["id","errorDialog","width","480px","isModal","true","height","Auto","closeOnEscape","true",3,"visible"],["errorDialog",""],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat",3,"click"],["errorForm",""]],template:function(t,e){1&t&&(x.Tb(0,"div",0,1),x.Jc(2,We,131,89,"div",2),x.Sb(),x.Tb(3,"div",3),x.Jc(4,ec,8,1,"ejs-dialog",4),x.Sb(),x.Tb(5,"div",5),x.Jc(6,oc,8,1,"ejs-dialog",6),x.Sb(),x.Tb(7,"div",7),x.Jc(8,lc,8,1,"ejs-dialog",8),x.Sb(),x.Tb(9,"div",9),x.Ob(10,"convert-contact-agent",null,10),x.Sb(),x.Tb(12,"ejs-contextmenu",11,12),x.ec("select",(function(t){return e.moreOptionsSelect(t)}))("beforeOpen",(function(){return e.contextMenuBeforeOpen(e.contactData)})),x.Sb()),2&t&&(x.xb(2),x.nc("ngIf",e.customerDetailList),x.xb(2),x.nc("ngIf",e.accessToBlockOrUnBlockContact),x.xb(2),x.nc("ngIf",e.accessToDeleteOrRestoreContact),x.xb(2),x.nc("ngIf",e.accessToDeleteOrRestoreContact),x.xb(4),x.nc("items",e.moreOptionsContacts))},directives:[i.n,ot,s.f,i.o,s.m,i.l,n.k,n.e,n.b,n.d,n.a,ie.a,i.m,a.c,at.a,r.b,a.e],pipes:[F.a,ne.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.contact-detail[_ngcontent-%COMP%]   .title-width[_ngcontent-%COMP%]{width:calc(100% - 300px)}.contact-detail[_ngcontent-%COMP%]   .short-code[_ngcontent-%COMP%]{height:40px;width:40px}.contact-detail[_ngcontent-%COMP%]   .all-tickets[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:4px;box-shadow:0 1px 4px rgba(18,22,31,.1);height:92px}.contact-detail[_ngcontent-%COMP%]   .margin-left-52[_ngcontent-%COMP%]{margin-left:52px}.contact-detail[_ngcontent-%COMP%]   .seperator-style[_ngcontent-%COMP%]{border-bottom:1px solid #cbd2e0;margin-left:24px;transform:rotate(90deg);width:77px}.contact-detail[_ngcontent-%COMP%]   .add-ticket-style[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:4px;box-shadow:0 1px 4px rgba(18,22,31,.1);height:92px;margin-left:24px;width:133px}.contact-detail[_ngcontent-%COMP%]   .count-style[_ngcontent-%COMP%]{padding:12px 0}.contact-detail[_ngcontent-%COMP%]   .total-count[_ngcontent-%COMP%]{font-size:32px;font-weight:400;text-align:center}.contact-detail[_ngcontent-%COMP%]   .total-count.green-color[_ngcontent-%COMP%]{color:#1aaa55}.contact-detail[_ngcontent-%COMP%]   .total-count.orange-color[_ngcontent-%COMP%]{color:#f56700}.contact-detail[_ngcontent-%COMP%]   .count-description[_ngcontent-%COMP%]{color:#2d3748;font-size:16px;font-weight:400;text-align:center}.contact-detail[_ngcontent-%COMP%]   .count-description.hover-all-tickets[_ngcontent-%COMP%]:hover{color:#0565ff;cursor:pointer;text-decoration:underline}.contact-detail[_ngcontent-%COMP%]   .plus-icon[_ngcontent-%COMP%]{color:#007aff;font-size:24px;height:24px;margin:7px 54px 10px;padding:0;width:24px}.contact-detail[_ngcontent-%COMP%]   .new-ticket[_ngcontent-%COMP%]{color:#007aff;font-size:14px;font-weight:500;text-align:center}.contact-detail[_ngcontent-%COMP%]   .new-ticket[_ngcontent-%COMP%]:hover{color:#0565ff;cursor:pointer;text-decoration:underline}.contact-detail[_ngcontent-%COMP%]   .property-style[_ngcontent-%COMP%]{border-color:#e2e8f0;border-style:solid;border-width:1px 0 0 1px;height:100%;width:300px}.contact-detail[_ngcontent-%COMP%]   .property-header[_ngcontent-%COMP%]{background:#f3f7fa;border:solid #e2e8f0;border-width:0 0 1px;height:44px;width:300px}.contact-detail[_ngcontent-%COMP%]   .user-icon-style[_ngcontent-%COMP%]{color:#4a5568;font-size:18px;padding:14px 10px 15px 22px}.contact-detail[_ngcontent-%COMP%]   .header-style[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.contact-detail[_ngcontent-%COMP%]   .label-style[_ngcontent-%COMP%]{font-size:14px;font-weight:400;padding:10px 8px 5px}.contact-detail[_ngcontent-%COMP%]   .label-value-style[_ngcontent-%COMP%]{font-size:14px;font-weight:400;padding:0 8px 9px}.contact-detail[_ngcontent-%COMP%]   .e-content[_ngcontent-%COMP%]{height:calc(100% - 40px)!important}.contact-detail[_ngcontent-%COMP%]   .more-option-button[_ngcontent-%COMP%]{background:none!important;border-radius:50%!important;display:inline-block;height:32px!important;line-height:32px;margin:0!important;padding:0!important;width:32px!important}.contact-detail[_ngcontent-%COMP%]   .more-option-button[_ngcontent-%COMP%]:hover{background:#edf2f7!important}.contact-detail[_ngcontent-%COMP%]   .icon-rotate[_ngcontent-%COMP%]{transform:rotate(90deg)}.contact-detail[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]{width:82px}.contact-detail[_ngcontent-%COMP%]   .bd-icon-high[_ngcontent-%COMP%]:before{color:#f9a400}.contact-detail[_ngcontent-%COMP%]   .bd-icon-normal[_ngcontent-%COMP%]:before{color:#1dc060}.contact-detail[_ngcontent-%COMP%]   .bd-icon-low[_ngcontent-%COMP%]:before{color:#3395ff}.contact-detail[_ngcontent-%COMP%]   .icon-urgent-color[_ngcontent-%COMP%]{color:red}.contact-detail[_ngcontent-%COMP%]   .bd-icon-critical[_ngcontent-%COMP%]:before{color:#e20c00}.contact-detail[_ngcontent-%COMP%]   .height-100px[_ngcontent-%COMP%]{height:100px}.contact-detail[_ngcontent-%COMP%]   .ticket-count-banner[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden;width:calc(100% - 300px)}.contact-detail[_ngcontent-%COMP%]   .tab-style[_ngcontent-%COMP%]{height:calc(100% - 100px);padding-left:32px;padding-right:32px}.contact-detail[_ngcontent-%COMP%]   .pr-32[_ngcontent-%COMP%]{padding-right:32px}.context-view-more-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .e-menu-item[_ngcontent-%COMP%]   .e-menu-icon[_ngcontent-%COMP%]{padding:0}.contact-overview-name-header[_ngcontent-%COMP%]{max-width:calc(100% - 40px)!important}","body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.success[_ngcontent-%COMP%]{color:#0dbfb0}.failure[_ngcontent-%COMP%]{color:#777}.contact-grid[_ngcontent-%COMP%]   .e-btn[_ngcontent-%COMP%]{padding-bottom:0!important;padding-top:0!important}.contact-grid[_ngcontent-%COMP%]   .e-btn[_ngcontent-%COMP%]:active{box-shadow:none!important}.contact-grid[_ngcontent-%COMP%]   .e-icon-btn[_ngcontent-%COMP%]{padding-bottom:0!important;padding-top:0!important}.contact-grid[_ngcontent-%COMP%]   .hd-icon[_ngcontent-%COMP%]{padding:0!important}.contact-grid[_ngcontent-%COMP%]   .e-content[_ngcontent-%COMP%]{overflow-y:auto!important}.contact-grid[_ngcontent-%COMP%]   .cursor-auto[_ngcontent-%COMP%]{cursor:auto!important}.contact-details[_ngcontent-%COMP%]{line-height:25px;padding-left:20px;padding-right:10px}.block-contact-button[_ngcontent-%COMP%]{background-color:red!important;border-color:red!important;max-width:160px!important}.unblock-contact-button[_ngcontent-%COMP%]{max-width:195px!important}.mb-5[_ngcontent-%COMP%]{margin-bottom:5px!important}.spam-action-font-size[_ngcontent-%COMP%]{font-size:13px!important}.contact-container[_ngcontent-%COMP%], .height-100[_ngcontent-%COMP%]{height:100%}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]{overflow:hidden}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]{box-sizing:content-box;min-height:50px}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .e-chip[_ngcontent-%COMP%]{background:#fff!important}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .e-chip[_ngcontent-%COMP%]   .e-chip-text[_ngcontent-%COMP%]{font-size:14px}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%], .contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .e-chip[_ngcontent-%COMP%]:hover{background:#f5f9fd!important;border-color:#4a90e2!important}.context-view-more-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .e-menu-item[_ngcontent-%COMP%]   .e-menu-icon[_ngcontent-%COMP%]{padding:0}"]}),t})(),hc=(()=>{class t{constructor(t,e,c){this.http=t,this.spinService=e,this.router=c}resolve(t){return this.spinService.showSpinner(),this.http.get(u.a.UserList+"/"+ +t.params.customerId).toPromise().catch(t=>this.router.navigateByUrl("error",{state:{message:t.error.errors[0].errorMessage,type:"contact"},skipLocationChange:!0}))}}return t.\u0275fac=function(e){return new(e||t)(x.bc(E.b),x.bc(N.a),x.bc(h.g))},t.\u0275prov=x.Jb({token:t,factory:t.\u0275fac}),t})();var bc=c("6pkR"),uc=c("2Cb5"),pc=c("EiDu");const mc=["addEditContactDialog"],gc=["contactForms"],Cc=["contentContactForm"],fc=["contactName"],Tc=["contactDisplayName"],Sc=["contactEmail"],vc=["contactGroup"],Oc=["contactGroupAccess"];function xc(t,e){if(1&t&&(x.Tb(0,"div"),x.Lc(1),x.hc(2,"translate"),x.Sb()),2&t){const t=x.gc(2);x.xb(1),x.Nc(" ",x.ic(2,1,t.contactDialogTitle)," ")}}function kc(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",11),x.Tb(1,"span",12),x.ec("click",(function(){return x.Bc(t),x.gc(3).navigateToContactForms()})),x.Tb(2,"span",13),x.Lc(3),x.hc(4,"translate"),x.Sb(),x.Ob(5,"span",14),x.Sb(),x.Sb()}2&t&&(x.xb(3),x.Mc(x.ic(4,1,"CONFIGUREFIELDS")))}function Ec(t,e){if(1&t){const t=x.Ub();x.Jc(0,kc,6,3,"div",8),x.Tb(1,"div"),x.Tb(2,"button",9),x.ec("click",(function(){return x.Bc(t),x.gc(2).cancelDialog()})),x.Lc(3),x.hc(4,"translate"),x.Sb(),x.Tb(5,"button",10),x.ec("click",(function(){return x.Bc(t),x.gc(2).addUpdateContact()})),x.Lc(6),x.hc(7,"translate"),x.Sb(),x.Sb()}if(2&t){const t=x.gc(2);x.nc("ngIf",t.manageFieldPermission),x.xb(3),x.Mc(x.ic(4,3,"CANCEL")),x.xb(3),x.Mc(x.ic(7,5,t.contactDialogSubmitButtonText))}}function Dc(t,e){if(1&t&&(x.Tb(0,"div",41),x.Ob(1,"span",42),x.hc(2,"safe"),x.Sb()),2&t){const t=x.gc(3);x.xb(1),x.nc("innerHTML",x.jc(2,1,t.errorMessage,"html"),x.Cc)}}function Ac(t,e){1&t&&(x.Tb(0,"div",43),x.Tb(1,"span",21),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"FIELDREQUIRED"),""))}function yc(t,e){1&t&&(x.Tb(0,"div",43),x.Tb(1,"span",21),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"INVALIDNAME"),""))}function Nc(t,e){1&t&&(x.Tb(0,"div",43),x.Tb(1,"span",21),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"FIELDREQUIRED"),""))}function Mc(t,e){1&t&&(x.Tb(0,"div",43),x.Tb(1,"span",21),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"INVALIDDISPLAYNAME"),""))}function Ic(t,e){1&t&&(x.Tb(0,"div",43),x.Tb(1,"span",21),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"FIELDREQUIRED"),""))}function Bc(t,e){1&t&&(x.Tb(0,"div",43),x.Tb(1,"span",21),x.Lc(2),x.hc(3,"translate"),x.Sb(),x.Sb()),2&t&&(x.xb(2),x.Nc(" ",x.ic(3,1,"EMAILNOTVALID"),""))}function Lc(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",null,15),x.Jc(2,Dc,3,4,"div",16),x.Tb(3,"div",17),x.Tb(4,"div",18),x.Tb(5,"div",19),x.Tb(6,"div",20),x.Tb(7,"label"),x.Lc(8),x.hc(9,"translate"),x.Tb(10,"span",21),x.Lc(11,"*"),x.Sb(),x.Sb(),x.Tb(12,"ejs-textbox",22,23),x.ec("blur",(function(){return x.Bc(t),x.gc(2).contactNameFocusOut()}))("change",(function(e){return x.Bc(t),x.gc(2).contactNameChange(e)}))("input",(function(e){return x.Bc(t),x.gc(2).contactNameInput(e)})),x.hc(14,"translate"),x.Sb(),x.Jc(15,Ac,4,3,"div",24),x.Jc(16,yc,4,3,"div",24),x.Tb(17,"div",25),x.Ob(18,"span",26),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(19,"div",18),x.Tb(20,"div",19),x.Tb(21,"div",20),x.Tb(22,"label"),x.Lc(23),x.hc(24,"translate"),x.Tb(25,"span",21),x.Lc(26,"*"),x.Sb(),x.Sb(),x.Tb(27,"ejs-textbox",22,27),x.ec("blur",(function(){return x.Bc(t),x.gc(2).contactDisplayNameFocusOut()}))("change",(function(e){return x.Bc(t),x.gc(2).contactDisplayNameChange(e)}))("input",(function(e){return x.Bc(t),x.gc(2).contactDisplayNameInput(e)})),x.hc(29,"translate"),x.Sb(),x.Jc(30,Nc,4,3,"div",24),x.Jc(31,Mc,4,3,"div",24),x.Tb(32,"div",28),x.Ob(33,"span",26),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(34,"div",18),x.Tb(35,"div",19),x.Tb(36,"div",20),x.Tb(37,"label"),x.Lc(38),x.hc(39,"translate"),x.Tb(40,"span",21),x.Lc(41,"*"),x.Sb(),x.Sb(),x.Tb(42,"ejs-textbox",29,30),x.ec("blur",(function(){return x.Bc(t),x.gc(2).contactEmailFocusOut()}))("change",(function(e){return x.Bc(t),x.gc(2).contactEmailChange(e)})),x.hc(44,"translate"),x.Sb(),x.Jc(45,Ic,4,3,"div",24),x.Jc(46,Bc,4,3,"div",24),x.Tb(47,"div",31),x.Ob(48,"span",26),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(49,"div",18),x.Tb(50,"div",19),x.Tb(51,"div",20),x.Tb(52,"label"),x.Lc(53),x.hc(54,"translate"),x.Sb(),x.Tb(55,"ejs-dropdownlist",32,33),x.ec("change",(function(e){return x.Bc(t),x.gc(2).contactGroupChange(e)}))("dataBound",(function(){return x.Bc(t),x.gc(2).contactGroupDataBound()})),x.hc(57,"translate"),x.hc(58,"translate"),x.Sb(),x.Tb(59,"div",34),x.Ob(60,"span",26),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(61,"div",35),x.Tb(62,"div",19),x.Tb(63,"div",20),x.Tb(64,"label"),x.Lc(65),x.hc(66,"translate"),x.Sb(),x.Ob(67,"ejs-dropdownlist",36,37),x.hc(69,"translate"),x.hc(70,"translate"),x.Tb(71,"div",38),x.Ob(72,"span",26),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(73,"form-builder",39,40),x.ec("fieldChange",(function(e){return x.Bc(t),x.gc(2).fieldChange(e)})),x.Sb(),x.Sb()}if(2&t){const t=x.gc(2);x.xb(2),x.nc("ngIf",t.errorMessage),x.xb(6),x.Nc(" ",x.ic(9,35,"NAME")," "),x.xb(4),x.oc("placeholder",x.ic(14,37,"TEXTBOXPLACEHOLDER")),x.nc("htmlAttributes",t.inputAttribute),x.xb(3),x.nc("ngIf",t.contactNameRequired),x.xb(1),x.nc("ngIf",t.contactNameIsError),x.xb(7),x.Nc(" ",x.ic(24,39,"DISPLAYNAME")," "),x.xb(4),x.oc("placeholder",x.ic(29,41,"TEXTBOXPLACEHOLDER")),x.nc("htmlAttributes",t.inputAttribute),x.xb(3),x.nc("ngIf",t.contactDisplayNameRequired),x.xb(1),x.nc("ngIf",t.contactDisplayNameIsError),x.xb(7),x.Nc(" ",x.ic(39,43,"EMAIL")," "),x.xb(4),x.oc("placeholder",x.ic(44,45,"TEXTBOXPLACEHOLDER")),x.nc("htmlAttributes",t.inputAttribute),x.xb(3),x.nc("ngIf",t.contactEmailRequired),x.xb(1),x.nc("ngIf",t.invalidEmail),x.xb(7),x.Nc(" ",x.ic(54,47,"CONTACTGROUP")," "),x.xb(2),x.oc("placeholder",x.ic(57,49,"DROPDOWNPLACEHOLDER")),x.oc("filterBarPlaceholder",x.ic(58,51,"SEARCH")),x.nc("dataSource",t.contactGroupDataConfig)("allowFiltering",!0)("fields",t.contactGroupFields)("htmlAttributes",t.autoCompleteAttribute)("showClearButton",!0)("query",t.contactGroupDropDownQuery),x.xb(6),x.nc("hidden",!t.showAcessScope),x.xb(4),x.Nc(" ",x.ic(66,53,"CONTACTACCESSSCOPE")," "),x.xb(2),x.pc("placeholder"," ",x.ic(69,55,"DROPDOWNPLACEHOLDER"),""),x.oc("filterBarPlaceholder",x.ic(70,57,"SEARCH")),x.nc("dataSource",t.accessList)("fields",t.accessFields)("htmlAttributes",t.autoCompleteAttribute),x.xb(6),x.nc("collections",t.contactCollection)("myForm",t.myForm)("fieldDependency",t.fieldDependencyObj)}}function Pc(t,e){if(1&t){const t=x.Ub();x.Tb(0,"ejs-dialog",3,4),x.ec("created",(function(){return x.Bc(t),x.gc().contactDialogCreated()}))("close",(function(){return x.Bc(t),x.gc().contactDialogClose()}))("beforeOpen",(function(){return x.Bc(t),x.gc().contactDialogBeforeOpen()}))("overlayClick",(function(){return x.Bc(t),x.gc().dialogOverlayClick()}))("beforeClose",(function(e){return x.Bc(t),x.gc().beforeDialogClose(e)})),x.Jc(2,xc,3,3,"ng-template",null,5,x.Kc),x.Jc(4,Ec,8,7,"ng-template",null,6,x.Kc),x.Jc(6,Lc,75,59,"ng-template",null,7,x.Kc),x.Sb()}if(2&t){const t=x.gc();x.nc("visible",!1)("position",t.dialogContactPosition)}}function Rc(t,e){if(1&t&&(x.Ob(0,"span",44),x.hc(1,"safe")),2&t){const t=x.gc();x.nc("innerHTML",x.jc(1,1,t.commonInputValidationErrorMessage,"html"),x.Cc)}}const wc=[{path:"",component:(()=>{class t{constructor(t,e,c,i,n,o,a,s){this.http=t,this.appRootService=e,this.contactRootService=c,this.spinService=i,this.contactAPIService=n,this.toastService=o,this.appPermissionService=a,this.router=s,this.dialogContactPosition={X:"right"},this.validationFailed=!1,this.contactGroupFields={text:"name",value:"id"},this.autoCompleteAttribute={autocomplete:"anyrandomstring"},this.inputAttribute={maxlength:T.s,autocomplete:"anyrandomstring"},this.accessList=[{value:1,text:Object(v.a)("CONTACTACCESSSCOPE1")},{value:2,text:Object(v.a)("CONTACTACCESSSCOPE2")}],this.accessFields={text:"text",value:"value"},this.accessToCreateOrEdit=this.appPermissionService.hasPermission([S.a.CreateOrEditContact,S.a.ViewContact]),this.manageFieldPermission=this.appPermissionService.hasPermission([S.a.ManageTicketFieldsAndForms]),this.contactGroupDropDownQuery=new b.g,this.contactGroupDataConfig=new b.a({url:u.a.ContactGroupCollectionForDropdown,adaptor:new p.b}),this.commonInputValidationErrorMessage=m.e}ngAfterViewInit(){this.showAddEditContactGroup=this.contactRootService.showAddEditContact.subscribe(t=>{this.addEditContactDialog&&(this.addEditContactDialog.width="500px",this.addEditContactDialog.height="100%",this.addEditContactDialog.showCloseIcon=!0,this.errorMessage=null,this.addEditContactDialog.position=this.dialogContactPosition,this.actionType=t,"Add"==t&&(this.getContactFieldDependency(),this.addEditContactDialog.show(),setTimeout(()=>{this.contactForm.defaultValueObjReset(),setTimeout(()=>{this.setDependencyDataSource()},1e3)})))}),this.newContactGroupObject=this.contactRootService.newContactGroupObject.subscribe(t=>{this.contactAPIService.getContactForm().then(e=>{Object(C.X)(this.actionType)||("Add"==this.actionType?this.currentEditContact=null:(this.currentEditContact=t,this.setContactObjectValues(this.currentEditContact))),this.contactCollection=Object(te.b)(e.result,this.currentEditContact,this.actionType&&"Add"!==this.actionType?"contact":"create"),setTimeout(()=>{this.contactCollection.fieldDisplayCondition.length>0&&this.contactForm.applyFieldDisplayCondition(this.contactCollection.fieldDisplayCondition)},1e3),this.spinService.hideSpinner(),"Edit"==this.actionType&&(this.getContactFieldDependency(),setTimeout(()=>{this.addEditContactDialog.show(),setTimeout(()=>{this.setDependencyDataSource()},1e3)}))})}),this.addorEditAction=this.contactRootService.addorEditAction.subscribe(t=>{this.contactDialogTitle=t}),this.setContactGroupDialogSubmitButtonText=this.contactRootService.setContactGroupDialogSubmitButtonText.subscribe(t=>{this.contactDialogSubmitButtonText=t}),this.profileOrAddEdit=this.contactRootService.profileOrAddEdit.subscribe(t=>{this.isProfilePage=t}),this.setContactGroupOnLoad=this.contactRootService.setContactGroupOnLoad.subscribe(t=>{this.contactGroupDropDownQuery=(new b.g).addParams("includeAdditionalIds",t),setTimeout(()=>{this.contactGroup.value=+t},500)})}getContactFieldDependency(){let t=bc.b.FormFieldDependency;t=Object(m.i)(t,"fieldModuleId",""+bc.a.Contact);const e="Edit"==this.actionType?Object(m.i)(t,"isReadOnlyOptionsRequired","true"):t;return this.http.get(e).toPromise().then(t=>{this.fieldDependencyObj=t.result}).catch(t=>{if(400===t.status){const e=Object(m.q)(t.error);this.toastService.failureToast(e)}})}setDependencyDataSource(){setTimeout(()=>{Object(C.X)(this.fieldDependencyObj)||this.contactForm.assignFieldDependency(this.fieldDependencyObj,!0)},1500)}setContactObjectValues(t){if(!Object(C.X)(t)){this.contactName.value=t.contactName,this.contactDisplayName.value=t.contactDisplayName,this.contactEmail.value=t.emailId;const e=!Object(C.X)(t.contactGroup)&&t.contactGroup.length>0&&t.contactGroup[0].id>0?t.contactGroup[0].id:null;Object(C.X)(e)?this.showAcessScope=!1:(this.showAcessScope=!0,this.contactGroup.query=(new b.g).addParams("includeAdditionalIds",e.toString()),this.contactGroupAccess.value=!Object(C.X)(t.contactGroup)&&t.contactGroup.length>0?t.contactGroup[0].accessScopeId:null),this.contactGroup.value=e}}contactDialogCreated(){this.dialogCreate=!0}contactDialogClose(){Object(T.V)(!1),this.errorMessage=null,this.formUnTouch(),this.actionType=null,this.resetContactStaticFormValue(),this.removeCustomError()}contactDialogBeforeOpen(){this.errorMessage=null,Object(T.V)(!0)}dialogOverlayClick(){this.addEditContactDialog.closeIcon.click(),T.H||(this.errorMessage=null,this.formUnTouch(),this.actionType=null,this.resetContactStaticFormValue(),this.removeCustomError())}formValues(){let t={};const e=Object(te.c)(this.contactForm.value);return t=Object.assign(Object.assign({},e),{contactName:this.contactName&&!Object(C.X)(this.contactName.value)?this.contactName.value.trim():null,contactDisplayName:this.contactDisplayName&&!Object(C.X)(this.contactDisplayName.value)?this.contactDisplayName.value.trim():null,emailId:this.contactEmail&&!Object(C.X)(this.contactEmail.value)?this.contactEmail.value.trim():null,contactGroup:this.contactGroup&&!Object(C.X)(this.contactGroup.value)?this.contactGroup.value.toString():null,contactGroupAccessScopeId:this.contactGroupAccess&&this.contactGroup&&!Object(C.X)(this.contactGroup.value)?this.contactGroupAccess.value:null}),t}getFormJson(){let t="";const e=this.formValues();return Object.keys(e).map(c=>{t=c,Object(C.X)(e[c])||"contactTag"!=t||(e[c]=this.contactForm.ej2Obj.contactTag.text)}),e}addUpdateContact(){if(this.contactForm.setDefaultDependableObjValue(),this.errorMessage=null,this.contactNameFocusOut(),this.contactEmailFocusOut(),this.contactDisplayNameFocusOut(),this.validationCheck()){const t=this.getFormJson();this.clearCustomError(),this.removeCustomError(),this.spinService.showSpinner(),"ADD"===this.contactDialogSubmitButtonText?this.contactAPIService.addContact(t).then(t=>{t&&(this.addEditContactDialog.hide(),this.spinService.hideSpinner(),this.toastService.successToast(t.message),this.router.navigateByUrl("/contacts/"+t.id))}).catch(t=>{400===t.status&&(this.validationFailed=!0,t.error&&t.error.message&&this.toastService.failureToast(t.error.message),this.customErrorHandling(t.error.errors))}).finally(()=>{this.spinService.hideSpinner()}):"UPDATE"===this.contactDialogSubmitButtonText&&this.contactAPIService.editContact(t,this.currentEditContact.userId).then(t=>{t&&(this.addEditContactDialog.hide(),this.spinService.hideSpinner(),this.isProfilePage?(Object(T.V)(!1),location.reload()):this.contactRootService.setContactGridAction("refreshData"),this.toastService.successToast(t.message))}).catch(t=>{400===t.status&&(this.validationFailed=!0,t.error&&t.error.message&&this.toastService.failureToast(t.error.message),this.customErrorHandling(t.error.errors))}).finally(()=>{this.spinService.hideSpinner()})}else[this.contactForm].forEach(t=>{Object.keys(t.myForm.controls).forEach(e=>{t.myForm.controls[e].markAsTouched()})}),setTimeout(()=>{this.formErrorEleFocus()})}customErrorHandling(t){t.forEach(t=>{this.contactForm.customErrorAppend(t),this.staticFieldsCustomErrorAppend(t)}),setTimeout(()=>{this.formErrorEleFocus()})}staticFieldsCustomErrorAppend(t){const e=this.addEditContactDialogHtmlElement;if(!e)return;const c=e.nativeElement;if(!t.length){const e=c.querySelector("#"+this.convertToCamelCase(t.field)+".custom-error span.error");e&&(e.classList.add("custom-error-appended"),e.innerText=t.errorMessage)}t.length&&t.forEach(t=>{const e=c.querySelector("#"+this.convertToCamelCase(t.field)+".custom-error span.error");e&&(e.classList.add("custom-error-appended"),e.innerText=t.errorMessage)})}convertToCamelCase(t){return t.charAt(0).toLowerCase()+t.slice(1)}clearCustomError(){[this.contactForm].forEach(t=>{t.clearCustomErrors()})}formErrorEleFocus(){const t=this.addEditContactDialogHtmlElement;if(t&&t.nativeElement){const e=t.nativeElement;let c;if(c=this.addEditContactDialog.element.querySelector(".error-msg"),c||(c=this.addEditContactDialog.element.querySelector(".custom-error-appended")),!c)return;const i=Object(C.C)(c,".product-header");if(i){const t=i.querySelector("input");Object(C.X)(t)?i.querySelector("textarea").focus():t.focus()}else e.querySelector("input").focus()}}cancelDialog(){this.addEditContactDialog.closeIcon.click(),T.H||(this.formUnTouch(),this.errorMessage=null,this.actionType=null,this.resetContactStaticFormValue(),this.removeCustomError())}resetContactStaticFormValue(){this.contactNameRequired=!1,this.contactNameIsError=!1,this.contactDisplayNameRequired=!1,this.contactDisplayNameIsError=!1,this.contactEmailRequired=!1,this.invalidEmail=!1,this.contactName.value=null,this.contactDisplayName.value=null,this.contactEmail.value=null,this.contactGroup.value=null,Object(C.X)(this.contactGroupAccess)||(this.contactGroupAccess.value=null),this.validationFailed=!1,this.contactForm.formValue.persistance={}}formUnTouch(){[this.contactForm].forEach(t=>{Object.keys(t.myForm.controls).forEach(e=>{t.myForm.controls[e].reset()}),setTimeout(()=>{t.resettingData()})})}ngOnDestroy(){this.addEditContactDialog&&this.dialogCreate&&this.addEditContactDialog.element&&Object(C.I)(this.addEditContactDialog.element),this.showAddEditContactGroup.unsubscribe(),this.newContactGroupObject.unsubscribe(),this.addorEditAction.unsubscribe(),this.setContactGroupDialogSubmitButtonText.unsubscribe(),this.profileOrAddEdit.unsubscribe()}beforeDialogClose(t){if(!t.isInteracted)return;const e=window.confirm(""+Object(v.a)("CONFORMDATALOSE"));t.cancel=!e,t.cancel||Object(T.V)(!1)}convertArrayToArrayString(t,e){let c="";return"contactGroup"===t&&(c=e.toString()),c}fieldChange(t){if(!Object(C.X)(t))if(Object(C.X)(t.element))if(Object(C.X)(t.container))if(Object(C.X)(t.event.element)){if(!Object(C.X)(t.event.container)){const e=t.event.container.parentElement.parentElement.parentElement.querySelector(".custom-error span.error");Object(C.X)(e)||(e.classList.remove("custom-error-appended"),e.innerText="")}}else{const e=t.event.element.parentElement.parentElement.querySelector(".custom-error span.error");Object(C.X)(e)||(e.classList.remove("custom-error-appended"),e.innerText="")}else t.container.parentElement.parentElement.parentElement.querySelector(".custom-error span.error").classList.remove("custom-error-appended"),t.container.parentElement.parentElement.parentElement.querySelector(".custom-error span.error").innerText="";else t.element.parentElement.parentElement.querySelector(".custom-error span.error").classList.remove("custom-error-appended"),t.element.parentElement.parentElement.querySelector(".custom-error span.error").innerText=""}contactGroupChange(t){this.contactGroup&&this.contactGroup.value?(this.showAcessScope=!0,this.contactGroupAccess&&(this.contactGroupAccess.value=Object(C.X)(this.currentEditContact)?1:this.currentEditContact.contactGroup[0].accessScopeId)):(this.contactGroupAccess.value=null,this.showAcessScope=!1),this.validationFailed&&this.fieldChange(t)}contactGroupDataBound(){Object(C.X)(this.currentEditContact)||(this.contactGroup.value=this.currentEditContact.contactGroup[0].id)}contactDisplayNameFocusOut(){if(Object(C.X)(this.contactDisplayName.value))return void(this.contactDisplayNameRequired=!0);const t=this.contactDisplayName.value.trim();Object(C.X)(t)||0!==t.length||(this.contactDisplayNameRequired=!0)}contactDisplayNameInput(t){const e=t.value;if(this.contactDisplayNameRequired=!(!Object(C.X)(e)&&""!==e.trim()),e){const t=!R.c.test(e.trim());this.contactDisplayNameIsError=!!t}else this.contactDisplayNameIsError=!1}contactDisplayNameChange(t){if(null!=this.contactDisplayName.value){this.contactDisplayNameRequired=!1;const t=!R.c.test(this.contactDisplayName.value);this.contactDisplayNameIsError=!!t}else this.contactDisplayNameRequired=!1,this.contactDisplayNameIsError=!1;this.validationFailed&&this.fieldChange(t)}contactNameFocusOut(){if(Object(C.X)(this.contactName.value))return void(this.contactNameRequired=!0);const t=this.contactName.value.trim();Object(C.X)(t)||0!==t.length||(this.contactNameRequired=!0)}contactNameChange(t){if(null!=this.contactName.value){this.contactNameRequired=!1;const t=!R.j.test(this.contactName.value.trim());this.contactNameIsError=!!t}else this.contactNameRequired=!1,this.contactNameIsError=!1;this.validationFailed&&this.fieldChange(t)}contactNameInput(t){const e=t.value;if(this.contactNameRequired=!(!Object(C.X)(e)&&""!==e.trim()),e){const t=!R.j.test(e.trim());this.contactNameIsError=!!t}else this.contactNameIsError=!1}contactEmailFocusOut(){if(Object(C.X)(this.contactEmail.value))return this.invalidEmail=!1,void(this.contactEmailRequired=!0);const t=this.contactEmail.value.trim();if(t&&t.length>0){if(this.contactEmailRequired=!1,!R.e.test(t.trim()))return void(this.invalidEmail=!0);this.invalidEmail=!1}else this.invalidEmail=!1,this.contactEmailRequired=!0}contactEmailChange(t){this.contactEmailRequired=!1,this.validationFailed&&this.fieldChange(t)}validationCheck(){const t=this.contactForm.checkInputValidationErrorExist();let e=this.contactForm.myForm.valid;return e=e&&!t,[this.contactForm].forEach(t=>{e=e&&t.customUploadValidation()}),e&&!(this.contactNameRequired||this.contactNameIsError||this.contactDisplayNameRequired||this.contactDisplayNameIsError||this.contactEmailRequired||this.invalidEmail)}removeCustomError(){Object(C.X)(this.addEditContactDialogHtmlElement)||[].slice.call(this.addEditContactDialogHtmlElement.nativeElement.querySelectorAll(".custom-error span.error")).forEach(t=>{t.classList.remove("custom-error-appended"),t.innerText=""})}navigateToContactForms(){window.open("./admin/contact-fields","_blank")}}return t.\u0275fac=function(e){return new(e||t)(x.Nb(E.b),x.Nb(k.a),x.Nb(y.a),x.Nb(N.a),x.Nb(I),x.Nb(M.a),x.Nb(L.a),x.Nb(h.g))},t.\u0275cmp=x.Hb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var c;1&t&&(x.Qc(mc,!0),x.Qc(gc,!0),x.Qc(Cc,!0),x.Qc(fc,!0),x.Qc(Tc,!0),x.Qc(Sc,!0),x.Qc(vc,!0),x.Qc(Oc,!0)),2&t&&(x.xc(c=x.fc())&&(e.addEditContactDialog=c.first),x.xc(c=x.fc())&&(e.contactForm=c.first),x.xc(c=x.fc())&&(e.addEditContactDialogHtmlElement=c.first),x.xc(c=x.fc())&&(e.contactName=c.first),x.xc(c=x.fc())&&(e.contactDisplayName=c.first),x.xc(c=x.fc())&&(e.contactEmail=c.first),x.xc(c=x.fc())&&(e.contactGroup=c.first),x.xc(c=x.fc())&&(e.contactGroupAccess=c.first))},decls:5,vars:1,consts:[["id","addEditContactDialog","width","400px","isModal","true","showCloseIcon","true","closeOnEscape","true","height","100%","cssClass","contact-dialog rounded-0",3,"visible","position","created","close","beforeOpen","overlayClick","beforeClose",4,"ngIf"],[2,"height","100%"],["errorInputValidation",""],["id","addEditContactDialog","width","400px","isModal","true","showCloseIcon","true","closeOnEscape","true","height","100%","cssClass","contact-dialog rounded-0",3,"visible","position","created","close","beforeOpen","overlayClick","beforeClose"],["addEditContactDialog",""],["header",""],["footerTemplate",""],["content",""],["class","float-left",4,"ngIf"],["data-ripple","true",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat",3,"click"],[1,"float-left"],[1,"align-right","flex-horizontal","field-link",3,"click"],[1,"pt-1","link-hover","font-14"],[1,"pl-2","hd-icon","font-16","hd-external-link"],["contentContactForm",""],["class","pl-3",4,"ngIf"],[1,"contact-form"],[1,"custom-form-builder","form-builder","product-header"],[1,"form-group","row","flex-vertical"],[1,"col"],[1,"error"],["autocomplete","off",3,"placeholder","htmlAttributes","blur","change","input"],["contactName",""],["class","error-msg",4,"ngIf"],["id","contactName",1,"col","custom-error","no-padding"],[1,"error","primary"],["contactDisplayName",""],["id","contactDisplayName",1,"col","custom-error","no-padding"],["autocomplete","off",3,"placeholder","htmlAttributes","blur","change"],["contactEmail",""],["id","emailId",1,"col","custom-error","no-padding"],["popupHeight","200px",3,"dataSource","allowFiltering","placeholder","fields","htmlAttributes","showClearButton","filterBarPlaceholder","query","change","dataBound"],["contactGroup",""],["id","contactGroup",1,"col","custom-error","no-padding"],[1,"custom-form-builder","form-builder","product-header",3,"hidden"],["popupHeight","200px",3,"dataSource","placeholder","filterBarPlaceholder","fields","htmlAttributes"],["contactGroupAccess",""],["id","contactGroupAccessScopeId",1,"col","custom-error","no-padding"],[3,"collections","myForm","fieldDependency","fieldChange"],["contactForms",""],[1,"pl-3"],["tabindex","0",1,"required","hd-error-message",3,"innerHTML"],[1,"error-msg"],[1,"error",3,"innerHTML"]],template:function(t,e){1&t&&(x.Jc(0,Pc,8,2,"ejs-dialog",0),x.Tb(1,"div",1),x.Ob(2,"router-outlet"),x.Sb(),x.Jc(3,Rc,2,4,"ng-template",null,2,x.Kc)),2&t&&x.nc("ngIf",e.accessToCreateOrEdit)},directives:[i.n,h.l,r.b,l.i,d.e,uc.a],pipes:[F.a,pc.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.secondary-email-id-multi-select.e-popup-open[_ngcontent-%COMP%]{display:none}.e-dialog.contact-dialog[_ngcontent-%COMP%]{max-height:100%!important}.e-dialog.contact-dialog[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]{padding:0 5px!important}"]}),t})(),children:[{path:"",component:Yt},{path:":customerId",component:dc,resolve:{data:hc}}]}];let Fc=(()=>{class t{}return t.\u0275mod=x.Lb({type:t}),t.\u0275inj=x.Kb({factory:function(e){return new(e||t)},imports:[[h.k.forChild(wc)],h.k]}),t})();var jc=c("ltyr"),Uc=c("Wmr3"),_c=c("lZTi");let Gc=(()=>{class t{constructor(t){this.spinService=t,setTimeout(()=>{this.spinService.hideSpinner()},100)}}return t.\u0275mod=x.Lb({type:t}),t.\u0275inj=x.Kb({factory:function(e){return new(e||t)(x.bc(N.a))},providers:[n.l,n.s,n.h,I,n.c,n.t,n.o,n.g,n.q,hc],imports:[[i.b,Fc,n.j,o.c,a.l,s.j,a.g,r.a,l.h,l.e,d.g,d.d,a.h,s.l,jc.a,Uc.a,a.d,_c.a,s.a,s.e,a.b]]}),t})()}}]);