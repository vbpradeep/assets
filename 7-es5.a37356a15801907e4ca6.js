!function(){function e(t,n,l){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var l=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(l){var r=Object.getOwnPropertyDescriptor(l,t);return r.get?r.get.call(n):r.value}})(t,n,l||t)}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,l=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(l,arguments,i)}else n=l.apply(this,arguments);return r(this,n)}}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?i(e):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1UK9":function(e,t,n){"use strict";n.d(t,"b",(function(){return X})),n.d(t,"k",(function(){return K})),n.d(t,"a",(function(){return Y})),n.d(t,"m",(function(){return J})),n.d(t,"n",(function(){return ee})),n.d(t,"f",(function(){return te})),n.d(t,"p",(function(){return ne})),n.d(t,"l",(function(){return re})),n.d(t,"c",(function(){return ie})),n.d(t,"i",(function(){return oe})),n.d(t,"j",(function(){return se})),n.d(t,"d",(function(){return ue})),n.d(t,"e",(function(){return ce})),n.d(t,"h",(function(){return he})),n.d(t,"g",(function(){return me})),n.d(t,"o",(function(){return fe}));var l,r,i,a,o,s,u,c,d,p,h,m,f,g,v,y,b,C,O,E,S,x,I,w,N,k,R,j,A=n("H552"),T=n("4SUy"),q=n("A4Lh"),D=n("dSv1"),L=n("OyPL"),P=n("ScLb"),B=n("ngVE"),M=n("1gpv"),_=n("bqpE"),G=n("CU1o"),V=n("gnsf"),F=n("M9dC"),H=n("58Y9"),W=n("zZ4g");!function(e){e[e.TimeTrigger=1]="TimeTrigger",e[e.EventTrigger=2]="EventTrigger",e[e.AutoAssignment=3]="AutoAssignment"}(l||(l={})),function(e){e.AutomationType="automationType",e.EventType="eventType",e.AutomationTriggerType="automationTriggerType"}(r||(r={})),function(e){e[e.AssignTicket=1]="AssignTicket",e[e.TicketFieldUpdate=2]="TicketFieldUpdate",e[e.SendNotification=3]="SendNotification",e[e.ContactFiledUpdate=4]="ContactFiledUpdate",e[e.ContactGroupFieldUpdate=5]="ContactGroupFieldUpdate"}(i||(i={})),function(e){e[e.CreateTicketAutomation=2]="CreateTicketAutomation",e[e.UpdateTicketAutomation=3]="UpdateTicketAutomation",e[e.TimeTriggerAutomation=4]="TimeTriggerAutomation",e[e.AutoAssignmentAutomation=5]="AutoAssignmentAutomation"}(a||(a={})),function(e){e[e.TicketCreated=1]="TicketCreated",e[e.TicketUpdated=2]="TicketUpdated",e[e.ContactCreated=3]="ContactCreated",e[e.ContactUpdated=4]="ContactUpdated",e[e.ContactGroupCreated=5]="ContactGroupCreated",e[e.TimeTrigger=7]="TimeTrigger",e[e.AutoAssignment=8]="AutoAssignment"}(o||(o={})),function(e){e[e.MoveToFirst=1]="MoveToFirst",e[e.MoveToLast=2]="MoveToLast",e[e.ToPosition=3]="ToPosition"}(s||(s={})),function(e){e.CreateTicketAutomation="create-ticket-triggers",e.UpdateTicketAutomation="update-ticket-triggers",e.AutoAssignmentAutomation="auto-assignments",e.TimeTriggerAutomation="time-triggers",e.SLAAutomation="sla"}(u||(u={})),function(e){e.CreateTicketAutomation="Create Trigger",e.UpdateTicketAutomation="Event Trigger",e.AutoAssignmentAutomation="Auto Assignment",e.TimeTriggerAutomation="Time Trigger",e.SLAAutomation="SLA"}(c||(c={})),function(e){e[e.Direct=1]="Direct",e[e.RoundRobin=2]="RoundRobin"}(d||(d={})),function(e){e[e.Agent=1]="Agent",e[e.Group=2]="Group",e[e.AgentAndGroup=3]="AgentAndGroup"}(p||(p={})),function(e){e[e.Private=1]="Private",e[e.Public=2]="Public"}(h||(h={})),function(e){e.Equal="equal",e.NotEqual="not_equal",e.Greater="greater",e.Less="less",e.GreaterOrEqual="greater_or_equal",e.LessOrEqual="less_or_equal",e.IsNull="is_null",e.IsNotNull="is_not_null",e.IsEmpty="is_empty",e.IsNotEmpty="is_not_empty",e.In="in",e.NotIn="not_in",e.Contains="contains",e.NotContains="not_contains",e.BeginsWith="begins_with",e.EndsWith="ends_with",e.NotBeginsWith="not_begins_with",e.NotEndsWith="not_ends_with",e.Between="between",e.NotBetween="not_between",e.IsChanged="is_changed",e.IsPublic="is_public",e.IsPrivate="is_private",e.Businesshours="during_business_hours",e.NonBusinessHours="during_non_business_hours",e.Holidays="during_holidays",e.After="after",e.Before="before"}(m||(m={})),function(e){e.Equal="Is",e.NotEqual="Is not",e.Greater="Greater than",e.Less="Less than",e.GreaterOrEqual="Greater than equal to",e.LessOrEqual="Less than equal to",e.IsNull="Is none",e.IsNotNull="Is not none",e.IsEmpty="Is empty",e.IsNotEmpty="Is not empty",e.In="In",e.NotIn="Not in",e.Contains="Contains",e.NotContains="Does not contain",e.BeginsWith="Starts with",e.EndsWith="Ends with",e.NotBeginsWith="Not starts with",e.NotEndsWith="Not ends with",e.Between="Between",e.NotBetween="Not between",e.IsChanged="Is changed",e.IsPublic="Is Public",e.IsPrivate="Is Private",e.Businesshours="Business Hours",e.NonBusinessHours="Non-Business Hours",e.Holidays="Holidays",e.After="After",e.Before="Before"}(f||(f={})),function(e){e.TicketId="ticketId",e.BrandId="brandId",e.Subject="subject",e.Description="description",e.StatusId="statusId",e.PriorityId="priorityId",e.TypeId="typeId",e.SourceId="sourceId",e.AgentId="agentId",e.GroupId="groupId",e.ContactGroup="contactGroupId",e.CategoryId="categoryId",e.ResolutionDue="resolutionDue",e.Tags="tag",e.CCs="cc",e.IsPublicTicket="isPublicTicket",e.IsMarkedAsSpam="isMarkedAsSpam",e.RequestedBy="requesterId",e.RequesterEmail="requesterEmail",e.RequesterType="requesterType",e.RequesterCountry="requesterCountryId",e.RequesterRole="requesterRole",e.RequesterTimeZone="requesterTimezoneId",e.RequesterLanguage="requesterLanguageId",e.EventPerformerTypeId="eventPerformerTypeId",e.EventType="eventType",e.SupportTierId="supportTierId",e.HoursSinceCreated="hoursSinceCreated",e.HoursSinceResolved="hoursSinceResolved",e.HoursSinceClosed="hoursSinceClosed",e.HoursSinceReopened="hoursSinceReopened",e.HoursSinceFirstAssigned="hoursSinceFirstAssigned",e.HoursSinceAssigned="hoursSinceAssigned",e.HoursSinceRequesterResponded="hoursSinceRequesterResponded",e.HoursSinceAgentResponded="hoursSinceAgentResponded",e.HoursSinceStatusUpdated="hoursSinceStatusUpdated",e.HoursSinceDueDate="hoursSinceResolutionDue",e.HoursUntilDueDate="hoursUntilResolutionDue",e.HoursSinceModified="hoursSinceModified",e.EmailReceivedAt="emailReceivedAt",e.ResolutionDueOn="resolutionDueOn",e.HoursSinceResponseDue="hoursSinceResponseDue",e.HoursUntilResponseDue="hoursUntilResponseDue",e.Domain="contactGroupDomain"}(g||(g={})),function(e){e.Status="statusId",e.Priority="priorityId",e.Type="typeId",e.Category="categoryId",e.Subject="subject",e.Duedate="resolutiondue",e.AddTags="add_tag",e.RemoveTags="remove_tag",e.AddCcs="add_cc",e.RemoveCcs="remove_cc",e.UpdateAssignee="update_assignee",e.AddNote="add_note",e.SendUserNotification="send_user_notification",e.SendGroupNotification="send_group_notification",e.AddWatchers="add_watcher"}(v||(v={})),function(e){e[e.EventPerformer=-1]="EventPerformer",e[e.Requester=-2]="Requester",e[e.None=-3]="None",e[e.AssignedAgent=-4]="AssignedAgent",e[e.AssignedGroup=-5]="AssignedGroup",e[e.Any=-6]="Any",e[e.CalendarHours=0]="CalendarHours"}(y||(y={})),function(e){e.EventPerformer="{{CurrentUser.Id}}",e.Requester="{{Requester.Id}}",e.None="none",e.NoneAsZero="0",e.AssignedAgent="{{Agent.Id}}",e.AssignedGroup="{{Group.Id}}",e.Any="*",e.RequesterEventPerformer="1",e.AgentEventPerformer="2",e.ReplyAdded="2",e.NoteAdded="3",e.PropertyUpdated="4"}(b||(b={})),function(e){e.EventPerformer="Event performer",e.Requester="Requester",e.None="None",e.AssignedAgent="Assigned Agent",e.AssignedGroup="Assigned Group",e.Any="Any",e.AgentEventPerformer="Agent",e.RequesterEventPerformer="Requester",e.ReplyAdded="Reply Added",e.NoteAdded="Note Added",e.PropertyUpdated="Property Updated"}(C||(C={})),function(e){e.User="userId",e.Group="groupId",e.Category="categoryId",e.RequesterCountry="countryIds",e.RequesterTimeZone="timezoneIds",e.RequesterLanguage="languageIds",e.SupportTier="supporttierIds",e.Tags="includeAdditionalTags",e.IncludeAdditionalIds="includeAdditionalIds",e.BusinessHourQuery="businessHourQuery",e.IsNewStatusRequired="isNewStatusRequired",e.InclusionIds="inclusionIds",e.IncludeReadOnlyAlso="includeReadOnlyAlso"}(O||(O={})),function(e){e.Group="groupValue",e.Assignee="assigneeValue",e.AssigneeType="assigneeType",e.RTENotes="rteNotesContent",e.RTEUserNotificationContent="rteContent",e.SubjUserNotificationContent="subContent",e.AssigneeUserNotificationValue="assigneeUserEmailValue",e.RteGroupContent="rteGroupContent",e.SubjectGroupContent="subGroupContent",e.AssigneeGroupNotificationValue="assigneeGroupEmailValue",e.AddTags="add-tags",e.RemoveTags="remove-tags",e.TagsAction="tags",e.FromInActionIsChanged="from",e.ToInActionIsChanged="to"}(E||(E={})),function(e){e.Name="name",e.GroupInSetAssignee="groupId",e.AgentInUpdateAssignee="agentId",e.AssigneeTypeInUpdateAssignee="AssigneeType",e.SendNotificationBodyContent="body",e.SendNotificationSubjectContent="subject",e.IsChangedFrom="from",e.IsChangedto="to"}(S||(S={})),function(e){e.Created="Created",e.Updated="Updated",e.TimeTriggerContent="Runs every hour"}(x||(x={})),function(e){e.Active="Active",e.Inactive="Inactive"}(I||(I={})),function(e){e.Edit="0",e.Activate="1",e.Deactivate="2",e.Delete="3"}(w||(w={})),function(e){e.ViewSummary="0",e.Edit="1",e.Activate="2",e.Deactivate="3",e.Delete="4"}(N||(N={})),function(e){e.Multiselect="multiselect",e.Numeric="numeric",e.Textarea="textarea",e.Textbox="textbox",e.CheckBox="checkbox",e.Dropdown="dropdown",e.MultiselectUrlPrefix="multiselect_url_prefix",e.UrlPrefix="url_prefix",e.Regex="regex",e.Date="date",e.DateTime="datetime",e.Decimal="decimal",e.Url="url",e.RadioButton="radiobutton"}(k||(k={})),function(e){e.Yes="1",e.No="0"}(R||(R={})),function(e){e.Integer="int",e.DateTime="datetime",e.Date="date",e.Decimal="decimal",e.Long="long"}(j||(j={}));var U={BusinessHourList:M.f+"business_hours",BusinessHourDetail:M.f+"business_hours",AddBusinessHour:M.f+"business_hours",EditBusinessHour:M.f+"business_hours",DeleteBusinessHour:M.f+"business_hours",DeleteHoliday:M.f+"business_hours/holiday",BusinessWorkingDaysList:M.k+"/assets/mock.json/businessDays.json"},z=/^[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/;function X(e,t,n,l,r,i){return{create:function(e){if(e.operator===m.IsChanged){var t=document.createElement("div");return t.innerHTML='<input type="text" id="groupInput"/><span style="padding:10px">To</span><input type="text" id="asigneeInput"/>',t}return Object(T.F)("input",{attrs:{type:"text"}})},destroy:function(n){if(!Object(T.X)(n.elements)){var l=Object(T.C)(n.elements[0],".e-rule-container"),r=[].slice.call(l.parentElement.children).indexOf(l),i=t.nativeElement.querySelector("#"+n.elementId);if(i.classList.contains("e-control")){var a=i.ej2_instances[0];a.destroy(),a.element.parentElement.parentElement.parentElement.parentElement.classList.remove("e-domain")}else i.querySelectorAll(".e-control").forEach((function(e){e.ej2_instances[0].destroy()}));delete e.rule.rules[r].custom,e.rule.rules[r].value="";var o=n.elements[0].parentElement.parentElement.querySelector(".hd-info");o&&o.parentElement.remove();var s=n.elements[0].parentElement.parentElement.querySelector(".hd-toast-success");s&&s.parentElement.remove();var u=n.elements[0].parentElement.parentElement.querySelector(".hd-warning-icon");u&&u.parentElement.remove()}},write:function(t){var i=Object(T.C)(t.elements,".e-rule-container"),o=e,s=[],u=[].slice.call(i.parentElement.children).indexOf(i);e.rule.rules[u]&&(delete e.rule.rules[u][S.IsChangedFrom],delete e.rule.rules[u][S.IsChangedto]);var c=t.elements.parentElement.parentElement.querySelector(".hd-info");c&&c.parentElement.remove();var d=t.elements.parentElement.parentElement.querySelector(".hd-toast-success");d&&d.parentElement.remove();var p=t.elements.parentElement.parentElement.querySelector(".hd-warning-icon");p&&p.parentElement.remove();var h=n;if(t.operator!==m.Contains&&t.operator!==m.NotContains||l.field!==g.Tags){if(t.operator===m.IsChanged)if(t.elements.parentElement.parentElement.parentElement.classList.add("condition-update-style"),l.field===g.ResolutionDue)o.element.querySelectorAll(".e-rule-value")[u].classList.remove("e-show"),o.element.querySelectorAll(".e-rule-value")[u].classList.add("e-hide"),e.rule.rules[u].value=["true"],e.rule.rules[u][S.IsChangedFrom]="",e.rule.rules[u][S.IsChangedto]="";else{var f=new L.d({dataSource:se(l.field,l.isCustomField),cssClass:"e-is-changed-from",allowFiltering:!0,showClearButton:!1,filterBarPlaceholder:Object(D.a)("SEARCH"),popupHeight:q.g,placeholder:Object(D.a)("DROPDOWNPLACEHOLDER"),floatLabelType:"Never",popupWidth:l.field===g.AgentId?"250px":"200px",value:de(e,u,E.FromInActionIsChanged),text:pe(e,u,E.FromInActionIsChanged),fields:K(l.field),itemTemplate:J(l.field,t.operator),actionComplete:function(){var e=f.value;f.actionCompleteData={},e<=0&&(f.selectedLI=null)},change:function(){var t=f.value?f.value===y.Any?b.Any:f.value===y.None?b.NoneAsZero:f.value.toString():"";e.rule.rules[u].custom?ce(e,u,t,E.FromInActionIsChanged):ue(e,u,s,t,E.FromInActionIsChanged),e.rule.rules[u].value=["true"],e.rule.rules[u][S.IsChangedFrom]=t,l.field===g.PriorityId&&f.value>0?ae(f,x):f.value&&(x.query=(new A.g).addParams("exclusionIds",f.value))},blur:function(){f.value||ie(f)},focus:function(){re(f)},dataBound:function(n){if(0===n.items.filter((function(e){return e.id===y.Any})).length){var i=Y(l.field,r,0,0,0,t.operator);if(i){for(var a=0;a<i.length;a++)f.addItem(i[a],0);Object(H.D)(f.value)&&(f.index=0)}}f.value&&(e.rule.rules[u][S.IsChangedFrom]=e.rule.rules[u].custom?e.rule.rules[u].custom.filter((function(e){return e.key===E.FromInActionIsChanged}))[0].value:"")}});Q(l.field)?f.query=l.field===g.StatusId?(new A.g).addParams("page","1").addParams("perPage",""+q.E).addParams(O.IsNewStatusRequired,"true"):(new A.g).addParams("page","1").addParams("perPage",""+q.E):f.value&&(f.query=(new A.g).addParams($(l.field),f.value));var x=new L.d({dataSource:se(l.field,l.isCustomField),cssClass:"e-is-changed-to",allowFiltering:!0,showClearButton:!1,popupHeight:q.g,placeholder:Object(D.a)("DROPDOWNPLACEHOLDER"),floatLabelType:"Never",popupWidth:l.field===g.AgentId?"250px":"200px",value:de(e,u,E.ToInActionIsChanged),text:pe(e,u,E.ToInActionIsChanged),fields:K(l.field),itemTemplate:J(l.field,t.operator),actionComplete:function(){var e=x.value;x.actionCompleteData={},e<=0&&(x.selectedLI=null)},change:function(){var t=x.value?x.value===y.Any?b.Any:x.value===y.None?b.NoneAsZero:x.value.toString():"";e.rule.rules[u].custom?ce(e,u,t,E.ToInActionIsChanged):ue(e,u,s,t,E.ToInActionIsChanged),e.rule.rules[u][S.IsChangedto]=t,e.rule.rules[u].value=["true"],l.field===g.PriorityId&&x.value>0?ae(x,f):x.value&&(f.query=(new A.g).addParams("exclusionIds",x.value))},blur:function(){f.value||ie(f)},focus:function(){re(f)},dataBound:function(n){if(0===n.items.filter((function(e){return e.id===y.Any})).length){var i=Y(l.field,r,0,0,0,t.operator);if(i){for(var a=0;a<i.length;a++)x.addItem(i[a],0);setTimeout((function(){Object(H.D)(x.value)&&(x.index=0)}))}}x.value&&(e.rule.rules[u][S.IsChangedto]=e.rule.rules[u].custom?e.rule.rules[u].custom.filter((function(e){return e.key===E.ToInActionIsChanged}))[0].value:"")}});Q(l.field)?x.query=l.field===g.StatusId?(new A.g).addParams("page","1").addParams("perPage",""+q.E).addParams(O.IsNewStatusRequired,"true"):(new A.g).addParams("page","1").addParams("perPage",""+q.E):x.value&&(x.query=(new A.g).addParams($(l.field),x.value)),f.appendTo(e.element.querySelector("#"+t.elements.id).getElementsByTagName("input")[0]),x.appendTo(e.element.querySelector("#"+t.elements.id).getElementsByTagName("input")[1])}else if(t.operator===m.In||t.operator===m.NotIn||l.isCustomField&&l.controlName===k.Multiselect){var I,w;if(l.field===g.TicketId&&""===l.controlName||l.isCustomField&&l.controlName===k.Numeric||l.isCustomField&&l.controlName===k.MultiselectUrlPrefix){w=new B.g({autocomplete:"off",placeholder:Object(D.a)("TEXTBOXPLACEHOLDER"),value:t.values,floatLabelType:"Never",showClearButton:!1,width:"200px",change:function(){var e=w.value.toString().trim().split(",");h(o,w.element,e)},blur:function(){w.value||ie(w)},focus:function(){re(w)}});var N=document.createElement("span");N.innerHTML='<span class="hd-icon hd-info" id="content" data-title="Separate multiple values by using a comma"></span>',t.elements.parentElement.append(N),w.appendTo("#"+t.elements.id),w.value&&w.change()}else{if(l.field===g.Tags&&!l.isCustomField||l.field===g.Domain)I=new L.g({cssClass:l.field===g.Domain?"e-contact-group-domain":null,dataSource:se(l.field,l.isCustomField),showClearButton:!1,placeholder:Object(D.a)("DROPDOWNPLACEHOLDER"),allowFiltering:!0,floatLabelType:"Never",allowCustomValue:!0,popupHeight:q.g,filterBarPlaceholder:Object(D.a)("SEARCH"),popupWidth:l.field===g.Domain?"250px":"200px",locale:"customRecordsTemplate",fields:l.field===g.Tags?q.r:null,itemTemplate:J(l.field,t.operator),mode:"Box",showDropDownIcon:l.field!==g.Domain,value:de(e,u,E.TagsAction),change:function(){var t=I.text.split(",");h(o,I.element,t),ue(e,u,s,t,E.TagsAction)},blur:function(){l.field===g.Domain&&I.value&&ge(t,I),I.value||ie(I)},focus:function(){if(l.field===g.Domain){var e=t.elements.parentElement.parentElement.parentElement.parentElement.querySelector(".invalid-error");e&&e.parentElement.remove()}re(I)},tagging:function(){l.field===g.Domain&&I.value&&ge(t,I)},removed:function(){l.field===g.Domain&&I.value&&ge(t,I)},created:function(){l.field===g.Domain&&I.element.parentElement.parentElement.parentElement.parentElement.classList.add("e-domain")}});else{var j=!1,P=te(t.values,l.field,t.operator);I=new L.g({dataSource:se(l.field,l.isCustomField),allowFiltering:!0,showClearButton:!1,popupHeight:q.g,popupWidth:l.field===g.AgentId||l.field===g.RequestedBy||l.field===g.CCs||l.field===v.AddCcs||l.field===v.RemoveCcs?"250px":"200px",filterBarPlaceholder:Object(D.a)("SEARCH"),placeholder:Object(D.a)("DROPDOWNPLACEHOLDER"),value:te(t.values,l.field,t.operator),floatLabelType:"Never",mode:"CheckBox",showDropDownIcon:!0,fields:K(l.field),itemTemplate:J(l.field,t.operator),change:function(){for(var e=I.value.map(String),t=0;t<e.length;t++)e[t]===y.EventPerformer.toString()?e[t]=b.EventPerformer:e[t]===y.None.toString()&&(e[t]=b.NoneAsZero);h(o,I.element,e)},dataBound:function(){I.requestCount?++I.requestCount:I.requestCount=1,j=oe(l.field,j,I,r),1===I.requestCount&&P&&P.length>0&&(I.value=P,I.dataBind()),I.value&&I.change()},blur:function(){I.value||ie(I)},focus:function(){re(I)}})}Q(l.field)?I.query=l.field===g.StatusId?(new A.g).addParams("page","1").addParams("perPage",""+q.E).addParams(O.IsNewStatusRequired,"true"):(new A.g).addParams("page","1").addParams("perPage",""+q.E):I.value&&(I.query=(new A.g).addParams($(l.field),I.value.join())),I.appendTo("#"+t.elements.id)}}else if(l.field===g.TicketId||!0===l.isHourBasedField||l.isCustomField&&l.controlName===k.Numeric||l.isCustomField&&l.controlName===k.Decimal){var M=new B.e({placeholder:Object(D.a)("NUMERICBOXPLACEHOLDER"),value:null===t.values?null:+t.values,floatLabelType:"Never",showClearButton:!1,width:"200px",min:0,format:l.controlName===k.Decimal?"###.##":"###",decimals:l.controlName===k.Decimal?2:0,validateDecimalOnType:!0,change:function(){var e=M.value?M.value.toString():null;h(o,M.element,[e])},blur:function(){M.value||ie(M)},focus:function(){re(M)}});M.appendTo("#"+t.elements.id),M.value&&M.change()}else if(l.field===g.Subject||l.field===g.Description||l.field===g.RequesterEmail||l.field===g.EmailReceivedAt||l.isCustomField&&l.controlName===k.Textbox||l.isCustomField&&l.controlName===k.Textarea||l.isCustomField&&l.controlName===k.MultiselectUrlPrefix||l.isCustomField&&l.controlName===k.UrlPrefix||l.isCustomField&&l.controlName===k.Regex||l.isCustomField&&l.controlName===k.Url){var _=new B.g({autocomplete:"off",placeholder:Object(D.a)("TEXTBOXPLACEHOLDER"),value:t.values,floatLabelType:"Never",showClearButton:!1,width:"200px",multiline:l.controlName===k.Textarea,change:function(){var e=_.value.toString().trim();h(o,_.element,[e])},blur:function(){_.value||ie(_)},focus:function(){re(_)}});_.appendTo("#"+t.elements.id),_.value&&_.change()}else if(l.field===g.ResolutionDue||l.field===g.ResolutionDueOn||l.isCustomField&&l.controlName===k.DateTime||t.operator===m.After||t.operator===m.Before){var G=new V.d({placeholder:Object(D.a)("DATETIMEPICKERPLACEHOLDER"),floatLabelType:"Never",showClearButton:!1,width:"200px",allowEdit:!0,value:t.values?Array.isArray(t.values)?Object(H.u)(t.values[0]):Object(H.u)(t.values):null,change:function(){h(o,G.element,[Object(H.n)(G.value.toString())])},blur:function(){G.value||ie(G)},focus:function(){re(G)}});G.appendTo("#"+t.elements.id)}else if(l.isCustomField&&l.controlName===k.Date){var W=new V.b({placeholder:Object(D.a)("DATETIMEPICKERPLACEHOLDER"),floatLabelType:"Never",showClearButton:!1,width:"200px",allowEdit:!0,value:t.values?Array.isArray(t.values)?Object(H.u)(t.values[0]):Object(H.u)(t.values):null,change:function(){h(o,W.element,[Object(H.F)(W.value.toString())])},blur:function(){W.value||ie(W)},focus:function(){re(W)}});W.appendTo("#"+t.elements.id)}else if(l.field===g.EventPerformerTypeId){var z=new L.d({dataSource:le(l.field),fields:{value:"value",text:"text"},allowFiltering:!0,showClearButton:!1,filterBarPlaceholder:Object(D.a)("SEARCH"),popupHeight:q.g,floatLabelType:"Never",placeholder:Object(D.a)("DROPDOWNPLACEHOLDER"),value:Array.isArray(t.values)?t.values[0]:t.values,change:function(){h(o,z.element,[z.value])},blur:function(){z.value||ie(z)},focus:function(){re(z)}});z.appendTo("#"+t.elements.id),z.value&&z.change()}else if(l.field===g.EventType){var X=new L.d({dataSource:le(l.field),fields:{value:"value",text:"text"},allowFiltering:!0,showClearButton:!1,filterBarPlaceholder:Object(D.a)("SEARCH"),popupHeight:q.g,floatLabelType:"Never",placeholder:Object(D.a)("DROPDOWNPLACEHOLDER"),value:Array.isArray(t.values)?t.values[0]:t.values,change:function(){h(o,X.element,[X.value])},blur:function(){X.value||ie(X)},focus:function(){re(X)}});X.appendTo("#"+t.elements.id),X.value&&X.change()}else if(t.operator===m.IsPublic||t.operator===m.IsPrivate)o.element.querySelectorAll(".e-rule-value")[u].classList.remove("e-show"),o.element.querySelectorAll(".e-rule-value")[u].classList.add("e-hide"),e.rule.rules[u].value=[""];else if(t.operator===m.Businesshours||t.operator===m.NonBusinessHours||t.operator===m.Holidays){var Z=new L.d({dataSource:new A.a({url:U.BusinessHourList,adaptor:new F.a}),fields:{text:"name",value:"id"},allowFiltering:!0,showClearButton:!1,popupHeight:q.g,filterBarPlaceholder:Object(D.a)("SEARCH"),floatLabelType:"Never",placeholder:Object(D.a)("DROPDOWNPLACEHOLDER"),value:te(t.values,l.field,t.operator),change:function(){h(o,Z.element,[Z.value.toString()])},dataBound:function(){Z.value&&Z.change()},blur:function(){Z.value||l.controlName===k.CheckBox||l.controlName===k.RadioButton?l.controlName!==k.CheckBox&&l.controlName!==k.RadioButton||null===Z.value&&ie(Z):ie(Z)},focus:function(){re(Z)}});Q(l.field)?Z.query=(new A.g).addParams("page","1").addParams("perPage",""+q.E):Z.value&&(Z.query=(new A.g).addParams($(l.field,l.isCustomField),Z.value)),Z.appendTo("#"+t.elements.id)}else if(!l.controlName||""===l.controlName||l.isCustomField&&l.controlName===k.Dropdown||l.isCustomField&&l.controlName===k.CheckBox||l.isCustomField&&l.controlName===k.RadioButton){var ee=!1,ne=new L.d({dataSource:se(l.field,l.isCustomField,l.controlName),allowFiltering:!0,showClearButton:!1,popupHeight:q.g,popupWidth:l.field===g.AgentId||l.field===g.RequestedBy||l.field===g.CCs||l.field===v.AddCcs||l.field===v.RemoveCcs?"250px":"200px",filterBarPlaceholder:Object(D.a)("SEARCH"),floatLabelType:"Never",placeholder:Object(D.a)("DROPDOWNPLACEHOLDER"),value:te(t.values,l.field,t.operator),fields:K(l.field),itemTemplate:J(l.field,t.operator),change:function(){var e=ne.itemData;if(e&&(ne.value=e.displayName===C.None||e.groupName===C.None||e.name===C.None?b.None:e.displayName===C.EventPerformer||e.groupName===C.EventPerformer?b.EventPerformer:ne.itemData.userId?ne.itemData.userId:ne.itemData.groupID?ne.itemData.groupID:ne.value.toString()),l.isCustomField&&l.controlName===k.CheckBox||l.isCustomField&&l.controlName===k.RadioButton){var t=ne.value.toString()===R.Yes;h(o,ne.element,[t])}else h(o,ne.element,[ne.value.toString()])},dataBound:function(){ee=oe(l.field,ee,ne,r),ne.value!==y.None&&ne.value!==y.EventPerformer||(ne.text=ne.value===y.None?C.None:ne.value===y.EventPerformer?C.EventPerformer:ne.text),ne.value&&ne.change()},blur:function(){ne.value||l.controlName===k.CheckBox||l.controlName===k.RadioButton?l.controlName!==k.CheckBox&&l.controlName!==k.RadioButton||null===ne.value&&ie(ne):ie(ne)},focus:function(){re(ne)}});if(Q(l.field)?ne.query=l.field===g.StatusId?r===a.TimeTriggerAutomation?(new A.g).addParams("page","1").addParams("perPage",""+q.E).addParams(O.IsNewStatusRequired,"true").addParams("exclusionIds","5"):(new A.g).addParams("page","1").addParams("perPage",""+q.E).addParams(O.IsNewStatusRequired,"true"):(new A.g).addParams("page","1").addParams("perPage",""+q.E):ne.value&&(ne.query=(new A.g).addParams($(l.field,l.isCustomField),ne.value)),!ne.value){var he=Y(l.field,r);he&&(he.filter((function(e){return"None"===e.name})).length||he.filter((function(e){return"None"===e.groupName})).length||he.filter((function(e){return"None"===e.displayName})))}ne.appendTo("#"+t.elements.id),l.field===g.PriorityId&&ne.value&&setTimeout((function(){ne.change()}))}}else{var me=new L.g({dataSource:se(l.field,l.isCustomField),placeholder:Object(D.a)("DROPDOWNPLACEHOLDER"),allowFiltering:!0,showClearButton:!1,floatLabelType:"Never",allowCustomValue:!0,popupHeight:q.g,locale:"customRecordsTemplate",filterBarPlaceholder:Object(D.a)("SEARCH"),fields:K(l.field),itemTemplate:J(l.field,t.operator),mode:"Box",showDropDownIcon:!0,value:de(e,u,E.TagsAction),change:function(){var t=me.text.split(",");h(o,me.element,t),ue(e,u,s,t,E.TagsAction)},blur:function(){me.value||ie(me)},focus:function(){re(me)}});me.appendTo("#"+t.elements.id)}}}}function Q(e){return-1!==["statusId","status","TypeId","type","BrandId","SourceId","RequesterRole"].indexOf(e)}function $(e,t){return e===g.AgentId||e===g.CCs||e===g.RequestedBy?O.User:e===g.GroupId?O.Group:e===g.CategoryId?O.Category:e===g.RequesterCountry?O.RequesterCountry:e===g.RequesterTimeZone?O.RequesterTimeZone:e===g.RequesterLanguage?O.RequesterLanguage:e===g.SupportTierId?O.SupportTier:e===g.Tags?O.Tags:t?O.InclusionIds:O.IncludeAdditionalIds}function Z(e){switch(e){case g.BrandId:return M.a.Brand;case g.StatusId:case v.Status:return P.a.Status;case g.SourceId:return P.a.SourceCollection;case g.TypeId:case v.Type:return P.a.Type;case g.AgentId:return P.a.Assignee;case g.CCs:return P.a.Requester;case g.GroupId:return P.a.Group;case g.CategoryId:case v.Category:return P.a.Category;case g.Tags:case v.AddTags:case v.RemoveTags:return P.a.Tags;case g.ContactGroup:return P.a.ContactGroups;case g.RequestedBy:case v.AddCcs:case v.RemoveCcs:return P.a.Requester;case g.RequesterLanguage:return G.a.Language;case g.RequesterCountry:return G.a.Country;case g.RequesterTimeZone:return G.a.TimeZone;case g.RequesterRole:return _.a.RoleList;case g.SupportTierId:return G.a.SupportTier;case v.AddWatchers:return P.a.Assignee}}function K(e){return e===g.BrandId?{value:"value",text:"text"}:e===g.AgentId||e===g.RequestedBy||e===g.CCs||e===v.AddCcs||e===v.RemoveCcs||e===v.AddWatchers?{value:"userId",text:"displayName"}:e===g.GroupId?{value:"groupID",text:"groupName"}:e===g.RequesterTimeZone?{value:"id",text:"description"}:e===g.RequesterRole?{value:"roleId",text:"roleName"}:q.r}function Y(e,t,n,l,r,i){return i===m.IsChanged?e===g.AgentId||e===g.RequestedBy?[{userId:y.Any,displayName:C.Any,shortCode:"AN",colorCode:"#0450cc",emailId:""}]:e===g.GroupId?[{groupID:y.Any,groupName:C.Any}]:[{id:y.Any,name:C.Any}]:e===g.AgentId&&t!==a.TimeTriggerAutomation&&!Object(H.D)(t)||e===g.RequestedBy&&t!==a.TimeTriggerAutomation&&t!==a.AutoAssignmentAutomation&&!Object(H.D)(t)?[{displayName:C.EventPerformer,userId:y.EventPerformer,shortCode:"EP",colorCode:"#0450cc",emailId:""}]:""}function J(e,t){return t===m.In||t===m.NotIn||e===v.AddCcs||e===v.RemoveCcs||e===v.AddWatchers?e===g.AgentId||e===g.RequestedBy||e===g.CCs||e===v.AddCcs||e===v.RemoveCcs||e===v.AddWatchers?'<span style="display:inline-flex;width:calc(100% - 36px)"><div class="flex-horizontal ellipsis no-wrap" style = "padding:5px;padding-right:0px"><div class="wrapper flex-horizontal" style="width:100%"><div class="flex-vertical ellipsis no-wrap" style="text-indent: initial"><span class="e-text">${displayName}</span><span class="e-text"><span class="font-12">${emailId}</span></span></div></div></div></span>':e===g.Tags||e===v.AddTags||e===v.RemoveTags?'<div style="width:100%;height:100%;">${if(id === name)} ${hdTagFieldCustom(name)} - (New) ${else} ${name} ${/if}</div>':"":e===g.AgentId||e===g.RequestedBy||e===g.CCs||e===v.AddCcs||e===v.RemoveCcs||e===v.AddWatchers?'<span style="display:inline-flex;width:calc(100% - 36px)"><div class="flex-horizontal ellipsis no-wrap" style = "padding:5px;padding-right:0px"><div class="wrapper flex-horizontal" style="width:100%"><div class="flex-vertical ellipsis no-wrap" style="text-indent:initial"><span class="e-text">${displayName}</span><span class="e-text"><span class="font-12">${emailId}</span></span></div></div></div></span>':e===g.Tags||e===v.AddTags||e===v.RemoveTags?'<div style="width:100%;height:100%;">${if(id === name)} ${hdTagFieldCustom(name)} - (New) ${else} ${name} ${/if}</div>':""}function ee(e){switch(e){case 1:return{key:f.Equal,value:m.Equal};case 2:return{key:f.NotEqual,value:m.NotEqual};case 3:return{key:f.Greater,value:m.Greater};case 4:return{key:f.Less,value:m.Less};case 5:return{key:f.GreaterOrEqual,value:m.GreaterOrEqual};case 6:return{key:f.LessOrEqual,value:m.LessOrEqual};case 7:return{key:f.IsNull,value:m.IsNull};case 8:return{key:f.IsNotNull,value:m.IsNotNull};case 9:return{key:f.IsEmpty,value:m.IsEmpty};case 10:return{key:f.IsNotEmpty,value:m.IsNotEmpty};case 11:return{key:f.In,value:m.In};case 12:return{key:f.NotIn,value:m.NotIn};case 13:return{key:f.Contains,value:m.Contains};case 14:return{key:f.NotContains,value:m.NotContains};case 15:return{key:f.BeginsWith,value:m.BeginsWith};case 16:return{key:f.EndsWith,value:m.EndsWith};case 17:return{key:f.NotBeginsWith,value:m.NotBeginsWith};case 18:return{key:f.NotEndsWith,value:m.NotEndsWith};case 19:return{key:f.Between,value:m.Between};case 20:return{key:f.NotBetween,value:m.NotBetween};case 21:return{key:f.IsChanged,value:m.IsChanged};case 22:return{key:f.IsPublic,value:m.IsPublic};case 23:return{key:f.IsPrivate,value:m.IsPrivate};case 24:return{key:f.Businesshours,value:m.Businesshours};case 25:return{key:f.NonBusinessHours,value:m.NonBusinessHours};case 26:return{key:f.Holidays,value:m.Holidays};case 27:return{key:f.After,value:m.After};case 28:return{key:f.Before,value:m.Before};default:return{key:""+e,value:""+e}}}function te(e,t,n,l,r){if(Object(H.D)(e))return null;if(n===m.In||n===m.NotIn){if(Array.isArray(e)){for(var i=0;i<e.length;i++)e[i]===b.EventPerformer?e[i]=y.EventPerformer.toString():e[i]===b.NoneAsZero&&(e[i]=y.None.toString());return e.map(Number)}return null}if(t===g.BrandId||t===v.AddCcs||t===v.RemoveCcs||t===v.AddWatchers||r){if(t===v.AddCcs||t===v.RemoveCcs||t===v.AddWatchers)return e?e.split(","):e;if(l===k.Multiselect&&r){if(e){for(var a=e.split(","),o=0;o<a.length;o++)a[o]===b.NoneAsZero&&(a[o]=y.None.toString());return a.map(Number)}return e}return Array.isArray(e)?e[0]:e}return Array.isArray(e)?e[0]===b.None?y.None:e[0]===b.EventPerformer?y.EventPerformer:+e[0]:e===b.None?y.None:e===b.EventPerformer?y.EventPerformer:+e}function ne(e,t){for(var n=e.element.querySelectorAll(".e-rule-value:not(.e-hide) .e-dropdownlist, .e-rule-value:not(.e-hide) .e-textbox, .e-rule-value:not(.e-hide) .e-numerictextbox, .e-rule-value:not(.e-hide) .e-multiselect .e-control, .e-rule-value:not(.e-hide) .e-datepicker"),l=t.element.querySelectorAll(".e-rule-value:not(.e-hide) .e-dropdownlist, .e-rule-value:not(.e-hide) .e-textbox, .e-rule-value:not(.e-hide) .e-numerictextbox, .e-rule-value:not(.e-hide) .e-multiselect .e-control, .e-rule-value:not(.e-hide) .e-datepicker"),r=0;r<n.length;r++)n[r].ej2_instances[0].blur();for(var i=0;i<l.length;i++)l[i].ej2_instances[0].blur()}function le(e){switch(e){case g.EventType:return[{value:b.ReplyAdded,text:C.ReplyAdded},{value:b.NoteAdded,text:C.NoteAdded},{value:b.PropertyUpdated,text:C.PropertyUpdated}];case g.EventPerformerTypeId:return[{value:b.AgentEventPerformer,text:C.AgentEventPerformer},{value:b.RequesterEventPerformer,text:C.RequesterEventPerformer}]}}function re(e){e.element.parentElement.classList.contains("e-control-wrapper")?e.element.parentElement.classList.remove("e-error"):e.element.parentElement.parentElement.parentElement.classList.remove("e-error")}function ie(e){e.element.parentElement.classList.contains("e-control-wrapper")?e.value&&!Object(H.D)(e.value)||e.element.parentElement.classList.add("e-error"):e.value&&0!==e.value.length||e.element.parentElement.parentElement.parentElement.classList.add("e-error")}function ae(e,t){var n=[];W.forEach((function(e){n.push(e)})),-1!==n.findIndex((function(t){return t.id===e.value}))&&n.splice(n.findIndex((function(t){return t.id===e.value})),1);var l=[];n.forEach((function(t){-1===n.findIndex((function(t){return t.id===e.value}))&&l.push(t)})),t.dataSource=l,t.dataBind()}function oe(e,t,n,l,r,i,a,o){var s=Y(e,l);if(!t&&s){for(var u=0;u<s.length;u++)n.addItem(s[u],0);t=!0}return t}function se(e,t,n){var l;if(e===g.PriorityId||e===v.Priority)l=W;else if(t||e===g.Domain)if(t&&n===k.CheckBox||t&&n===k.RadioButton)l=[{id:1,name:"Yes"},{id:0,name:"No"}];else if(t&&e.startsWith(q.m))l=new A.a({url:P.a.AutomationCustomFields+e+"/options",adaptor:new F.a});else if(t&&!e.startsWith(q.m)){var r=e.split("_").slice(1).join("_");l=new A.a({url:P.a.AutomationCustomFields+r+"/options",adaptor:new F.a})}else l=e===g.Tags?new A.a({url:Z(e),adaptor:new F.a}):[];else l=new A.a({url:Z(e),adaptor:new F.a});return l}function ue(e,t,n,l,r){n.filter((function(e){return e.key===r}))[0]?n.filter((function(e){return e.key===r}))[0].value=l:n.push({key:r,value:l}),e.rule.rules[t].custom=n}function ce(e,t,n,l){e.rule.rules[t].custom.filter((function(e){return e.key===l}))[0]?e.rule.rules[t].custom.filter((function(e){return e.key===l}))[0].value=n:e.rule.rules[t].custom.push({key:l,value:n})}function de(e,t,n){var l,r=e.rule.rules[t].custom;return r&&(l=r.filter((function(e){return e.key===n}))[0].value||""),l?n===E.TagsAction?l:l===b.Any?y.Any:l===b.NoneAsZero?y.None:+l:""}function pe(e,t,n){var l,r=e.rule.rules[t].custom;return r&&(l=r.filter((function(e){return e.key===n}))[0].value||""),l?l===b.Any?C.Any:l===b.NoneAsZero?C.None:"":""}function he(e,t){var n=e.filter((function(e){return e.key===t}))[0];return n?n.value:null}function me(e,t){return e!==y.None&&e.toString()!==y.None.toString()||t===v.UpdateAssignee?e!==y.None&&e.toString()!==y.None.toString()||t!==v.UpdateAssignee?e===y.EventPerformer?b.EventPerformer:e===y.Requester?b.Requester:e===y.AssignedAgent?b.AssignedAgent:e:b.None:b.NoneAsZero}function fe(e,t){var n=new RegExp(t);return!Object(T.X)(e)&&n.test(e)}function ge(e,t){var n=e.elements.parentElement.parentElement.parentElement.parentElement.querySelector(".invalid-error");if(function(e,t){var n=new RegExp(t);if(!Object(T.X)(e)){for(var l=0;l<e.length;l++)if(!n.test(e[l]))return!1;return!0}}(t.value,z))t.element.parentElement.parentElement.parentElement.classList.remove("e-error"),n&&n.parentElement.remove();else if(!n){t.element.parentElement.parentElement.parentElement.classList.add("e-error");var l=document.createElement("div");l.innerHTML="<span class='error invalid-error'>".concat(Object(D.a)("INVALIDREGEX"),"</span>"),e.elements.parentElement.parentElement.parentElement.parentElement.append(l)}}new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/),new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/),L.g.Inject(L.b)},"64zv":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var l,r,i,a=n("58Y9"),s=n("fXoL"),c=n("qZph"),d=n("ofXK"),p=((i=function(){function e(){o(this,e)}return u(e,[{key:"transform",value:function(e,t){if(e){var n=Object(a.t)(!0),l=Object(a.u)(e,!1),r=Math.floor((+n-+l)/1e3),i=Math.floor(r/60);if(i<1)return"1 min ago";var o,s={day:1440,hour:60,min:1};for(var u in s){if((o=Math.floor(i/s[u]))>0&&t)return 1===o?o+" "+u+" ago":o+" "+u+"s ago";if(o>0&&!t)return 1===o?o+" "+u+" ago":o<=7||"day"!==u?o+" "+u+"s ago":e}}return e}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=s.Mb({name:"dateAgo",type:i,pure:!0}),i),h=((r=function(){function e(){o(this,e)}return u(e,[{key:"transform",value:function(e){if(e){var t=Object(a.t)(!0),n=Object(a.u)(e,!1),l=Math.floor((+t-+n)/1e3);if(Math.floor(l/60)<1)return"1 min ago";var r,i={day:86400,hour:3600,minute:60,second:1};for(var o in i)if((r=Math.floor(l/i[o]))>0)return 1===r?r+" "+o:r+" "+o+"s"}return e}}]),e}()).\u0275fac=function(e){return new(e||r)},r.\u0275pipe=s.Mb({name:"dateDays",type:r,pure:!0}),r),m=((l=function e(){o(this,e),this.format="MMM dd, yyyy hh:mm a",this.date=new Date,this.timeZoneWithUTC=Object(a.K)()}).\u0275fac=function(e){return new(e||l)},l.\u0275cmp=s.Hb({type:l,selectors:[["app-date-time"]],inputs:{timezone:"timezone",format:"format",tooltipPrefix:"tooltipPrefix",prefixString:"prefixString",suffixString:"suffixString",date:"date",enableAgo:"enableAgo",enableDays:"enableDays",enableOnlyAgo:"enableOnlyAgo"},decls:11,vars:34,consts:[["data-non-elliptical","true"]],template:function(e,t){1&e&&(s.Tb(0,"span",0),s.hc(1,"dateTimeUTC"),s.hc(2,"date"),s.Lc(3),s.hc(4,"dateAgo"),s.hc(5,"date"),s.hc(6,"dateAgo"),s.hc(7,"date"),s.hc(8,"dateDays"),s.hc(9,"date"),s.hc(10,"date"),s.Sb()),2&e&&(s.Ab("data-title","",t.tooltipPrefix," ",s.ic(1,5,s.kc(2,7,t.date,t.format,t.timezone)),""),s.xb(3),s.Pc(" ",t.prefixString," ",t.enableAgo&&!t.enableOnlyAgo?s.ic(4,11,s.kc(5,13,t.date,t.format,t.timezone)):t.enableAgo&&t.enableOnlyAgo?s.jc(6,17,s.kc(7,20,t.date,t.format,t.timezone),!0):t.enableDays?s.ic(8,24,s.kc(9,26,t.date,t.format,t.timezone)):s.kc(10,30,t.date,t.format,t.timezone)," ",t.suffixString," "))},pipes:[c.a,d.d,p,h],styles:[""]}),l)},"N/Vq":function(n,r,s){"use strict";s.d(r,"a",(function(){return L})),s.d(r,"b",(function(){return P})),s.d(r,"d",(function(){return G})),s.d(r,"c",(function(){return F}));var c,d,p,h,m,f,g,v=s("fXoL"),y=s("k5hD"),b=s("4SUy"),C=s("TF3C"),O=s("OyPL"),E=s("H552"),S=s("ngVE"),x=s("gnsf"),I=s("n6zm"),w=s("Naoh"),N=function(e,t,n,l){var r,i=arguments.length,a=i<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,l);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},k=(d=function(e){t(r,e);var n=l(r);function r(){return o(this,r),n.apply(this,arguments)}return r}(b.e),N([Object(b.s)(null)],d.prototype,"condition",void 0),N([Object(b.f)([],d)],d.prototype,"rules",void 0),N([Object(b.s)(null)],d.prototype,"field",void 0),N([Object(b.s)(null)],d.prototype,"label",void 0),N([Object(b.s)(null)],d.prototype,"type",void 0),N([Object(b.s)(null)],d.prototype,"operator",void 0),N([Object(b.s)(null)],d.prototype,"value",void 0),N([Object(b.s)(!1)],d.prototype,"not",void 0),d),R=(c=function(n){t(i,n);var r=l(i);function i(e,t){var n;return o(this,i),(n=r.call(this,e,t)).isReadonly=!0,n.fields={text:"label",value:"field"},n.updatedRule={not:!1,condition:"and"},n.isLocale=!1,n.isRefreshed=!1,O.g.Inject(O.b),n}return u(i,[{key:"getPersistData",value:function(){return this.addOnPersist(["rule"])}},{key:"reset",value:function(){this.isImportRules=!1;var e=this.element.querySelector(".e-group-body");e.innerHTML="",this.enableNotCondition&&Object(b.ib)(this.element.querySelectorAll(".e-qb-toggle"),"e-active-toggle"),e.appendChild(this.createElement("div",{attrs:{class:"e-rule-list"}})),this.levelColl[this.element.id+"_group0"]=[0],this.rule={condition:"and",not:!1,rules:[]},this.disableRuleCondition(e.parentElement)}},{key:"getWrapper",value:function(){return this.element}},{key:"getModuleName",value:function(){return"query-builder"}},{key:"initialize",value:function(){if(this.dataColl.length){var e,t,n=Object.keys(this.dataColl[0]),l=[],r=[],i=!1,a=!1,o={isRequired:!0,min:0,max:Number.MAX_VALUE};if(this.columns.length){this.columnSort();for(var s=this.columns,u=0,c=s.length;u<c;u++)this.updateCustomOperator(s[u]),s[u].type||(n.indexOf(s[u].field)>-1&&("string"==(e=typeof(t=this.dataColl[0][s[u].field]))?a=!isNaN(Date.parse(t)):"object"===e&&(a=t instanceof Date&&!isNaN(t.getTime()),e="string"),s[u].type=e,a=!1),e="string"),s[u].validation||(s[u].validation=o),s[u].category?i=!0:s[u].category=this.l10n.getConstant("OtherFields"),r.indexOf(s[u].category)<0&&r.push(s[u].category),s[u].operators&&!this.isLocale||(s[u].operators=this.customOperators[s[u].type+"Operator"]);i&&(r.length>1||r[0]!==this.l10n.getConstant("OtherFields"))&&(this.fields={text:"label",value:"field",groupBy:"category"})}else{for(var d=0,p=n.length;d<p;d++)"string"==(e=typeof(t=this.dataColl[0][n[d]]))?a=!isNaN(Date.parse(t)):"object"===e&&(a=t instanceof Date&&!isNaN(t.getTime()),e="string"),l[d]={field:n[d],label:n[d],type:a?"date":e,validation:o},a=!1,l[d].operators=this.customOperators[l[d].type+"Operator"];this.columns=l}}else if(this.columns.length)for(var h=this.columns,m=0,f=h.length;m<f;m++)h[m].category?this.fields={text:"label",value:"field",groupBy:"category"}:h[m].category=this.l10n.getConstant("OtherFields"),this.updateCustomOperator(h[m]),h[m].operators&&!this.isLocale||(h[m].operators=this.customOperators[h[m].type+"Operator"])}},{key:"updateCustomOperator",value:function(e){var t=this;if(e.operators)for(var n=0;n<e.operators.length;n++){var l=Object.keys(e.operators[n]).indexOf("sqlOperator");l>-1&&function(){var r=e.operators[n],i=Object.keys(r),a=i.map((function(e){return r[e]})).join(",").split(","),o=i.indexOf("value");t.operators[a[o]]=a[l]}()}}},{key:"focusEventHandler",value:function(e){this.target=e.target}},{key:"clickEventHandler",value:function(e){var t,n,l=this,r=e.target;if(this.isImportRules=!1,"SPAN"===r.tagName&&(r=r.parentElement),r.className.indexOf("e-collapse-rule")>-1){var i=new b.b({duration:1e3,delay:0});this.element.querySelectorAll(".e-summary-content").length<1&&this.renderSummary();var a=document.getElementById(this.element.id+"_summary_content"),o=a.querySelector(".e-summary-text");i.animate(".e-query-builder",{name:"SlideLeftIn"}),this.element.querySelector(".e-group-container").style.display="none",o.textContent=this.getSqlFromRules(this.rule),a.style.display="block",o.style.height=o.scrollHeight+"px"}if("BUTTON"===r.tagName&&r.className.indexOf("e-qb-toggle")<0){if(r.className.indexOf("e-removerule")>-1)this.actionButton=r,this.deleteRule(r);else if(r.className.indexOf("e-deletegroup")>-1)this.actionButton=r,this.deleteGroup(Object(b.C)(r,".e-group-container"));else if(r.className.indexOf("e-edit-rule")>-1)if(new b.b({duration:1e3,delay:0}).animate(".e-query-builder",{name:"SlideLeftIn"}),document.getElementById(this.element.id+"_summary_content").style.display="none",this.element.querySelectorAll(".e-group-container").length<1){this.addGroupElement(!1,this.element,this.rule.condition);var s=Object(b.K)({},this.rule,{},!0);this.setGroupRules(s),this.renderSummaryCollapse()}else{var u=this.element.querySelector(".e-group-container");u.querySelectorAll(".e-collapse-rule").length<1&&this.renderSummaryCollapse(),u.style.display="block"}}else if("LABEL"===r.tagName&&r.parentElement.className.indexOf("e-btn-group")>-1||r.className.indexOf("e-qb-toggle")>-1){var c,d=Object(b.C)(r,".e-group-container"),p=r.getAttribute("for");p&&(c=document.getElementById(p).getAttribute("value")),n=d.id.replace(this.element.id+"_","");var h,m=this.getGroup(n);if(this.enableNotCondition)if(r.className.indexOf("e-qb-toggle")>-1){var f=d.getElementsByClassName("e-qb-toggle")[0];f.className.indexOf("e-active-toggle")>-1?(Object(b.ib)([f],"e-active-toggle"),h=!1):(Object(b.v)([f],"e-active-toggle"),h=!0),c=m.condition}else h=m.not;t={groupID:n,cancel:!1,type:"condition",value:c.toLowerCase()},this.enableNotCondition&&(t={groupID:n,cancel:!1,type:"condition",value:c.toLowerCase(),not:h}),this.isImportRules?this.beforeSuccessCallBack(t,r):this.trigger("beforeChange",t,(function(e){l.beforeSuccessCallBack(e,r)}))}this.target=r}},{key:"beforeSuccessCallBack",value:function(e,t){if(!e.cancel){var n=Object(b.C)(t,".e-group-container"),l=n.id.replace(this.element.id+"_",""),r=this.getValidRules(this.rule),i=this.getParentGroup(n);i.condition=e.value,this.enableNotCondition&&(i.not=e.not),this.isImportRules||this.trigger("change",{groupID:l,type:"condition",value:i.condition}),this.filterRules(r,this.getValidRules(this.rule),"condition")}}},{key:"selectBtn",value:function(e,t){"beforeOpen"===t.name?this.showButtons.groupInsert?Object(b.ib)([t.element.querySelector("li span.e-addgroup").parentElement],"e-button-hide"):Object(b.v)([t.element.querySelector("li span.e-addgroup").parentElement],"e-button-hide"):t.element.children[0].className.indexOf("e-addrule")>-1?this.addRuleElement(Object(b.C)(e,".e-group-container"),{}):t.element.children[0].className.indexOf("e-addgroup")>-1&&this.addGroupElement(!0,Object(b.C)(e,".e-group-container"),"",!0)}},{key:"appendRuleElem",value:function(e,t,n,l,r,i){var a,o,s,u=e.querySelector(".e-rule-list");if("change"===n?a=Object(b.lb)("#"+l,e):((a=this.createElement("div",{attrs:{class:"e-rule-container"}})).setAttribute("id",e.id+"_rule"+this.ruleIdCounter),u.appendChild(a),this.ruleIdCounter++),t&&t.ruleTemplate){s={requestType:"template-initialize",ruleID:a.id,action:r,fields:this.fields,rule:i},this.trigger("actionBegin",s),this.ruleTemplateFn=this.templateParser(t.ruleTemplate);var c=this.element.id+t.field;s.fields=this.fields,s.columns=this.columns,s.operators=this.getOperators(i.field),s.operatorFields={text:"key",value:"value"},(o=this.ruleTemplateFn(s,this,this.isReact||this.isAngular?a.id:"Template",c)[0]).className+=" e-rule-field"}else o=this.ruleElem.querySelector(".e-rule-field").cloneNode(!0);return a.appendChild(o),t&&t.ruleTemplate&&this.renderReactTemplates(),a}},{key:"addRuleElement",value:function(e,t,n,l,r,i){var a=this;if(e){var o={groupID:e.id.replace(this.element.id+"_",""),cancel:!1,type:"insertRule"};this.isImportRules||this.isInitialLoad?(this.isInitialLoad=!1,this.addRuleSuccessCallBack(o,e,t,n,l,r,i)):this.trigger("beforeChange",o,(function(o){a.addRuleSuccessCallBack(o,e,t,n,l,r,i)}))}}},{key:"addRuleSuccessCallBack",value:function(e,t,n,l,r,i,a){var o,s,u,c,d=this.element.className.indexOf("e-device")>-1?"250px":"200px",p=n&&n.field?this.getColumn(n.field):l||this.columns[0],h={label:"",field:"",type:"",operator:""};if(!e.cancel){if(p&&p.ruleTemplate){this.selectedColumn=p,s=this.selectedColumn.operators,h={label:p.label,field:p.field,type:p.type,operator:s[0].value};var m=Object.keys(n).length?n:h;c=this.appendRuleElem(t,p,r,i,"field",m),this.trigger("actionBegin",{requestType:"template-create",action:"insert-rule",ruleID:c.id,fields:this.fields,rule:m})}else{(c=this.appendRuleElem(t,p,r,i,"field")).querySelector(".e-filter-input").setAttribute("id",c.id+"_filterkey");var f=c.querySelector("button");this.element.className.indexOf("e-device")>-1||"Vertical"===this.displayMode?(f.textContent=this.l10n.getConstant("Remove"),Object(b.v)([f],"e-flat"),Object(b.v)([f],"e-primary")):(Object(b.v)([f],"e-round"),Object(b.v)([f],"e-icon-btn"),new w.d({content:this.l10n.getConstant("DeleteRule")}).appendTo(f),f=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-delete-icon"}}),c.querySelector("button").appendChild(f))}c.className="Vertical"===this.displayMode||this.element.className.indexOf("e-device")>-1?"e-rule-container e-vertical-mode":"e-rule-container e-horizontal-mode",c.previousElementSibling&&c.previousElementSibling.className.indexOf("e-rule-container")>-1&&(c.className.indexOf("e-joined-rule")<0&&(c.className+=" e-joined-rule"),c.previousElementSibling.className.indexOf("e-prev-joined-rule")<0&&(c.previousElementSibling.className+=" e-prev-joined-rule")),c.previousElementSibling&&c.previousElementSibling.className.indexOf("e-group-container")>-1&&c.className.indexOf("e-separate-rule")<0&&(c.className+=" e-separate-rule"),this.isImportRules||this.updateAddedRule(t,n,h,a),(!p||p&&!p.ruleTemplate)&&((u=new O.d({dataSource:this.columns,fields:this.fields,placeholder:this.l10n.getConstant("SelectField"),popupHeight:this.columns.length>5?d:"auto",change:this.changeField.bind(this),value:n?n.field:null})).appendTo("#"+c.id+"_filterkey"),this.selectedColumn=u.getDataByValue(u.value),Object.keys(n).length&&this.changeRule(n,{element:u.element,itemData:this.selectedColumn})),o=c.id.replace(this.element.id+"_",""),this.isImportRules||this.trigger("change",{groupID:t.id.replace(this.element.id+"_",""),ruleID:o,type:"insertRule"})}}},{key:"updateAddedRule",value:function(e,t,n,l){for(var r=Object(b.C)(e,".e-group-container"),i=this.getParentGroup(r),a=Object(b.C)(e,".e-rule-container"),o=0;a&&null!==a.previousElementSibling;)a=a.previousElementSibling,o++;l?i.rules[o]=t:Object.keys(t).length?i.rules.push({field:t.field,type:t.type,label:t.label,operator:t.operator,value:t.value}):i.rules.push(n),this.disableRuleCondition(e,i)}},{key:"changeRuleTemplate",value:function(e,t,n,l){var r=this.selectedColumn.operators;if(!e.ruleTemplate){var i=Object(b.C)(t,".e-rule-container").id;if(this.previousColumn&&this.previousColumn.ruleTemplate&&(Object(b.I)(t.closest('[id="'+i+'"]').querySelector(".e-rule-field")),this.clearQBTemplate([i])),e){var a={field:e.field,label:e.label,operator:r[0].value,value:""};this.addRuleElement(this.element.querySelector(".e-group-container"),a,e,"change",i,!0)}}}},{key:"renderToolTip",value:function(e){var t=new w.d({content:this.l10n.getConstant("ValidationMessage"),position:"BottomCenter",cssClass:"e-querybuilder-error"});t.appendTo(e),t.open(e)}},{key:"validateFields",value:function(){var e=!0;if(this.allowValidation){var t,n,l,r,i,a,o,s,u,c,d=["isnull","isnotnull","isempty","isnotempty"],p=[],h=this.element.querySelectorAll(".e-rule-container");for(t=0,n=h.length;t<n;t++)if(i=Object(b.C)(h[t],".e-group-container"),u=this.getParentGroup(i),a=0,r=s=h[t],o=Object(b.M)(h[t].querySelector(".e-rule-field input.e-control"),"dropdownlist"),this.selectedColumn=o.getDataByValue(o.value),c=!Object(b.X)(o.index)&&this.selectedColumn.validation,l=s.querySelector(".e-rule-field input.e-control"),c&&c.isRequired){for(;r&&null!==r.previousElementSibling;)r=r.previousElementSibling,a++;if(l=s.querySelector(".e-rule-field input.e-control"),u.rules[a].field||(l.parentElement.className.indexOf("e-tooltip")<0&&this.renderToolTip(l.parentElement),e=!1),l=s.querySelector(".e-rule-operator input.e-control"),u.rules[a].operator||(l.parentElement.className.indexOf("e-tooltip")<0&&this.renderToolTip(l.parentElement),e=!1),u.rules[a].value instanceof Array&&(p=u.rules[a].value),d.indexOf(u.rules[a].operator)<0&&Object(b.X)(u.rules[a].value)&&"date"!==u.rules[a].type||""===u.rules[a].value||u.rules[a].value instanceof Array&&p.length<1){var m=s.querySelectorAll(".e-rule-value input.e-control");e=!1;for(var f=0,g=m.length;f<g;f++){var v=void 0,y=m[f];y.parentElement.className.indexOf("e-searcher")>-1?(v=Object(b.C)(y,".e-multi-select-wrapper")).className.indexOf("e-tooltip")<0&&this.renderToolTip(v):m[f].parentElement.className.indexOf("e-tooltip")<0&&this.renderToolTip(m[f].parentElement),f++}}}else o.element&&Object(b.X)(o.index)&&(l.parentElement.className.indexOf("e-tooltip")<0&&this.renderToolTip(l.parentElement),e=!1)}return e}},{key:"refreshLevelColl",value:function(){this.levelColl={};var e=this.element.querySelector(".e-group-container");this.levelColl[e.id]=[0],this.refreshLevel({groupElement:e,level:[0]})}},{key:"refreshLevel",value:function(e){var t,n,l=e.groupElement.querySelector(".e-rule-list").children,r=e.groupElement,i=l.length,a=0;for(n=0;n<i;n++)(t=l[n]).className.indexOf("e-group-container")>-1&&(e.level.push(a),this.levelColl[t.id]=e.level.slice(),a++,e.groupElement=t,e=this.refreshLevel(e));var o=Object(b.C)(r,".e-rule-list");return e.groupElement=o?Object(b.C)(o,".e-group-container"):r,e.level=this.levelColl[e.groupElement.id].slice(),e}},{key:"groupTemplate",value:function(){var e,t,n,l,r,i,a,o,s;return e=this.createElement("div",{attrs:{class:"e-group-container"}}),n=this.createElement("div",{attrs:{class:"e-group-header"}}),t=this.createElement("div",{attrs:{class:"e-group-body"}}),l=this.createElement("div",{attrs:{class:"e-rule-list"}}),e.appendChild(n),t.appendChild(l),e.appendChild(t),r=this.createElement("div",{attrs:{class:"e-lib e-btn-group"}}),this.enableNotCondition&&(i=this.createElement("button",{attrs:{type:"button",class:"e-qb-toggle"}}),r.appendChild(i)),(i=this.createElement("input",{attrs:{type:"radio",class:"e-btngroup-and",value:"AND"}})).setAttribute("checked","true"),r.appendChild(i),a=this.createElement("label",{attrs:{class:"e-lib e-btn e-btngroup-and-lbl e-small"},innerHTML:this.l10n.getConstant("AND")}),r.appendChild(a),i=this.createElement("input",{attrs:{type:"radio",class:"e-btngroup-or",value:"OR"}}),r.appendChild(i),a=this.createElement("label",{attrs:{class:"e-lib e-btn e-btngroup-or-lbl e-small"},innerHTML:this.l10n.getConstant("OR")}),r.appendChild(a),n.appendChild(r),o=this.createElement("div",{attrs:{class:"e-group-action"}}),s=this.createElement("button",{attrs:{type:"button",class:"e-add-btn"}}),o.appendChild(s),n.appendChild(o),e}},{key:"ruleTemplate",value:function(){var e,t,n,l,r,i;return e=this.createElement("div"),r=this.createElement("div",{attrs:{class:"e-rule-field"}}),n=this.createElement("div",{attrs:{class:"e-rule-filter"}}),t=this.createElement("input",{attrs:{type:"text",class:"e-filter-input"}}),n.appendChild(t),r.appendChild(n),n=this.createElement("div",{attrs:{class:"e-rule-operator"}}),r.appendChild(n),n=this.createElement("div",{attrs:{class:"e-rule-value"}}),r.appendChild(n),n=this.createElement("div",{attrs:{class:"e-rule-value-delete"}}),i=this.showButtons.ruleDelete?"e-removerule e-rule-delete e-css e-btn e-small":"e-removerule e-rule-delete e-css e-btn e-small e-button-hide",l=this.createElement("button",{attrs:{class:i}}),n.appendChild(l),r.appendChild(n),e.appendChild(r),e}},{key:"addGroupElement",value:function(e,t,n,l){var r=this,i={groupID:t.id.replace(this.element.id+"_",""),cancel:!1,type:"insertGroup"};this.isImportRules||this.isInitialLoad?(this.isInitialLoad=!1,this.addGroupSuccess(i,e,t,n,l)):this.trigger("beforeChange",i,(function(i){r.addGroupSuccess(i,e,t,n,l)}))}},{key:"addGroupSuccess",value:function(e,t,n,l,r){if(!e.cancel&&this.element.querySelectorAll(".e-group-container").length<=this.maxGroupCount){var i,a=n,o=this.groupElem.cloneNode(!0);o.setAttribute("id",this.element.id+"_group"+this.groupIdCounter),this.groupIdCounter++;var s=o.querySelector(".e-btngroup-and"),u=o.querySelector(".e-btngroup-or"),c=o.querySelector(".e-btngroup-and-lbl"),d=o.querySelector(".e-btngroup-or-lbl"),p=o.querySelector(".e-qb-toggle");if(s.setAttribute("id",this.element.id+"_and"+this.btnGroupId),u.setAttribute("id",this.element.id+"_or"+this.btnGroupId),s.setAttribute("name",this.element.id+"_and"+this.btnGroupId),u.setAttribute("name",this.element.id+"_and"+this.btnGroupId),c.setAttribute("for",this.element.id+"_and"+this.btnGroupId),d.setAttribute("for",this.element.id+"_or"+this.btnGroupId),this.btnGroupId++,t){i=this.createElement("button",{attrs:{class:this.showButtons.groupDelete?"e-deletegroup":"e-deletegroup e-button-hide"}}),new C.a({iconCss:"e-icons e-delete-icon",cssClass:"e-small e-round"}).appendTo(i),new w.d({content:this.l10n.getConstant("DeleteGroup")}).appendTo(i),Object(b.kb)(i,{selector:".deletegroup"}),o.querySelector(".e-group-action").appendChild(i);for(var h=a.querySelector(".e-rule-list"),m=h.children,f=0,g=0,v=m.length;g<v;g++)m[g].className.indexOf("e-group-container")>-1&&(f+=1);h.appendChild(o);var y=this.levelColl[a.id].slice(0);y.push(f),this.levelColl[o.id]=y,this.isImportRules||(this.addGroups([],a.id.replace(this.element.id+"_","")),r&&this.addRuleElement(o,{}))}else a.appendChild(o),this.levelColl[o.id]=[0];this.enableNotCondition&&(new C.a({content:this.l10n.getConstant("NOT"),cssClass:"e-btn e-small"}).appendTo(p),o.querySelector(".e-btngroup-and-lbl").classList.add("e-not"),this.updatedRule&&this.updatedRule.not&&Object(b.v)([p],"e-active-toggle")),this.updatedRule=null;var O=o.querySelector(".e-add-btn");if(new I.b({items:this.items,cssClass:"e-round e-small e-caret-hide e-addrulegroup",iconCss:"e-icons e-add-icon",beforeOpen:this.selectBtn.bind(this,O),select:this.selectBtn.bind(this,O)}).appendTo(O),!this.isImportRules){var E=a.id.replace(this.element.id+"_",""),S=o.id.replace(this.element.id+"_","");this.trigger("change",{groupID:E,type:"insertGroup",childGroupID:S})}}}},{key:"notifyChange",value:function(e,t,n){for(var l=Object(b.C)(t,".e-group-container"),r=this.getParentGroup(l),i=Object(b.C)(t,".e-rule-container"),a=0;i&&null!==i.previousElementSibling;)i=i.previousElementSibling,a++;var o=this.getColumn(r.rules[a].field),s=this.getFormat(o.format);if("date"===o.type)if(e instanceof Date)e=this.intl.formatDate(e,s);else if(e instanceof Array)for(var u=0;u<e.length;u++)e[u]&&e[u]instanceof Date&&(e[u]=this.intl.formatDate(e[u],s));if(o.ruleTemplate)this.templateChange(t,e,n);else{var c=Object(b.C)(t,".e-rule-value").querySelectorAll(".e-template"),d=Object(b.C)(t,".e-rule-container").querySelector(".e-filter-input"),p=Object(b.M)(d,"dropdownlist");o=p.getDataByValue(p.value);for(var h=[],m=0,f=c.length;m<f;m++)c.length>1&&"date"===o.type&&e[m]&&e[m]instanceof Date?h.push(this.intl.formatDate(e[m],s)):h=e;this.updateRules(t,c.length>1?h:e)}}},{key:"templateChange",value:function(e,t,n){for(var l=Object(b.C)(e,".e-group-container"),r=this.getParentGroup(l),i=Object(b.C)(e,".e-rule-container"),a=0;i&&null!==i.previousElementSibling;)i=i.previousElementSibling,a++;var o,s=r.rules[a];"field"===n?this.selectedColumn=this.getColumn(t):s&&(this.selectedColumn=this.getColumn(s.field)),this.previousColumn=this.getColumn(s.field);var u=this.getValidRules(this.rule);this.selectedColumn&&(o=this.selectedColumn.operators?this.selectedColumn.operators:this.customOperators[this.selectedColumn.type+"Operator"]);var c,d=["in","notin","between","notbetween"];switch(n){case"field":s.field=t,s.label=this.selectedColumn.label,s.type=this.selectedColumn.type,s.value="",s.operator=o[0].value;break;case"operator":c=s.operator,s.operator=t,d.indexOf(s.operator)>-1?s.value=[]:d.indexOf(c)>-1&&(s.value="");break;case"value":s.value=t}if(this.changeRuleTemplate(this.selectedColumn,e,s,n),this.filterRules(u,this.getValidRules(this.rule),n),this.selectedColumn&&this.selectedColumn.ruleTemplate&&("field"===n||"operator"===n)){var p=Object(b.C)(e,".e-rule-container");this.destroyControls(p,!0),Object(b.I)(p.querySelector(".e-rule-field"));var h=this.appendRuleElem(Object(b.C)(p,".e-group-container"),this.selectedColumn,"change",p.id,n,s);h.className="Vertical"===this.displayMode||this.element.className.indexOf("e-device")>-1?"e-rule-container e-vertical-mode":"e-rule-container e-horizontal-mode",h.previousElementSibling&&h.previousElementSibling.className.indexOf("e-rule-container")>-1&&(h.className.indexOf("e-joined-rule")<0&&(h.className+=" e-joined-rule"),h.previousElementSibling.className.indexOf("e-prev-joined-rule")<0&&(h.previousElementSibling.className+=" e-prev-joined-rule")),h.previousElementSibling&&h.previousElementSibling.className.indexOf("e-group-container")>-1&&h.className.indexOf("e-separate-rule")<0&&(h.className+=" e-separate-rule"),this.trigger("actionBegin",{requestType:"template-create",action:n,ruleID:p.id,fields:this.fields,rule:s})}}},{key:"changeValue",value:function(e,t){var n,l,r,i=this;((r=t.event?t.event.target:t.element).className.indexOf("e-day")>-1||r.className.indexOf("e-cell")>-1)&&(r=t.element);var a=Object(b.C)(r,".e-group-container"),o=Object(b.C)(r,".e-rule-container");n=a&&a.id.replace(this.element.id+"_",""),l=o.id.replace(this.element.id+"_","");var s,u,c,d=t;d.element&&d.element.className.indexOf("e-datepicker")>-1&&(r=d.element),r.className.indexOf("e-radio")>-1?(u=parseInt(r.id.split("valuekey")[1],0),c=Object(b.M)(Object(b.C)(r,".e-rule-container").querySelector(".e-filter-input"),"dropdownlist"),this.selectedColumn=c.getDataByValue(c.value),s=this.selectedColumn.values?this.selectedColumn.values[u]:[!0,!1][u]):s=r.className.indexOf("e-multiselect")>-1?Object(b.M)(r,"multiselect").value:t.value,"input"===t.name&&this.immediateModeDelay?(window.clearInterval(this.timer),this.timer=window.setInterval((function(){i.filterValue(n,l,s,e,r)}),this.immediateModeDelay)):this.filterValue(n,l,s,e,r)}},{key:"filterValue",value:function(e,t,n,l,r){var i=this,a={groupID:e,ruleID:t,value:n,cancel:!1,type:"value"};window.clearInterval(this.timer),this.isImportRules?this.changeValueSuccessCallBack(a,r,l,e,t):this.trigger("beforeChange",a,(function(n){i.changeValueSuccessCallBack(n,r,l,e,t)}))}},{key:"changeValueSuccessCallBack",value:function(e,t,n,l,r){e.cancel||(this.updateRules(t,e.value,n),this.isImportRules||this.trigger("change",{groupID:l,ruleID:r,value:e.value,cancel:!1,type:"value"}))}},{key:"changeField",value:function(e){if(e.isInteracted){var t=this.getColumn(e.value);if(t&&t.ruleTemplate)this.templateChange(e.element,t.field,"field");else{for(var n=Object(b.C)(e.element,".e-group-container"),l=this.getParentGroup(n),r=Object(b.C)(e.element,".e-rule-container"),i=0;r&&null!==r.previousElementSibling;)r=r.previousElementSibling,i++;this.changeRule(l.rules[i],e)}}}},{key:"changeRule",value:function(e,t){if(t.itemData){var n=Object(b.C)(t.element,".e-rule-filter"),l=Object(b.M)(t.element,"dropdownlist"),r=Object(b.C)(t.element,".e-group-container").id.replace(this.element.id+"_","");this.changeFilter(n,l,r,e,{},t)}}},{key:"changeFilter",value:function(e,t,n,l,r,i){var a=this;if(e){var o;this.selectedColumn=t.getDataByValue(t.value),o={groupID:n,ruleID:Object(b.C)(e,".e-rule-container").id.replace(this.element.id+"_",""),selectedField:t.value,cancel:!1,type:"field"},this.isImportRules?this.fieldChangeSuccess(o,r,e,l,i):this.trigger("beforeChange",o,(function(t){a.fieldChangeSuccess(t,r,e,l,i)}))}else{var s=Object(b.C)(i.element,".e-rule-operator");this.changeOperator(e,s,t,n,l,r,i)}}},{key:"changeOperator",value:function(e,t,n,l,r,i,a){var o,s=this;t?(o={groupID:l,ruleID:Object(b.C)(t,".e-rule-container").id.replace(this.element.id+"_",""),selectedIndex:n.index,cancel:!1,type:"operator"},this.isImportRules?this.operatorChangeSuccess(o,e,i,r,a):this.trigger("beforeChange",o,(function(t){s.operatorChangeSuccess(t,e,i,r,a)}))):this.changeRuleValues(e,r,i,a)}},{key:"fieldChangeSuccess",value:function(e,t,n,l,r){for(var i=Object(b.C)(n,".e-rule-container"),a=Object(b.C)(r.element,".e-rule-operator"),o=Object(b.C)(r.element,".e-group-container").id.replace(this.element.id+"_",""),s=Object(b.M)(r.element,"dropdownlist"),u=i.querySelectorAll(".e-tooltip.e-input-group"),c=0;c<u.length;c++)Object(b.M)(u[c],"tooltip").destroy();e.cancel||(t.type=this.selectedColumn.type,i.querySelector(".e-template")&&(l.value="")),this.changeOperator(n,a,s,o,l,t,r)}},{key:"operatorChangeSuccess",value:function(e,t,n,l,r){if(!e.cancel){var i=Object(b.C)(r.element,".e-rule-operator"),a=i.nextElementSibling,o=Object(b.M)(r.element,"dropdownlist"),s=l.operator?l.operator.toString().toLowerCase():"";n.operator=o.value.toString();var u=n.operator.toLowerCase();if(n.operator.toLowerCase().indexOf("between")>-1||n.operator.toLowerCase().indexOf("in")>-1&&n.operator.toLowerCase().indexOf("contains")<0?(t=i.previousElementSibling,n.type=l.type,(n.operator.toLowerCase().indexOf("in")<0||s.indexOf("in")<0)&&(l.value=[])):"object"==typeof l.value&&null!=l.value&&(l.value=l.value.length>0?l.value[0]:""),r.previousItemData){var c=r.previousItemData.value.toString().toLowerCase();(c.indexOf("between")>-1||(c.indexOf("in")>-1||c.indexOf("null")>-1||c.indexOf("empty")>-1)&&c.indexOf("contains")<0)&&(t=i.previousElementSibling,n.type=l.type)}if(s.indexOf("in")>-1&&s.indexOf("in")<5&&u.indexOf("in")>-1&&u.indexOf("in")<5&&(t=null),n.operator.indexOf("null")>-1||n.operator.indexOf("empty")>-1){var d=i.parentElement.querySelector(".e-rule-value"),p=d.querySelector(".e-tooltip.e-input-group");p&&Object(b.M)(p,"tooltip").destroy(),Object(b.ib)([d],"e-show"),Object(b.v)([d],"e-hide")}a&&a.querySelector(".e-template")&&(t=i.previousElementSibling),this.changeRuleValues(t,l,n,r)}}},{key:"changeRuleValues",value:function(e,t,n,l){var r,i,a,o=Object(b.C)(l.element,".e-rule-operator");if(e)if(o=e.nextElementSibling,Object(b.v)([o],"e-operator"),o.childElementCount)r=Object(b.M)(o.querySelector(".e-dropdownlist"),"dropdownlist"),n.operator=r.value,this.renderValues(o,l.itemData,l.previousItemData,!0,t,n,l.element);else{var s=Object(b.C)(o,".e-rule-container").id;a=this.createElement("input",{attrs:{type:"text",id:s+"_operatorkey"}}),o.appendChild(a),this.selectedColumn.operators?i=this.selectedColumn.operators:l.itemData&&(i=this.customOperators[this.selectedColumn.type+"Operator"]);var u=this.element.className.indexOf("e-device")>-1?"250px":"200px",c=i[0].value;c=t&&""!==t.operator?t.operator:c,new O.d({dataSource:i,fields:{text:"key",value:"value"},placeholder:this.l10n.getConstant("SelectOperator"),popupHeight:i.length>5?u:"auto",change:this.changeField.bind(this),index:0,value:c}).appendTo("#"+s+"_operatorkey"),n.operator=t&&""!==t.operator?t.operator:i[0].value,this.isImportRules&&(n.type=this.selectedColumn.type,n.operator=t.operator),this.renderValues(o,this.selectedColumn,l.previousItemData,!1,t,n,l.element)}this.isImportRules||this.updateRules(l.element,l.item)}},{key:"destroyControls",value:function(e,t){var n,l,r=t?e:e.nextElementSibling;n=r.querySelectorAll("input.e-control"),l=r.querySelectorAll("div.e-control:not(.e-handle)");for(var i,a=this.columns,o=0,s=n.length;o<s;o++){if(n[o].classList.contains("e-textbox"))Object(b.M)(n[o],"textbox").destroy(),Object(b.I)(Object(b.lb)("input#"+n[o].id,r));else if(n[o].classList.contains("e-dropdownlist"))this.allowValidation&&n[o].parentElement.className.indexOf("e-tooltip")>-1&&Object(b.M)(n[o].parentElement,"tooltip").destroy(),Object(b.M)(n[o],"dropdownlist").destroy();else if(n[o].classList.contains("e-radio"))Object(b.M)(n[o],"radio").destroy();else if(n[o].classList.contains("e-numerictextbox"))Object(b.M)(n[o],"numerictextbox").destroy(),Object(b.I)(Object(b.lb)("input#"+n[o].id,r));else if(n[o].classList.contains("e-datepicker"))Object(b.M)(n[o],"datepicker").destroy();else if(n[o].classList.contains("e-multiselect"))Object(b.M)(n[o],"multiselect").destroy();else if(n[o].className.indexOf("e-template")>-1)for(var u=n[o].className,c=0,d=a.length;c<d;c++)if(a[c].template&&u.indexOf(a[c].field)>-1){this.templateDestroy(a[c],n[o].id);break}document.getElementById(n[o].id)&&Object(b.I)(n[o])}for(var p=0,h=l.length;p<h;p++){if(l[p].className.indexOf("e-template")>-1)for(var m=l[p].className,f=0,g=a.length;f<g;f++)if(a[f].template&&m.indexOf(a[f].field)>-1){this.templateDestroy(a[f],l[p].id);break}Object(b.I)(l[p])}for(var v=0,y=(i=r.querySelectorAll(".e-template:not(.e-control)")).length;v<y;v++)Object(b.I)(i[v])}},{key:"templateDestroy",value:function(e,t){var n;if("string"!=typeof e.template||void 0===e.template.destroy){var l,r=(n=e.template).destroy;n.destroy&&(document.getElementById(t)&&(l=Object(b.C)(document.getElementById(t),".e-rule-field").querySelectorAll(".e-template")),"string"==typeof r?(r=Object(b.V)(r,window))({field:e.field,elementId:t,elements:l}):n.destroy({field:e.field,elementId:t,elements:l}))}}},{key:"getValues",value:function(e){var t,n={},l=[],r=[];this.separator.length>0&&(r=e.split(this.separator));var i=this.dataColl;if(this.dataColl[1])for(var a=0,o=i.length;a<o;a++){var s={};if(r.length>1)for(var u=void 0,c=i[a],d=0,p=r.length;d<p;d++)u=r[d],r.length===d+1?(t=c[u],Number(c[u])===c[u]&&c[u]%1!=0&&(t=c[u].toString())):c=c[u];else t=i[a][e],Number(i[a][e])===i[a][e]&&i[a][e]%1!=0&&(t=i[a][e].toString());t in n||(n[t]=1,r.length>1?this.createNestedObject(s,r,t):s[e]=t,l.push(s))}return l}},{key:"createNestedObject",value:function(e,t,n){for(var l,r=t.length-1,i=0;i<r;++i)(l=t[i])in e||(e[l]={}),e=e[l];e[t[r]]=n}},{key:"getDistinctValues",value:function(e,t){for(var n={},l=[],r=0,i=e.length;r<i;r++){var a=e[r][t];Number(e[r][t])===e[r][t]&&e[r][t]%1!=0&&(a=e[r][t].toString());var o={};a in n||(n[a]=1,o[t]=a,l.push(o))}return l}},{key:"renderMultiSelect",value:function(e,t,n,l,r){var i,a=!1,o=!1;this.dataColl[1]&&Object.keys(this.dataColl[1]).indexOf(e.field)>-1&&(a=!0,i=this.getDistinctValues(this.dataColl,e.field)),!this.dataColl.length&&r.length&&(o=!0);var s=new O.g({dataSource:o?r:a?i:this.dataManager,query:new E.g([e.field]),fields:{text:e.field,value:e.field},placeholder:this.l10n.getConstant("SelectValue"),value:l,mode:"CheckBox",width:"100%",change:this.changeValue.bind(this,n),close:this.closePopup.bind(this,n),actionBegin:this.multiSelectOpen.bind(this,t+"_valuekey"+n)});s.appendTo("#"+t+"_valuekey"+n),this.updateRules(s.element,l,0)}},{key:"multiSelectOpen",value:function(e,t){if(this.dataSource instanceof E.a){var n=document.getElementById(e),l=Object(b.M)(Object(b.C)(n,".e-rule-container").querySelector(".e-filter-input"),"dropdownlist");this.selectedColumn=l.getDataByValue(l.value);var r=this.selectedColumn.field,i=!1;this.dataColl[1]&&Object.keys(this.dataColl[1]).indexOf(r)>-1&&(i=!0),i||(t.cancel=!0,Object(b.W)()?this.bindBlazorMultiSelectData(n,r):this.bindMultiSelectData(n,r))}}},{key:"bindBlazorMultiSelectData",value:function(e,t){return n=this,r=regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getMultiSelectData(e,t);case 2:case"end":return n.stop()}}),n,this)})),new((l=void 0)||(l=Promise))((function(e,t){function i(e){try{o(r.next(e))}catch(n){t(n)}}function a(e){try{o(r.throw(e))}catch(n){t(n)}}function o(t){t.done?e(t.value):new l((function(e){e(t.value)})).then(i,a)}o((r=r.apply(n,[])).next())}));var n,l,r}},{key:"bindMultiSelectData",value:function(e,t){this.getMultiSelectData(e,t)}},{key:"getMultiSelectData",value:function(e,t){var n,l=this,r=new E.c,i=this.dataManager.executeQuery((new E.g).select(t)),a=Object(b.M)(e,"multiselect");a.hideSpinner(),this.createSpinner(Object(b.C)(e,".e-multi-select-wrapper").parentElement),Object(w.n)(Object(b.C)(e,".e-multi-select-wrapper").parentElement),i.then((function(r){n=r.actual&&r.actual.result?r.actual.result:r.result,l.dataColl=Object(b.K)(l.dataColl,n,[],!0),a.dataSource=l.getDistinctValues(l.dataColl,t),Object(w.k)(Object(b.C)(e,".e-multi-select-wrapper").parentElement)})).catch((function(e){r.reject(e)}))}},{key:"createSpinner",value:function(e){var t=this.createElement("span",{attrs:{class:"e-qb-spinner"}});e.appendChild(t),Object(w.g)({target:t,width:b.d.isDevice?"16px":"14px"})}},{key:"closePopup",value:function(e,t){var n=document.getElementById(t.popup.element.id.replace("_popup","")),l=Object(b.M)(n,"multiselect").value;this.updateRules(n,l,e)}},{key:"processTemplate",value:function(e,t,n,l){var r,i=Object(b.C)(e,".e-rule-container"),a=i.querySelectorAll(".e-template");r=Object(b.M)(i.querySelector(".e-rule-filter .e-filter-input"),"dropdownlist");var o=this.getColumn(r.value);if("string"==typeof t.template||void 0===t.template.write)this.trigger("actionBegin",{rule:n,ruleID:i.id,operator:l.operator,field:o.field,requestType:"value-template-create"});else{var s=t.template;"string"==typeof s.write?Object(b.V)(s.write,window)({elements:a.length>1?a:a[0],values:n.value,operator:l.operator,field:o.field,dataSource:o.values}):t.template.write({elements:a.length>1?a:a[0],values:n.value,operator:l.operator,field:o.field,dataSource:o.values})}}},{key:"getItemData",value:function(e){var t=Object(b.M)(document.getElementById(e+"_filterkey"),"dropdownlist");return this.getColumn(t.value)}},{key:"setDefaultValue",value:function(e,t,n){var l=this.getItemData(e);if(Object(b.X)(l.value))return n?t?[0,0]:0:t?[]:"";if(t){if(!(l.value instanceof Array))return[l.value]}else if(l.value instanceof Array)return l.value[0];return l.value}},{key:"renderStringValue",value:function(e,t,n,l,r){var i,a,o=this.getItemData(e);if(a=this.isImportRules||this.isPublic?t.value:this.setDefaultValue(e,!1,!1),"in"!==n&&"notin"!==n||!this.dataColl.length&&!o.values){"in"!==n&&"notin"!==n||(a=(i=this.isImportRules?t.value:this.setDefaultValue(e,!0,!1)).join(","));var s=new S.g({placeholder:this.l10n.getConstant("SelectValue"),input:this.changeValue.bind(this,l)});s.appendTo("#"+e+"_valuekey"+l),s.value=a,s.dataBind()}else i=this.isImportRules?t.value:this.setDefaultValue(e,!0,!1),this.renderMultiSelect(o,e,l,i,o.values),"Vertical"===this.displayMode||this.element.className.indexOf("e-device")>-1?r.style.width="100%":(r.style.width=null,r.style.minWidth="200px")}},{key:"renderNumberValue",value:function(e,t,n,l,r,i,a){var o=this.getItemData(e),s=this.isImportRules||this.isPublic?t.value:this.setDefaultValue(e,!1,!0);if("in"!==n&&"notin"!==n||!this.dataColl.length&&!o.values)if("in"===n||"notin"===n){var u=(s=this.isImportRules?t.value:this.setDefaultValue(e,!0,!1)).join(","),c=new S.g({placeholder:this.l10n.getConstant("SelectValue"),input:this.changeValue.bind(this,l)});c.appendTo("#"+e+"_valuekey"+l),c.value=u,c.dataBind()}else{var d=Object(b.M)(document.getElementById(e+"_filterkey"),"dropdownlist"),p=(i=this.getColumn(d.value)).validation&&i.validation.min?i.validation.min:0,h=i.validation&&i.validation.max?i.validation.max:Number.MAX_VALUE,m=i.format?i.format:"n";a>1&&t&&(s=t.value[l]?t.value[l]:this.setDefaultValue(e,!0,!0)),new S.e({value:s instanceof Array?s[l]:s,format:m,min:p,max:h,width:"100%",step:i.step?i.step:1,change:this.changeValue.bind(this,l)}).appendTo("#"+e+"_valuekey"+l)}else s=this.isImportRules?t.value:this.setDefaultValue(e,!0,!1),this.renderMultiSelect(o,e,l,s,o.values),this.element.className.indexOf("e-device")>-1||"Vertical"===this.displayMode?r.style.width="100%":(r.style.minWidth="200px",r.style.width=null)}},{key:"processValueString",value:function(e,t){var n=[],l=e.split(",");if("string"===t)return l;for(var r=0,i=l.length;r<i;r++)n.push(Number(l[r]));return n}},{key:"parseDate",value:function(e,t){var n,l;if(t){var r=this.intl.getDateParser({skeleton:"full",type:"dateTime"});n=this.getFormat(t),l=r(e),Object(b.X)(l)&&(l=this.intl.parseDate(e,n))}else l=new Date(e);return l}},{key:"renderControls",value:function(e,t,n,l){if(Object(b.v)([e.parentElement.querySelector(".e-rule-value")],"e-value"),Object(b.ib)([e.parentElement.querySelector(".e-rule-value")],"e-hide"),Object(b.v)([e.parentElement.querySelector(".e-rule-value")],"e-show"),t.template)this.processTemplate(e,t,n,l);else{var r;r="boolean"===l.type?this.selectedColumn.values?this.selectedColumn.values.length:2:l.operator&&l.operator.toString().toLowerCase().indexOf("between")>-1?2:1;var i,a,o=Object(b.C)(e,".e-rule-container").id;if(a=l.operator.toString(),e.className.indexOf("e-rule-operator")>-1||e.className.indexOf("e-rule-filter")>-1){i=e.parentElement.querySelector(".e-rule-value"),this.element.className.indexOf("e-device")>-1||"Vertical"===this.displayMode?i.style.width="100%":"in"!==a&&"notin"!==a?Object(b.v)([i],"e-custom-value"):Object(b.ib)([i],"e-custom-value");for(var s=0;s<r;s++)switch(l.type){case"string":this.renderStringValue(o,n,a,s,i);break;case"number":this.renderNumberValue(o,n,a,s,i,t,r);break;case"boolean":this.processBoolValues(t,n,o,s);break;case"date":var u=void 0,c=void 0,d=void 0,p=new Date,h=t.format,m=this.l10n.getConstant("SelectValue");if(t.value&&(p=t.value instanceof Date?t.value:t.value instanceof Number?new Date(t.value):this.parseDate(t.value,t.format)),(this.isImportRules||this.isPublic)&&n&&(h=(c=this.getColumn(n.field)).format,n.value?(u=r>1?n.value[s]:n.value,p=this.parseDate(u,c.format)):p=n.value),h){var f=this.getFormat(h);d=new x.b(f.skeleton?{locale:this.getLocale(),value:p,placeholder:m,format:f,change:this.changeValue.bind(this,s)}:{value:p,locale:this.getLocale(),placeholder:m,format:f.format,change:this.changeValue.bind(this,s)})}else d=new x.b({locale:this.getLocale(),value:p,placeholder:m,change:this.changeValue.bind(this,s)});d.appendTo("#"+o+"_valuekey"+s),n.value||this.updateRules(document.getElementById(o+"_valuekey"+s),p)}}}}},{key:"processBoolValues",value:function(e,t,n,l){var r,i,a,o=!1;if(Object(b.X)(t.type)&&e&&(t.type=e.type),e.values){var s=e.values;"boolean"!==t.type||Object(b.X)(t.value)?e.value?o=s[l].toLowerCase()===e.value.toString().toLowerCase():0===l&&(o=!0):o=s[l].toLowerCase()===t.value.toString().toLowerCase(),i=r=a=s[l]}else{var u=[!0,!1];"boolean"!==t.type||Object(b.X)(t.value)?e.value?o=u[l].toString().toLowerCase()===e.value.toString().toLowerCase():0===l&&(o=!0):o=u[l].toString().toLowerCase()===t.value.toString().toLowerCase(),r=u[l].toString(),i=u[l],a=this.l10n.getConstant(["True","False"][l])}var c=new C.d({label:a,name:n+"default",checked:o,value:r,change:this.changeValue.bind(this,l)});c.appendTo("#"+n+"_valuekey"+l),o&&this.updateRules(c.element,i,0)}},{key:"getOperatorIndex",value:function(e,t){var n,l=e.dataSource.length;for(n=0;n<l;n++)if(t.operator===e.dataSource[n].value)return n;return 0}},{key:"getPreviousItemData",value:function(e,t){return t.template&&e&&Object.keys(e).length<4&&(e.template=t.template),e}},{key:"renderValues",value:function(e,t,n,l,r,i,a){var o=document.getElementById(a.id.replace("operatorkey","filterkey")),s=Object(b.M)(o,"dropdownlist"),u=this.getColumn(s.value);if(l){var c=Object(b.M)(e.querySelector("input"),"dropdownlist");t.operators?(c.value=null,c.dataBind(),c.dataSource=t.operators,c.index=this.getOperatorIndex(c,r),c.value=i.operator=c.dataSource[c.index].value,c.dataBind()):t.type&&(c.value=null,c.dataBind(),c.dataSource=this.customOperators[t.type+"Operator"],c.index=this.getOperatorIndex(c,r),c.value=i.operator=c.dataSource[c.index].value,c.dataBind())}var d=i.operator.toString();if(d.indexOf("null")>-1||d.indexOf("empty")>-1){var p=e.parentElement.querySelector(".e-rule-value");p&&(Object(b.ib)([p],"e-show"),Object(b.v)([p],"e-hide"))}else{var h=Object(b.C)(e,".e-rule-container").id;if((n=this.getPreviousItemData(n,u))&&n.template){if(this.templateDestroy(n,h+"_valuekey0"),Object(b.W)())n.field!==t.field&&(b.z[this.element.id+n.field]=[],Object(b.jb)(this.element.id+n.field,"Template"),Object(b.I)(e.nextElementSibling.querySelector(".e-blazor-template")));else{var m=Object(b.lb)("#"+h+"_valuekey0",e.nextElementSibling);m&&!m.classList.contains("e-control")&&Object(b.I)(Object(b.lb)("#"+h+"_valuekey0",e.nextElementSibling))}"string"!=typeof n.template&&void 0!==n.template.create||(e.nextElementSibling.innerHTML="",this.clearQBTemplate([h]))}if(l&&(this.validatValue(r,Object(b.C)(e,".e-rule-container")),Object(b.W)()&&!n.template?this.destroyControls(e):Object(b.W)()||this.destroyControls(e)),t.template=u.template,t.template){if(Object(b.W)()&&t.field){this.columnTemplateFn=this.templateParser(t.template);var f=this.element.id+t.field,g=this.columnTemplateFn(t,this,"Template",f);e.nextElementSibling.appendChild(g[0]),Object(b.sb)(f,"Template",u,!1)}Object(b.v)([e.nextElementSibling],"e-template-value"),t.template=u.template,this.setColumnTemplate(t,h,u.field,t.value||d,e,r),e.parentElement.querySelector(".e-rule-value").style.width=this.element.className.indexOf("e-device")>-1||"Vertical"===this.displayMode?"100%":"200px"}else{var v;Object(b.ib)([e.nextElementSibling],"e-template-value"),v="boolean"===i.type?this.selectedColumn.values?this.selectedColumn.values.length:2:d&&d.toLowerCase().indexOf("between")>-1?2:1;for(var y=0;y<v;y++){var C;C=this.createElement("input",{attrs:{type:"text",id:h+"_valuekey"+y}}),e.nextElementSibling.appendChild(C)}}this.renderControls(e,t,r,i)}}},{key:"setColumnTemplate",value:function(e,t,n,l,r,i){var a,o;if(e.template)if("string"==typeof e.template||void 0===e.template.create){o={requestType:"value-template-initialize",ruleID:t,field:n,operator:l,rule:i},this.trigger("actionBegin",o),this.columnTemplateFn=this.templateParser(e.template);var s=this.element.id+n;a=this.isReact||this.isAngular?this.columnTemplateFn(o,this,t,s)[0]:this.columnTemplateFn(o,this,"Template",s)[0],r.nextElementSibling.appendChild(a),this.renderReactTemplates()}else{var u=e.template;if((a="string"==typeof u.create?Object(b.V)(u.create,window)({field:n,operator:l}):u.create({field:n,operator:l}))instanceof Element)a.id=t+"_valuekey0",Object(b.v)([a],"e-template"),Object(b.v)([a],"e-"+n),r.nextElementSibling.appendChild(a);else if(a instanceof Array){Object(b.v)(a,"e-template");for(var c=0,d=a.length;c<d;c++)a[c].id=t+"_valuekey"+c,r.nextElementSibling.appendChild(a[c])}}}},{key:"updateValues",value:function(e,t){var n=1;e.className.indexOf("e-template")>-1&&(n=3);var l=e.className.split(" e-")[n],r=parseInt(e.id.slice(-1),2);switch(l){case"checkbox":var i=Object(b.M)(e,l).value;t.value=""!==i?i:void 0;break;case"textbox":case"dropdownlist":t.value=Object(b.M)(e,l).value;break;case"radio":var a=Object(b.M)(e,l);a.checked&&(t.value="boolean"==typeof t.value?"true"===a.value:this.getColumn(t.field).values?a.value:"true"===a.value),a.refresh();break;case"numerictextbox":t.operator.indexOf("between")>-1?("string"==typeof t.value&&(t.value=[]),t.value[r]=Object(b.M)(e,l).value):t.value=Object(b.M)(e,l).value;break;case"datepicker":var o=this.getColumn(t.field),s=this.getFormat(o.format),u=Object(b.M)(e,l).value;t.operator.indexOf("between")>-1?("string"==typeof t.value&&(t.value=[]),t.value[r]=u):t.value=Object(b.X)(s.format)&&u?this.intl.formatDate(u):u?this.intl.formatDate(u,s):u;break;case"multiselect":t.value=Object(b.M)(e,l).value}}},{key:"updateRules",value:function(e,t,n){for(var l,r,i,a=Object(b.C)(e,".e-group-container"),o=this.getParentGroup(a),s=Object(b.C)(e,".e-rule-container"),u=0,c=a.id.replace(this.element.id+"_",""),d=this.getValidRules(this.rule);s&&null!==s.previousElementSibling;)s=s.previousElementSibling,u++;var p=o.rules[u].operator.toString();if(i=(s=Object(b.C)(e,".e-rule-container")).id.replace(this.element.id+"_",""),Object(b.C)(e,".e-rule-filter")){l=Object(b.M)(e,"dropdownlist");var h=this.getColumn(l.value);this.isImportRules||o.rules[u].field.toLowerCase()===h.field.toLowerCase()||(!s.querySelectorAll(".e-template")&&!(p.indexOf("null")>-1)||p.indexOf("empty")>-1)&&(o.rules[u].value=""),this.selectedColumn=l.getDataByValue(l.value),o.rules[u].field=this.selectedColumn.field,o.rules[u].type=this.selectedColumn.type,o.rules[u].label=this.selectedColumn.label;var m=Object(b.C)(e,".e-rule-filter"),f=m.nextElementSibling.querySelector("input.e-control");p=Object(b.M)(f,"dropdownlist").value.toString(),o.rules[u].operator=p;var g=m.nextElementSibling.nextElementSibling,v=g.querySelectorAll("input.e-control");v.length<1&&(v=g.querySelectorAll(".e-template"));for(var y=0;y<v.length;y++)v[y]||(v[y]=m.nextElementSibling.nextElementSibling.querySelector("div.e-control")),v[y]||(v[y]=m.nextElementSibling.nextElementSibling.querySelector(".e-template")),r={groupID:c,ruleID:i,value:o.rules[u].field,type:"field"},p.indexOf("null")>-1||p.indexOf("empty")>-1?o.rules[u].value=null:this.updateValues(v[y],o.rules[u]);this.isImportRules||this.trigger("change",r),this.allowValidation&&o.rules[u].field&&e.parentElement.className.indexOf("e-tooltip")>-1&&Object(b.M)(e.parentElement,"tooltip").destroy(),this.filterRules(d,this.getValidRules(this.rule),"field")}else if(Object(b.C)(e,".e-rule-operator")){var C;l=Object(b.M)(e,"dropdownlist"),o.rules[u].operator=l.value.toString(),C=s.querySelectorAll(".e-rule-value input.e-control"),r={groupID:c,ruleID:i,value:l.value,type:"operator"},this.allowValidation&&o.rules[u].operator&&e.parentElement.className.indexOf("e-tooltip")>-1&&Object(b.M)(e.parentElement,"tooltip").destroy(),C.length>1&&!(C[0].className.indexOf("e-template")>-1)&&(o.rules[u].value=[]);for(var O=0;O<C.length;O++)o.rules[u].operator.indexOf("null")>-1||o.rules[u].operator.indexOf("empty")>-1?o.rules[u].value=null:C[O].classList.contains("e-template")||this.updateValues(C[O],o.rules[u]);this.isImportRules||this.trigger("change",r),this.filterRules(d,this.getValidRules(this.rule),"operator")}else Object(b.C)(e,".e-rule-value")&&(this.ruleValueUpdate(e,t,o,u,a,s,n),this.filterRules(d,this.getValidRules(this.rule),"value"))}},{key:"filterRules",value:function(e,t,n){JSON.stringify({condition:e.condition,not:e.not,rule:e.rules})!==JSON.stringify({condition:t.condition,not:t.not,rule:t.rules})&&(this.isImportRules||this.trigger("ruleChange",{previousRule:e,rule:t,type:n}))}},{key:"ruleValueUpdate",value:function(e,t,n,l,r,i,a){var o,s,u=["in","between","notin","notbetween"];if(n.rules[l].operator&&(s=n.rules[l].operator.toString().toLowerCase()),null!==t){if(e.className.indexOf("e-multiselect")>-1&&"number"===n.rules[l].type&&!(e.className.indexOf("e-template")>-1)){for(var c=[],d=t,p=0,h=d.length;p<h;p++)"string"==typeof d[p]&&c.push(parseFloat(d[p]));c.length&&(t=c)}if(e.classList.contains("e-blazor-template")||e.className.indexOf("e-template")>-1)n.rules[l].value=t,o={groupID:r.id,ruleID:i.id,value:n.rules[l].value,type:"value"},this.isImportRules||this.trigger("change",o);else if(e.className.indexOf("e-spin")>-1||e.className.indexOf("e-numeric")>-1)u.indexOf(s)>-1?n.rules[l].value[a]=t:n.rules[l].value=t;else if(e.className.indexOf("e-radio")>-1)n.rules[l].value=t;else if(e.className.indexOf("e-multiselect")>-1)n.rules[l].value=t;else if(e.className.indexOf("e-textbox")>-1)n.rules[l].value="in"===s||"notin"===s?this.processValueString(t,n.rules[l].type):t;else if(e.className.indexOf("e-datepicker")>-1){var m=Object(b.Q)(i.querySelector(".e-rule-filter input"),O.d),f=this.getFormat(this.getColumn(m.value).format);f.type&&(u.indexOf(s)>-1?("string"==typeof n.rules[l].value&&(n.rules[l].value=[]),n.rules[l].value[a]=this.intl.formatDate(t,f)):n.rules[l].value=this.intl.formatDate(t,f))}this.validatValue(n,i,l)}else e.className.indexOf("e-datepicker")>-1&&u.indexOf(s)>-1?("string"==typeof n.rules[l].value&&(n.rules[l].value=[]),n.rules[l].value[a]=t):n.rules[l].value=t}},{key:"validatValue",value:function(e,t,n){Object(b.X)(n)||(e=e.rules[n]);var l="object"==typeof e.value;if(this.allowValidation&&(Object(b.X)(n)||(l?e.value.length>0:e.value))){var r=t.querySelectorAll(".e-rule-value .e-control");r.length>0&&(r[0].className.indexOf("e-tooltip")>-1?Object(b.M)(r[0],"tooltip").destroy():r[0].parentElement.className.indexOf("e-tooltip")>-1&&Object(b.M)(r[0].parentElement,"tooltip").destroy(),r[1]&&r[1].parentElement.className.indexOf("e-tooltip")>-1&&Object(b.M)(r[1].parentElement,"tooltip").destroy())}}},{key:"getFormat",value:function(e){var t;return e?"string"==typeof e?(t={type:"dateTime",format:e},"short"===e&&(t.skeleton=e)):t={type:"dateTime",skeleton:e.skeleton}:t={type:"dateTime",skeleton:"yMd"},t}},{key:"findGroupByIdx",value:function(e,t,n){var l=t.rules,r=[];if(!n){for(var i=0,a=l.length;i<a;i++)(t=l[i]).rules&&r.push(t);return r[e]}return t}},{key:"destroy",value:function(){var t,n,l,r;if(this.element){for(e(a(i.prototype),"destroy",this).call(this),l=(t=this.element.querySelectorAll(".e-addrulegroup")).length,n=0;n<l;n++)Object(b.M)(t[n],"dropdown-btn").destroy(),Object(b.I)(t[n]);for(r=this.element.querySelectorAll(".e-rule-filter .e-control.e-tooltip"),n=0;n<r.length;n++)Object(b.M)(r[n],"tooltip").destroy();for(l=(t=this.element.querySelectorAll(".e-rule-filter .e-control:not(.e-tooltip)")).length,n=0;n<l;n++)Object(b.M)(t[n],"dropdownlist").destroy(),Object(b.I)(t[n]);for(r=this.element.querySelectorAll(".e-rule-operator .e-control.e-tooltip"),n=0;n<r.length;n++)Object(b.M)(r[n],"tooltip").destroy();for(l=(t=this.element.querySelectorAll(".e-rule-operator .e-control:not(.e-tooltip)")).length,n=0;n<l;n++)Object(b.M)(t[n],"dropdownlist").destroy(),Object(b.I)(t[n]);for(r=this.element.querySelectorAll(".e-rule-value .e-control.e-tooltip"),n=0;n<r.length;n++)Object(b.M)(r[n],"tooltip").destroy();this.isImportRules=!1,this.unWireEvents(),this.levelColl[this.element.id+"_group0"]=[0],this.element.innerHTML="",this.portals&&this.portals.length&&this.clearQBTemplate(),Object(b.A)(this.element,[],["e-rtl","e-responsive","e-device"])}}},{key:"addRules",value:function(e,t){t=this.element.id+"_"+t,this.isPublic=!0;for(var n=0,l=e.length;n<l;n++)this.addRuleElement(document.getElementById(t),e[n]);this.isPublic=!1}},{key:"addGroups",value:function(e,t){t=this.element.id+"_"+t;var n=document.getElementById(t),l=this.getParentGroup(n);if(e.length){this.isPublic=!0;for(var r=0,i=e.length;r<i;r++)this.updatedRule={condition:e[r].condition,not:e[r].not},this.importRules(e[r],n);this.isPublic=!1}else{var a="and",o=!1;this.updatedRule&&(a=this.updatedRule.condition,o=this.updatedRule.not),l.rules.push(this.enableNotCondition?{condition:a,not:o,rules:[]}:{condition:a,rules:[]})}var s=n.querySelector(".e-btngroup-and"),u=n.querySelector(".e-btngroup-or");s.disabled&&(s.removeAttribute("disabled"),s.checked=!0,u.removeAttribute("disabled"))}},{key:"initWrapper",value:function(){if(this.isInitialLoad=!0,this.cssClass&&Object(b.v)([this.element],this.cssClass),this.enableRtl&&Object(b.v)([this.element],"e-rtl"),this.width&&(this.element.style.width=this.width),this.height&&(this.element.style.height=this.height),this.rule.rules.length?this.isImportRules=!0:this.addGroupElement(!1,this.element),b.d.isDevice||"Vertical"===this.displayMode?(b.d.isDevice&&(this.element.style.width="100%",this.element.classList.add("e-device")),Object(b.ib)(this.element.querySelectorAll(".e-rule-container"),"e-horizontal-mode"),Object(b.v)(this.element.querySelectorAll(".e-rule-container"),"e-vertical-mode"),this.displayMode="Vertical"):this.displayMode="Horizontal",this.summaryView)this.isImportRules?this.renderSummary():this.renderSummaryCollapse();else{if(this.columns.length&&this.isImportRules){this.addGroupElement(!1,this.element,this.rule.condition);var e=Object(b.K)({},this.rule,{},!0);this.isRefreshed=!0,this.setGroupRules(e),this.isRefreshed=!1}else this.columns.length&&this.addRuleElement(this.element.querySelector(".e-group-container"),{});this.notGroupRtl(),this.readonly&&this.enableReadonly();for(var t,n=this.element.querySelectorAll("label.e-btn"),l=0;l<n.length;l++)t=n.item(l),Object(b.kb)(t,{selector:".e-btn"})}}},{key:"renderSummary",value:function(){var e=this.createElement("div",{attrs:{class:"e-summary-content",id:this.element.id+"_summary_content"}}),t=this.createElement("textarea",{attrs:{class:"e-summary-text",readonly:"true"},styles:"max-height:500px"}),n=this.createElement("button",{attrs:{class:"e-edit-rule e-css e-btn e-small e-flat e-primary"}}),l=this.createElement("div",{attrs:{class:"e-summary-btndiv"}});e.appendChild(t),t.textContent=this.getSqlFromRules(this.rule),n.textContent=this.l10n.getConstant("Edit"),l.appendChild(n),e.appendChild(l),this.element.appendChild(e)}},{key:"renderSummaryCollapse",value:function(){var e=this.createElement("div",{attrs:{class:"e-collapse-rule e-icons",title:this.l10n.getConstant("SummaryViewTitle")}});this.element.querySelector(".e-group-header").appendChild(e)}},{key:"columnSort",value:function(){"descending"===this.sortDirection.toLowerCase()?this.columns=new E.a(this.columns).executeLocal((new E.g).sortByDesc("field")):"ascending"===this.sortDirection.toLowerCase()&&(this.columns=new E.a(this.columns).executeLocal((new E.g).sortBy("field")))}},{key:"onChangeNotGroup",value:function(){if(this.element.innerHTML="",this.groupIdCounter=0,this.enableNotCondition){if(this.enableNotCondition){var e=this.createElement("button",{attrs:{type:"button",class:"e-qb-toggle"}});this.groupElem.querySelector(".e-btn-group").insertBefore(e,this.groupElem.querySelector(".e-btngroup-and"))}}else this.groupElem.querySelector(".e-qb-toggle").remove();this.rule=this.checkNotGroup(this.rule),this.initWrapper()}},{key:"notGroupRtl",value:function(){this.enableRtl?Object(b.v)(this.element.querySelectorAll(".e-btn-group"),"e-rtl"):Object(b.ib)(this.element.querySelectorAll(".e-btn-group"),"e-rtl")}},{key:"checkNotGroup",value:function(e){var t;if(e.rules)for(var n=0;n<e.rules.length;n++)t=e.rules[n],t=this.checkNotGroup(t),e.rules[n]=t;return Object(b.X)(e.not)?this.enableNotCondition&&!Object(b.X)(e.condition)&&(e.not=!1):(this.enableNotCondition&&(e.not=!1),delete e.not),e}},{key:"onPropertyChanged",value:function(e,t){for(var n=0,l=Object.keys(e);n<l.length;n++)switch(l[n]){case"summaryView":var r=this.element.querySelector(".e-group-container"),i=this.element.querySelector(".e-summary-content");e.summaryView?(r.style.display="none",this.element.querySelectorAll(".e-summary-content").length<1?(this.renderSummary(),i=this.element.querySelector(".e-summary-content")):this.element.querySelector(".e-summary-text").textContent=this.getSqlFromRules(this.rule),i.style.display="block"):(r.querySelectorAll(".e-collapse-rule").length>-1&&this.renderSummaryCollapse(),r.style.display="block",i.style.display="none");break;case"displayMode":this.refresh();break;case"showButtons":e.showButtons.ruleDelete?Object(b.ib)(this.element.querySelectorAll(".e-rule-delete"),"e-button-hide"):Object(b.v)(this.element.querySelectorAll(".e-rule-delete"),"e-button-hide"),e.showButtons.groupDelete?Object(b.ib)(this.element.querySelectorAll(".e-deletegroup"),"e-button-hide"):Object(b.v)(this.element.querySelectorAll(".e-deletegroup"),"e-button-hide");break;case"cssClass":t.cssClass&&Object(b.ib)([this.element],t.cssClass.split(" ")),e.cssClass&&Object(b.v)([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?(Object(b.v)([this.element],"e-rtl"),this.notGroupRtl()):(Object(b.ib)([this.element],"e-rtl"),this.notGroupRtl());break;case"enablePersistence":this.enablePersistence=e.enablePersistence;break;case"dataSource":this.dataSource=e.dataSource,this.refresh();break;case"columns":if(Object(b.W)()){for(var a=Object.keys(e.columns).toString(),o=e.columns[a].values;!this.target.classList.contains("e-blazor-template");)this.target=this.target.parentElement;this.updateRules(this.target,o)}else this.columns=e.columns;this.columnSort();break;case"sortDirection":this.sortDirection=e.sortDirection,this.columnSort();break;case"maxGroupCount":this.maxGroupCount=e.maxGroupCount;break;case"height":this.height=e.height,this.element.style.height=this.height;break;case"rule":this.rule=e.rule,e.rule=this.getRuleCollection(this.rule,!1);break;case"width":this.width=e.width,this.element.style.width=this.width;break;case"locale":this.locale=e.locale,this.intl=new b.n(this.locale),this.isLocale=!0,this.refresh(),this.isLocale=!1;break;case"enableNotCondition":this.onChangeNotGroup();break;case"readonly":this.isReadonly=e.readonly,this.enableReadonly()}}},{key:"preRender",value:function(){this.element.id=this.element.id||Object(b.U)("ej2-querybuilder"),this.defaultLocale={StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",Between:"Between",NotBetween:"Not Between",In:"In",NotIn:"Not In",Remove:"REMOVE",SelectField:"Select a field",SelectOperator:"Select operator",DeleteRule:"Remove this condition",DeleteGroup:"Delete group",AddGroup:"Add Group",AddCondition:"Add Condition",Edit:"EDIT",ValidationMessage:"This field is required",SummaryViewTitle:"Summary View",OtherFields:"Other Fields",AND:"AND",OR:"OR",NOT:"NOT",SelectValue:"Enter Value",IsEmpty:"Is Empty",IsNotEmpty:"Is Not Empty",IsNull:"Is Null",IsNotNull:"Is Not Null",True:"true",False:"false"},this.l10n=new b.p("querybuilder",this.defaultLocale,this.locale),this.intl=new b.n(this.locale),this.groupIdCounter=0,this.ruleIdCounter=0,this.btnGroupId=0,this.isImportRules=!1,this.parser=[],this.customOperators={stringOperator:[{value:"startswith",key:this.l10n.getConstant("StartsWith")},{value:"endswith",key:this.l10n.getConstant("EndsWith")},{value:"contains",key:this.l10n.getConstant("Contains")},{value:"equal",key:this.l10n.getConstant("Equal")},{value:"notequal",key:this.l10n.getConstant("NotEqual")},{value:"in",key:this.l10n.getConstant("In")},{value:"notin",key:this.l10n.getConstant("NotIn")},{value:"isempty",key:this.l10n.getConstant("IsEmpty")},{value:"isnotempty",key:this.l10n.getConstant("IsNotEmpty")}],dateOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"greaterthan",key:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",key:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",key:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",key:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",key:this.l10n.getConstant("NotEqual")}],booleanOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"notequal",key:this.l10n.getConstant("NotEqual")}],numberOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"greaterthanorequal",key:this.l10n.getConstant("GreaterThanOrEqual")},{value:"greaterthan",key:this.l10n.getConstant("GreaterThan")},{value:"between",key:this.l10n.getConstant("Between")},{value:"lessthan",key:this.l10n.getConstant("LessThan")},{value:"notbetween",key:this.l10n.getConstant("NotBetween")},{value:"lessthanorequal",key:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",key:this.l10n.getConstant("NotEqual")},{value:"in",key:this.l10n.getConstant("In")},{value:"notin",key:this.l10n.getConstant("NotIn")}]},this.operators={equal:"=",notequal:"!=",greaterthan:">",greaterthanorequal:">=",lessthan:"<",in:"IN",notin:"NOT IN",lessthanorequal:"<=",startswith:"LIKE",endswith:"LIKE",between:"BETWEEN",notbetween:"NOT BETWEEN",contains:"LIKE",isnull:"IS NULL",isnotnull:"IS NOT NULL",isempty:"IS EMPTY",isnotempty:"IS NOT EMPTY",notstartswith:"NOT LIKE",notendswith:"NOT LIKE",notcontains:"NOT LIKE"},this.fields||(this.fields={text:"label",value:"field"})}},{key:"render",value:function(){if(this.levelColl={},this.items=[{text:this.l10n.getConstant("AddGroup"),iconCss:"e-icons e-add-icon e-addgroup"},{text:this.l10n.getConstant("AddCondition"),iconCss:"e-icons e-add-icon e-addrule"}],this.ruleElem=this.ruleTemplate(),this.groupElem=this.groupTemplate(),!Object(b.W)()){var e=[{value:"isnull",key:this.l10n.getConstant("IsNull")},{value:"isnotnull",key:this.l10n.getConstant("IsNotNull")}],t=[{value:"isnull",key:this.l10n.getConstant("IsNull")},{value:"isnotnull",key:this.l10n.getConstant("IsNotNull")}];this.customOperators.stringOperator=this.customOperators.stringOperator.concat(e),this.customOperators.numberOperator=this.customOperators.numberOperator.concat(t)}this.dataSource instanceof E.a?(this.dataManager=this.dataSource,this.executeDataManager((new E.g).take(1))):(this.dataManager=new E.a(this.dataSource),this.dataColl=this.dataManager.executeLocal(new E.g),this.initControl()),this.renderComplete()}},{key:"templateParser",value:function(e){if(e)try{if(document.querySelectorAll(e).length)return Object(b.E)(document.querySelector(e).innerHTML.trim())}catch(t){return Object(b.E)(e)}}},{key:"executeDataManager",value:function(e){var t=this,n=this.dataManager.executeQuery(e),l=new E.c;n.then((function(e){t.dataColl=e.actual&&e.actual.result?e.actual.result:e.result,t.initControl()})).catch((function(e){l.reject(e)}))}},{key:"initControl",value:function(){this.initialize(),this.initWrapper(),this.wireEvents()}},{key:"wireEvents",value:function(){var e=this.getWrapper();b.l.add(e,"click",this.clickEventHandler,this),b.l.add(e,"focusout",this.focusEventHandler,this),b.l.add(e,"focusin",this.focusEventHandler,this),b.l.add(this.element,"keydown",this.keyBoardHandler,this)}},{key:"unWireEvents",value:function(){var e=this.getWrapper();b.l.remove(e,"click",this.clickEventHandler),b.l.remove(e,"focusout",this.focusEventHandler),b.l.remove(e,"focusin",this.focusEventHandler),b.l.remove(this.element,"keydown",this.keyBoardHandler)}},{key:"getParentGroup",value:function(e,t){for(var n=e instanceof Element?this.levelColl[e.id]:this.levelColl[e],l=t?n.length-1:n.length,r=this.rule,i=0;i<l;i++)r=this.findGroupByIdx(n[i],r,0===i);return r}},{key:"deleteGroup",value:function(e){var t=this,n={groupID:e.id.replace(this.element.id+"_",""),cancel:!1,type:"deleteGroup"};this.isImportRules?this.deleteGroupSuccessCallBack(n,e):this.trigger("beforeChange",n,(function(n){t.deleteGroupSuccessCallBack(n,e)}))}},{key:"deleteGroupSuccessCallBack",value:function(e,t){if(!e.cancel){this.actionButton&&Object(b.M)(this.actionButton,"tooltip").destroy();var n,l,r=t,i=this.getParentGroup(r,!0),a=0,o=this.getValidRules(this.rule),s=r.nextElementSibling,u=r.previousElementSibling,c=r.querySelectorAll(".e-group-container"),d=r.querySelectorAll(".e-tooltip");for(l=d.length,n=0;n<l;n++)Object(b.M)(d[n],"tooltip").destroy();for(n=0,l=c.length;n<l;n++)delete this.levelColl[c[n].id];for(;null!==r.previousElementSibling;)r=r.previousElementSibling,a++;s&&s.className.indexOf("e-separate-rule")>-1&&(Object(b.ib)([s],"e-separate-rule"),Object(b.v)([s],"e-joined-rule"),u&&u.className.indexOf("e-rule-container")>-1&&Object(b.v)([u],"e-prev-joined-rule"));var p=r.parentElement.parentElement.parentElement,h=[];if(this.isReact||this.isAngular){var m=i.rules[a],f=t.querySelectorAll(".e-rule-container");if(m&&m.rules)for(var g=0;g<m.rules.length;g++){var v=this.getColumn(m.rules[g].field);v&&(v.ruleTemplate||this.isPlatformTemplate(v))&&h.push(f[g].id)}}Object(b.I)(t),h.length&&this.clearQBTemplate(h),i.rules.splice(a,1),delete this.levelColl[e.groupID],this.refreshLevelColl(),this.disableRuleCondition(p,i),this.isImportRules||this.trigger("change",e),this.filterRules(o,this.getValidRules(this.rule),"deleteGroup")}}},{key:"isPlatformTemplate",value:function(e){return e.template&&("string"==typeof e.template||void 0===e.template.create)}},{key:"deleteRule",value:function(e){var t=this,n={groupID:Object(b.C)(e,".e-group-container").id.replace(this.element.id+"_",""),ruleID:Object(b.C)(e,".e-rule-container").id.replace(this.element.id+"_",""),cancel:!1,type:"deleteRule"};this.isImportRules?this.deleteRuleSuccessCallBack(n,e):this.trigger("beforeChange",n,(function(n){t.deleteRuleSuccessCallBack(n,e)}))}},{key:"deleteRuleSuccessCallBack",value:function(e,t){if(!e.cancel){this.actionButton&&this.actionButton.className.indexOf("e-tooltip")>-1&&Object(b.M)(this.actionButton,"tooltip").destroy();var n,l,r=Object(b.C)(t,".e-group-container"),i=this.getParentGroup(r),a=Object(b.C)(t,".e-rule-container"),o=this.getValidRules(this.rule),s=a,u=a.nextElementSibling,c=a.previousElementSibling,d=0,p=a.querySelectorAll(".e-tooltip"),h=p.length;for(n=0;n<h;n++)Object(b.M)(p[n],"tooltip").destroy();for(;null!==a.previousElementSibling;)a=a.previousElementSibling,d++;(l=this.getColumn(i.rules[d].field))&&l.template&&s.querySelector(".e-template")&&this.templateDestroy(l,s.querySelector(".e-template").id),(!c||c.className.indexOf("e-rule-container")<0)&&u&&Object(b.ib)([u],"e-joined-rule"),(!u||u.className.indexOf("e-rule-container")<0)&&c&&Object(b.ib)([c],"e-prev-joined-rule"),Object(b.I)(s),l&&l.ruleTemplate&&this.clearQBTemplate([a.id]),l&&this.isPlatformTemplate(l)&&this.clearQBTemplate([s.id]),i.rules.splice(d,1),i.rules[0]&&i.rules[0].rules||this.disableRuleCondition(r,i),this.isImportRules||this.trigger("change",e),this.filterRules(o,this.getValidRules(this.rule),"deleteRule")}}},{key:"setGroupRules",value:function(e){this.reset(),this.groupIdCounter=1,this.ruleIdCounter=0,this.isImportRules=!0,this.rule=e,e=this.getRuleCollection(this.rule,!1),this.importRules(this.rule,this.element.querySelector(".e-group-container"),!0),this.isImportRules=!1}},{key:"keyBoardHandler",value:function(e){!this.readonly||38!==e.keyCode&&40!==e.keyCode&&13!==e.keyCode||e.preventDefault()}},{key:"clearQBTemplate",value:function(e){(this.isReact||this.isAngular)&&this.clearTemplate(e)}},{key:"disableRuleCondition",value:function(e,t){if(!this.readonly){var n=e.querySelector(".e-rule-list").childElementCount,l=e.querySelector(".e-btngroup-and"),r=e.querySelector(".e-btngroup-or");n>1?(l.disabled=!1,r.disabled=!1,(r.nextElementSibling.classList.contains("e-btn-disable")||l.nextElementSibling.classList.contains("e-btn-disable"))&&(r.nextElementSibling.classList.remove("e-btn-disable"),l.nextElementSibling.classList.remove("e-btn-disable")),t&&"or"===t.condition?r.checked=!0:l.checked=!0):(l.checked=!1,l.disabled=!0,r.checked=!1,r.disabled=!0,t&&(r.nextElementSibling.classList.add("e-btn-disable"),l.nextElementSibling.classList.add("e-btn-disable")))}}},{key:"getValidRules",value:function(e){e||(e=this.getRules());var t=e.condition,n=e.not,l=Object(b.K)([],e.rules,[],!0);return this.getRuleCollection({condition:t,rules:l,not:n},!0)}},{key:"getRuleCollection",value:function(e,t){var n;if(e.rules&&e.rules.length&&(Object.keys(e.rules[0]).length>6||t))for(var l=e.rules.length,r=0;r<l;r++)n=e.rules[r],n=this.getRuleCollection(n,t),e.rules[r]=n,Object.keys(n).length<1&&t&&(e.rules.splice(r,1),r--,l--);if(e.condition||""===e.condition)e=this.enableNotCondition?{condition:e.condition,rules:e.rules,not:e.not}:{condition:e.condition,rules:e.rules};else if(e.operator&&(e.operator.toString().indexOf("null")>-1||e.operator.toString().indexOf("empty")>-1)&&(e.value=null),this.isRefreshed&&this.enablePersistence||""!==this.rule.field&&""!==e.operator&&""!==e.value&&void 0!==e.value){var i=e.custom;e={label:e.label,field:e.field,operator:e.operator,type:e.type,value:e.value},i&&(e.custom=i)}else e={};return e}},{key:"setRules",value:function(e){var t=Object(b.K)({},e,{},!0);this.setGroupRules(t)}},{key:"getRules",value:function(){return this.enableNotCondition?{condition:this.rule.condition,rules:this.rule.rules,not:this.rule.not}:{condition:this.rule.condition,rules:this.rule.rules}}},{key:"getRule",value:function(e){var t,n,l=0;e instanceof HTMLElement?t=Object(b.C)(e,".e-rule-container"):(n=this.element.id+"_"+e,t=document.getElementById(n));for(var r=Object(b.C)(t,".e-group-container"),i=this.getParentGroup(r);null!==t.previousElementSibling;)t=t.previousElementSibling,l++;return i.rules[l]}},{key:"getGroup",value:function(e){e instanceof Element&&e.className.indexOf("e-group-container")<1&&(e=Object(b.C)(e,".e-group-container"));var t=e instanceof Element?e.id:this.element.id+"_"+e,n=this.getParentGroup(t);return this.enableNotCondition?{rules:n.rules,condition:n.condition,not:n.not}:{rules:n.rules,condition:n.condition}}},{key:"deleteGroups",value:function(e){var t,n,l=e.length;for(t=0;t<l;t++)n=this.element.id+"_"+e[t],this.deleteGroup(document.getElementById(n))}},{key:"getFilteredRecords",value:function(){var e,t=this.getPredicate(this.getValidRules(this.rule));if(e=Object(b.X)(t)?new E.g:(new E.g).where(t),Object(b.W)()){var n=new E.h,l=new E.a({url:"",adaptor:new E.h}),r=n.processQuery(l,e),i=JSON.parse(r.data);return Object.keys(i).length?i:null}return this.dataManager.executeQuery(e)}},{key:"deleteRules",value:function(e){var t,n,l=e.length;for(t=0;t<l;t++)n=this.element.id+"_"+e[t],this.deleteRule(document.getElementById(n))}},{key:"getDataManagerQuery",value:function(e){for(var t=this.getPredicate(e),n=[],l=0,r=Object.keys(this.columns);l<r.length;l++)n.push(this.columns[l].field);return e.rules.length?(new E.g).select(n).where(t):(new E.g).select(n)}},{key:"getPredicate",value:function(e){var t,n,l,r,i=e.rules,a=!1,o=["notcontains","notstartswith","notendswith"];if(!i)return t;for(var s=0,u=i.length;s<u;s++)if(a=!1,Object.keys(i[s]).indexOf("rules")>-1&&i[s].rules)(n=this.getPredicate(i[s]))&&(t=t?"and"===e.condition?t.and(n):t.or(n):n);else if(i[s].operator.length){var c=i[s].operator.toLowerCase(),d=!1,p=["equal","notequal","greaterthan","lessthanorequal"];if("string"===i[s].type&&(a=!this.matchCase),"date"===i[s].type&&p.indexOf(c)>-1&&(a=!0),r=this.getColumn(i[s].field),c.indexOf("null")>-1||c.indexOf("empty")>-1)i[s].value=null;else if("date"!==i[s].type||i[s].value instanceof Array)l=i[s].value;else{var h=this.getFormat(r.format);Object(b.X)(i[s].value)?l=null:(l=this.getDate(i[s].value,h),p.indexOf(c)>-1&&(d=!0))}if(0===s)d||(c.indexOf("in")>-1||c.indexOf("between")>-1||c.indexOf("null")>-1||c.indexOf("empty")>-1)&&c.indexOf("contains")<0?t=d?this.datePredicate(i[s],l):this.arrayPredicate(i[s]):""!==l&&o.indexOf(c)<0&&(t=new E.f(i[s].field,i[s].operator,l,a));else{if(o.indexOf(c)>-1)continue;if(d||(c.indexOf("in")>-1||c.indexOf("between")>-1||c.indexOf("null")>-1||c.indexOf("empty")>-1)&&c.indexOf("contains")<0)t=d?this.datePredicate(i[s],l,t,e.condition):this.arrayPredicate(i[s],t,e.condition);else if("and"===e.condition){var m=l;t&&""!==m?t=t.and(i[s].field,i[s].operator,l,a):""!==m&&(t=new E.f(i[s].field,i[s].operator,l,a))}else{var f=l;t&&""!==f?t=t.or(i[s].field,i[s].operator,l,a):""!==f&&(t=new E.f(i[s].field,i[s].operator,l,a))}}}return t}},{key:"getLocale",value:function(){var e=Object(b.W)()?".dates.days.short":".dates.calendars.gregorian.days.format.short",t=this.locale,n=Object(b.W)()?"":"main.";return Object(b.V)(n+""+this.locale+e,b.B)||(t="en"),t}},{key:"getColumn",value:function(e){this.separator.length>0&&(e=e.split(this.separator)[0]);for(var t,n=this.columns,l=0,r=n.length;l<r;l++)n[l].field===e&&(t=n[l]);return t}},{key:"getOperators",value:function(e){return this.getColumn(e).operators}},{key:"datePredicate",value:function(e,t,n,l){var r,i=new Date(t.getTime()),a=new Date(i.setDate(i.getDate()+1));switch(e.operator){case"equal":r=(r=new E.f(e.field,"greaterthanorequal",t)).and(e.field,"lessthan",a);break;case"notequal":r=(r=new E.f(e.field,"lessthan",t)).or(e.field,"greaterthanorequal",a);break;case"greaterthan":r=new E.f(e.field,"greaterthanorequal",a);break;case"lessthanorequal":r=new E.f(e.field,"lessthan",a)}return r&&(n?"and"===l?n=n.and(r):"or"===l&&(n=n.or(r)):n=r),n}},{key:"arrayPredicate",value:function(e,t,n){var l,r,i=e.value,a=e.operator.toString(),o=e.value,s=this.getColumn(e.field);if(l=this.getFormat(s.format),a.indexOf("null")>-1||a.indexOf("empty")>-1)switch(a){case"isnull":r=new E.f(e.field,"isnull",o);break;case"isnotnull":r=new E.f(e.field,"notnull",o);break;case"isempty":r=new E.f(e.field,"equal","");break;case"isnotempty":r=new E.f(e.field,"notequal","")}if(!(a.indexOf("null")>-1||a.indexOf("empty")>-1))for(var u=0,c=i.length;u<c;u++)if(""!==i[u])if(0===u)switch(a){case"between":r=new E.f(e.field,"greaterthanorequal","date"===s.type?i[u]?this.getDate(i[u],l):null:i[u]);break;case"notbetween":r=new E.f(e.field,"lessthan","date"===s.type?i[u]?this.getDate(i[u],l):null:i[u]);break;case"in":r=new E.f(e.field,"equal",i[u]);break;case"notin":r=new E.f(e.field,"notequal",i[u])}else switch(e.operator){case"between":if("date"===s.type)if(i[u]){var d=this.getDate(i[u],l),p=new Date(d.setDate(d.getDate()+1));r=r.and(e.field,"lessthan",p)}else r=r.and(e.field,"lessthan",i[u]);else r=r.and(e.field,"lessthanorequal",i[u]);break;case"notbetween":r="date"===s.type?r.or(e.field,"greaterthan",i[u]?this.getDate(i[u],l):i[u]):r.or(e.field,"greaterthan",i[u]);break;case"in":r=r.or(e.field,"equal",i[u]);break;case"notin":r=r.and(e.field,"notequal",i[u])}return r&&(t?"and"===n?t=t.and(r):"or"===n&&(t=t.or(r)):t=r),t}},{key:"getDate",value:function(e,t){var n=this.intl.parseDate(e,t);return e.indexOf(":")>-1&&(e.indexOf("/")<0||e.indexOf(",")<0)&&n.setDate((new Date).getDate()),n}},{key:"importRules",value:function(e,t,n){if(n){if(e.rules.length>1){var l=t.querySelector(".e-btngroup-or"),r=t.querySelector(".e-btngroup-and");l.disabled=!1,r.disabled=!1,"or"===e.condition?l.checked=!0:r.checked=!0}else this.disableRuleCondition(t);if(this.enableNotCondition){var i=t.querySelector(".e-qb-toggle");e.not?Object(b.v)([i],"e-active-toggle"):Object(b.ib)([i],"e-active-toggle")}}else t=this.renderGroup(e.condition,t);var a=e.rules;if(!Object(b.X)(a))for(var o=0,s=a.length;o<s;o++){var u=Object.keys(a[o]);!Object(b.X)(a[o].rules)&&u.indexOf("rules")>-1?(t=this.renderGroup(a[o].condition,t),t=this.importRules(a[o],t,!0)):this.renderRule(a[o],t)}return(t=Object(b.C)(t,".e-rule-list"))&&(t=Object(b.C)(t,".e-group-container")),t}},{key:"renderGroup",value:function(e,t){this.addGroupElement(!0,t,e);var n=t.querySelectorAll(".e-group-container");return n[n.length-1]}},{key:"renderRule",value:function(e,t){t.className.indexOf("e-group-container")>-1?this.addRuleElement(t,e):this.addRuleElement(t.querySelector(".e-group-container"),e)}},{key:"enableReadonly",value:function(){for(var e=this.element.querySelectorAll(".e-dropdownlist, .e-numerictextbox, .e-textbox, .e-datepicker, .e-multiselect .e-lib, .e-radio"),t=0;t<e.length;t++)e[t].classList.contains("e-dropdownlist")?Object(b.Q)(e[t],O.d).readonly=this.isReadonly:e[t].classList.contains("e-numerictextbox")?Object(b.Q)(e[t],S.e).readonly=this.isReadonly:e[t].classList.contains("e-textbox")?Object(b.Q)(e[t],S.g).readonly=this.isReadonly:e[t].classList.contains("e-datepicker")?Object(b.Q)(e[t],x.b).readonly=this.isReadonly:e[t].classList.contains("e-multiselect")?Object(b.Q)(e[t],O.g).readonly=this.isReadonly:e[t].classList.contains("e-radio")&&(Object(b.Q)(e[t],C.d).checked||(e[t].parentElement.style.display=this.isReadonly?"none":"inherit"));var n=this.element.querySelectorAll(".e-deletegroup"),l=this.element.querySelectorAll(".e-addrulegroup"),r=this.element.querySelectorAll(".e-removerule");!this.isReadonly&&this.ruleElem.classList.contains("e-readonly")&&this.ruleElem.classList.remove("e-readonly");for(var i=[n,l,r],a=0;a<i.length;a++)i[a].forEach((function(e){e.classList.contains("e-readonly")?e.classList.remove("e-readonly"):e.classList.add("e-readonly")}));this.enableBtnGroup()}},{key:"enableBtnGroup",value:function(){var e=this,t=this.element.querySelectorAll(".e-btngroup-and-lbl, .e-btngroup-or-lbl, .e-qb-toggle"),n=!1;t.forEach((function(t){!t.classList.contains("e-qb-toggle")||t.classList.contains("e-active-toggle")||t.classList.contains("e-readonly")?t.classList.contains("e-qb-toggle")&&t.classList.contains("e-not-readonly")?t.classList.remove("e-not-readonly"):t.classList.contains("e-qb-toggle")&&t.classList.contains("e-readonly")?t.classList.remove("e-readonly"):t.classList.contains("e-active-toggle")?(t.classList.add("e-not-readonly"),n=!0):t.previousElementSibling.checked||t.classList.contains("e-readonly")?(t.classList.remove("e-readonly"),n?t.classList.add("AND"===t.textContent?"e-readonly-and":"e-readonly-or"):("AND"===t.textContent&&e.isReadonly?(t.classList.remove("e-not"),t.classList.add("e-readonly-and")):(e.enableNotCondition&&t.classList.add("e-not"),t.classList.remove("e-readonly-and")),"OR"===t.textContent&&e.isReadonly?t.classList.add("e-readonly-or-not"):t.classList.remove("e-readonly-or-not"))):t.classList.contains("e-btn-disable")||t.classList.add("e-readonly"):(t.classList.add("e-readonly"),n=!1)}))}},{key:"getSqlString",value:function(e,t,n){var l=!1;n||""===n?n+="(":(n="",l=!0);var r=e.condition;e.not&&(n+=l?"NOT (":" NOT (");for(var i=0,a=e.rules.length;i<a;i++){if(e.rules[i].rules)n=this.getSqlString(e.rules[i],t,n);else{var o=e.rules[i],s="";if(o.value instanceof Array)if(o.operator.toString().indexOf("between")>-1)s+="date"===o.type?'"'+o.value[0]+'" AND "'+o.value[1]+'"':o.value[0]+" AND "+o.value[1];else if("string"==typeof o.value[0]&&null!==o.value){s+='("'+o.value[0]+'"';for(var u=1,c=o.value.length;u<c;u++)s+=',"'+o.value[u]+'"';s+=")"}else s+="("+o.value+")";else o.operator.toString().indexOf("startswith")>-1?s+=o.value?'("'+o.value+'%")':"("+o.value+")":o.operator.toString().indexOf("endswith")>-1?s+=o.value?'("%'+o.value+'")':"("+o.value+")":o.operator.toString().indexOf("contains")>-1?s+=o.value?'("%'+o.value+'%")':"("+o.value+")":s+="number"===o.type||"boolean"==typeof o.value||null===o.value?o.value:'"'+o.value+'"';o.operator.toString().indexOf("null")>-1||o.operator.toString().indexOf("empty")>-1?(t&&(o.field="`"+o.field+"`"),n+=o.field+" "+this.operators[o.operator]):(t&&(o.field="`"+o.field+"`"),n+=o.field+" "+this.operators[o.operator]+" "+s)}i!==a-1&&(n+=" "+r.toUpperCase()+" ")}return l||(n+=")"),e.not&&(n+=")"),n}},{key:"setRulesFromSql",value:function(e){e=e.replace(/`/g,"");var t=this.getRulesFromSql(e);this.setRules({condition:t.condition,not:t.not,rules:t.rules})}},{key:"getRulesFromSql",value:function(e){this.parser=[],this.sqlParser(e),this.rule={condition:"and",not:!1,rules:[]};var t=this.processParser(this.parser,this.rule,[0]);return this.enableNotCondition?{condition:t.condition,not:t.not,rules:t.rules}:{condition:t.condition,rules:t.rules}}},{key:"getSqlFromRules",value:function(e,t){return e||(e=this.getValidRules()),e=this.getRuleCollection(e,!1),this.getSqlString(this.getValidRules(e),t).replace(/"/g,"'")}},{key:"sqlParser",value:function(e){var t,n=0;do{t=e.slice(n),n+=this.parseSqlStrings(t)}while(""!==t);return this.parser}},{key:"parseSqlStrings",value:function(e){for(var t,n,l=["=","!=","<=",">=","<",">"],r=["AND","OR","NOT"],i=["IN","NOT IN","LIKE","NOT LIKE","BETWEEN","NOT BETWEEN","IS NULL","IS NOT NULL","IS EMPTY","IS NOT EMPTY"],a=0,o=l.length;a<o;a++)if(t=/^\w+$/.test(l[a])?"\\b":"",new RegExp("^("+l[a]+")"+t,"ig").exec(e))return this.parser.push(["Operators",l[a].toLowerCase()]),l[a].length;var s=this.parser[this.parser.length-1];if(!s||s&&"Literal"!==s[0])for(var u=0,c=r.length;u<c;u++)if(t=/^\w+$/.test(r[u])?"\\b":"",new RegExp("^("+r[u]+")"+t,"ig").exec(e))return this.parser.push(["Conditions",r[u].toLowerCase()]),r[u].length;for(var d=0,p=i.length;d<p;d++)if(t=/^\w+$/.test(i[d])?"\\b":"",new RegExp("^("+i[d]+")"+t,"ig").exec(e))return this.parser.push(["SubOperators",i[d].toLowerCase()]),i[d].length;return/^\(/.exec(e)?(this.parser.push(["Left","("]),1):/^\)/.exec(e)?(this.parser.push(["Right",")"]),1):/^(true|false)/.exec(e)?(n=/^(true|false)/.exec(e)[0],this.parser.push(["String",n]),n.length):/^null/.exec(e)?(n=/^null/.exec(e)[0],this.parser.push(["String",null]),n.length):/^`?([a-z_][a-z0-9_.\[\]\(\)]{0,}(\:(number|float|string|date|boolean))?)`?/i.exec(e)?(n=/^`?([a-z_][a-z0-9_.\[\]\(\)]{0,}(\:(number|float|string|date|boolean))?)`?/i.exec(e)[1],this.parser.push(["Literal",n]),n.length):/^'((?:[^\\']+?|\\.|'')*)'(?!')/.exec(e)?(n=/^'((?:[^\\']+?|\\.|'')*)'(?!')/.exec(e)[0],this.parser.push(["String",n]),n.length):/^"([^\\"]*(?:\\.[^\\"]*)*)"/.exec(e)?(n=/^"([^\\"]*(?:\\.[^\\"]*)*)"/.exec(e)[0],this.parser.push(["DoubleString",n]),n.length):/^[0-9]+(\.[0-9]+)?/.exec(e)?(n=/^[0-9]+(\.[0-9]+)?/.exec(e)[0],this.parser.push(["Number",n]),n.length):/^-?[0-9]+(\.[0-9]+)?/.exec(e)?(n=/^-?[0-9]+(\.[0-9]+)?/.exec(e)[0],this.parser.push(["Number",n]),n.length):1}},{key:"getOperator",value:function(e,t){if(e){if(0===e.indexOf("%")&&"%"===e[e.length-1])return"not like"===t?"notcontains":"contains";if(0!==e.indexOf("%")&&e.indexOf("%")===e.length-1)return"not like"===t?"notstartswith":"startswith";if(0===e.indexOf("%")&&e.indexOf("%")!==e.length-1)return"not like"===t?"notendswith":"endswith"}else{if("not like"===t)return"notequal";if("like"===t)return"equal"}return{"=":"equal","!=":"notequal","<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal",in:"in","not in":"notin",between:"between","not between":"notbetween","is empty":"isempty","is null":"isnull","is not null":"isnotnull","is not empty":"isnotempty"}[t]}},{key:"getTypeFromColumn",value:function(e){for(var t=this.columns,n=0;n<t.length;n++)if(t[n].field===e.field){e.type=t[n].type;break}return e.type}},{key:"processParser",value:function(e,t,n){for(var l,r,i,a,o,s,u,c,d,p,h=[],m=[],f=0,g=e.length;f<g;f++)if("Literal"===e[f][0]){if(i={label:e[f][1],field:e[f][1]},"SubOperators"===e[f+1][0]){if(e[f+1][1].indexOf("null")>-1||e[f+1][1].indexOf("empty")>-1)i.operator=this.getOperator(" ",e[f+1][1]),i.value=null,i.type=this.getTypeFromColumn(i);else{var v=e[f+3][1]?e[f+3][1].replace(/'/g,""):e[f+3][1];i.operator=this.getOperator(v,e[f+1][1])}for(p=e[f+1][1],l=1+ ++f,r=g,l=f+1;l<r;l++){if("Right"===e[l][0]){f=l;break}if(p.indexOf("null")>-1||p.indexOf("empty")>-1)break;if(p.indexOf("like")>-1&&"String"===e[l][0]){var y=e[l][1]?e[l][1].replace(/'/g,"").replace(/%/g,""):e[l][1];i.value=y,i.type="string"}else if(p.indexOf("between")>-1){if("Literal"===e[l][0]||"Left"===e[l][0])break;"Number"===e[l][0]?h.push(Number(e[l][1])):"String"===e[l][0]&&m.push(e[l][1].replace(/'/g,""))}else"Number"===e[l][0]?h.push(Number(e[l][1])):"String"===e[l][0]&&m.push(e[l][1].replace(/'/g,""));i.type=this.getTypeFromColumn(i)}p.indexOf("like")<0&&("Number"===e[l-1][0]?(i.value=h,i.type="number"):"String"===e[l-1][0]?(i.value=m,i.type="string"):p.indexOf("between")>-1&&"Conditions"===e[l-1][0]&&(i.value=h,i.type="number"),h=[],m=[],i.type=this.getTypeFromColumn(i))}else"Operators"===e[f+1][0]&&(i.operator=this.getOperator(e[f+2][1],e[f+1][1]),"Number"===e[f+2][0]?(i.type="number",i.value=Number(e[f+2][1])):(i.type="string",i.value=e[f+2][1]?e[f+2][1].replace(/'/g,""):e[f+2][1]),i.type=this.getTypeFromColumn(i));t.rules.push(i)}else{if("Left"===e[f][0]){if("Left"!==e[0][0]&&"not"===e[f-1][1])continue;for(this.parser=e.splice(f+1,g-(f+1)),a=this.enableNotCondition?{condition:"and",rules:[],not:!1}:{condition:"and",rules:[]},d=0,s=t.rules.length,o=0;o<s;o++)t.rules[o].rules&&d++;return n.push(d),t.rules.push(a),a=this.processParser(this.parser,a,n),t}if("Conditions"===e[f][0])"not"===e[f][1]?t.not=!0:t.condition=e[f][1];else if("Right"===e[f][0]){for(this.parser=e.splice(f+1,g-(f+1)),n.pop(),t=this.rule,c=n.length,u=0;u<c;u++)t=this.findGroupByIdx(n[u],t,0===u);return this.processParser(this.parser,t,n)}}return t}}]),i}(b.h),N([Object(b.k)()],c.prototype,"created",void 0),N([Object(b.k)()],c.prototype,"actionBegin",void 0),N([Object(b.k)()],c.prototype,"beforeChange",void 0),N([Object(b.k)()],c.prototype,"change",void 0),N([Object(b.k)()],c.prototype,"ruleChange",void 0),N([Object(b.s)({ruleDelete:!0,groupInsert:!0,groupDelete:!0})],c.prototype,"showButtons",void 0),N([Object(b.s)(!1)],c.prototype,"summaryView",void 0),N([Object(b.s)(!1)],c.prototype,"allowValidation",void 0),N([Object(b.s)([])],c.prototype,"columns",void 0),N([Object(b.s)("")],c.prototype,"cssClass",void 0),N([Object(b.s)([])],c.prototype,"dataSource",void 0),N([Object(b.s)("Horizontal")],c.prototype,"displayMode",void 0),N([Object(b.s)(!1)],c.prototype,"enablePersistence",void 0),N([Object(b.s)("Default")],c.prototype,"sortDirection",void 0),N([Object(b.s)(5)],c.prototype,"maxGroupCount",void 0),N([Object(b.s)("auto")],c.prototype,"height",void 0),N([Object(b.s)("auto")],c.prototype,"width",void 0),N([Object(b.s)(!1)],c.prototype,"matchCase",void 0),N([Object(b.s)(0)],c.prototype,"immediateModeDelay",void 0),N([Object(b.s)(!1)],c.prototype,"enableNotCondition",void 0),N([Object(b.s)(!1)],c.prototype,"readonly",void 0),N([Object(b.s)("")],c.prototype,"separator",void 0),N([Object(b.g)({condition:"and",rules:[]},k)],c.prototype,"rule",void 0),c=N([b.q],c)),j=s("ofXK"),A=["ruleTemplate"],T=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},q=["category","field","format","label","operators","ruleTemplate","step","template","type","validation","value","values"],D=[],L=((h=function(e){t(r,e);var n=l(r);function r(e){var t;return o(this,r),(t=n.call(this)).viewContainerRef=e,Object(y.g)("currentInstance",i(t),t.viewContainerRef),t.registerEvents(D),t.directivePropList=q,t}return r}(y.b)).\u0275fac=function(e){return new(e||h)(v.Nb(v.O))},h.\u0275dir=v.Ib({type:h,selectors:[["e-column"]],contentQueries:function(e,t,n){var l;1&e&&v.Gb(n,A,!0),2&e&&v.xc(l=v.fc())&&(t.ruleTemplate=l.first)},inputs:{category:"category",field:"field",format:"format",label:"label",operators:"operators",ruleTemplate:"ruleTemplate",step:"step",template:"template",type:"type",validation:"validation",value:"value",values:"values"},features:[v.ub]}),function(e,t,n,l){var r,i=arguments.length,a=i<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,l);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);i>3&&a&&Object.defineProperty(t,n,a)}([Object(y.f)(),T("design:type",Object)],h.prototype,"ruleTemplate",void 0),h),P=((p=function(e){t(r,e);var n=l(r);function r(){return o(this,r),n.call(this,"columns")}return r}(y.a)).\u0275fac=function(e){return new(e||p)},p.\u0275dir=v.Ib({type:p,selectors:[["e-columns"]],contentQueries:function(e,t,n){var l;1&e&&v.Gb(n,L,!1),2&e&&v.xc(l=v.fc())&&(t.children=l)},features:[v.ub]}),p),B=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},M=["actionBegin","beforeChange","change","created","ruleChange"],_=[""],G=((g=function(e){t(r,e);var n=l(r);function r(e,t,l,a){var s;return o(this,r),(s=n.call(this)).ngEle=e,s.srenderer=t,s.viewContainerRef=l,s.injector=a,s.tags=["columns"],s.element=s.ngEle.nativeElement,s.injectedModules=s.injectedModules||[],s.registerEvents(M),s.addTwoWay.call(i(s),_),Object(y.g)("currentInstance",i(s),s.viewContainerRef),s.context=new y.c,s}return u(r,[{key:"ngOnInit",value:function(){this.context.ngOnInit(this)}},{key:"ngAfterViewInit",value:function(){this.context.ngAfterViewInit(this)}},{key:"ngOnDestroy",value:function(){this.context.ngOnDestroy(this)}},{key:"ngAfterContentChecked",value:function(){this.tagObjects[0].instance=this.childColumns,this.context.ngAfterContentChecked(this)}}]),r}(R)).\u0275fac=function(e){return new(e||g)(v.Nb(v.l),v.Nb(v.D),v.Nb(v.O),v.Nb(v.r))},g.\u0275cmp=v.Hb({type:g,selectors:[["ejs-querybuilder"]],contentQueries:function(e,t,n){var l;1&e&&v.Gb(n,P,!0),2&e&&v.xc(l=v.fc())&&(t.childColumns=l.first)},inputs:{allowValidation:"allowValidation",columns:"columns",cssClass:"cssClass",dataSource:"dataSource",displayMode:"displayMode",enableNotCondition:"enableNotCondition",enablePersistence:"enablePersistence",enableRtl:"enableRtl",height:"height",immediateModeDelay:"immediateModeDelay",locale:"locale",matchCase:"matchCase",maxGroupCount:"maxGroupCount",readonly:"readonly",rule:"rule",separator:"separator",showButtons:"showButtons",sortDirection:"sortDirection",summaryView:"summaryView",width:"width"},outputs:{actionBegin:"actionBegin",beforeChange:"beforeChange",change:"change",created:"created",ruleChange:"ruleChange"},features:[v.ub],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),g=function(e,t,n,l){var r,i=arguments.length,a=i<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,l);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([Object(y.d)([y.c]),B("design:paramtypes",[v.l,v.D,v.O,v.r])],g)),V=((f=function e(){o(this,e)}).\u0275mod=v.Lb({type:f}),f.\u0275inj=v.Kb({factory:function(e){return new(e||f)},imports:[[j.b]]}),f),F=((m=function e(){o(this,e)}).\u0275mod=v.Lb({type:m}),m.\u0275inj=v.Kb({factory:function(e){return new(e||m)},providers:[],imports:[[j.b,V],V]}),m)},Vtjc:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var l=n("1gpv"),r={BusinessHourList:l.f+"business_hours",BusinessHourDetail:l.f+"business_hours",AddBusinessHour:l.f+"business_hours",EditBusinessHour:l.f+"business_hours",DeleteBusinessHour:l.f+"business_hours",DeleteHoliday:l.f+"business_hours/holiday",BusinessWorkingDaysList:l.k+"/assets/mock.json/businessDays.json"}},bqpE:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var l=n("1gpv"),r={RoleList:l.f+"roles",MemberList:l.f+"roles/",RoleDetail:l.f+"roles/",AddMember:l.f+"roles/",RemoveMember:l.f+"roles/",UserList:l.f+"agents/collections",AddRole:l.f+"roles",EditRole:l.f+"roles",DeleteRole:l.f+"roles/",PermissionList:l.f+"permissions/",RoleCollection:l.f+"roles/collections",CloneRole:l.f+"roles/clone_role"}},mrjb:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var l=n("dSv1"),r=n("fXoL"),i=function(){var e=function e(){o(this,e),this.title=Object(l.a)("PAGENOTFOUND"),this.message=Object(l.a)("PAGENOTFOUNDMESSAGE")};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Hb({type:e,selectors:[["app-page-not-found"]],decls:10,vars:2,consts:[[1,"fallback-container","flex-vertical"],[1,"row","container","align-center","mt-100"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"fallback_image"],["height","300","width","300","src","assets/images/page-not-found.png"],[1,"fallback_message"],[1,"error-font"],[1,"message-style","font-16"]],template:function(e,t){1&e&&(r.Tb(0,"div",0),r.Tb(1,"div",1),r.Tb(2,"div",2),r.Tb(3,"div",3),r.Ob(4,"img",4),r.Sb(),r.Tb(5,"div",5),r.Tb(6,"div",6),r.Lc(7),r.Sb(),r.Tb(8,"span",7),r.Lc(9),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Sb()),2&e&&(r.xb(7),r.Mc(t.title),r.xb(2),r.Mc(t.message))},styles:[".fallback-container[_ngcontent-%COMP%]{height:100%;text-align:center}.fallback-container[_ngcontent-%COMP%]   .message-style[_ngcontent-%COMP%]{font-weight:400;line-height:24px;padding-top:6px}"]}),e}()},qZph:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var l=n("58Y9"),r=n("4SUy"),i=n("fXoL"),a=function(){var e=function(){function e(){o(this,e)}return u(e,[{key:"transform",value:function(e){if(!Object(r.X)(e))return e+" (UTC "+Object(l.K)()+")"}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"dateTimeUTC",type:e,pure:!0}),e}()},zZ4g:function(e){e.exports=JSON.parse('[{"id":1,"name":"Low","backgroundColor":"#10a856"},{"id":2,"name":"Normal","backgroundColor":"#096cbf"},{"id":3,"name":"High","backgroundColor":"#f9c301"},{"id":4,"name":"Critical","backgroundColor":"#e90a03"}]')}}])}();