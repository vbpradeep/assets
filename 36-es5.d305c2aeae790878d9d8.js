!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{paHv:function(e,n,o){"use strict";o.r(n),o.d(n,"ContactGroupFormsModule",(function(){return ct}));var c,a=o("ofXK"),r=o("ltyr"),s=o("hXFv"),l=o("np3I"),d=o("jcQU"),u=o("GJ+o"),p=o("Pk9d"),h=o("QYJQ"),b=o("SRvG"),f=o("tyNb"),g=o("mrjb"),m=o("TSZ8"),v=o("5LOs"),S=o("hCAU"),T=o("58Y9"),C=o("M9dC"),O=o("dSv1"),F=o("H552"),D=o("1gpv"),I={ContactGroupFieldsList:D.f+"contact_group_fields",ActivateContactGroupField:D.f+"contact_group_fields",DeactivateContactGroupField:D.f+"contact_group_fields",DeleteContactGroupField:D.f+"contact_group_fields",PositionChange:D.f+"contact_group_fields"},y=o("A4Lh"),G=o("qBM0"),E=o("oRrO"),x=o("4SUy"),A=o("y5ZJ"),w=o("fXoL"),j=o("1kef"),P=o("JCZ/"),k=o("IaKf"),L=o("X8pc"),N=o("tk/3"),R=o("kR0U"),U=((c=function(){function e(i){t(this,e),this.http=i,this.httpOptions={headers:new N.e({"Content-Type":"application/json"})}}return i(e,[{key:"deleteContactGroupField",value:function(t){return this.http.delete(R.a.FieldDelete+"/"+t).toPromise()}},{key:"toggleContactGroupField",value:function(t,e){return this.http.post(t?R.a.FieldActiveOrDeactivate+"/"+e+"/activate":R.a.FieldActiveOrDeactivate+"/"+e+"/deactivate",this.httpOptions).toPromise()}},{key:"changePosition",value:function(t,e){return this.http.put(I.PositionChange+"/"+t+"/position_change",e).toPromise()}}]),e}()).\u0275fac=function(t){return new(t||c)(w.bc(N.b))},c.\u0275prov=w.Jb({token:c,factory:c.\u0275fac}),c),B=o("AjNn"),_=["contactGroupFormsListGrid"],M=["contextmenu"],J=["contactGroupFormEle"];function V(t,e){if(1&t&&(w.Tb(0,"span"),w.Tb(1,"div"),w.Ob(2,"i",20),w.Sb(),w.Sb()),2&t){var i=e.$implicit;w.xb(1),w.yb("data-non-elliptical",!0)("data-title",i.fieldType),w.xb(1),w.oc("ngClass",null!=i.fieldTypeIconCssClass?i.fieldTypeIconCssClass:"bd-custom-default-icon")}}function K(t,e){1&t&&(w.Tb(0,"span",28),w.Tb(1,"span"),w.Lc(2),w.hc(3,"translate"),w.Sb(),w.Sb()),2&t&&(w.xb(2),w.Nc(" ",w.ic(3,1,"SYSTEM"),""))}function q(t,e){1&t&&(w.Tb(0,"span",29),w.Tb(1,"span"),w.Lc(2),w.hc(3,"translate"),w.Sb(),w.Sb()),2&t&&(w.xb(2),w.Nc(" ",w.ic(3,1,"INACTIVE"),""))}function Q(t,e){if(1&t){var i=w.Ub();w.Tb(0,"div",21),w.Tb(1,"div",22),w.Tb(2,"span",23),w.Tb(3,"span",24),w.Tb(4,"span",25),w.ec("click",(function(t){w.Bc(i);var n=e.$implicit,o=w.gc();return n.canEditConfiguration?o.fieldNameClick(t,n.fieldId):""})),w.Lc(5),w.Sb(),w.Sb(),w.Jc(6,K,4,3,"span",26),w.Jc(7,q,4,3,"span",27),w.Sb(),w.Sb(),w.Sb()}if(2&t){var n=e.$implicit;w.xb(4),w.nc("ngClass",n.canEditConfiguration?"primary-link-color-blue cursor-pointer":""),w.yb("data-title",n.labelForAgentPortal),w.xb(1),w.Mc(n.labelForAgentPortal),w.xb(1),w.nc("ngIf",n.isDefaultSystemField),w.xb(1),w.nc("ngIf",!n.isActive)}}function $(t,e){if(1&t){var i=w.Ub();w.Tb(0,"span",33),w.ec("click",(function(){w.Bc(i);var t=w.gc().$implicit,e=w.gc();return e.moreOptionsSelect(e.editItem,t)})),w.hc(1,"translate"),w.Sb()}2&t&&w.yb("data-title",w.ic(1,1,"EDIT"))}function z(t,e){if(1&t){var i=w.Ub();w.Tb(0,"span",34),w.ec("click",(function(t){w.Bc(i);var e=w.gc().$implicit;return w.gc().bindBtnTemplate(t,e)})),w.Sb()}}function X(t,e){if(1&t&&(w.Tb(0,"div",30),w.Jc(1,$,2,3,"span",31),w.Jc(2,z,1,0,"span",32),w.Sb()),2&t){var i=e.$implicit;w.xb(1),w.nc("ngIf",i.canEditConfiguration),w.xb(1),w.nc("ngIf",i.canEditConfiguration&&!(i.isDefaultSystemField&&i.isActive))}}var Y,H,W,Z,tt=((H=function(){function e(i,n,o,c,a,r,s){t(this,e),this.appRootService=i,this.seoService=n,this.router=o,this.toastService=c,this.spinService=a,this.contactGroupFieldService=r,this.cd=s,this.perPage=y.E.toString(),this.currentpage="1",this.listItems=[{text:"Activate",id:"2"},{text:"Deactivate",id:"3"},{text:"Delete",id:"4"}],this.activeFieldItems=["Deactivate","Delete"],this.inActiveFieldItems=["Activate","Delete"],this.animation={effect:"none"},this.fieldTypeEnum=E.a,this.editItem={item:{id:G.a.Edit}},this.preventFields=[{apiName:v.d.ContactGroupName},{apiName:v.d.ContactGroupDomain}];var l=Object(O.a)("ADMIN")+" / "+Object(O.a)("CONTACTGROUPFIELDS"),d=Object(O.a)("CONTACTGROUPFIELDS")+" | "+Object(O.a)("ADMIN");this.appRootService.setAppTitleText(l),this.seoService.setHeaderElements({title:d}),this.appRootService.isSideBarNeeded(!0),this.appRootService.setBrandDropDownVisibility(!1)}return i(e,[{key:"ngOnInit",value:function(){var t=I.ContactGroupFieldsList;t=Object(T.i)(t,"Page",this.currentpage),t=Object(T.i)(t,"PerPage",this.perPage),this.contactGroupFormsList=new F.a({url:t,adaptor:new C.b}),this.href=this.router.url}},{key:"ngAfterViewInit",value:function(){var t=this;this.contactGroupFormEle.nativeElement.addEventListener("scroll",(function(){t.contextmenu.close()}))}},{key:"contactGroupFormsListDataBound",value:function(){var t=this;this.grid.widthService.setWidthToColumns(),Object(T.a)(this.grid);var e=this.grid.getCurrentViewRecords(),i=[];e.forEach((function(e,n){t.preventFields.forEach((function(o){o.apiName==e.apiName&&i.push(t.grid.getRowByIndex(n))}))}));for(var n=0;n<i.length;n++){var o=document.createElement("td");o.classList.add("intentcell"),i[n].querySelector(".e-rowdragdrop").remove(),i[n].prepend(o),n>0&&(i[n].querySelector(".intentcell").style.borderTop="1px solid #e0e0e0")}}},{key:"fieldNameClick",value:function(t,e){t.stopPropagation(),this.router.navigateByUrl(this.href+"/"+e)}},{key:"addContactGroupField",value:function(){this.router.navigateByUrl("/admin/contact-group-fields/add")}},{key:"bindBtnTemplate",value:function(t,e){this.selectedItemData=e;var i=Object(p.f)(t.target);this.contextmenu.open(i.top+16,i.left-5,t.target)}},{key:"itemBeforeEvent",value:function(){this.selectedItemData.isActive&&!this.selectedItemData.isDefaultSystemField?(this.contextmenu.hideItems(this.inActiveFieldItems),this.contextmenu.showItems(this.activeFieldItems)):(this.contextmenu.hideItems(this.activeFieldItems),this.contextmenu.showItems(this.inActiveFieldItems))}},{key:"moreOptionsSelect",value:function(t,e){t.item.id===G.a.Edit?this.router.navigateByUrl(this.href+"/"+e.fieldId):t.item.id===G.a.Delete?Object(T.b)(this.updateDeleteContactGroupField,this.cancelDialog,this,Object(O.a)("DELETE")+" "+Object(O.a)("CONTACTGROUPFIELD"),Object(O.a)("CONTACTGROUPFIELDDELETEALERT")):t.item.id===G.a.Activate?(this.isEnabled=!0,Object(T.b)(this.toggleContactGroupField,this.cancelDialog,this,Object(O.a)("ACTIVATE")+" "+Object(O.a)("CONTACTGROUPFIELD"),Object(O.a)("CONTACTGROUPFIELDACTIVATEALERT"),Object(O.a)("YES")+", "+Object(O.a)("ACTIVATE"),"",!0)):(this.isEnabled=!1,Object(T.b)(this.toggleContactGroupField,this.cancelDialog,this,Object(O.a)("DEACTIVATE")+" "+Object(O.a)("CONTACTGROUPFIELD"),Object(O.a)("CONTACTGROUPFIELDDEACTIVATEALERT"),Object(O.a)("YES")+", "+Object(O.a)("DEACTIVATE")))}},{key:"cancelDialog",value:function(){this.deleteDialog.hide()}},{key:"loadGrid",value:function(){var t=I.ContactGroupFieldsList;t=Object(T.i)(t,"Page",this.currentpage),t=Object(T.i)(t,"PerPage",this.perPage),this.contactGroupFormsList=new F.a({url:t,adaptor:new C.b}),this.cd.detectChanges()}},{key:"toggleContactGroupField",value:function(){var t=this;this.spinService.showSpinner(),this.contactGroupFieldService.toggleContactGroupField(this.isEnabled,this.selectedItemData.fieldId).then((function(e){e&&(t.spinService.hideSpinner(),t.deleteDialog.hide(),t.loadGrid(),t.toastService.successToast(e.result),Object(A.c)())})).catch((function(e){var i=Object(T.q)(e.error);400===e.status&&(t.spinService.hideSpinner(),t.toastService.failureToast(i))}))}},{key:"updateDeleteContactGroupField",value:function(){var t=this;this.spinService.showSpinner(),this.contactGroupFieldService.deleteContactGroupField(this.selectedItemData.fieldId).then((function(e){e&&(t.spinService.hideSpinner(),t.deleteDialog.hide(),t.loadGrid(),t.toastService.successToast(e.result),Object(A.c)())})).catch((function(e){var i=Object(T.q)(e.error);400===e.status&&(t.spinService.hideSpinner(),t.toastService.failureToast(i))}))}},{key:"contactGroupFieldDrag",value:function(t){var e=this.grid.getRowInfo(t.target).rowData;e&&this.preventFields.forEach((function(i){i.apiName==e.apiName&&(t.cancel=!0)}))}},{key:"contactGroupFieldDrop",value:function(t){var e=this,i=this.grid.getRowInfo(this.grid.getRowByIndex(t.dropIndex)).rowData;i&&this.preventFields.forEach((function(e){e.apiName==i.apiName&&(t.cancel=!0)}));var n=t.data[0].fieldId;if(t.cancel=!0,t.fromIndex!==t.dropIndex&&!Object(x.X)(t.dropIndex)&&!isNaN(t.dropIndex)){var o={toPosition:++t.dropIndex};this.spinService.showSpinner(),this.contactGroupFieldService.changePosition(n,o).then((function(t){t&&(e.spinService.hideSpinner(),e.loadGrid(),e.toastService.successToast(t.result),Object(A.c)())})).catch((function(t){var i=Object(T.q)(t.error);400===t.status&&(e.spinService.hideSpinner(),e.toastService.failureToast(i))}))}}}]),e}()).\u0275fac=function(t){return new(t||H)(w.Nb(j.a),w.Nb(P.a),w.Nb(f.g),w.Nb(k.a),w.Nb(L.a),w.Nb(U),w.Nb(w.h))},H.\u0275cmp=w.Hb({type:H,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(w.Gc(_,!0),w.Qc(M,!0),w.Qc(J,!0)),2&t&&(w.xc(i=w.fc())&&(e.grid=i.first),w.xc(i=w.fc())&&(e.contextmenu=i.first),w.xc(i=w.fc())&&(e.contactGroupFormEle=i.first))},decls:31,vars:13,consts:[[1,"contact-group-forms-grid","hd-grid-full-height"],["contactGroupFormEle",""],[1,"secondary","padding-10","information-content"],[1,"bd-icon","bd-icon-info","information-icon","information-icon-position"],[1,"no-padding"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","flex-horizontal","no-margin"],[1,"grid-menu-bar"],[1,"grid-menu","width100"],[1,"add-button-container"],["type","button","ejs-button","",1,"e-btn","add-button","e-primary","e-outline",3,"click"],[1,"no-margin","pl-20","pr-20","height-100"],[1,"contact-group-form-list"],["allowResizing","true","height","100%",3,"dataSource","allowRowDragAndDrop","dataBound","rowDrop","rowDrag"],["contactGroupFormsListGrid",""],["minWidth","40","width","40"],["template",""],["field","labelForAgentPortal","minWidth","200","width","300","textAlign","Left",3,"headerText"],["minWidth","100","width","100","textAlign","Center"],[3,"items","animationSettings","beforeOpen","select"],["contextmenu",""],[1,"bd-icon",2,"font-size","16px","position","relative","top","4px",3,"ngClass"],[1,"flex-horizontal","secondary","p-1"],[1,"flex-vertical","no-wrap","ellipsis"],[1,"flex-horizontal"],[1,"e-text","no-wrap","ellipsis"],[3,"ngClass","click"],["class","grid-label status left-spacing",4,"ngIf"],["class","grid-label inactive-label status left-spacing",4,"ngIf"],[1,"grid-label","status","left-spacing"],[1,"grid-label","inactive-label","status","left-spacing"],[1,"cursor-pointer"],["class","bd-icon bd-icon-edit more-option-button",3,"click",4,"ngIf"],["class","hd-icon hd-vertical-menu more-option-button",3,"click",4,"ngIf"],[1,"bd-icon","bd-icon-edit","more-option-button",3,"click"],[1,"hd-icon","hd-vertical-menu","more-option-button",3,"click"]],template:function(t,e){1&t&&(w.Tb(0,"div",0,1),w.Tb(2,"div",2),w.Ob(3,"div",3),w.Lc(4),w.hc(5,"translate"),w.Sb(),w.Tb(6,"div",4),w.Tb(7,"div",5),w.Tb(8,"div",6),w.Tb(9,"div",7),w.Tb(10,"div",8),w.Tb(11,"button",9),w.ec("click",(function(){return e.addContactGroupField()})),w.Lc(12),w.hc(13,"translate"),w.Sb(),w.Sb(),w.Sb(),w.Sb(),w.Sb(),w.Sb(),w.Tb(14,"div",10),w.Tb(15,"div",11),w.Tb(16,"ejs-grid",12,13),w.ec("dataBound",(function(){return e.contactGroupFormsListDataBound()}))("rowDrop",(function(t){return e.contactGroupFieldDrop(t)}))("rowDrag",(function(t){return e.contactGroupFieldDrag(t)})),w.Tb(18,"e-columns"),w.Tb(19,"e-column",14),w.Jc(20,V,3,3,"ng-template",null,15,w.Kc),w.Sb(),w.Tb(22,"e-column",16),w.hc(23,"translate"),w.Jc(24,Q,8,5,"ng-template",null,15,w.Kc),w.Sb(),w.Tb(26,"e-column",17),w.Jc(27,X,3,2,"ng-template",null,15,w.Kc),w.Sb(),w.Sb(),w.Sb(),w.Sb(),w.Sb(),w.Sb(),w.Tb(29,"ejs-contextmenu",18,19),w.ec("beforeOpen",(function(){return e.itemBeforeEvent()}))("select",(function(t){return e.moreOptionsSelect(t)})),w.Sb()),2&t&&(w.xb(4),w.Nc(" ",w.ic(5,7,"CONTACTGROUPFIELDSMODULEINFO"),""),w.xb(8),w.Nc(" ",w.ic(13,9,"ADDCONTACTGROUPFIELD")," "),w.xb(4),w.nc("dataSource",e.contactGroupFormsList)("allowRowDragAndDrop",!0),w.xb(6),w.oc("headerText",w.ic(23,11,"LABELFORAGENTPORATL")),w.xb(7),w.nc("items",e.listItems)("animationSettings",e.animation))},directives:[b.c,u.k,u.e,u.b,u.d,u.a,s.f,a.l,a.n],pipes:[B.a],styles:[".contact-group-forms-grid[_ngcontent-%COMP%]{height:100%!important;overflow:hidden}.contact-group-forms-grid[_ngcontent-%COMP%]   .add-button-container[_ngcontent-%COMP%]{padding:12px 5px!important}.contact-group-forms-grid[_ngcontent-%COMP%]   .contact-group-form-list[_ngcontent-%COMP%]{height:calc(100% - 100px)}.contact-group-forms-grid[_ngcontent-%COMP%]   .e-gridcontent[_ngcontent-%COMP%]{height:calc(100% - 40px)!important}.contact-group-forms-grid[_ngcontent-%COMP%]   .e-gridcontent[_ngcontent-%COMP%]   .e-content[_ngcontent-%COMP%]{height:inherit!important;overflow-y:auto!important}"],changeDetection:0}),H),et=((Y=function(){function e(i,n,o){t(this,e),this.http=i,this.spinService=n,this.router=o}return i(e,[{key:"resolve",value:function(t){var e=this;return this.spinService.showSpinner(),this.http.get(I.ContactGroupFieldsList+"/"+t.params.id).toPromise().catch((function(t){return e.router.navigateByUrl("error",{state:t.error.errors[0].errorMessage,skipLocationChange:!0})}))}}]),e}()).\u0275fac=function(t){return new(t||Y)(w.bc(N.b),w.bc(L.a),w.bc(f.g))},Y.\u0275prov=w.Jb({token:Y,factory:Y.\u0275fac}),Y),it=[{path:"",component:tt},{path:"add",component:S.a,data:{customFieldsType:v.c.ContactGroupFields,addCustomField:!0,module:v.b.ContactGroup},canDeactivate:[m.a]},{path:":id",component:S.a,resolve:{data:et},data:{customFieldsType:v.c.ContactGroupFields,addCustomField:!1,module:v.b.ContactGroup},canDeactivate:[m.a]},{path:"**",component:g.a}],nt=((W=function e(){t(this,e)}).\u0275mod=w.Lb({type:W}),W.\u0275inj=w.Kb({factory:function(t){return new(t||W)},imports:[[f.k.forChild(it)],f.k]}),W),ot=o("Pl5m"),ct=((Z=function e(){t(this,e)}).\u0275mod=w.Lb({type:Z}),Z.\u0275inj=w.Kb({factory:function(t){return new(t||Z)},providers:[U,et],imports:[[a.b,nt,r.a,ot.a,u.j,s.j,l.AdminModule,d.d,p.a,h.h,b.b,b.j,s.e,b.h,b.d]]}),Z)}}])}();