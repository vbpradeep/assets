!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"6+Vf":function(e,n,c){"use strict";c.r(n),c.d(n,"ContactFormsModule",(function(){return ot}));var a,o=c("ofXK"),r=c("ltyr"),s=c("hXFv"),l=c("np3I"),d=c("jcQU"),u=c("GJ+o"),p=c("Pk9d"),h=c("QYJQ"),b=c("SRvG"),f=c("tyNb"),m=c("mrjb"),g=c("TSZ8"),v=c("5LOs"),T=c("hCAU"),C=c("58Y9"),S=c("M9dC"),O=c("dSv1"),I=c("H552"),F=c("1gpv"),D={ContactFieldsList:F.f+"contact_fields",ActivateContactField:F.f+"contact_fields",DeactivateContactField:F.f+"contact_fields",DeleteContactField:F.f+"contact_fields",PositionChange:F.f+"contact_fields"},E=c("A4Lh"),x=c("qBM0"),y=c("oRrO"),A=c("4SUy"),w=c("y5ZJ"),L=c("fXoL"),N=c("1kef"),j=c("JCZ/"),k=c("IaKf"),P=c("tk/3"),M=c("kR0U"),R=((a=function(){function e(i){t(this,e),this.http=i,this.httpOptions={headers:new P.e({"Content-Type":"application/json"})}}return i(e,[{key:"deleteContactField",value:function(t){return this.http.delete(M.a.FieldDelete+"/"+t).toPromise()}},{key:"toggleContactField",value:function(t,e){return this.http.post(t?M.a.FieldActiveOrDeactivate+"/"+e+"/activate":M.a.FieldActiveOrDeactivate+"/"+e+"/deactivate",this.httpOptions).toPromise()}},{key:"changePosition",value:function(t,e){return this.http.put(D.PositionChange+"/"+t+"/position_change",e).toPromise()}}]),e}()).\u0275fac=function(t){return new(t||a)(L.bc(P.b))},a.\u0275prov=L.Jb({token:a,factory:a.\u0275fac}),a),B=c("X8pc"),_=c("AjNn"),G=["contactFormsListGrid"],J=["contextmenu"],U=["contactFormEle"];function V(t,e){if(1&t&&(L.Tb(0,"span"),L.Tb(1,"div"),L.Ob(2,"i",22),L.Sb(),L.Sb()),2&t){var i=e.$implicit;L.xb(1),L.yb("data-non-elliptical",!0)("data-title",i.fieldType),L.xb(1),L.oc("ngClass",null!=i.fieldTypeIconCssClass?i.fieldTypeIconCssClass:"bd-custom-default-icon")}}function K(t,e){1&t&&(L.Tb(0,"span",30),L.Tb(1,"span"),L.Lc(2),L.hc(3,"translate"),L.Sb(),L.Sb()),2&t&&(L.xb(2),L.Nc(" ",L.ic(3,1,"SYSTEM"),""))}function W(t,e){1&t&&(L.Tb(0,"span",31),L.Tb(1,"span"),L.Lc(2),L.hc(3,"translate"),L.Sb(),L.Sb()),2&t&&(L.xb(2),L.Nc(" ",L.ic(3,1,"INACTIVE"),""))}function $(t,e){if(1&t){var i=L.Ub();L.Tb(0,"div",23),L.Tb(1,"div",24),L.Tb(2,"span",25),L.Tb(3,"span",26),L.Tb(4,"span",27),L.ec("click",(function(t){L.Bc(i);var n=e.$implicit,c=L.gc();return n.canEditConfiguration?c.fieldNameClick(t,n.fieldId):""})),L.Lc(5),L.Sb(),L.Sb(),L.Jc(6,K,4,3,"span",28),L.Jc(7,W,4,3,"span",29),L.Sb(),L.Sb(),L.Sb()}if(2&t){var n=e.$implicit;L.xb(4),L.nc("ngClass",n.canEditConfiguration?"primary-link-color-blue cursor-pointer":""),L.yb("data-title",n.labelForAgentPortal),L.xb(1),L.Mc(n.labelForAgentPortal),L.xb(1),L.nc("ngIf",n.isDefaultSystemField),L.xb(1),L.nc("ngIf",!n.isActive)}}function q(t,e){if(1&t&&(L.Tb(0,"div"),L.Tb(1,"div",32),L.Lc(2),L.hc(3,"translate"),L.hc(4,"translate"),L.Sb(),L.Sb()),2&t){var i=e.$implicit;L.xb(2),L.Nc(" ",i.isVisibleInCustomerPortal?L.ic(3,1,"YES"):L.ic(4,3,"NO"),"")}}function Q(t,e){if(1&t){var i=L.Ub();L.Tb(0,"span",36),L.ec("click",(function(){L.Bc(i);var t=L.gc().$implicit,e=L.gc();return e.moreOptionsSelect(e.editItem,t)})),L.hc(1,"translate"),L.Sb()}2&t&&L.yb("data-title",L.ic(1,1,"EDIT"))}function Y(t,e){if(1&t){var i=L.Ub();L.Tb(0,"span",37),L.ec("click",(function(t){L.Bc(i);var e=L.gc().$implicit;return L.gc().bindBtnTemplate(t,e)})),L.Sb()}}function z(t,e){if(1&t&&(L.Tb(0,"div",33),L.Jc(1,Q,2,3,"span",34),L.Jc(2,Y,1,0,"span",35),L.Sb()),2&t){var i=e.$implicit;L.xb(1),L.nc("ngIf",i.canEditConfiguration),L.xb(1),L.nc("ngIf",i.canEditConfiguration&&!(i.isDefaultSystemField&&i.isActive))}}var X,H,Z,tt,et=((H=function(){function e(i,n,c,a,o,r,s){t(this,e),this.appRootService=i,this.seoService=n,this.router=c,this.toastService=a,this.contactGroupService=o,this.spinService=r,this.cd=s,this.perPage=E.E.toString(),this.currentpage="1",this.listItems=[{text:"Activate",id:"2"},{text:"Deactivate",id:"3"},{text:"Delete",id:"4"}],this.activeFieldItems=["Deactivate","Delete"],this.inActiveFieldItems=["Activate","Delete"],this.animation={effect:"none"},this.fieldTypeEnum=y.a,this.editItem={item:{id:x.a.Edit}},this.preventFields=[{apiName:v.d.ContactName},{apiName:v.d.ContactDisplayName},{apiName:v.d.ContactEmail},{apiName:v.d.ContactGroup},{apiName:v.d.ContactGroupAccessScope}];var l=Object(O.a)("ADMIN")+" / "+Object(O.a)("CONTACTFIELDS"),d=Object(O.a)("CONTACTFIELDS")+" | "+Object(O.a)("ADMIN");this.appRootService.setAppTitleText(l),this.seoService.setHeaderElements({title:d}),this.appRootService.isSideBarNeeded(!0),this.appRootService.setBrandDropDownVisibility(!1)}return i(e,[{key:"ngOnInit",value:function(){var t=D.ContactFieldsList;t=Object(C.i)(t,"Page",this.currentpage),t=Object(C.i)(t,"PerPage",this.perPage),this.contactFormsList=new I.a({url:t,adaptor:new S.b}),this.href=this.router.url}},{key:"ngAfterViewInit",value:function(){var t=this;this.contactFormEle.nativeElement.addEventListener("scroll",(function(){t.contextmenu.close()}))}},{key:"contactFormsListDataBound",value:function(){var t=this;this.grid.widthService.setWidthToColumns(),Object(C.a)(this.grid);var e=this.grid.getCurrentViewRecords(),i=[];e.forEach((function(e,n){t.preventFields.forEach((function(c){c.apiName==e.apiName&&i.push(t.grid.getRowByIndex(n))}))}));for(var n=0;n<i.length;n++){var c=document.createElement("td");c.classList.add("intentcell"),i[n].querySelector(".e-rowdragdrop").remove(),i[n].prepend(c),n>0&&(i[n].querySelector(".intentcell").style.borderTop="1px solid #e0e0e0")}}},{key:"fieldNameClick",value:function(t,e){t.stopPropagation(),this.router.navigateByUrl(this.href+"/"+e)}},{key:"addContactFieldClick",value:function(){this.router.navigateByUrl("/admin/contact-fields/add")}},{key:"bindBtnTemplate",value:function(t,e){this.selectedItemData=e;var i=Object(p.f)(t.target);this.contextmenu.open(i.top+16,i.left-5,t.target)}},{key:"itemBeforeEvent",value:function(){this.selectedItemData.isActive&&!this.selectedItemData.isDefaultSystemField?(this.contextmenu.hideItems(this.inActiveFieldItems),this.contextmenu.showItems(this.activeFieldItems)):(this.contextmenu.hideItems(this.activeFieldItems),this.contextmenu.showItems(this.inActiveFieldItems))}},{key:"moreOptionsSelect",value:function(t,e){t.item.id===x.a.Edit?this.router.navigateByUrl(this.href+"/"+e.fieldId):t.item.id===x.a.Delete?Object(C.b)(this.updateDeleteContactField,this.cancelDialog,this,Object(O.a)("DELETE")+" "+Object(O.a)("CONTACTFIELD"),Object(O.a)("CONTACTFIELDDELETEALERT")):t.item.id===x.a.Activate?(this.isEnabled=!0,Object(C.b)(this.toggleContactField,this.cancelDialog,this,Object(O.a)("ACTIVATE")+" "+Object(O.a)("CONTACTFIELD"),Object(O.a)("CONTACTFIELDACTIVATEALERT"),Object(O.a)("YES")+", "+Object(O.a)("ACTIVATE"),"",!0)):(this.isEnabled=!1,Object(C.b)(this.toggleContactField,this.cancelDialog,this,Object(O.a)("DEACTIVATE")+" "+Object(O.a)("CONTACTFIELD"),Object(O.a)("CONTACTFIELDDEACTIVATEALERT"),Object(O.a)("YES")+", "+Object(O.a)("DEACTIVATE")))}},{key:"cancelDialog",value:function(){this.deleteDialog.hide()}},{key:"loadGrid",value:function(){var t=D.ContactFieldsList;t=Object(C.i)(t,"Page",this.currentpage),t=Object(C.i)(t,"PerPage",this.perPage),this.contactFormsList=new I.a({url:t,adaptor:new S.b}),this.cd.detectChanges()}},{key:"toggleContactField",value:function(){var t=this;this.spinService.showSpinner(),this.contactGroupService.toggleContactField(this.isEnabled,this.selectedItemData.fieldId).then((function(e){e&&(t.spinService.hideSpinner(),t.deleteDialog.hide(),t.loadGrid(),t.toastService.successToast(e.result),Object(w.c)())})).catch((function(e){var i=Object(C.q)(e.error);400===e.status&&(t.spinService.hideSpinner(),t.toastService.failureToast(i))}))}},{key:"updateDeleteContactField",value:function(){var t=this;this.spinService.showSpinner(),this.contactGroupService.deleteContactField(this.selectedItemData.fieldId).then((function(e){e&&(t.spinService.hideSpinner(),t.deleteDialog.hide(),t.loadGrid(),t.toastService.successToast(e.result),Object(w.c)())})).catch((function(e){var i=Object(C.q)(e.error);400===e.status&&(t.spinService.hideSpinner(),t.toastService.failureToast(i))}))}},{key:"contactFieldDrag",value:function(t){var e=this.grid.getRowInfo(t.target).rowData;e&&this.preventFields.forEach((function(i){i.apiName==e.apiName&&(t.cancel=!0)}))}},{key:"contactFieldDrop",value:function(t){var e=this,i=this.grid.getRowInfo(this.grid.getRowByIndex(t.dropIndex)).rowData;i&&this.preventFields.forEach((function(e){e.apiName==i.apiName&&(t.cancel=!0)}));var n=t.data[0].fieldId;if(t.cancel=!0,t.fromIndex!==t.dropIndex&&!Object(A.X)(t.dropIndex)&&!isNaN(t.dropIndex)){var c={toPosition:++t.dropIndex};this.spinService.showSpinner(),this.contactGroupService.changePosition(n,c).then((function(t){t&&(e.spinService.hideSpinner(),e.loadGrid(),e.toastService.successToast(t.result),Object(w.c)())})).catch((function(t){var i=Object(C.q)(t.error);400===t.status&&(e.spinService.hideSpinner(),e.toastService.failureToast(i))}))}}}]),e}()).\u0275fac=function(t){return new(t||H)(L.Nb(N.a),L.Nb(j.a),L.Nb(f.g),L.Nb(k.a),L.Nb(R),L.Nb(B.a),L.Nb(L.h))},H.\u0275cmp=L.Hb({type:H,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(L.Gc(G,!0),L.Qc(J,!0),L.Qc(U,!0)),2&t&&(L.xc(i=L.fc())&&(e.grid=i.first),L.xc(i=L.fc())&&(e.contextmenu=i.first),L.xc(i=L.fc())&&(e.contactFormEle=i.first))},decls:37,vars:19,consts:[[1,"contact-forms-grid","hd-grid-full-height"],["contactFormEle",""],[1,"secondary","padding-10","information-content"],[1,"bd-icon","bd-icon-info","information-icon","information-icon-position"],[1,"no-padding"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","flex-horizontal","no-margin"],[1,"grid-menu-bar"],[1,"grid-menu","width100"],[1,"add-button-container"],["type","button","ejs-button","",1,"e-btn","add-button","e-primary","e-outline",3,"click"],[1,"no-margin","pl-20","pr-20","height-100"],[1,"contact-form-list"],["allowResizing","true","height","100%",3,"dataSource","allowRowDragAndDrop","dataBound","rowDrop","rowDrag"],["contactFormsListGrid",""],["minWidth","40","width","40"],["template",""],["field","labelForAgentPortal","minWidth","150","width","200","textAlign","Left",3,"headerText"],["field","labelForCustomerPortal","minWidth","150","width","150","textAlign","Left","clipMode","EllipsisWithTooltip",3,"headerText"],["field","isVisibleInCustomerPortal","minWidth","80","width","110","textAlign","Center","clipMode","EllipsisWithTooltip",3,"headerText"],["minWidth","100","width","100","textAlign","Center"],[3,"items","animationSettings","beforeOpen","select"],["contextmenu",""],[1,"bd-icon",2,"font-size","16px","position","relative","top","4px",3,"ngClass"],[1,"flex-horizontal","secondary","p-1"],[1,"flex-vertical","no-wrap","ellipsis"],[1,"flex-horizontal"],[1,"e-text","no-wrap","ellipsis"],[3,"ngClass","click"],["class","grid-label status left-spacing",4,"ngIf"],["class","grid-label status left-spacing inactive-label",4,"ngIf"],[1,"grid-label","status","left-spacing"],[1,"grid-label","status","left-spacing","inactive-label"],[1,"grid-text-font-color"],[1,"cursor-pointer"],["class","bd-icon bd-icon-edit more-option-button",3,"click",4,"ngIf"],["class","hd-icon hd-vertical-menu more-option-button",3,"click",4,"ngIf"],[1,"bd-icon","bd-icon-edit","more-option-button",3,"click"],[1,"hd-icon","hd-vertical-menu","more-option-button",3,"click"]],template:function(t,e){1&t&&(L.Tb(0,"div",0,1),L.Tb(2,"div",2),L.Ob(3,"div",3),L.Lc(4),L.hc(5,"translate"),L.Sb(),L.Tb(6,"div",4),L.Tb(7,"div",5),L.Tb(8,"div",6),L.Tb(9,"div",7),L.Tb(10,"div",8),L.Tb(11,"button",9),L.ec("click",(function(){return e.addContactFieldClick()})),L.Lc(12),L.hc(13,"translate"),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Tb(14,"div",10),L.Tb(15,"div",11),L.Tb(16,"ejs-grid",12,13),L.ec("dataBound",(function(){return e.contactFormsListDataBound()}))("rowDrop",(function(t){return e.contactFieldDrop(t)}))("rowDrag",(function(t){return e.contactFieldDrag(t)})),L.Tb(18,"e-columns"),L.Tb(19,"e-column",14),L.Jc(20,V,3,3,"ng-template",null,15,L.Kc),L.Sb(),L.Tb(22,"e-column",16),L.hc(23,"translate"),L.Jc(24,$,8,5,"ng-template",null,15,L.Kc),L.Sb(),L.Ob(26,"e-column",17),L.hc(27,"translate"),L.Tb(28,"e-column",18),L.hc(29,"translate"),L.Jc(30,q,5,5,"ng-template",null,15,L.Kc),L.Sb(),L.Tb(32,"e-column",19),L.Jc(33,z,3,2,"ng-template",null,15,L.Kc),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Tb(35,"ejs-contextmenu",20,21),L.ec("beforeOpen",(function(){return e.itemBeforeEvent()}))("select",(function(t){return e.moreOptionsSelect(t)})),L.Sb()),2&t&&(L.xb(4),L.Mc(L.ic(5,9,"CONTACTFIELDSMODULEINFO")),L.xb(8),L.Nc(" ",L.ic(13,11,"ADDCONTACTFIELD")," "),L.xb(4),L.nc("dataSource",e.contactFormsList)("allowRowDragAndDrop",!0),L.xb(6),L.oc("headerText",L.ic(23,13,"LABELFORAGENTPORATL")),L.xb(4),L.oc("headerText",L.ic(27,15,"LABELFORCUTOMERPORTAL")),L.xb(2),L.oc("headerText",L.ic(29,17,"VISIBLEINCUSTOMERPORTAL")),L.xb(7),L.nc("items",e.listItems)("animationSettings",e.animation))},directives:[b.c,u.k,u.e,u.b,u.d,u.a,s.f,o.l,o.n],pipes:[_.a],styles:[".contact-forms-grid[_ngcontent-%COMP%]{overflow:hidden}.contact-forms-grid[_ngcontent-%COMP%]   .add-button-container[_ngcontent-%COMP%]{padding:12px 5px!important}.contact-forms-grid[_ngcontent-%COMP%]   .contact-form-list[_ngcontent-%COMP%]{height:calc(100% - 100px)}.contact-forms-grid[_ngcontent-%COMP%]   .e-gridcontent[_ngcontent-%COMP%]{height:calc(100% - 40px)!important}.contact-forms-grid[_ngcontent-%COMP%]   .e-gridcontent[_ngcontent-%COMP%]   .e-content[_ngcontent-%COMP%]{height:inherit!important;overflow-y:auto!important}.e-dialog[cssClass=contact-dialog][_ngcontent-%COMP%]{max-height:100%!important}.e-dialog[cssClass=contact-dialog][_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]{padding:0 4px!important}"],changeDetection:0}),H),it=((X=function(){function e(i,n,c){t(this,e),this.http=i,this.spinService=n,this.router=c}return i(e,[{key:"resolve",value:function(t){var e=this;return this.spinService.showSpinner(),this.http.get(D.ContactFieldsList+"/"+t.params.id).toPromise().catch((function(t){return e.router.navigateByUrl("error",{state:t.error.errors[0].errorMessage,skipLocationChange:!0})}))}}]),e}()).\u0275fac=function(t){return new(t||X)(L.bc(P.b),L.bc(B.a),L.bc(f.g))},X.\u0275prov=L.Jb({token:X,factory:X.\u0275fac}),X),nt=[{path:"",component:et},{path:"add",component:T.a,data:{customFieldsType:v.c.ContactFields,addCustomField:!0,module:v.b.Contact},canDeactivate:[g.a]},{path:":id",component:T.a,resolve:{data:it},data:{customFieldsType:v.c.ContactFields,addCustomField:!1,module:v.b.Contact},canDeactivate:[g.a]},{path:"**",component:m.a}],ct=((Z=function e(){t(this,e)}).\u0275mod=L.Lb({type:Z}),Z.\u0275inj=L.Kb({factory:function(t){return new(t||Z)},imports:[[f.k.forChild(nt)],f.k]}),Z),at=c("Pl5m"),ot=((tt=function e(){t(this,e)}).\u0275mod=L.Lb({type:tt}),tt.\u0275inj=L.Kb({factory:function(t){return new(t||tt)},providers:[R,it],imports:[[o.b,ct,r.a,at.a,u.j,s.j,l.AdminModule,d.d,p.a,h.h,b.b,b.j,s.e,b.h,b.d]]}),tt)}}])}();