!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"64zv":function(t,n,d){"use strict";d.d(n,"a",(function(){return f}));var c,a,o,l=d("58Y9"),r=d("fXoL"),s=d("qZph"),p=d("ofXK"),h=((o=function(){function t(){e(this,t)}return i(t,[{key:"transform",value:function(e,t){if(e){var i=Object(l.t)(!0),n=Object(l.u)(e,!1),d=Math.floor((+i-+n)/1e3),c=Math.floor(d/60);if(c<1)return"1 min ago";var a,o={day:1440,hour:60,min:1};for(var r in o){if((a=Math.floor(c/o[r]))>0&&t)return 1===a?a+" "+r+" ago":a+" "+r+"s ago";if(a>0&&!t)return 1===a?a+" "+r+" ago":a<=7||"day"!==r?a+" "+r+"s ago":e}}return e}}]),t}()).\u0275fac=function(e){return new(e||o)},o.\u0275pipe=r.Mb({name:"dateAgo",type:o,pure:!0}),o),u=((a=function(){function t(){e(this,t)}return i(t,[{key:"transform",value:function(e){if(e){var t=Object(l.t)(!0),i=Object(l.u)(e,!1),n=Math.floor((+t-+i)/1e3);if(Math.floor(n/60)<1)return"1 min ago";var d,c={day:86400,hour:3600,minute:60,second:1};for(var a in c)if((d=Math.floor(n/c[a]))>0)return 1===d?d+" "+a:d+" "+a+"s"}return e}}]),t}()).\u0275fac=function(e){return new(e||a)},a.\u0275pipe=r.Mb({name:"dateDays",type:a,pure:!0}),a),f=((c=function t(){e(this,t),this.format="MMM dd, yyyy hh:mm a",this.date=new Date,this.timeZoneWithUTC=Object(l.K)()}).\u0275fac=function(e){return new(e||c)},c.\u0275cmp=r.Hb({type:c,selectors:[["app-date-time"]],inputs:{timezone:"timezone",format:"format",tooltipPrefix:"tooltipPrefix",prefixString:"prefixString",suffixString:"suffixString",date:"date",enableAgo:"enableAgo",enableDays:"enableDays",enableOnlyAgo:"enableOnlyAgo"},decls:11,vars:34,consts:[["data-non-elliptical","true"]],template:function(e,t){1&e&&(r.Tb(0,"span",0),r.hc(1,"dateTimeUTC"),r.hc(2,"date"),r.Lc(3),r.hc(4,"dateAgo"),r.hc(5,"date"),r.hc(6,"dateAgo"),r.hc(7,"date"),r.hc(8,"dateDays"),r.hc(9,"date"),r.hc(10,"date"),r.Sb()),2&e&&(r.Ab("data-title","",t.tooltipPrefix," ",r.ic(1,5,r.kc(2,7,t.date,t.format,t.timezone)),""),r.xb(3),r.Pc(" ",t.prefixString," ",t.enableAgo&&!t.enableOnlyAgo?r.ic(4,11,r.kc(5,13,t.date,t.format,t.timezone)):t.enableAgo&&t.enableOnlyAgo?r.jc(6,17,r.kc(7,20,t.date,t.format,t.timezone),!0):t.enableDays?r.ic(8,24,r.kc(9,26,t.date,t.format,t.timezone)):r.kc(10,30,t.date,t.format,t.timezone)," ",t.suffixString," "))},pipes:[s.a,p.d,h,u],styles:[""]}),c)},MMtA:function(t,n,d){"use strict";d.r(n),d.d(n,"FieldDependencyModule",(function(){return Ie}));var c,a=d("ofXK"),o=d("ltyr"),l=d("GJ+o"),r=d("np3I"),s=d("QYJQ"),p=d("jcQU"),h=d("SRvG"),u=d("tyNb"),f=d("mrjb"),b=d("TSZ8"),v=d("dSv1"),g=d("H552"),D=d("58Y9"),y=d("4SUy"),m=d("A4Lh"),O=d("1gpv"),S={FieldDependencyList:O.f+"field_dependencies",DependencyFieldOption:O.f+"fields/collection",AddFieldDependency:O.f+"field_dependencies",FieldDependencyOptions:O.f+"field_dependencies",DependencyFieldCollection:O.f+"field_dependencies/collections",DeleteFieldDependency:O.f+"field_dependencies"},F=function(e){return e[e.Ticket=1]="Ticket",e[e.Contact=2]="Contact",e[e.ContactGroup=3]="ContactGroup",e}({}),x=d("y5ZJ"),C=d("fXoL"),T=d("1kef"),E=d("JCZ/"),A=d("tk/3"),k=d("X8pc"),I=d("IaKf"),w=((c=function(){function t(i,n,d){e(this,t),this.http=i,this.spinService=n,this.toastService=d,this.httpOptions={headers:new A.e({"Content-Type":"application/json"})}}return i(t,[{key:"getFieldOptions",value:function(e){return this.http.get(e).toPromise()}},{key:"getFieldCollections",value:function(e){return this.http.get(e).toPromise()}},{key:"addEditFieldDependency",value:function(e,t){var i=this;return t?this.http.post(S.AddFieldDependency,e).toPromise().catch((function(e){if(400===e.status){i.spinService.hideSpinner();var t=Object(D.q)(e.error);Object(y.X)(e.error.errors)?i.toastService.failureToast(e.error.message):i.toastService.failureToast(t)}})):this.http.put(S.AddFieldDependency,e).toPromise().catch((function(e){if(400===e.status){i.spinService.hideSpinner();var t=Object(D.q)(e.error);Object(y.X)(e.error.errors)?i.toastService.failureToast(e.error.message):i.toastService.failureToast(t)}}))}},{key:"deleteFieldDependency",value:function(e){return this.http.delete(S.DeleteFieldDependency+"/"+e).toPromise()}}]),t}()).\u0275fac=function(e){return new(e||c)(C.bc(A.b),C.bc(k.a),C.bc(I.a))},c.\u0275prov=C.Jb({token:c,factory:c.\u0275fac}),c),L=d("AjNn"),P=["parentFieldDrop"],j=["childFieldDrop"],N=["parentFieldSearch"],M=["addDependencyButton"],B=["parentFieldOptionContainer"],J=["childFieldOptionContainer"],R=["childCheckBox"],_=["selectAllCheckBox"],X=["moduleDrop"];function U(e,t){1&e&&C.Pb(0)}function q(e,t){if(1&e){var i=C.Ub();C.Tb(0,"div",17),C.Tb(1,"label"),C.Tb(2,"span",18),C.Lc(3),C.hc(4,"translate"),C.Sb(),C.Tb(5,"span",20),C.Lc(6,"*"),C.Sb(),C.Sb(),C.Tb(7,"ejs-dropdownlist",50,51),C.ec("change",(function(){return C.Bc(i),C.gc(2).fieldsDropChange()})),C.hc(9,"translate"),C.hc(10,"translate"),C.Sb(),C.Sb()}if(2&e){var n=C.gc(2);C.xb(3),C.Nc("",C.ic(4,7,"MODULE")," "),C.xb(4),C.oc("filterBarPlaceholder",C.ic(9,9,"SEARCH")),C.oc("placeholder",C.ic(10,11,"SELECT")),C.nc("htmlAttributes",n.autoCompleteAttribute)("dataSource",n.fieldsDropData)("fields",n.fieldDropFields)("value",n.moduleId)}}function H(e,t){1&e&&(C.Tb(0,"div",52),C.Tb(1,"span",20),C.Lc(2),C.hc(3,"translate"),C.Sb(),C.Sb()),2&e&&(C.xb(2),C.Nc(" ",C.ic(3,1,"FIELDREQUIRED"),""))}function Q(e,t){if(1&e&&(C.Tb(0,"div",17),C.Jc(1,H,4,3,"div",27),C.Sb()),2&e){var i=C.gc(2);C.xb(1),C.nc("ngIf",i.moduleRequired)}}function z(e,t){1&e&&(C.Tb(0,"div",52),C.Tb(1,"span",20),C.Lc(2),C.hc(3,"translate"),C.Sb(),C.Sb()),2&e&&(C.xb(2),C.Nc(" ",C.ic(3,1,"FIELDREQUIRED"),""))}function G(e,t){1&e&&(C.Tb(0,"div",52),C.Tb(1,"span",20),C.Lc(2),C.hc(3,"translate"),C.Sb(),C.Sb()),2&e&&(C.xb(2),C.Nc(" ",C.ic(3,1,"FIELDREQUIRED"),""))}function Y(e,t){if(1&e&&(C.Tb(0,"span",53),C.Tb(1,"span"),C.Lc(2),C.Sb(),C.Sb()),2&e){var i=C.gc(2);C.xb(1),C.yb("data-title",i.parentFieldText),C.xb(1),C.Nc("(",i.parentFieldText,")")}}function K(e,t){if(1&e){var i=C.Ub();C.Tb(0,"span",54),C.ec("click",(function(){return C.Bc(i),C.gc(2).addNewField()})),C.Lc(1),C.hc(2,"translate"),C.Sb()}2&e&&(C.xb(1),C.Nc(" ",C.ic(2,1,"ADDNEW")," "))}function Z(e,t){1&e&&(C.Tb(0,"span",62),C.Lc(1),C.hc(2,"translate"),C.Sb()),2&e&&(C.xb(1),C.Nc("(",C.ic(2,1,"READONLY"),")"))}function W(e,t){if(1&e){var i=C.Ub();C.Tb(0,"div"),C.Tb(1,"div",57),C.ec("click",(function(){C.Bc(i);var e=t.index;return C.gc(3).parentFieldOptionClick(e)})),C.Tb(2,"div",58),C.Tb(3,"span"),C.Lc(4),C.Jc(5,Z,3,3,"span",59),C.Sb(),C.Sb(),C.Tb(6,"div",60),C.Ob(7,"span",61),C.Sb(),C.Sb(),C.Sb()}if(2&e){var n=t.$implicit,d=t.index,c=C.gc(3);C.xb(1),C.Fb("active",c.parentOptionIndex===d),C.yb("data-index",d)("data-id",n.id),C.xb(2),C.yb("data-title",n.name),C.xb(1),C.Mc(n.name),C.xb(1),C.nc("ngIf",n.isReadOnly),C.xb(2),C.Fb("active-icon",c.parentOptionIndex===d)}}function $(e,t){if(1&e&&(C.Tb(0,"div",55),C.Jc(1,W,8,9,"div",56),C.Sb()),2&e){var i=C.gc(2);C.nc("hidden",i.noParentRecordsFound),C.xb(1),C.nc("ngForOf",i.parentFieldOptionData)}}function V(e,t){1&e&&(C.Tb(0,"div",63),C.Ob(1,"img",64),C.Sb())}function ee(e,t){if(1&e&&(C.Tb(0,"span",53),C.Tb(1,"span"),C.Lc(2),C.Sb(),C.Sb()),2&e){var i=C.gc(2);C.xb(1),C.yb("data-title",i.childFieldText),C.xb(1),C.Nc(" (",i.childFieldText,") ")}}function te(e,t){if(1&e){var i=C.Ub();C.Tb(0,"span",65),C.ec("click",(function(){return C.Bc(i),C.gc(2).addNewField()})),C.Lc(1),C.hc(2,"translate"),C.Sb()}2&e&&(C.xb(1),C.Nc(" ",C.ic(2,1,"ADDNEW")," "))}function ie(e,t){1&e&&(C.Tb(0,"div",73),C.Lc(1),C.hc(2,"translate"),C.Sb()),2&e&&(C.xb(1),C.Nc("(",C.ic(2,1,"READONLY"),")"))}function ne(e,t){if(1&e){var i=C.Ub();C.Tb(0,"div",66),C.Tb(1,"ejs-checkbox",71),C.ec("change",(function(e){C.Bc(i);var n=t.index;return C.gc(3).childOptionCheckBoxChange(e,n)})),C.Sb(),C.Jc(2,ie,3,3,"div",72),C.Sb()}if(2&e){var n=t.$implicit,d=t.index;C.xb(1),C.nc("checked",!1)("label",n.name),C.yb("data-index",d)("data-id",n.id),C.xb(1),C.nc("ngIf",n.isReadOnly)}}function de(e,t){if(1&e){var i=C.Ub();C.Tb(0,"div",55),C.Tb(1,"div",66),C.Tb(2,"ejs-checkbox",67,68),C.ec("change",(function(e){return C.Bc(i),C.gc(2).selectAllChange(e)})),C.Sb(),C.Sb(),C.Tb(4,"div",null,69),C.Jc(6,ne,3,5,"div",70),C.Sb(),C.Sb()}if(2&e){var n=C.gc(2);C.nc("hidden",n.noChildRecordsFound),C.xb(2),C.nc("checked",!1),C.xb(4),C.nc("ngForOf",n.childFieldOptionData)}}function ce(e,t){1&e&&(C.Tb(0,"div",63),C.Ob(1,"img",64),C.Sb())}function ae(e,t){if(1&e){var i=C.Ub();C.Tb(0,"div",12),C.Tb(1,"div",13),C.Lc(2),C.hc(3,"translate"),C.Sb(),C.Tb(4,"div",14),C.Lc(5),C.hc(6,"translate"),C.Sb(),C.Tb(7,"div",15),C.Jc(8,q,11,13,"div",16),C.Tb(9,"div",17),C.Tb(10,"label"),C.Tb(11,"span",18),C.Lc(12),C.hc(13,"translate"),C.Sb(),C.Ob(14,"span",19),C.hc(15,"translate"),C.Tb(16,"span",20),C.Lc(17,"*"),C.Sb(),C.Sb(),C.Tb(18,"ejs-dropdownlist",21,22),C.ec("blur",(function(){return C.Bc(i),C.gc().parentDropFocusOut()}))("change",(function(){return C.Bc(i),C.gc().parentDropChange()})),C.hc(20,"translate"),C.hc(21,"translate"),C.Sb(),C.Sb(),C.Tb(22,"div",23),C.Tb(23,"label"),C.Tb(24,"span",18),C.Lc(25),C.hc(26,"translate"),C.Sb(),C.Ob(27,"span",19),C.hc(28,"translate"),C.Tb(29,"span",20),C.Lc(30,"*"),C.Sb(),C.Sb(),C.Tb(31,"ejs-dropdownlist",24,25),C.ec("blur",(function(){return C.Bc(i),C.gc().childDropFocusOut()}))("change",(function(){return C.Bc(i),C.gc().childDropChange()})),C.hc(33,"translate"),C.hc(34,"translate"),C.Sb(),C.Sb(),C.Sb(),C.Tb(35,"div",26),C.Jc(36,Q,2,1,"div",16),C.Tb(37,"div",17),C.Jc(38,z,4,3,"div",27),C.Sb(),C.Tb(39,"div",23),C.Jc(40,G,4,3,"div",27),C.Sb(),C.Sb(),C.Ob(41,"div",28),C.Tb(42,"div",29),C.Tb(43,"div",13),C.Lc(44),C.hc(45,"translate"),C.Sb(),C.Tb(46,"div",30),C.Lc(47),C.hc(48,"translate"),C.Sb(),C.Sb(),C.Tb(49,"div",31),C.Tb(50,"div",32,33),C.Tb(52,"div",34),C.Tb(53,"label",35),C.Tb(54,"span",36),C.Lc(55),C.hc(56,"translate"),C.Sb(),C.Jc(57,Y,3,2,"span",37),C.Sb(),C.Jc(58,K,3,3,"span",38),C.Sb(),C.Tb(59,"div",39),C.Tb(60,"div",40),C.Tb(61,"ejs-textbox",41,42),C.ec("input",(function(e){return C.Bc(i),C.gc().searchParentNodes(e)})),C.hc(63,"translate"),C.Sb(),C.Sb(),C.Jc(64,$,2,2,"div",43),C.Tb(65,"div",44),C.Lc(66),C.hc(67,"translate"),C.Sb(),C.Jc(68,V,2,0,"div",45),C.Sb(),C.Sb(),C.Tb(69,"div",46,47),C.Tb(71,"div",34),C.Tb(72,"label",35),C.Tb(73,"span",36),C.Lc(74),C.hc(75,"translate"),C.Sb(),C.Jc(76,ee,3,2,"span",48),C.Sb(),C.Jc(77,te,3,3,"span",49),C.Sb(),C.Tb(78,"div",39),C.Tb(79,"div",40),C.Tb(80,"ejs-textbox",41),C.ec("input",(function(e){return C.Bc(i),C.gc().searchChildNodes(e)})),C.hc(81,"translate"),C.Sb(),C.Sb(),C.Jc(82,de,7,3,"div",43),C.Tb(83,"div",44),C.Lc(84),C.hc(85,"translate"),C.Sb(),C.Jc(86,ce,2,0,"div",45),C.Sb(),C.Sb(),C.Sb(),C.Sb()}if(2&e){var n=C.gc();C.xb(2),C.Mc(C.ic(3,50,"FIELDDEPENDENCYSELECTION")),C.xb(3),C.Mc(C.ic(6,52,"FIELDDEPENDENCYCONTENTLABEL")),C.xb(3),C.nc("ngIf",n.isAddFieldDependency),C.xb(4),C.Nc("",C.ic(13,54,"PARENTFIELD")," "),C.xb(2),C.yb("data-non-elliptical",!0)("data-title",C.ic(15,56,"PARENTFIELDTOOLTIP")),C.xb(4),C.oc("filterBarPlaceholder",C.ic(20,58,"SEARCH")),C.oc("placeholder",C.ic(21,60,"SELECTAFIELD")),C.nc("htmlAttributes",n.autoCompleteAttribute)("dataSource",n.parentFieldDropData)("fields",n.dependencyFields)("allowFiltering",!0)("value",n.parentDropId)("enabled",n.isAddFieldDependency),C.xb(7),C.Nc("",C.ic(26,62,"CHILDFIELD")," "),C.xb(2),C.yb("data-non-elliptical",!0)("data-title",C.ic(28,64,"CHILDFIELDTOOLTIP")),C.xb(4),C.oc("filterBarPlaceholder",C.ic(33,66,"SEARCH")),C.oc("placeholder",C.ic(34,68,"SELECTAFIELD")),C.nc("htmlAttributes",n.autoCompleteAttribute)("dataSource",n.childFieldDropData)("fields",n.dependencyFields)("enabled",n.enabledChildFieldDrop)("allowFiltering",!0)("value",n.childDropId),C.xb(5),C.nc("ngIf",n.isAddFieldDependency),C.xb(2),C.nc("ngIf",n.parentFieldRequired),C.xb(2),C.nc("ngIf",n.childFieldRequired),C.xb(4),C.Mc(C.ic(45,70,"MAPFIELDDEPENDENCY")),C.xb(3),C.Mc(C.ic(48,72,"MAPDEPENDENCYLABEL")),C.xb(7),C.yb("data-title",n.parentFieldText),C.xb(1),C.Nc("",C.ic(56,74,"PARENTFIELDOPTION")," "),C.xb(2),C.nc("ngIf",n.parentFieldText),C.xb(1),C.nc("ngIf",n.isAddFieldDependency&&n.childDropId>0),C.xb(2),C.nc("hidden",!n.showParentOptions),C.xb(1),C.oc("placeholder",C.ic(63,76,"SEARCH")),C.xb(3),C.nc("ngIf",n.showParentOptions),C.xb(1),C.nc("hidden",!n.noParentRecordsFound),C.xb(1),C.Nc(" ",C.ic(67,78,"NORESULTSFOUND")," "),C.xb(2),C.nc("ngIf",!n.showParentOptions),C.xb(5),C.yb("data-title",n.childFieldText),C.xb(1),C.Mc(C.ic(75,80,"CHILDFIELDOPTION")),C.xb(2),C.nc("ngIf",n.childFieldText),C.xb(1),C.nc("ngIf",n.isAddFieldDependency&&n.childDropId>0),C.xb(2),C.nc("hidden",!n.showChildOptions),C.xb(1),C.oc("placeholder",C.ic(81,82,"SEARCH")),C.xb(2),C.nc("ngIf",n.showChildOptions),C.xb(1),C.nc("hidden",!n.noChildRecordsFound),C.xb(1),C.Nc(" ",C.ic(85,84,"NORESULTSFOUND")," "),C.xb(2),C.nc("ngIf",!n.showChildOptions)}}var oe,le=((oe=function(){function t(i,n,d,c,a,o,l,r){var s=this;e(this,t),this.appRootService=i,this.seoService=n,this.activatedRoute=d,this.router=c,this.fieldDependencyService=a,this.spinService=o,this.toastService=l,this.http=r,this.showParentOptions=!1,this.showChildOptions=!1,this.parentFieldOptionData=[],this.childFieldOptionData=[],this.parentOptionTempData=[],this.childOptionTempData=[],this.noParentRecordsFound=!1,this.noChildRecordsFound=!1,this.parentOptionIndex=0,this.enabledChildFieldDrop=!1,this.isCheckedCount=0,this.addDependencyJson=[],this.isSelectAll=!1,this.fieldDependencyId=0,this.fieldsDropData=[{text:"Ticket",value:1},{text:"Contact",value:2},{text:"Contact Group",value:3}],this.autoCompleteAttribute={autocomplete:"anyrandomstring"},this.dependencyFields={text:"labelForAgentPortal",value:"fieldId"},this.fieldDropFields={text:"text",value:"value"},this.activatedRoute.data.subscribe((function(e){s.isAddFieldDependency=e.isAddFieldDependency,s.moduleId=Object(y.X)(history.state.data)?1:history.state.data.moduleId}));var p=this.isAddFieldDependency?Object(v.a)("ADMIN")+" / "+Object(v.a)("FIELDDEPENDENCIES")+" / "+Object(v.a)("ADD")+",/admin/field-dependencies":Object(v.a)("ADMIN")+" / "+Object(v.a)("FIELDDEPENDENCIES")+" / "+Object(v.a)("EDIT")+",/admin/field-dependencies",h=this.isAddFieldDependency?Object(v.a)("ADD")+" | "+Object(v.a)("FIELDDEPENDENCIES")+" | "+Object(v.a)("ADMIN"):Object(v.a)("EDIT")+" | "+Object(v.a)("FIELDDEPENDENCIES")+" | "+Object(v.a)("ADMIN");this.appRootService.setAppTitleText(p),this.seoService.setHeaderElements({title:h}),this.appRootService.getNavigateUrl("/admin/field-dependencies"),this.isAddFieldDependency||(this.resolveData=this.activatedRoute.data.subscribe((function(e){s.data=e.data.result,s.spinService.hideSpinner()})),Object(y.X)(this.data)||(this.fieldDependencyId=this.data.fieldDependencyId,this.parentDropId=this.data.parentField.fieldId,this.childDropId=this.data.childField.fieldId,this.addDependencyJson=this.data.dependencyMapping))}return i(t,[{key:"ngAfterViewInit",value:function(){Object(m.V)(!0)}},{key:"ngOnInit",value:function(){this.submitButtonText=this.isAddFieldDependency?Object(v.a)("ADD"):Object(v.a)("UPDATE");var e=Object(D.v)("moduleid",window.location.href),t=Object(D.v)("childid",window.location.href);e&&t&&(this.moduleId=e,this.childDropId=t,window.history.replaceState({},"","/admin/field-dependencies/add")),this.loadParentFieldCollections(),this.isAddFieldDependency&&!t||this.loadChildFieldCollections(t?0:this.parentDropId)}},{key:"fieldsDropChange",value:function(){var e=this;this.moduleId=this.moduleDrop.value,this.parentFieldDrop.value=null,this.childFieldDrop.value=null,this.enabledChildFieldDrop=!1,this.showParentOptions=!1,this.showChildOptions=!1,this.loadParentFieldCollections(),setTimeout((function(){e.parentFieldRequired=!1,setTimeout((function(){e.childFieldRequired=!1}))})),this.isAddFieldDependency&&(this.parentFieldText=null,this.childFieldText=null)}},{key:"loadParentFieldCollections",value:function(){var e=this;this.spinService.showSpinner();var t=S.DependencyFieldCollection;t=Object(D.i)(t,"fieldModuleId",this.moduleId.toString()),t=Object(D.i)(t,"isParentField","true"),this.fieldDependencyService.getFieldCollections(t).then((function(t){e.parentFieldDropData=t.result,e.spinService.hideSpinner()})).catch((function(t){if(400===t.status){e.spinService.hideSpinner();var i=Object(D.q)(t.error);Object(y.X)(t.error.errors)?e.toastService.failureToast(t.error.message):e.toastService.failureToast(i)}}))}},{key:"loadChildFieldCollections",value:function(e){var t=this,i=S.DependencyFieldCollection;i=Object(D.i)(i,"fieldModuleId",this.moduleId.toString()),i=Object(D.i)(i,"isParentField","false"),i=Object(D.i)(i,"parentFieldId",e.toString()),this.isAddFieldDependency||(i=Object(D.i)(i,"isEditMode","true")),this.spinService.showSpinner(),this.fieldDependencyService.getFieldCollections(i).then((function(e){t.childFieldDropData=e.result,t.spinService.hideSpinner()})).catch((function(e){if(400===e.status){t.spinService.hideSpinner();var i=Object(D.q)(e.error);Object(y.X)(e.error.errors)?t.toastService.failureToast(e.error.message):t.toastService.failureToast(i)}}))}},{key:"fieldDependencyCancel",value:function(){this.addDependencyJson=[],this.router.navigateByUrl("/admin/field-dependencies")}},{key:"fieldDependencySaveSave",value:function(){this.router.navigateByUrl("/admin/field-dependencies")}},{key:"parentDropFocusOut",value:function(){this.parentFieldRequired=!this.parentFieldDrop.value}},{key:"parentDropChange",value:function(){var e=this;Object(y.X)(this.parentFieldDrop.value)?this.parentFieldRequired=!0:(this.isAddFieldDependency&&(this.parentFieldDrop.value===this.childFieldDrop.value&&(this.childFieldDrop.value=null),this.showChildOptions=!1),this.isAddFieldDependency&&this.loadChildFieldCollections(this.parentFieldDrop.value),this.parentFieldRequired=!1,this.parentOptionIndex=0,this.parentFieldText=this.parentFieldDrop.text,this.isAddFieldDependency&&(this.enabledChildFieldDrop=!0),this.isAddFieldDependency&&(Object(y.X)(this.childFieldDrop.value)||(this.spinService.showSpinner(),this.loadDependencyFieldOptionData(),setTimeout((function(){e.resetActiveList(),e.unselectAllCheckBox()}))))),this.isAddFieldDependency&&(this.addDependencyJson=[],this.disableAddDependencyButton())}},{key:"childDropFocusOut",value:function(){this.childFieldRequired=!this.childFieldDrop.value}},{key:"childDropChange",value:function(){var e=this;Object(y.X)(this.childFieldDrop.value)?(this.childFieldRequired=!0,this.childDropId=null):(this.isAddFieldDependency&&(this.addDependencyJson=[]),this.childFieldRequired=!1,this.childFieldText=this.childFieldDrop.text,this.childDropId=this.childFieldDrop.value,this.spinService.showSpinner(),this.loadDependencyFieldOptionData(),setTimeout((function(){e.resetActiveList(),e.unselectAllCheckBox()}))),this.isAddFieldDependency&&(this.addDependencyJson=[]),this.disableAddDependencyButton()}},{key:"loadDependencyFieldOptionData",value:function(){var e=this;if(this.parentFieldDrop.value&&this.childFieldDrop.value){var t=S.FieldDependencyOptions+"/"+this.fieldDependencyId;t=Object(D.i)(t,"parentFieldId",this.parentFieldDrop.value.toString()),t=Object(D.i)(t,"childFieldId",this.childFieldDrop.value.toString()),this.http.get(t).toPromise().then((function(t){e.parentFieldOptionData=t.result.parentOptions,e.parentOptionTempData=e.parentFieldOptionData,e.childFieldOptionData=t.result.childOptions,e.childOptionDataCount=Object(y.X)(e.childFieldOptionData)?0:e.childFieldOptionData.length,e.childOptionTempData=e.childFieldOptionData,e.parentFieldOptionData.length>0?(e.showParentOptions=!0,e.isAddFieldDependency&&(e.enabledChildFieldDrop=!0)):e.showParentOptions=!1,e.showChildOptions=e.childFieldOptionData.length>0,e.isAddFieldDependency||e.resetAddDependencyButton(),setTimeout((function(){!e.isAddFieldDependency&&e.parentFieldOptionData.length>0&&e.childFieldOptionData.length>0&&e.loadOptionsData(e.parentFieldOptionData)})),e.spinService.hideSpinner()})).catch((function(t){if(400===t.status){e.spinService.hideSpinner();var i=Object(D.q)(t.error);Object(y.X)(t.error.errors)?e.toastService.failureToast(t.error.message):e.toastService.failureToast(i)}}))}else this.spinService.hideSpinner()}},{key:"loadOptionsData",value:function(e){var t=this,i=0;e.forEach((function(){t.parentFieldOptionClick(i),++i})),setTimeout((function(){t.parentOptionIndex=0,t.parentFieldOptionClick(t.parentOptionIndex)}))}},{key:"searchParentNodes",value:function(e){var t=this,i=e.value.trim(),n=new g.a(this.parentOptionTempData).executeLocal((new g.g).where("name","startswith",i,!0));Object(D.D)(i)?(this.noParentRecordsFound=!1,this.parentFieldOptionData=this.parentOptionTempData,this.parentOptionIndex=0,setTimeout((function(){t.loadOptionsData(t.parentFieldOptionData)}))):n.length?(this.parentFieldOptionData=n,this.noParentRecordsFound=!1,setTimeout((function(){t.loadOptionsData(t.parentFieldOptionData)}))):this.noParentRecordsFound=!0}},{key:"searchChildNodes",value:function(e){var t=e.value.trim(),i=new g.a(this.childOptionTempData).executeLocal((new g.g).where("name","startswith",t,!0));Object(D.D)(t)?(this.noChildRecordsFound=!1,this.childFieldOptionData=this.childOptionTempData):i.length?(this.childFieldOptionData=i,this.noChildRecordsFound=!1):this.noChildRecordsFound=!0}},{key:"resetAddDependencyButton",value:function(){this.parentFieldOptionData.length>0&&this.childFieldOptionData.length>0&&(this.addDependencyButton.isPrimary=!0,this.addDependencyButton.disabled=!1)}},{key:"disableAddDependencyButton",value:function(){0==this.addDependencyJson.length&&(this.addDependencyButton.isPrimary=!1,this.addDependencyButton.disabled=!0)}},{key:"parentFieldOptionClick",value:function(e){this.parentOptionIndex=e,this.unselectAllCheckBox(),this.setCheckBoxElement()}},{key:"getActiveOptionElement",value:function(){var e,t=this;return this.parentFieldOptionContainer.nativeElement.querySelectorAll(".parent-field-items").forEach((function(i){i.getAttribute("data-index")==t.parentOptionIndex.toString()&&(e=i.querySelector(".active-option"))})),e}},{key:"selectAllChange",value:function(e){var t=this;e.checked||this.manipulateUnSelectAllChanges(),this.isSelectAll=!0;var i=this.childCheckBox.nativeElement.querySelectorAll(".e-checkbox");Object(y.X)(i)||i.forEach((function(t){t.ej2_instances[0].checked=e.checked})),setTimeout((function(){t.setActiveList(),e.checked&&t.getAdddependencyJson(t.parentOptionIndex)}))}},{key:"setActiveList",value:function(){var e=this.getCheckBoxSelection(),t=this.getActiveOptionElement();e>0?Object(y.X)(t)||(t.classList.remove("hide-validation"),t.classList.add("show-validation")):Object(y.X)(t)||(t.classList.add("hide-validation"),t.classList.remove("show-validation"))}},{key:"resetActiveList",value:function(){if(!Object(y.X)(this.parentFieldOptionContainer)){var e=this.parentFieldOptionContainer.nativeElement.querySelectorAll(".active-option");Object(y.X)(e)||e.length>0&&e.forEach((function(e){e.classList.add("hide-validation"),e.classList.remove("show-validation")}))}}},{key:"unselectAllCheckBox",value:function(){if(this.isSelectAll=!1,Object(y.X)(this.selectAllCheckBox)||(this.selectAllCheckBox.checked=!1),!Object(y.X)(this.childCheckBox)){var e=this.childCheckBox.nativeElement.querySelectorAll(".e-checkbox");Object(y.X)(e)||e.forEach((function(e){e.ej2_instances[0].checked=!1}))}}},{key:"getCheckBoxSelection",value:function(){var e=this;if(this.isCheckedCount=0,!Object(y.X)(this.childCheckBox)){var t=this.childCheckBox.nativeElement.querySelectorAll(".e-checkbox");Object(y.X)(t)||t.forEach((function(t){t.checked&&++e.isCheckedCount}))}return this.isCheckedCount}},{key:"childOptionCheckBoxChange",value:function(e,t){this.isSelectAll=!1,this.setActiveList(),e.checked?this.getAdddependencyJson(t):(this.manipulateDepedencyJson(t),this.selectAllCheckBox.checked&&(this.selectAllCheckBox.checked=!1))}},{key:"getAdddependencyJson",value:function(e){var t=this,i=null;Object(y.X)(this.getActiveOptionElement())||(i=parseInt(this.getActiveOptionElement().parentElement.getAttribute("data-id"),10));var n,d=[],c=0;if(!Object(y.X)(i)){if(this.addDependencyJson.length>0&&(n=this.addDependencyJson.filter((function(e){if(e.parentFieldOptionId==i)return++c,e}))),this.childFieldOptionContainer.nativeElement.querySelectorAll(".e-checkbox-wrapper").forEach((function(i){if(t.isSelectAll){var c=parseInt(i.getAttribute("data-id"),10);isNaN(c)||d.push(c)}else if(i.getAttribute("data-index")==e.toString()){var a=parseInt(i.getAttribute("data-id"),10);!Object(y.X)(n)&&n.length>0?n[0].childFieldOptionId.push(a):d.push(a)}})),this.getActiveCheckBoxCount()==this.childOptionDataCount&&(this.selectAllCheckBox.checked=!0),this.isSelectAll&&0==c)this.addDependencyJson.push({parentFieldOptionId:i,childFieldOptionId:d}),c=1;else if(this.isSelectAll&&c>0){var a=this.addDependencyJson.findIndex((function(e){return e.parentFieldOptionId==i}));this.addDependencyJson[a].childFieldOptionId=d}0==c&&this.addDependencyJson.push({parentFieldOptionId:i,childFieldOptionId:d}),this.addDependencyJson.length>0&&this.resetAddDependencyButton(),this.disableAddDependencyButton()}}},{key:"getActiveCheckBoxCount",value:function(){var e=0;return this.childFieldOptionContainer.nativeElement.querySelectorAll(".e-checkbox").forEach((function(t){t.checked&&++e})),e}},{key:"getCurrentCheckBoxElementId",value:function(e,t){var i;return e.forEach((function(e){e.getAttribute("data-index")==t.toString()&&(i=parseInt(e.getAttribute("data-id"),10))})),i}},{key:"manipulateUnSelectAllChanges",value:function(){var e=null;Object(y.X)(this.getActiveOptionElement())||(e=parseInt(this.getActiveOptionElement().parentElement.getAttribute("data-id"),10)),Object(y.X)(e)||(this.addDependencyJson.length>0&&(this.addDependencyJson=this.addDependencyJson.filter((function(t){return t.parentFieldOptionId!==e}))),this.disableAddDependencyButton())}},{key:"manipulateDepedencyJson",value:function(e){var t,i=null;if(Object(y.X)(this.getActiveOptionElement())||(i=parseInt(this.getActiveOptionElement().parentElement.getAttribute("data-id"),10)),this.addDependencyJson.length>0&&!Object(y.X)(i)){var n=this.childFieldOptionContainer.nativeElement.querySelectorAll(".e-checkbox-wrapper"),d=this.getCurrentCheckBoxElementId(n,e);this.addDependencyJson.filter((function(e){e.parentFieldOptionId==i&&(t=e.childFieldOptionId.filter((function(e){return e!==d})))}));var c=this.addDependencyJson.findIndex((function(e){return e.parentFieldOptionId==i}));t.length>0?this.addDependencyJson[c].childFieldOptionId=t:this.addDependencyJson=this.addDependencyJson.filter((function(e){return e.parentFieldOptionId!==i}))}this.disableAddDependencyButton()}},{key:"setCheckBoxElement",value:function(){var e,t=this,i=[],n=[],d=0;if(this.addDependencyJson.length>0){if(Object(y.X)(this.getActiveOptionElement())||(e=parseInt(this.getActiveOptionElement().parentElement.getAttribute("data-id"),10)),(i=this.addDependencyJson.filter((function(t){if(t.parentFieldOptionId==e)return t}))).length>0&&(n=i[0].childFieldOptionId),n.forEach((function(e){t.childFieldOptionContainer.nativeElement.querySelectorAll(".e-checkbox-wrapper").forEach((function(t){var i=parseInt(t.getAttribute("data-id"),10);isNaN(i)||i==e&&(t.querySelector(".e-checkbox").ej2_instances[0].checked=!0,++d)}))})),d>0&&!this.isAddFieldDependency){var c=this.getActiveOptionElement();Object(y.X)(c)||(c.classList.remove("hide-validation"),c.classList.add("show-validation"))}this.childOptionDataCount==d&&(this.selectAllCheckBox.checked=!0)}}},{key:"saveFieldDependency",value:function(){this.parentDropFocusOut(),this.childDropFocusOut();var e={};this.isAddFieldDependency?!this.parentFieldRequired&&!this.childFieldRequired&&this.addDependencyJson.length>0&&(this.spinService.showSpinner(),e={dependencyMapping:this.addDependencyJson,parentFieldId:this.parentFieldDrop.value,childFieldId:this.childFieldDrop.value},this.postFieldDependency(e)):this.addDependencyJson.length>0&&(this.spinService.showSpinner(),e={fieldDependencyId:this.fieldDependencyId,dependencyMapping:this.addDependencyJson},this.postFieldDependency(e))}},{key:"postFieldDependency",value:function(e){var t=this;this.fieldDependencyService.addEditFieldDependency(e,this.isAddFieldDependency).then((function(e){e&&(Object(m.V)(!1),Object(x.c)(),t.spinService.hideSpinner(),t.toastService.successToast(e.result),t.router.navigateByUrl("/admin/field-dependencies"))}))}},{key:"addNewField",value:function(){this.moduleId===F.Ticket?window.open("admin/ticket-fields/add","_blank"):this.moduleId===F.Contact?window.open("admin/contact-fields/add","_blank"):this.moduleId===F.ContactGroup&&window.open("admin/contact-group-fields/add","_blank")}}]),t}()).\u0275fac=function(e){return new(e||oe)(C.Nb(T.a),C.Nb(E.a),C.Nb(u.a),C.Nb(u.g),C.Nb(w),C.Nb(k.a),C.Nb(I.a),C.Nb(A.b))},oe.\u0275cmp=C.Hb({type:oe,selectors:[["app-addedit-field-dependency"]],viewQuery:function(e,t){var i;1&e&&(C.Qc(P,!0),C.Qc(j,!0),C.Qc(N,!0),C.Qc(M,!0),C.Qc(B,!0),C.Qc(J,!0),C.Qc(R,!0),C.Qc(_,!0),C.Qc(X,!0)),2&e&&(C.xc(i=C.fc())&&(t.parentFieldDrop=i.first),C.xc(i=C.fc())&&(t.childFieldDrop=i.first),C.xc(i=C.fc())&&(t.parentFieldSearch=i.first),C.xc(i=C.fc())&&(t.addDependencyButton=i.first),C.xc(i=C.fc())&&(t.parentFieldOptionContainer=i.first),C.xc(i=C.fc())&&(t.childFieldOptionContainer=i.first),C.xc(i=C.fc())&&(t.childCheckBox=i.first),C.xc(i=C.fc())&&(t.selectAllCheckBox=i.first),C.xc(i=C.fc())&&(t.moduleDrop=i.first))},decls:17,vars:9,consts:[[1,"new-field-dependency-form"],[1,"new-field-dependency-part"],[1,"flex","ml-5","new-field-dependency-overflow","overflow-auto-align"],[1,"pt-2"],["fieldDependencyContainer",""],[4,"ngTemplateOutlet"],[1,"row","field-dependency-action-buttons"],[1,"col-lg-8"],["type","submit","ejs-button","",1,"mr-10","e-btn",3,"isPrimary","disabled","click"],["addDependencyButton",""],["type","button","cssClass","e-outline","ejs-button","",1,"e-btn",3,"click"],["newFieldDependency",""],[1,"form-group"],[1,"font-500","dependency-label"],[1,"secondary","padding-10"],[1,"form-group","flex-horizontal","no-margin","pt-2"],["class","col-4","style","padding-left: 10px;",4,"ngIf"],[1,"col-4",2,"padding-left","10px"],[1,"font-13"],[1,"hd-icon","hd-info"],[1,"error"],["popupHeight","200px",3,"htmlAttributes","dataSource","fields","filterBarPlaceholder","allowFiltering","placeholder","value","enabled","blur","change"],["parentFieldDrop",""],[1,"col-4"],["popupHeight","200px",3,"htmlAttributes","dataSource","filterBarPlaceholder","fields","placeholder","enabled","allowFiltering","value","blur","change"],["childFieldDrop",""],[1,"flex-horizontal"],["class","error-msg",4,"ngIf"],[1,"border-bottom","mt-4","mb-3","ml-2"],[1,"form-group","flex-vertical"],[1,"secondary","padding-10","col-10"],[1,"form-group","flex-horizontal"],[1,"col-4","pb-3",2,"padding-left","10px"],["parentFieldOptionContainer",""],[1,"flex"],[1,"no-wrap","ellipsis","flex-vertical","pr-2",2,"width","170px"],[1,"font-14","font-500"],["class","font-12 font-400 ellipsis secondary",4,"ngIf"],["class","font-14 font-500 link align-right",3,"click",4,"ngIf"],[1,"border",2,"height","310px"],[1,"search-box-padding",3,"hidden"],["showClearButton","true","autocomplete","off","maxlength","150",3,"placeholder","input"],["parentFieldSearch",""],["style","height: 255px; overflow: auto;",3,"hidden",4,"ngIf"],[1,"parent-field-items",3,"hidden"],["class","image-loader","align","center","style","padding-top: 60px;",4,"ngIf"],[1,"col-4","pb-3"],["childFieldOptionContainer",""],["class","font-12 font-400 ellipsis secondary",4,"ngIfSecondary","ngIf"],["class","link font-14 font-500 align-right",3,"click",4,"ngIf"],["popUpHeight","200px","index","0",3,"htmlAttributes","dataSource","fields","filterBarPlaceholder","placeholder","value","change"],["moduleDrop",""],[1,"error-msg"],[1,"font-12","font-400","ellipsis","secondary"],[1,"font-14","font-500","link","align-right",3,"click"],[2,"height","255px","overflow","auto",3,"hidden"],[4,"ngFor","ngForOf"],[1,"flex-horizontal","parent-field-items",3,"click"],[1,"no-wrap","ellipsis"],["class","pl-1 secondary",4,"ngIf"],[1,"align-right","hide-validation","active-option"],[1,"hd-icon","hd-tick",2,"font-size","16px"],[1,"pl-1","secondary"],["align","center",1,"image-loader",2,"padding-top","60px"],["src","./assets/images/field-dependency.png","alt","Loading","width","240px"],[1,"link","font-14","font-500","align-right",3,"click"],[2,"padding","10px"],["label","Select all",3,"checked","change"],["selectAllCheckBox",""],["childCheckBox",""],["style","padding: 10px;",4,"ngFor","ngForOf"],[3,"checked","label","change"],["class","pl-1 secondary","style","display: inline-flex;",4,"ngIf"],[1,"pl-1","secondary",2,"display","inline-flex"]],template:function(e,t){if(1&e&&(C.Tb(0,"div",0),C.Tb(1,"div",1),C.Tb(2,"div",2),C.Tb(3,"div",3,4),C.Jc(5,U,1,0,"ng-container",5),C.Sb(),C.Sb(),C.Tb(6,"div",6),C.Tb(7,"div",7),C.Tb(8,"button",8,9),C.ec("click",(function(){return t.saveFieldDependency()})),C.Lc(10),C.hc(11,"translate"),C.Sb(),C.Tb(12,"button",10),C.ec("click",(function(){return t.fieldDependencyCancel()})),C.Lc(13),C.hc(14,"translate"),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Jc(15,ae,87,86,"ng-template",null,11,C.Kc)),2&e){var i=C.yc(16);C.xb(5),C.nc("ngTemplateOutlet",i),C.xb(3),C.nc("isPrimary",!1)("disabled",!0),C.xb(2),C.Nc(" ",C.ic(11,5,t.submitButtonText),""),C.xb(3),C.Mc(C.ic(14,7,"CANCEL"))}},directives:[a.r,h.c,a.n,p.e,s.i,a.m,h.e],pipes:[L.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.new-field-dependency-form[_ngcontent-%COMP%]{height:100%}.new-field-dependency-form[_ngcontent-%COMP%]   .form-builder[_ngcontent-%COMP%]{margin:0 auto 0 5%}.new-field-dependency-overflow[_ngcontent-%COMP%]{height:calc(100% - 50px)}.new-field-dependency-overflow[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:94%}.overflow-auto-align[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}.new-field-dependency-part[_ngcontent-%COMP%]{height:100%}.new-field-dependency-part[_ngcontent-%COMP%]   .field-dependency-action-buttons[_ngcontent-%COMP%]{background:#f7fafc;border-top:1px solid #e8eaed;bottom:0;height:50px;margin-left:0;padding:10px;position:fixed;width:100%}.new-field-dependency-part[_ngcontent-%COMP%]   .margin-left-20px[_ngcontent-%COMP%]{margin-left:20px!important}.new-field-dependency-part[_ngcontent-%COMP%]   .search-box-padding[_ngcontent-%COMP%]{border-bottom:1px solid #cbd2e0;overflow:hidden;padding:10px;width:inherit}.new-field-dependency-part[_ngcontent-%COMP%]   .parent-field-items[_ngcontent-%COMP%]{cursor:pointer;font-size:13px!important;padding:10px}.new-field-dependency-part[_ngcontent-%COMP%]   .parent-field-items[_ngcontent-%COMP%]:active, .new-field-dependency-part[_ngcontent-%COMP%]   .parent-field-items[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.1)}.new-field-dependency-part[_ngcontent-%COMP%]   .dependency-label[_ngcontent-%COMP%]{padding:10px 10px 4px}.new-field-dependency-part[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background:#e5efff;color:#0450cc!important;font-weight:500}.new-field-dependency-part[_ngcontent-%COMP%]   .active-icon[_ngcontent-%COMP%]{color:#0450cc!important}"]}),oe),re=d("M9dC"),se=d("qBM0"),pe=d("64zv"),he=["fieldDependencyListGrid"],ue=["fieldsDrop"],fe=["fieldDependencyEle"],be=["contextmenu"],ve=["parentEle"],ge=function(e){return{"max-width":e}};function De(e,t){if(1&e){var i=C.Ub();C.Tb(0,"div",18),C.ec("click",(function(){C.Bc(i);var e=t.$implicit,n=C.gc();return n.moreOptionsSelect(n.editItem,e)})),C.Tb(1,"span",19,20),C.Tb(3,"span",21),C.Lc(4),C.Sb(),C.Sb(),C.Lc(5," -> "),C.Tb(6,"span",22),C.Tb(7,"span",21),C.Lc(8),C.Sb(),C.Sb(),C.Sb()}if(2&e){var n=t.$implicit,d=C.yc(2);C.yb("data-non-elliptical",!0)("data-title",n.parentField.name+" -> "+n.childField.name),C.xb(4),C.Mc(n.parentField.name),C.xb(2),C.nc("ngStyle",C.tc(5,ge,"calc(100% - "+(d.offsetWidth+4)+"px)")),C.xb(2),C.Mc(n.childField.name)}}function ye(e,t){if(1&e&&(C.Tb(0,"span",23),C.Ob(1,"app-date-time",24),C.Sb()),2&e){var i=t.$implicit,n=C.gc();C.xb(1),C.nc("date",i.lastModifiedOn)("format",n.format)("timezone",n.timeZone)}}function me(e,t){if(1&e){var i=C.Ub();C.Tb(0,"div",25),C.Tb(1,"span",26),C.ec("click",(function(){C.Bc(i);var e=t.$implicit,n=C.gc();return n.moreOptionsSelect(n.editItem,e)})),C.hc(2,"translate"),C.Sb(),C.Tb(3,"span",27),C.ec("click",(function(){C.Bc(i);var e=t.$implicit,n=C.gc();return n.moreOptionsSelect(n.deleteItem,e)})),C.hc(4,"translate"),C.Sb(),C.Sb()}2&e&&(C.xb(1),C.yb("data-title",C.ic(2,2,"EDIT")),C.xb(2),C.yb("data-title",C.ic(4,4,"DELETE")))}var Oe,Se,Fe,xe,Ce=((Se=function(){function t(i,n,d,c,a,o){e(this,t),this.appRootService=i,this.router=n,this.seoService=d,this.spinService=c,this.toastService=a,this.fieldDependencyService=o,this.autoCompleteAttribute={autocomplete:"anyrandomstring"},this.fieldDropFields={text:"text",value:"value"},this.fieldId=1,this.fieldsDropData=[{text:"Ticket",value:1},{text:"Contact",value:2},{text:"Contact Group",value:3}],this.animation={effect:"none"},this.editItem={item:{id:se.a.Edit}},this.deleteItem={item:{id:se.a.Delete}},this.timeZone=m.P.timeZoneOffset,this.format=m.e.dateFormat+" "+m.e.timeFormat,this.appRootService.setAppTitleText(Object(v.a)("FIELDDEPENDENCIES")),this.setSEOHeader();var l=Object(v.a)("ADMIN")+" / "+Object(v.a)("FIELDDEPENDENCIES"),r=Object(v.a)("FIELDDEPENDENCIES")+" | "+Object(v.a)("ADMIN");this.appRootService.setAppTitleText(l),this.seoService.setHeaderElements({title:r})}return i(t,[{key:"ngOnInit",value:function(){this.pageSettings={pageSize:m.q},this.href=this.router.url,this.loadGrid()}},{key:"loadGrid",value:function(){var e=S.FieldDependencyList;e=Object(D.i)(e,"fieldModuleId",this.fieldId.toString()),this.fieldDependencyList=new g.a({url:e,adaptor:new re.b})}},{key:"setSEOHeader",value:function(){this.seoService.setHeaderElements({title:Object(v.a)("FIELDDEPENDENCIES")})}},{key:"fieldDependencyListDataBound",value:function(){var e=this,t=this.grid.element.querySelector(".e-gridcontent .e-content .e-emptyrow td");t&&t.setAttribute("colspan","2"),setTimeout((function(){e.grid.widthService.setWidthToColumns(),Object(D.a)(e.grid)}))}},{key:"fieldDependencyListActionBegin",value:function(e){"refresh"===e.requestType&&this.grid.searchModule.refreshSearch&&(this.grid.searchModule.refreshSearch=!1)}},{key:"addFieldDependecy",value:function(){this.router.navigate([this.href+"/add"],{state:{data:{moduleId:this.fieldId}}})}},{key:"fieldDependencyClick",value:function(e,t){e.stopPropagation(),this.router.navigate([this.href+"/"+t],{state:{data:{moduleId:this.fieldId}}})}},{key:"cancelDialog",value:function(){this.deleteDialog.hide()}},{key:"fieldsDropChange",value:function(){this.fieldId=this.fieldsDrop.value,this.loadGrid()}},{key:"moreOptionsSelect",value:function(e,t){this.selectedItemData=t,e.item.id===se.a.Edit?this.router.navigate([this.href+"/"+this.selectedItemData.id],{state:{data:{moduleId:this.fieldId}}}):Object(D.b)(this.updateDeleteFieldDependency,this.cancelDialog,this,Object(v.a)("DELETE")+" "+Object(v.a)("FIELDDEPENDENCY"),Object(v.a)("FIELDDEPENDENCYDELETEALERT"))}},{key:"updateDeleteFieldDependency",value:function(){var e=this;this.spinService.showSpinner(),this.fieldDependencyService.deleteFieldDependency(this.selectedItemData.id).then((function(t){t&&(e.spinService.hideSpinner(),e.deleteDialog.hide(),e.loadGrid(),e.toastService.successToast(t.result))})).catch((function(t){var i=Object(D.q)(t.error);400===t.status&&(e.spinService.hideSpinner(),e.toastService.failureToast(i))}))}}]),t}()).\u0275fac=function(e){return new(e||Se)(C.Nb(T.a),C.Nb(u.g),C.Nb(E.a),C.Nb(k.a),C.Nb(I.a),C.Nb(w))},Se.\u0275cmp=C.Hb({type:Se,selectors:[["ng-component"]],viewQuery:function(e,t){var i;1&e&&(C.Qc(he,!0),C.Qc(ue,!0),C.Qc(fe,!0),C.Qc(be,!0),C.Qc(ve,!0)),2&e&&(C.xc(i=C.fc())&&(t.grid=i.first),C.xc(i=C.fc())&&(t.fieldsDrop=i.first),C.xc(i=C.fc())&&(t.fieldDependencyEle=i.first),C.xc(i=C.fc())&&(t.contextmenu=i.first),C.xc(i=C.fc())&&(t.parentEle=i.first))},decls:34,vars:27,consts:[[1,"hd-grid-full-height"],["fieldDependencyEle",""],[1,"secondary","padding-10","information-content"],[1,"bd-icon","bd-icon-info","information-icon"],[1,"flex-horizontal","mt-3","mr-3","mb-3","pr-1"],[1,"pl-4","mt-1","font-500"],[1,"pl-3"],["width","150","popUpHeight","200px","index","0",3,"htmlAttributes","dataSource","fields","filterBarPlaceholder","placeholder","change"],["fieldsDrop",""],[1,"align-right"],["type","submit","ejs-button","",1,"e-btn","e-outline","e-primary",3,"click"],[1,"pl-20","pr-20"],["allowResizing","true",3,"dataSource","allowPaging","pageSettings","dataBound","actionBegin"],["fieldDependencyListGrid",""],["field","parentField","minWidth","180","width","200",3,"headerText"],["template",""],["field","lastModifiedOn","minWidth","60","width","80",3,"headerText"],["minWidth","100","width","100","textAlign","Center"],[1,"primary-link-color","cursor-pointer","width-100",3,"click"],[2,"max-width","45%","display","inline-flex"],["parentEle",""],[1,"no-wrap","ellipsis"],[2,"display","inline-flex",3,"ngStyle"],[1,"grid-text-font-color"],[3,"date","format","timezone"],[1,"cursor-pointer"],[1,"bd-icon","bd-icon-edit","more-option-button",3,"click"],[1,"bd-icon","bd-icon-delete-2","more-option-button",3,"click"]],template:function(e,t){1&e&&(C.Tb(0,"div",0,1),C.Tb(2,"div",2),C.Ob(3,"div",3),C.Lc(4),C.hc(5,"translate"),C.Sb(),C.Tb(6,"div",4),C.Tb(7,"label",5),C.Lc(8),C.hc(9,"translate"),C.Sb(),C.Tb(10,"div",6),C.Tb(11,"ejs-dropdownlist",7,8),C.ec("change",(function(){return t.fieldsDropChange()})),C.hc(13,"translate"),C.hc(14,"translate"),C.Sb(),C.Sb(),C.Tb(15,"div",9),C.Tb(16,"button",10),C.ec("click",(function(){return t.addFieldDependecy()})),C.Lc(17),C.hc(18,"translate"),C.Sb(),C.Sb(),C.Sb(),C.Tb(19,"div",11),C.Tb(20,"ejs-grid",12,13),C.ec("dataBound",(function(){return t.fieldDependencyListDataBound()}))("actionBegin",(function(e){return t.fieldDependencyListActionBegin(e)})),C.Tb(22,"e-columns"),C.Tb(23,"e-column",14),C.hc(24,"translate"),C.Jc(25,De,9,7,"ng-template",null,15,C.Kc),C.Sb(),C.Tb(27,"e-column",16),C.hc(28,"translate"),C.Jc(29,ye,2,3,"ng-template",null,15,C.Kc),C.Sb(),C.Tb(31,"e-column",17),C.Jc(32,me,5,6,"ng-template",null,15,C.Kc),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb()),2&e&&(C.xb(4),C.Nc(" ",C.ic(5,13,"FIELDDEPENDENCYMODULEINFO"),""),C.xb(4),C.Nc(" ",C.ic(9,15,"MODULE")," "),C.xb(3),C.oc("filterBarPlaceholder",C.ic(13,17,"SEARCH")),C.oc("placeholder",C.ic(14,19,"SELECT")),C.nc("htmlAttributes",t.autoCompleteAttribute)("dataSource",t.fieldsDropData)("fields",t.fieldDropFields),C.xb(6),C.Nc(" ",C.ic(18,21,"ADDFIELDDEPENDENCY"),""),C.xb(3),C.nc("dataSource",t.fieldDependencyList)("allowPaging",!0)("pageSettings",t.pageSettings),C.xb(3),C.oc("headerText",C.ic(24,23,"PARENTFIELDHEADER")),C.xb(4),C.oc("headerText",C.ic(28,25,"LASTMODIFIED")))},directives:[p.e,h.c,l.k,l.e,l.b,l.d,l.a,a.o,pe.a],pipes:[L.a],encapsulation:2}),Se),Te=((Oe=function(){function t(i,n,d){e(this,t),this.http=i,this.spinService=n,this.router=d}return i(t,[{key:"resolve",value:function(e){var t=this;return this.spinService.showSpinner(),this.http.get(S.FieldDependencyOptions+"/"+e.params.id).toPromise().catch((function(e){return t.router.navigateByUrl("error",{state:e.error.errors[0].errorMessage,skipLocationChange:!0})}))}}]),t}()).\u0275fac=function(e){return new(e||Oe)(C.bc(A.b),C.bc(k.a),C.bc(u.g))},Oe.\u0275prov=C.Jb({token:Oe,factory:Oe.\u0275fac}),Oe),Ee=[{path:"",component:Ce},{path:"add",component:le,data:{isAddFieldDependency:!0},canDeactivate:[b.a]},{path:":id",component:le,resolve:{data:Te},data:{isAddFieldDependency:!1},canDeactivate:[b.a]},{path:"**",component:f.a}],Ae=((Fe=function t(){e(this,t)}).\u0275mod=C.Lb({type:Fe}),Fe.\u0275inj=C.Kb({factory:function(e){return new(e||Fe)},imports:[[u.k.forChild(Ee)],u.k]}),Fe),ke=d("hXFv"),Ie=((xe=function t(){e(this,t)}).\u0275mod=C.Lb({type:xe}),xe.\u0275inj=C.Kb({factory:function(e){return new(e||xe)},providers:[w,Te],imports:[[a.b,Ae,o.a,l.j,r.AdminModule,s.h,p.d,h.b,h.d,ke.e]]}),xe)},mrjb:function(t,i,n){"use strict";n.d(i,"a",(function(){return a}));var d=n("dSv1"),c=n("fXoL"),a=function(){var t=function t(){e(this,t),this.title=Object(d.a)("PAGENOTFOUND"),this.message=Object(d.a)("PAGENOTFOUNDMESSAGE")};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Hb({type:t,selectors:[["app-page-not-found"]],decls:10,vars:2,consts:[[1,"fallback-container","flex-vertical"],[1,"row","container","align-center","mt-100"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"fallback_image"],["height","300","width","300","src","assets/images/page-not-found.png"],[1,"fallback_message"],[1,"error-font"],[1,"message-style","font-16"]],template:function(e,t){1&e&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"div",3),c.Ob(4,"img",4),c.Sb(),c.Tb(5,"div",5),c.Tb(6,"div",6),c.Lc(7),c.Sb(),c.Tb(8,"span",7),c.Lc(9),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&e&&(c.xb(7),c.Mc(t.title),c.xb(2),c.Mc(t.message))},styles:[".fallback-container[_ngcontent-%COMP%]{height:100%;text-align:center}.fallback-container[_ngcontent-%COMP%]   .message-style[_ngcontent-%COMP%]{font-weight:400;line-height:24px;padding-top:6px}"]}),t}()},qBM0:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.Edit="1",e.Activate="2",e.Deactivate="3",e.Delete="4",e}({})},qZph:function(t,n,d){"use strict";d.d(n,"a",(function(){return l}));var c=d("58Y9"),a=d("4SUy"),o=d("fXoL"),l=function(){var t=function(){function t(){e(this,t)}return i(t,[{key:"transform",value:function(e){if(!Object(a.X)(e))return e+" (UTC "+Object(c.K)()+")"}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Mb({name:"dateTimeUTC",type:t,pure:!0}),t}()}}])}();