!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var c=0;c<e.length;c++){var i=e[c];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,c,i){return c&&e(t.prototype,c),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"2edR":function(e,i,n){"use strict";n.r(i),n.d(i,"ContactModule",(function(){return Kc}));var o,a=n("ofXK"),r=n("GJ+o"),s=n("5OZa"),l=n("SRvG"),d=n("hXFv"),u=n("Pk9d"),h=n("QYJQ"),b=n("jcQU"),p=n("tyNb"),m=n("H552"),g=n("sc+i"),f=n("M9dC"),v=n("58Y9"),C=n("DuxZ"),T=n("4SUy"),S=n("uHvQ"),O=n("A4Lh"),k=n("znO6"),x=n("dSv1"),y=n("1gpv"),E=n("fXoL"),D=n("1kef"),A=n("tk/3"),N=n("CU1o"),M=n("I4Xp"),I=n("wch8"),L=n("X8pc"),P=n("IaKf"),B=((o=function(){function e(c,i,n,o){t(this,e),this.http=c,this.contactRootService=i,this.spinService=n,this.toastService=o,this.httpOptions={headers:new A.e({"Content-Type":"application/json"})}}return c(e,[{key:"getContactByUserId",value:function(t){var e=this;return this.http.get(N.a.GetContactByUserId+t,this.httpOptions).toPromise().catch((function(t){e.contactRootService.userModuleErrorHandling(t,"getContactByUserId")}))}},{key:"addContact",value:function(t){return this.http.post(N.a.AddContact,t).toPromise()}},{key:"editContact",value:function(t,e){return this.http.put(N.a.AddContact+"/"+e,t,this.httpOptions).toPromise()}},{key:"blockContact",value:function(t,e){var c=this;return this.http.post(N.a.GetContactByUserId+t+"/block?markTicketAsSpam="+e,e).toPromise().catch((function(t){c.contactRootService.userModuleErrorHandling(t,"blockContact")}))}},{key:"unblockContact",value:function(t,e){var c=this;return this.http.post(N.a.GetContactByUserId+t+"/unblock?removeTicketFromSpam="+e,e).toPromise().catch((function(t){c.contactRootService.userModuleErrorHandling(t,"unblockContact")}))}},{key:"deleteContact",value:function(t,e){var c={headers:new A.e({"Content-Type":"application/json"}),body:{contactId:[t],isMarkTicketAsSpam:e}};return this.http.delete(N.a.GetContactByUserId,c).toPromise()}},{key:"restoreContact",value:function(t,e){var c=this;return this.http.post(N.a.GetContactByUserId+t+"/restore?removeTicketFromSpam="+e,e).toPromise().catch((function(t){c.contactRootService.userModuleErrorHandling(t,"restoreContact")}))}},{key:"sendEmailAction",value:function(t,e){return t===C.a.VerifyNow?this.verifyNow(e):t===C.a.SendResetPasswordEmail?this.sendResetPasswordMail(e):t===C.a.SendVerificationEmail?this.sendVerificationMail(e):void 0}},{key:"sendResetPasswordMail",value:function(t){return this.http.post(N.a.SendResetPassword+t,this.httpOptions).toPromise()}},{key:"sendVerificationMail",value:function(t){return this.http.post(N.a.SendVerificationMail+t,this.httpOptions).toPromise()}},{key:"verifyNow",value:function(t){return this.http.post(N.a.UserVerifyManually+t,this.httpOptions).toPromise()}},{key:"requestToImpersonateGuidId",value:function(t){return this.http.get(N.a.requestToIpersonateContact.replace("userid",t.toString()),this.httpOptions).toPromise()}},{key:"getContactForm",value:function(){var t=this,e=M.a.ContactForm;return e=Object(v.i)(e,"isExcludeDefaultFields","true"),this.http.get(e,this.httpOptions).toPromise().catch((function(e){if(t.spinService.hideSpinner(),400===e.status){var c=Object(v.q)(e.error);t.toastService.failureToast(c)}}))}},{key:"contactstatus",value:function(t){return this.http.get(N.a.requestToContactStatus+t).toPromise()}},{key:"convertContactToAgent",value:function(t,e){return this.http.put(N.a.requestToConvertToAgent+t,e).toPromise()}}]),e}()).\u0275fac=function(t){return new(t||o)(E.bc(A.b),E.bc(I.a),E.bc(L.a),E.bc(P.a))},o.\u0275prov=E.Jb({token:o,factory:o.\u0275fac}),o),R=n("JCZ/"),w=n("5CqK"),j=n("KWhx"),F=n("0DEJ"),_=n("yVji"),U=n("AjNn"),G=["convertContactToAgentDialog"],V=["agentName"],q=["agentDisplayName"],J=["userEmail"],K=["timeZones"],X=["agentAccessScope"],Q=["allBrandAccess"],H=["userBrands"],z=["userRole"],Z=["contentAddAgentForm"];function W(t,e){1&t&&(E.Tb(0,"div"),E.Lc(1),E.hc(2,"translate"),E.Sb()),2&t&&(E.xb(1),E.Nc(" ",E.ic(2,1,"CONVERTTOAGENT")," "))}function $(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div",5),E.Tb(1,"div",6),E.Tb(2,"button",7),E.ec("click",(function(){E.Bc(c);var t=E.gc(),e=E.yc(1);return t.overlayClick(e)})),E.Lc(3),E.hc(4,"translate"),E.Sb(),E.Tb(5,"button",8),E.ec("click",(function(){return E.Bc(c),E.gc().convertContact()})),E.Lc(6),E.hc(7,"translate"),E.Sb(),E.Sb(),E.Sb()}2&t&&(E.xb(3),E.Mc(E.ic(4,2,"CANCEL")),E.xb(3),E.Mc(E.ic(7,4,"UPDATE")))}function Y(t,e){1&t&&(E.Tb(0,"div"),E.Tb(1,"span",40),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(2),E.Nc(" ",E.ic(3,1,"FIELDREQUIRED"),""))}function tt(t,e){1&t&&(E.Tb(0,"div"),E.Tb(1,"span",40),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(2),E.Nc(" ",E.ic(3,1,"INVALIDNAME"),""))}function et(t,e){1&t&&(E.Tb(0,"div"),E.Tb(1,"span",40),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(2),E.Nc(" ",E.ic(3,1,"FIELDREQUIRED"),""))}function ct(t,e){1&t&&(E.Tb(0,"div"),E.Tb(1,"span",40),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(2),E.Nc(" ",E.ic(3,1,"INVALIDDISPLAYNAME"),""))}function it(t,e){1&t&&(E.Tb(0,"div"),E.Tb(1,"span",40),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(2),E.Nc(" ",E.ic(3,1,"FIELDREQUIRED"),""))}function nt(t,e){if(1&t&&(E.Tb(0,"div",41),E.Tb(1,"div",42),E.Tb(2,"span",43),E.Lc(3),E.Sb(),E.Tb(4,"span",43),E.Tb(5,"span",44),E.Lc(6),E.Sb(),E.Sb(),E.Sb(),E.Sb()),2&t){var c=e.$implicit;E.xb(3),E.Nc(" ",c.text," "),E.xb(3),E.Mc(c.description)}}function ot(t,e){1&t&&(E.Tb(0,"div"),E.Tb(1,"span",40),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(2),E.Nc(" ",E.ic(3,1,"FIELDREQUIRED"),""))}function at(t,e){1&t&&(E.Tb(0,"div"),E.Tb(1,"span",40),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(2),E.Nc(" ",E.ic(3,1,"FIELDREQUIRED"),""))}function rt(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div",null,9),E.Tb(2,"div"),E.Tb(3,"div",10),E.Tb(4,"label",11),E.Lc(5),E.hc(6,"translate"),E.Tb(7,"span",12),E.Lc(8,"*"),E.Sb(),E.Sb(),E.Tb(9,"ejs-textbox",13,14),E.ec("blur",(function(){return E.Bc(c),E.gc().agentNameFocusOut()}))("change",(function(){return E.Bc(c),E.gc().agentNameChange()}))("input",(function(t){return E.Bc(c),E.gc().agentNameInput(t)})),E.hc(11,"translate"),E.Sb(),E.Jc(12,Y,4,3,"div",15),E.Jc(13,tt,4,3,"div",15),E.Tb(14,"span",16),E.Ob(15,"span",12),E.Sb(),E.Sb(),E.Tb(16,"div",17),E.Tb(17,"label",11),E.Lc(18),E.hc(19,"translate"),E.Tb(20,"span",12),E.Lc(21,"*"),E.Sb(),E.Sb(),E.Tb(22,"ejs-textbox",18,19),E.ec("blur",(function(){return E.Bc(c),E.gc().agentDisplayNameFocusOut()}))("change",(function(){return E.Bc(c),E.gc().agentDisplayNameChange()}))("input",(function(t){return E.Bc(c),E.gc().agentDisplayNameInput(t)})),E.hc(24,"translate"),E.Sb(),E.Jc(25,et,4,3,"div",15),E.Jc(26,ct,4,3,"div",15),E.Tb(27,"span",16),E.Ob(28,"span",12),E.Sb(),E.Sb(),E.Tb(29,"div",20),E.Tb(30,"label",11),E.Lc(31),E.hc(32,"translate"),E.Tb(33,"span",12),E.Lc(34,"*"),E.Sb(),E.Sb(),E.Tb(35,"ejs-textbox",21,22),E.ec("blur",(function(){return E.Bc(c),E.gc().userEmailFocusOut()}))("change",(function(){return E.Bc(c),E.gc().userEmailChange()}))("input",(function(t){return E.Bc(c),E.gc().userEmailInput(t)})),E.hc(37,"translate"),E.Sb(),E.Tb(38,"span",16),E.Ob(39,"span",12),E.Sb(),E.Sb(),E.Tb(40,"div",23),E.Tb(41,"label",11),E.Lc(42),E.hc(43,"translate"),E.Tb(44,"span",12),E.Lc(45,"*"),E.Sb(),E.Sb(),E.Tb(46,"ejs-dropdownlist",24,25),E.ec("blur",(function(){return E.Bc(c),E.gc().timeZoneFocusOut()}))("change",(function(){return E.Bc(c),E.gc().timeZoneChange()})),E.hc(48,"translate"),E.hc(49,"translate"),E.Sb(),E.Jc(50,it,4,3,"div",15),E.Sb(),E.Tb(51,"div",26),E.Tb(52,"label",11),E.Lc(53),E.hc(54,"translate"),E.Tb(55,"span",12),E.Lc(56,"*"),E.Sb(),E.Sb(),E.Tb(57,"ejs-dropdownlist",27,28),E.ec("blur",(function(){return E.Bc(c),E.gc().agentAccessScopeFocusOut()}))("change",(function(){return E.Bc(c),E.gc().agentAccessScopeChange()})),E.hc(59,"translate"),E.Jc(60,nt,7,2,"ng-template",null,29,E.Kc),E.Sb(),E.Jc(62,ot,4,3,"div",15),E.Tb(63,"span",16),E.Ob(64,"span",12),E.Sb(),E.Sb(),E.Tb(65,"div",30),E.Tb(66,"ejs-checkbox",31,32),E.ec("change",(function(){return E.Bc(c),E.gc().accessChange()})),E.hc(68,"translate"),E.hc(69,"translate"),E.Sb(),E.Sb(),E.Tb(70,"div",33),E.Tb(71,"div",34),E.Tb(72,"label",11),E.Lc(73),E.hc(74,"translate"),E.Sb(),E.Tb(75,"ejs-multiselect",35,36),E.ec("change",(function(t){return E.Bc(c),E.gc().userBrandChange(t)}))("removed",(function(t){return E.Bc(c),E.gc().userBrandChange(t)})),E.hc(77,"translate"),E.Sb(),E.Tb(78,"span",16),E.Ob(79,"span",12),E.Sb(),E.Sb(),E.Sb(),E.Tb(80,"div",37),E.Tb(81,"label",11),E.Lc(82),E.hc(83,"translate"),E.Tb(84,"span",12),E.Lc(85,"*"),E.Sb(),E.Sb(),E.Tb(86,"ejs-multiselect",38,39),E.ec("blur",(function(){return E.Bc(c),E.gc().userRoleFocusOut()}))("change",(function(t){return E.Bc(c),E.gc().userRoleChange(t)}))("removed",(function(t){return E.Bc(c),E.gc().userRoleChange(t)})),E.hc(88,"translate"),E.hc(89,"translate"),E.Sb(),E.Jc(90,at,4,3,"div",15),E.Tb(91,"span",16),E.Ob(92,"span",12),E.Sb(),E.Sb(),E.Sb(),E.Sb()}if(2&t){var i=E.gc();E.xb(5),E.Nc(" ",E.ic(6,47,"NAME")," "),E.xb(4),E.oc("placeholder",E.ic(11,49,"TEXTBOXPLACEHOLDER")),E.nc("htmlAttributes",i.textAreaAttribute),E.xb(3),E.nc("ngIf",i.nameRequired),E.xb(1),E.nc("ngIf",i.agentNameValidation),E.xb(5),E.Nc(" ",E.ic(19,51,"DISPLAYNAME")," "),E.xb(4),E.oc("placeholder",E.ic(24,53,"TEXTBOXPLACEHOLDER")),E.nc("htmlAttributes",i.textAreaAttribute),E.xb(3),E.nc("ngIf",i.displayNameRequired),E.xb(1),E.nc("ngIf",i.agentDisplayNameValidation),E.xb(5),E.Nc(" ",E.ic(32,55,"EMAIL")," "),E.xb(4),E.oc("placeholder",E.ic(37,57,"TEXTBOXPLACEHOLDER")),E.xb(7),E.Nc(" ",E.ic(43,59,"TIMEZONE")," "),E.xb(4),E.oc("placeholder",E.ic(48,61,"DROPDOWNPLACEHOLDER")),E.oc("filterBarPlaceholder",E.ic(49,63,"TIMEZONE")),E.nc("dataSource",i.timeZone)("fields",i.timezoneFields)("allowFiltering",!0)("filterType",i.filterType)("showClearButton",!1)("htmlAttributes",i.autoCompleteAttribute),E.xb(4),E.nc("ngIf",i.timeZoneRequired),E.xb(3),E.Nc(" ",E.ic(54,65,"TICKETSCOPE")," "),E.xb(4),E.oc("placeholder",E.ic(59,67,"DROPDOWNPLACEHOLDER")),E.nc("dataSource",i.agentAccess)("fields",i.agentAccessScopeFields)("htmlAttributes",i.autoCompleteAttribute),E.xb(5),E.nc("ngIf",i.agentAccessRequired),E.xb(4),E.oc("label",i.isMultiBrand?E.ic(68,69,"CANACCESSALLBRANDTICKETS"):E.ic(69,71,"CANACCESSBRANDTICKETS")),E.nc("checked",!1),E.xb(4),E.nc("hidden",!i.showBrand),E.xb(3),E.Nc(" ",E.ic(74,73,"TICKETBRANDACCESS")," "),E.xb(2),E.oc("placeholder",E.ic(77,75,"MULTISELECTDROPDOWNPLACEHOLDER")),E.nc("dataSource",i.userBrand)("fields",i.defaultBrandFields)("allowFiltering",!0)("showDropDownIcon",!0)("htmlAttributes",i.autoCompleteAttribute),E.xb(7),E.Nc(" ",E.ic(83,77,"ROLE")," "),E.xb(4),E.oc("placeholder",E.ic(88,79,"MULTISELECTDROPDOWNPLACEHOLDER")),E.oc("filterBarPlaceholder",E.ic(89,81,"SEARCH")),E.nc("dataSource",i.userRoles)("allowFiltering",!0)("fields",i.roleFields)("showClearButton",!1)("htmlAttributes",i.autoCompleteAttribute),E.xb(4),E.nc("ngIf",i.roleRequired)}}var st,lt=((st=function(){function e(c,i,n,o,a,r,s){t(this,e),this.appRootService=c,this.route=i,this.router=n,this.contactAPIService=o,this.contactRootService=a,this.spinService=r,this.toastService=s,this.dialogAgentPosition={X:"right"},this.timezoneFields={text:"description",value:"id"},this.filterType="Contains",this.autoCompleteAttribute={autocomplete:"anyrandomstring"},this.agentAccessScopeFields={value:"id",text:"text"},this.defaultBrandFields={text:"text",value:"key"},this.roleFields={text:"name",value:"id"},this.textAreaAttribute={maxlength:O.M,autocomplete:"anyrandomstring"},this.isMultiBrand=O.e.isMultiBrand,this.agentAccess=[{text:"Global",description:"Can view all tickets",id:"1"},{text:"Group",description:"Can view all tickets in the group and assigned to them",id:"2"},{text:"Restricted",description:"Can only view tickets assigned to them",id:"3"}]}return c(e,[{key:"ngOnInit",value:function(){var t=this;this.appRootService.getTimeZoneList().then((function(e){var c=JSON.parse(JSON.stringify(e.result));0===c.filter((function(t){return 0===t.id})).length&&c.splice(0,0,{id:0,description:Object(x.a)("INHERITFROMGLOBALSETTINGS")}),t.timeZone=c})),this.userRoles=new m.a({url:N.a.UserRoles,adaptor:new f.b}),this.userBrand=new m.a({url:N.a.UserBrands,adaptor:new f.c})}},{key:"convertContactClick",value:function(t){var e=this;Object(T.X)(t)||(this.contactId=t,this.spinService.showSpinner(),this.contactAPIService.getContactByUserId(t).then((function(t){Object(T.X)(t)||(e.contactDetail=t,e.setValue(e.contactDetail))})).finally((function(){e.spinService.hideSpinner()})),this.convertContactToAgentDialog.position=this.dialogAgentPosition,this.convertContactToAgentDialog.width="500px",this.convertContactToAgentDialog.height="100%",this.convertContactToAgentDialog.showCloseIcon=!0)}},{key:"setValue",value:function(t){this.agentName.value=t.contactName,this.agentDisplayName.value=t.contactDisplayName,this.userEmail.value=t.emailId,this.timeZones.value=t.timeZoneId?t.timeZoneId.id:null,this.convertContactToAgentDialog.show()}},{key:"agentNameFocusOut",value:function(){if(Object(T.X)(this.agentName.value))return this.agentNameValidation=!1,void(this.nameRequired=!0);var t=this.agentName.value.trim();if(t&&t.length>0){if(!F.j.test(t.trim()))return void(this.agentNameValidation=!0);this.agentNameValidation=!1}else this.agentNameValidation=!1,this.nameRequired=!0}},{key:"agentNameChange",value:function(){null!=this.agentName.value?(this.nameRequired=!1,this.errorMessage=null):this.nameRequired=!1}},{key:"agentNameInput",value:function(t){var e=t.value;if(this.nameRequired=!(!Object(T.X)(e)&&""!==e.trim()),this.nameRequired)this.agentNameValidation=!1;else if(e&&e.trim().length>0){if(!F.j.test(e.trim()))return void(this.agentNameValidation=!0);this.agentNameValidation=!1}this.removeCustmError(t)}},{key:"removeCustmError",value:function(t){if(!Object(T.X)(t.container)&&!Object(T.X)(t.container.parentElement)){var e=t.container.parentElement.parentElement.querySelector(".custom-error span.error");e.classList.remove("custom-error-appended"),e.innerText=""}}},{key:"agentDisplayNameFocusOut",value:function(){if(Object(T.X)(this.agentDisplayName.value))return this.agentDisplayNameValidation=!1,void(this.displayNameRequired=!0);var t=this.agentDisplayName.value.trim();if(t&&t.length>0){if(!F.c.test(t.trim()))return void(this.agentDisplayNameValidation=!0);this.agentDisplayNameValidation=!1}else this.agentDisplayNameValidation=!1,this.displayNameRequired=!0}},{key:"agentDisplayNameChange",value:function(){null!=this.agentDisplayName.value?(this.displayNameRequired=!1,this.errorMessage=null):this.displayNameRequired=!1}},{key:"agentDisplayNameInput",value:function(t){var e=t.value;if(this.displayNameRequired=!(!Object(T.X)(e)&&""!==e.trim()),this.displayNameRequired)this.agentDisplayNameValidation=!1;else if(e&&e.trim().length>0){if(!F.c.test(e.trim()))return void(this.agentDisplayNameValidation=!0);this.agentDisplayNameValidation=!1}this.removeCustmError(t)}},{key:"userEmailFocusOut",value:function(){if(Object(T.X)(this.userEmail.value))return this.agentEmailValidation=!1,void(this.emailRequired=!0);var t=this.userEmail.value.trim();if(t&&t.length>0){if(!F.e.test(t.trim()))return void(this.agentEmailValidation=!0);this.agentEmailValidation=!1}else this.agentEmailValidation=!1,this.emailRequired=!0}},{key:"userEmailChange",value:function(){null!=this.userEmail.value?(this.emailRequired=!1,this.errorMessage=null):this.emailRequired=!1}},{key:"userEmailInput",value:function(t){var e=t.value;this.emailRequired=!(!Object(T.X)(e)&&""!==e.trim()),this.agentEmailValidation=!1,this.removeCustmError(t)}},{key:"timeZoneFocusOut",value:function(){this.timeZoneRequired=Object(T.X)(this.timeZones.value)||0===this.timeZones.value.toString().length}},{key:"timeZoneChange",value:function(){Object(T.X)(this.timeZones.value)||0===this.timeZones.value.toString().length?this.timeZoneRequired=!1:(this.timeZoneRequired=!1,this.errorMessage=null)}},{key:"agentAccessScopeFocusOut",value:function(){this.agentAccessRequired=Object(T.X)(this.agentAccessScope.value)||0===this.agentAccessScope.value.toString().length}},{key:"agentAccessScopeChange",value:function(){Object(T.X)(this.agentAccessScope.value)||0===this.agentAccessScope.value.toString().length?this.agentAccessRequired=!1:(this.agentAccessRequired=!1,this.errorMessage=null)}},{key:"accessChange",value:function(){this.isMultiBrand?this.allBrandAccess.checked?(this.showBrand=!1,this.userBrands.value=null):this.showBrand=!0:this.showBrand=!1}},{key:"agentDialogBeforeOpen",value:function(){Object(O.V)(!0),this.nameRequired=!1,this.displayNameRequired=!1,this.emailRequired=!1,this.roleRequired=!1,this.agentNameValidation=!1,this.agentDisplayNameValidation=!1,this.agentEmailValidation=!1,this.userRole.value=null,this.isMultiBrand&&(this.userBrands.value=null),this.allBrandAccess.checked=!1,this.showBrand=!0}},{key:"userBrandChange",value:function(t){Object(T.X)(this.userBrands.value)||0===this.userBrands.value.length||(this.errorMessage=null),this.removeCustmError(t)}},{key:"userRoleFocusOut",value:function(){this.roleRequired=Object(T.X)(this.userRole.value)||0===this.userRole.value.length}},{key:"userRoleChange",value:function(t){Object(T.X)(this.userRole.value)||0===this.userRole.value.length||(this.errorMessage=null),this.removeCustmError(t)}},{key:"convertContact",value:function(){var t,e=this;if(this.clearCustomErrors(),this.errorMessage=null,this.agentNameFocusOut(),this.agentDisplayNameFocusOut(),this.userEmailFocusOut(),this.agentAccessScopeFocusOut(),this.userRoleFocusOut(),this.timeZoneFocusOut(),this.validationCheck()){if(this.userRole.value.length>0){this.errorMessage=null,this.spinService.showSpinner(),this.isMultiBrand&&(this.brands=!Object(T.X)(this.userBrands.value)&&this.userBrands.value.length>0?this.userBrands.value.join(","):null);var c=this.userRole.value.join(",");t=this.isMultiBrand?{name:Object(T.X)(this.agentName.value)?null:this.agentName.value.trim(),displayName:Object(T.X)(this.agentDisplayName.value)?null:this.agentDisplayName.value.trim(),emailId:Object(T.X)(this.userEmail)?null:this.userEmail.value.trim(),timeZoneId:this.timeZones.value,hasAllBrandAccess:this.allBrandAccess.checked,brandIds:this.brands,roleIds:c,ticketAccessScopeId:+this.agentAccessScope.value}:{name:this.agentName.value.trim(),displayName:this.agentDisplayName.value.trim(),emailId:this.userEmail.value.trim(),timeZoneId:this.timeZones.value,hasAllBrandAccess:this.allBrandAccess.checked,brandIds:this.allBrandAccess.checked?O.e.singleBrandId.toString():null,roleIds:c},this.contactAPIService.convertContactToAgent(this.contactId,t).then((function(t){t&&(Object(O.V)(!1),e.toastService.successToast(t.message),e.router.navigateByUrl("/admin/agents/"+e.contactId))})).catch((function(t){400===t.status&&t.error&&t.error.errors.length>0&&(e.spinService.hideSpinner(),e.toastService.failureToast(t.error.errors[0].errorMessage))})).finally((function(){e.spinService.hideSpinner(),e.convertContactToAgentDialog.hide()}))}}else setTimeout((function(){e.formErrorEleFocus()}))}},{key:"clearCustomErrors",value:function(){this.addAgentForm&&[].slice.call(this.addAgentForm.nativeElement.querySelectorAll(".custom-error span.error")).forEach((function(t){t.classList.remove("custom-error-appended"),t.innerText=""}))}},{key:"validationCheck",value:function(){return!(this.nameRequired||this.agentNameValidation||this.displayNameRequired||this.agentDisplayNameValidation||this.emailRequired||this.agentEmailValidation||this.roleRequired||this.agentAccessRequired||this.timeZoneRequired)}},{key:"formErrorEleFocus",value:function(){var t=this.addAgentForm;if(t&&t.nativeElement){var e,c=t.nativeElement;if((e=t.nativeElement.querySelector(".required"))||(e=t.nativeElement.querySelector(".custom-error-appended")),e||(e=c.querySelector(".e-error")),!e)return;var i=Object(T.C)(e,".form-group");if(i){var n=i.querySelector("input");Object(T.X)(n)?i.querySelector("textarea").focus():n.focus()}else c.querySelector("input").focus()}}},{key:"overlayClick",value:function(t){t.closeIcon.click()}},{key:"agentDialogBeforeClose",value:function(t){if(t.isInteracted){var e=window.confirm(""+Object(x.a)("CONFORMDATALOSE"));t.cancel=!e,t.cancel||Object(O.V)(!1)}}},{key:"dialogClose",value:function(){this.resetErrorMessage()}},{key:"resetErrorMessage",value:function(){this.nameRequired=!1,this.emailRequired=!1,this.roleRequired=!1,this.agentEmailValidation=!1,this.agentNameValidation=!1,this.agentAccessRequired=!1,this.timeZoneRequired=!1,this.agentName.value=null,this.agentDisplayName.value=null,this.userEmail.value=null,this.userRole.value=null,this.agentAccessScope.value=null,this.isMultiBrand&&(this.userBrands.value=null),this.errorMessage=null,this.clearCustomErrors()}}]),e}()).\u0275fac=function(t){return new(t||st)(E.Nb(D.a),E.Nb(p.a),E.Nb(p.g),E.Nb(B),E.Nb(I.a),E.Nb(_.a),E.Nb(_.b))},st.\u0275cmp=E.Hb({type:st,selectors:[["convert-contact-agent"]],viewQuery:function(t,e){var c;1&t&&(E.Qc(G,!0),E.Qc(V,!0),E.Qc(q,!0),E.Qc(J,!0),E.Qc(K,!0),E.Qc(X,!0),E.Qc(Q,!0),E.Qc(H,!0),E.Qc(z,!0),E.Qc(Z,!0)),2&t&&(E.xc(c=E.fc())&&(e.convertContactToAgentDialog=c.first),E.xc(c=E.fc())&&(e.agentName=c.first),E.xc(c=E.fc())&&(e.agentDisplayName=c.first),E.xc(c=E.fc())&&(e.userEmail=c.first),E.xc(c=E.fc())&&(e.timeZones=c.first),E.xc(c=E.fc())&&(e.agentAccessScope=c.first),E.xc(c=E.fc())&&(e.allBrandAccess=c.first),E.xc(c=E.fc())&&(e.userBrands=c.first),E.xc(c=E.fc())&&(e.userRole=c.first),E.xc(c=E.fc())&&(e.addAgentForm=c.first))},decls:8,vars:2,consts:[["id","convertContactToAgentDialog","width","400px","isModal","true","showCloseIcon","true","closeOnEscape","true","height","100%","cssClass","dialog-height rounded-0",3,"visible","position","beforeOpen","close","overlayClick","beforeClose"],["convertContactToAgentDialog",""],["header",""],["footerTemplate",""],["content",""],[1,"flex-horizontal"],[1,"align-right"],["data-ripple","true","autofocus","",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat",3,"click"],["contentAddAgentForm",""],[1,"form-group","pt-1","name"],[1,"cutom-field-label"],[1,"error"],["id","userNameField","autocomplete","off",3,"placeholder","htmlAttributes","blur","change","input"],["agentName",""],[4,"ngIf"],[1,"col","custom-error","no-padding"],[1,"form-group","pt-2","displayname"],["id","displayNameField","autocomplete","off",3,"placeholder","htmlAttributes","blur","change","input"],["agentDisplayName",""],[1,"form-group","pt-2","emailid","agent"],["id","userEmailField","maxlength","150","autocomplete","off","disabled","true",3,"placeholder","blur","change","input"],["userEmail",""],[1,"form-group","pt-2","timezoneid"],["cssClass","dropdown-item-seperation",3,"placeholder","dataSource","fields","allowFiltering","filterType","filterBarPlaceholder","showClearButton","htmlAttributes","blur","change"],["timeZones",""],[1,"form-group","pt-2","ticketaccessscopeid"],["id","agentAccess","popupHeight","200px","showDropDownIcon","true",3,"dataSource","fields","placeholder","htmlAttributes","blur","change"],["agentAccessScope",""],["itemTemplate",""],[1,"pt-2","mb-2"],[3,"label","checked","change"],["allBrandAccess",""],[3,"hidden"],[1,"form-group","pt-2","brandids"],["id","brandField","mode","CheckBox","popupHeight","200px",3,"dataSource","fields","placeholder","allowFiltering","showDropDownIcon","htmlAttributes","change","removed"],["userBrands",""],[1,"form-group","pt-2","roleids"],["id","agentRoleField","mode","CheckBox","popupHeight","200px","showDropDownIcon","true",3,"dataSource","placeholder","allowFiltering","fields","showClearButton","htmlAttributes","filterBarPlaceholder","blur","change","removed"],["userRole",""],[1,"required"],[1,"flex-horizontal","secondary","p-2"],[1,"flex-vertical","no-wrap","ellipsis"],[1,"e-text"],[1,"font-12"]],template:function(t,e){if(1&t){var c=E.Ub();E.Tb(0,"ejs-dialog",0,1),E.ec("beforeOpen",(function(){return e.agentDialogBeforeOpen()}))("close",(function(){return e.dialogClose()}))("overlayClick",(function(){E.Bc(c);var t=E.yc(1);return e.overlayClick(t)}))("beforeClose",(function(t){return e.agentDialogBeforeClose(t)})),E.Jc(2,W,3,3,"ng-template",null,2,E.Kc),E.Jc(4,$,8,6,"ng-template",null,3,E.Kc),E.Jc(6,rt,93,83,"ng-template",null,4,E.Kc),E.Sb()}2&t&&E.nc("visible",!1)("position",e.dialogAgentPosition)},directives:[u.b,h.i,a.n,b.e,l.e,b.h],pipes:[U.a],encapsulation:2}),st),dt=n("KDci"),ut=n("S/i4"),ht=["usersideBar"],bt=["contactSideBar"],pt=["userListGrid"],mt=["blockUnblockContactDialog"],gt=["markAllTicketsSpam"],ft=["removeAllTicketsSpam"],vt=["deleteRestoreContactDialog"],Ct=["markDeletedTicketTicketsSpam"],Tt=["removeRestoredTicketsSpam"],St=["errorDialog"],Ot=["contactListEle"],kt=["contactGridEle"],xt=["moreOptionsContextMenu"],yt=["contacttitle"],Et=["convertAgent"];function Dt(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div",34),E.Tb(1,"button",35),E.ec("click",(function(){return E.Bc(c),E.gc().createNewContactClick()})),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()}2&t&&(E.xb(2),E.Nc(" ",E.ic(3,1,"ADDCONTACT")," "))}function At(t,e){1&t&&(E.Tb(0,"div",36),E.Ob(1,"lib-shimmer",37),E.Sb())}function Nt(t,e){1&t&&(E.Tb(0,"div",38),E.Tb(1,"div",39),E.Ob(2,"img",40),E.Sb(),E.Tb(3,"div",41),E.Lc(4),E.hc(5,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(4),E.Mc(E.ic(5,1,"NOCONTACTSFOUND")))}var Mt=function(t){return{background:t}};function It(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div",42),E.Tb(1,"div",43),E.Lc(2),E.Sb(),E.Tb(3,"div",44),E.Tb(4,"span",45),E.ec("click",(function(t){E.Bc(c);var i=e.$implicit;return E.gc().userDetails(t,i)})),E.Lc(5),E.Sb(),E.Sb(),E.Sb()}if(2&t){var i=e.$implicit;E.xb(1),E.nc("ngStyle",E.tc(4,Mt,i.colorCode)),E.xb(1),E.Nc(" ",i.shortCode," "),E.xb(2),E.yb("data-title",i.contactName),E.xb(1),E.Nc(" ",i.contactName," ")}}function Lt(t,e){if(1&t&&(E.Tb(0,"span",46),E.Lc(1),E.Sb()),2&t){var c=e.$implicit,i=E.gc();E.xb(1),E.Nc(" ",null!=c.contactGroup&&c.contactGroup.length>0?i.getNameFieldFromDropDownArray(c.contactGroup):"--"," ")}}function Pt(t,e){if(1&t&&(E.Tb(0,"div",47),E.Ob(1,"div",48),E.Tb(2,"div",44),E.Lc(3),E.Sb(),E.Sb()),2&t){var c=e.$implicit;E.xb(1),E.nc("ngClass",!c.isVerified||c.isDeleted||c.isBlocked?c.isVerified||c.isDeleted||c.isBlocked?c.isBlocked?"bd-icon bd-icon-error error":"bd-icon bd-icon-delete error":"bd-icon bd-icon-circleclose failure":"bd-icon bd-icon-ok success"),E.xb(2),E.Nc(" ",!c.isVerified||c.isDeleted||c.isBlocked?c.isVerified||c.isDeleted||c.isBlocked?c.isBlocked?"Blocked":"Deleted":"Unverified":"Verified"," ")}}function Bt(t,e){if(1&t){var c=E.Ub();E.Tb(0,"span",51),E.ec("click",(function(){E.Bc(c);var t=E.gc().$implicit,e=E.gc();return e.moreOptionsSelect(e.editItem,t)})),E.hc(1,"translate"),E.Sb()}2&t&&E.yb("data-title",E.ic(1,1,"EDIT"))}function Rt(t,e){if(1&t){var c=E.Ub();E.Tb(0,"span"),E.Tb(1,"span",52),E.ec("click",(function(t){E.Bc(c);var e=E.gc().$implicit;return E.gc().moreOptionButtonClick(t,e)})),E.Sb(),E.Sb()}}function wt(t,e){if(1&t&&(E.Jc(0,Bt,2,3,"span",49),E.Jc(1,Rt,2,0,"span",50)),2&t){var c=e.$implicit,i=E.gc();E.nc("ngIf",i.accessToCreateOrEdit&&!c.isDeleted&&!c.isBlocked),E.xb(1),E.nc("ngIf",i.showActionButton)}}function jt(t,e){if(1&t){var c=E.Ub();E.Tb(0,"app-contact-module-side-bar",53,54),E.ec("chipClick",(function(t){return E.Bc(c),E.gc().sideBarClick(t)})),E.Sb()}if(2&t){var i=E.gc();E.nc("activateActive",i.activateActive)("activeItem",i.currentFilterUrl)("isResponseComplete",!i.stillFetching)}}function Ft(t,e){if(1&t&&(E.Tb(0,"div",60),E.Lc(1),E.hc(2,"translate"),E.Sb(),E.Tb(3,"div",60),E.Lc(4),E.hc(5,"translate"),E.Sb()),2&t){var c=E.gc(2);E.nc("hidden",!c.blockContact),E.xb(1),E.Mc(E.ic(2,4,"BLOCKCONTACT")),E.xb(2),E.nc("hidden",!c.UnblockContact),E.xb(1),E.Mc(E.ic(5,6,"UNBLOCKCONTACT"))}}function _t(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div",60),E.Tb(1,"button",61),E.ec("click",(function(){E.Bc(c),E.gc();var t=E.yc(1);return E.gc().cancelDialog(t)})),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Tb(4,"button",62),E.ec("click",(function(){return E.Bc(c),E.gc(2).updateBlockContact()})),E.Lc(5),E.hc(6,"translate"),E.Sb(),E.Sb(),E.Tb(7,"div",60),E.Tb(8,"button",63),E.ec("click",(function(){E.Bc(c),E.gc();var t=E.yc(1);return E.gc().cancelDialog(t)})),E.Lc(9),E.hc(10,"translate"),E.Sb(),E.Tb(11,"button",64),E.ec("click",(function(){return E.Bc(c),E.gc(2).updateUnblockContact()})),E.Lc(12),E.hc(13,"translate"),E.Sb(),E.Sb()}if(2&t){var i=E.gc(2);E.nc("hidden",!i.blockContact),E.xb(2),E.Mc(E.ic(3,6,"CANCEL")),E.xb(3),E.Mc(E.ic(6,8,"BLOCKCONTACT")),E.xb(2),E.nc("hidden",!i.UnblockContact),E.xb(2),E.Mc(E.ic(10,10,"CANCEL")),E.xb(3),E.Mc(E.ic(13,12,"UNBLOCKCONTACT"))}}function Ut(t,e){if(1&t&&(E.Tb(0,"div",null,65),E.Tb(2,"div",60),E.Tb(3,"div",66),E.Ob(4,"ejs-checkbox",67,68),E.hc(6,"translate"),E.Sb(),E.Ob(7,"div",69),E.Tb(8,"div",70),E.Tb(9,"div",66),E.Lc(10),E.hc(11,"translate"),E.Sb(),E.Tb(12,"ul",71),E.Tb(13,"li"),E.Lc(14),E.hc(15,"translate"),E.Sb(),E.Tb(16,"li"),E.Lc(17),E.hc(18,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(19,"div",60),E.Tb(20,"div",66),E.Ob(21,"ejs-checkbox",67,72),E.hc(23,"translate"),E.Sb(),E.Ob(24,"div",69),E.Tb(25,"div",70),E.Tb(26,"div",66),E.Lc(27),E.hc(28,"translate"),E.Sb(),E.Tb(29,"ul",71),E.Tb(30,"li"),E.Lc(31),E.hc(32,"translate"),E.Sb(),E.Tb(33,"li"),E.Lc(34),E.hc(35,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb()),2&t){var c=E.gc(2);E.xb(2),E.nc("hidden",!c.blockContact),E.xb(2),E.oc("label",E.ic(6,12,"BLOCKCHECKBOX")),E.nc("checked",!0),E.xb(6),E.Nc("",E.ic(11,14,"BLOCKCONTACTACTIONS"),":"),E.xb(4),E.Mc(E.ic(15,16,"BLOCKCONTACTACTIONONE")),E.xb(3),E.Mc(E.ic(18,18,"BLOCKCONTACTACTIONTWO")),E.xb(2),E.nc("hidden",!c.UnblockContact),E.xb(2),E.oc("label",E.ic(23,20,"UNBLOCKCHECKBOX")),E.nc("checked",!1),E.xb(6),E.Nc("",E.ic(28,22,"UNBLOCKCONTACTACTIONS"),":"),E.xb(4),E.Mc(E.ic(32,24,"UNBLOCKCONTACTSPAMACTIONTWO")),E.xb(3),E.Mc(E.ic(35,26,"UNBLOCKCONTACTACTIONONE"))}}function Gt(t,e){if(1&t){var c=E.Ub();E.Tb(0,"ejs-dialog",55,56),E.ec("overlayClick",(function(){E.Bc(c);var t=E.yc(1);return E.gc().overlayClick(t)}))("open",(function(){return E.Bc(c),E.gc().blockUnblockDialogOpen()})),E.Jc(2,Ft,6,8,"ng-template",null,57,E.Kc),E.Jc(4,_t,14,14,"ng-template",null,58,E.Kc),E.Jc(6,Ut,36,28,"ng-template",null,59,E.Kc),E.Sb()}2&t&&E.nc("visible",!1)}function Vt(t,e){if(1&t&&(E.Tb(0,"div",60),E.Lc(1),E.hc(2,"translate"),E.Sb(),E.Tb(3,"div",60),E.Lc(4),E.hc(5,"translate"),E.Sb()),2&t){var c=E.gc(2);E.nc("hidden",!c.deleteContact),E.xb(1),E.Mc(E.ic(2,4,"DELETECONTACT")),E.xb(2),E.nc("hidden",!c.restoreContact),E.xb(1),E.Mc(E.ic(5,6,"RESTORECONTACT"))}}function qt(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div",60),E.Tb(1,"button",61),E.ec("click",(function(){E.Bc(c),E.gc();var t=E.yc(1);return E.gc().cancelDialog(t)})),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Tb(4,"button",62),E.ec("click",(function(){return E.Bc(c),E.gc(2).updateDeleteContact()})),E.Lc(5),E.hc(6,"translate"),E.Sb(),E.Sb(),E.Tb(7,"div",60),E.Tb(8,"button",63),E.ec("click",(function(){E.Bc(c),E.gc();var t=E.yc(1);return E.gc().cancelDialog(t)})),E.Lc(9),E.hc(10,"translate"),E.Sb(),E.Tb(11,"button",64),E.ec("click",(function(){return E.Bc(c),E.gc(2).updateRestoreContact()})),E.Lc(12),E.hc(13,"translate"),E.Sb(),E.Sb()}if(2&t){var i=E.gc(2);E.nc("hidden",!i.deleteContact),E.xb(2),E.Mc(E.ic(3,6,"CANCEL")),E.xb(3),E.Mc(E.ic(6,8,"DELETECONTACT")),E.xb(2),E.nc("hidden",!i.restoreContact),E.xb(2),E.Mc(E.ic(10,10,"CANCEL")),E.xb(3),E.Mc(E.ic(13,12,"RESTORECONTACT"))}}function Jt(t,e){if(1&t&&(E.Tb(0,"div",null,75),E.Tb(2,"div",60),E.Tb(3,"div",66),E.Ob(4,"ejs-checkbox",67,76),E.hc(6,"translate"),E.Sb(),E.Ob(7,"div",69),E.Tb(8,"div",70),E.Tb(9,"div",66),E.Lc(10),E.hc(11,"translate"),E.Sb(),E.Tb(12,"ul",71),E.Tb(13,"li"),E.Lc(14),E.hc(15,"translate"),E.Sb(),E.Tb(16,"li"),E.Lc(17),E.hc(18,"translate"),E.Sb(),E.Tb(19,"li"),E.Lc(20),E.hc(21,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(22,"div",60),E.Tb(23,"div",66),E.Ob(24,"ejs-checkbox",67,77),E.hc(26,"translate"),E.Sb(),E.Ob(27,"div",69),E.Tb(28,"div",70),E.Tb(29,"div",78),E.Lc(30),E.hc(31,"translate"),E.Sb(),E.Tb(32,"ul",71),E.Tb(33,"li"),E.Lc(34),E.hc(35,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb()),2&t){var c=E.gc(2);E.xb(2),E.nc("hidden",!c.deleteContact),E.xb(2),E.oc("label",E.ic(6,12,"BLOCKCHECKBOX")),E.nc("checked",!0),E.xb(6),E.Nc("",E.ic(11,14,"DELETECONTACTACTIONS"),":"),E.xb(4),E.Mc(E.ic(15,16,"DELETECONTACTACTIONONE")),E.xb(3),E.Mc(E.ic(18,18,"DELETECONTACTACTIONTWO")),E.xb(3),E.Mc(E.ic(21,20,"DELETECONTACTACTIONTHREE")),E.xb(2),E.nc("hidden",!c.restoreContact),E.xb(2),E.oc("label",E.ic(26,22,"UNBLOCKCHECKBOX")),E.nc("checked",!1),E.xb(6),E.Nc("",E.ic(31,24,"RESTORECONTACTACTIONS"),":"),E.xb(4),E.Mc(E.ic(35,26,"RESTORECONTACTACTIONONE"))}}function Kt(t,e){if(1&t){var c=E.Ub();E.Tb(0,"ejs-dialog",73,74),E.ec("overlayClick",(function(){E.Bc(c);var t=E.yc(1);return E.gc().overlayClick(t)})),E.Jc(2,Vt,6,8,"ng-template",null,57,E.Kc),E.Jc(4,qt,14,14,"ng-template",null,58,E.Kc),E.Jc(6,Jt,36,28,"ng-template",null,59,E.Kc),E.Sb()}2&t&&E.nc("visible",!1)}function Xt(t,e){1&t&&(E.Tb(0,"div"),E.Lc(1),E.hc(2,"translate"),E.Sb()),2&t&&(E.xb(1),E.Mc(E.ic(2,1,"DELETECONTACT")))}function Qt(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div"),E.Tb(1,"button",81),E.ec("click",(function(){return E.Bc(c),E.gc(2).errorDialogOkay()})),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()}2&t&&(E.xb(2),E.Mc(E.ic(3,1,"OKAY")))}function Ht(t,e){if(1&t&&(E.Tb(0,"div",null,82),E.Tb(2,"div",60),E.Tb(3,"div"),E.Lc(4),E.Sb(),E.Sb(),E.Sb()),2&t){var c=E.gc(2);E.xb(2),E.nc("hidden",!c.deleteContact),E.xb(2),E.Mc(c.deleteFailErrorMessage)}}function zt(t,e){1&t&&(E.Tb(0,"ejs-dialog",79,80),E.Jc(2,Xt,3,3,"ng-template",null,57,E.Kc),E.Jc(4,Qt,4,3,"ng-template",null,58,E.Kc),E.Jc(6,Ht,5,2,"ng-template",null,59,E.Kc),E.Sb()),2&t&&E.nc("visible",!1)}function Zt(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div",83),E.Tb(1,"div",84),E.Tb(2,"div",85),E.Tb(3,"span"),E.hc(4,"translate"),E.hc(5,"translate"),E.Lc(6),E.hc(7,"translate"),E.Sb(),E.Sb(),E.Tb(8,"div",86),E.Tb(9,"span",87),E.ec("click",(function(){return E.Bc(c),E.gc().refrehsGrid()})),E.hc(10,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb()}2&t&&(E.xb(3),E.Ab("data-title","",E.ic(4,4,"CONTACTS")," (",E.ic(5,6,"CUSTOMERS"),")"),E.xb(3),E.Mc(E.ic(7,8,"CONTACTS")),E.xb(3),E.yb("data-title",E.ic(10,10,"REFRESH")))}var Wt,$t=((Wt=function(){function e(c,i,n,o,a,r,s,l,d,u){var h=this;t(this,e),this.appRootService=c,this.route=i,this.router=n,this.contactAPIService=o,this.seoService=a,this.contactRootService=r,this.spinService=s,this.appPermissionService=l,this.toastService=d,this.jwtService=u,this.showActionButton=!0,this.searchPlaceholder=Object(x.a)("SEARCH"),this.block=Object(x.a)("BLOCKCONTACT"),this.unBlockContact=Object(x.a)("UNBLOCKCONTACT"),this.delete=Object(x.a)("DELETECONTACT"),this.restore=Object(x.a)("RESTORECONTACT"),this.sendVerifyEmail=Object(x.a)("SENDVERIFICATIONEMAIL"),this.sendResetPass=Object(x.a)("SENDRESETPASSWORD"),this.convert=Object(x.a)("CONVERTTOAGENT"),this.verifyManually=Object(x.a)("VERIFYMANUALLY"),this.impersonateContact=Object(x.a)("IMPERSONATE"),this.stillFetching=!0,this.nodataFound=!1,this.moreOptionsContacts=[{text:Object(x.a)("VIEWPROFILE"),id:"10",iconCss:"bd-icon bd-icon-user"},{text:this.convert,id:"9",iconCss:"bd-icon bd-icon-groups"},{text:this.impersonateContact,id:"8",iconCss:"bd-icon bd-icon-groups"},{text:this.sendVerifyEmail,id:"5",iconCss:"bd-icon bd-icon-mail"},{text:this.sendResetPass,id:"6",iconCss:"bd-icon bd-icon-mail"},{text:this.verifyManually,id:"7",iconCss:"bd-icon bd-icon-tick24"},{text:this.unBlockContact,id:"2",iconCss:"bd-icon bd-icon-permissions1"},{text:this.restore,id:"4",iconCss:"bd-icon bd-icon-history"},{text:this.block,id:"1",iconCss:"bd-icon bd-icon-error"},{text:this.delete,id:"3",iconCss:"bd-icon bd-icon-delete"}],this.editItem={item:{id:C.a.Edit}},this.route.data.subscribe((function(){h.currentFilterUrl=Object(T.X)(history.state.data)||Object(T.X)(history.state.data.name)?"all-contacts":history.state.data.name,h.userSideBarDataNeed=!!Object(T.X)(history.state.data)||history.state.data.userSideBarDataNeed})),setTimeout((function(){h.appRootService.setAppTitleText(h.ContactTitle)})),this.appRootService.isSideBarNeeded(!0),this.appRootService.getNavigateUrl("/tickets"),this.setSEOHeader(),this.accessToCreateOrEdit=this.appPermissionService.hasPermission([k.a.CreateOrEditContact,k.a.ViewContact]),this.accessToBlockOrUnBlockContact=this.appPermissionService.hasPermission([k.a.BlockOrUnblockContactAndDeleteOrSpamAssociatedTickets,k.a.ViewContact])&&O.P.ticketAccessScopeId===C.b.Global&&O.P.hasAllBrandAccess,this.accessToDeleteOrRestoreContact=this.appPermissionService.hasPermission([k.a.DeleteOrRestoreContactAndDeleteOrSpamAssociatedTickets,k.a.ViewContact])&&O.P.ticketAccessScopeId===C.b.Global&&O.P.hasAllBrandAccess,this.accessToImpersonate=this.appPermissionService.hasPermission([k.a.ImpersonateContact])&&!this.jwtService.isImpersonated(),this.permissionToOnlyImpersonate=!(this.accessToBlockOrUnBlockContact||this.accessToCreateOrEdit||this.accessToDeleteOrRestoreContact)&&this.accessToImpersonate,this.permissionToOnlyEdit=!(this.accessToBlockOrUnBlockContact||this.accessToImpersonate||this.accessToDeleteOrRestoreContact)&&this.accessToCreateOrEdit,this.contactGroupId=Object(T.X)(history.state.data)?null:history.state.data.contactGroupId,this.canConvertContact=this.appPermissionService.hasPermission([k.a.ManageAgents])}return c(e,[{key:"ngAfterViewInit",value:function(){var t=this;this.gridAction=this.contactRootService.contactGridActionObserve.subscribe((function(e){"refreshData"===e&&(t.contactListGrid.dataSource=new m.a({url:g.a.UserList,adaptor:new f.a}))})),this.sideBarAction=this.contactRootService.sidebarActionObserver.subscribe((function(e){t.chipClick(e.event,e.action)})),this.contactListGrid.query=(new m.g).addParams("view",this.currentFilterUrl),this.contactListEle.nativeElement.addEventListener("keydown",(function(e){Object(v.l)(e,t.contactListEle.nativeElement)})),this.contactGridEle.nativeElement.addEventListener("scroll",(function(){t.CloseOtherPopups()})),setTimeout((function(){t.gridColumnAction(t.currentFilterUrl)})),this.contactGroupId&&setTimeout((function(){t.createNewContactClick(),t.contactRootService.setContactGroupWhileLoad(t.contactGroupId.toString())}))}},{key:"CloseOtherPopups",value:function(){this.moreOptionsMenu&&this.moreOptionsMenu.close()}},{key:"refrehsGrid",value:function(){this.contactListGrid.dataSource=new m.a({url:g.a.UserList,adaptor:new f.a})}},{key:"findIndexInArray",value:function(t,e){return e.findIndex((function(e){return e.id===t}))}},{key:"ngOnInit",value:function(){var t=this;this.customerData=new m.a({url:g.a.UserList,adaptor:new f.a}),this.userSideBarDataNeed&&setTimeout((function(){t.appRootService.setSideBarContent(t.usersideBar),t.activateActive=!0,t.appRootService.triggerContactSidebar(t.currentFilterUrl)})),document.querySelector(".body-content").classList.remove("custom-collapse"),this.toolbarOptions=this.accessToCreateOrEdit?[{text:Object(x.a)("ADDCONTACT"),prefixIcon:"hd-icon hd-plus",id:"addcontact"},"Search"]:["Search"],this.pageSettings={pageSize:S.g}}},{key:"ngOnDestroy",value:function(){this.gridAction.unsubscribe(),this.sideBarAction.unsubscribe()}},{key:"gridColumnAction",value:function(t){"unverified-contacts"===t||"deleted-contacts"===t?this.contactListGrid.hideColumns("Verified"):this.contactListGrid.showColumns("Verified"),this.showActionButton&&this.contactListGrid.showColumns("action")}},{key:"chipClick",value:function(t,e){if(this.gridColumnAction(e),this.currentFilterUrl!==e){for(var c=t.currentTarget.parentElement.parentElement.children,i=0,n=Array.from(c);i<n.length;i++)n[i].firstElementChild.classList.remove("active");t.currentTarget.classList.add("active"),this.filterGridByUser(e)}}},{key:"filterGridByUser",value:function(t){this.currentFilterUrl=t,this.contactListGrid.setProperties({query:(new m.g).addParams("view",t)},1!==this.contactListGrid.pageSettings.currentPage),1!==this.contactListGrid.pageSettings.currentPage&&(this.contactListGrid.pageSettings.currentPage=1,this.contactListGrid.dataBind())}},{key:"userDetails",value:function(t,e){this.router.navigateByUrl("/contacts/"+e.userId)}},{key:"getNameFieldFromDropDownArray",value:function(t){return!Object(T.X)(t)&&t.length>0?t.map((function(t){return t.name})):null}},{key:"setSEOHeader",value:function(){this.seoService.setHeaderElements({title:" Contacts "})}},{key:"gridBeforedataBound",value:function(t){0===t.count?(this.stillFetching=!1,this.nodataFound=!0):(this.stillFetching=!0,this.nodataFound=!1)}},{key:"userListGridDataBound",value:function(){this.stillFetching=!1}},{key:"toolbarClick",value:function(t){if(t.item.text===Object(x.a)("ADDCONTACT"))this.contactRootService.setContactDialogTitle("ADDCONTACT"),this.contactRootService.setContactDialogSubmitText("ADD"),this.contactRootService.showAddEditContactForm("Add");else if("Excel Export"===t.item.text){var e=this.contactListGrid.columns;e[6].visible=!1,this.contactListGrid.columns=e,this.contactListGrid.excelExport({fileName:"contacts.xlsx"})}}},{key:"rowSelect",value:function(t,e){if(!Object(T.X)(t.target)&&t.target.classList.contains("more-option-button"))t.cancel=!0;else if("blocked-contacts"===this.currentFilterUrl||"deleted-contacts"===this.currentFilterUrl)t.cancel=!0;else{var c=e;c&&this.contactEditClick(c.userId)}}},{key:"contactEditClick",value:function(t){var e=this;Object(T.X)(t)||(this.spinService.showSpinner(),this.contactAPIService.getContactByUserId(t).then((function(t){Object(T.X)(t)||e.contactRootService.setContactObjectOnEditDialog(t)})),this.contactRootService.setContactDialogTitle("EDITCONTACT"),this.contactRootService.setContactDialogSubmitText("UPDATE"),this.contactRootService.showAddEditContactForm("Edit"))}},{key:"contactListGridActionBegin",value:function(t){"refresh"===t.requestType&&this.contactListGrid.searchModule.refreshSearch&&(this.contactListGrid.searchModule.refreshSearch=!1,this.stillFetching=!0)}},{key:"moreOptionsButtonOpen",value:function(){var t=this.contactListEle.nativeElement.querySelectorAll(".more-option-button-background.e-active");t.length>1&&t&&t[0].ej2_instances[0].toggle()}},{key:"moreOptionButtonClick",value:function(t,e){var c=t.target,i=Object(u.f)(c);this.contactListGrid.clearSelection(),this.contactData=e,this.moreOptionsMenu.open(i.top+25,i.left,c)}},{key:"contextMenuBeforeOpen",value:function(t,e){if(e.isBlocked||e.isDeleted||!e.isVerified)if(e.isBlocked||e.isDeleted||e.isVerified)if(!e.isBlocked&&e.isDeleted){var c=[],i=[this.unBlockContact,this.sendResetPass,this.verifyManually,this.sendVerifyEmail,this.delete,this.convert];this.accessToDeleteOrRestoreContact?c.push(this.restore):i.push(this.restore),this.accessToBlockOrUnBlockContact?c.push(this.block):i.push(this.block),i.push(this.impersonateContact),this.moreOptionsMenu.hideItems(i),this.moreOptionsMenu.showItems(c)}else if(e.isBlocked&&!e.isDeleted){var n=[],o=[this.restore,this.sendResetPass,this.verifyManually,this.sendVerifyEmail,this.block,this.convert];this.accessToDeleteOrRestoreContact?n.push(this.delete):o.push(this.delete),this.accessToBlockOrUnBlockContact?n.push(this.unBlockContact):o.push(this.unBlockContact),o.push(this.impersonateContact),this.moreOptionsMenu.hideItems(o),this.moreOptionsMenu.showItems(n)}else{var a=[],r=[this.sendResetPass,this.verifyManually,this.delete,this.sendVerifyEmail,this.block,this.convert];this.accessToDeleteOrRestoreContact?a.push(this.restore):r.push(this.restore),this.accessToBlockOrUnBlockContact?a.push(this.unBlockContact):r.push(this.unBlockContact),r.push(this.impersonateContact),this.moreOptionsMenu.hideItems(r),this.moreOptionsMenu.showItems(a)}else{var s=[],l=[this.unBlockContact,this.sendResetPass,this.restore];this.accessToCreateOrEdit?(s.push(this.sendVerifyEmail),s.push(this.verifyManually)):(l.push(this.sendVerifyEmail),l.push(this.verifyManually)),this.accessToDeleteOrRestoreContact?s.push(this.delete):l.push(this.delete),this.accessToBlockOrUnBlockContact?s.push(this.block):l.push(this.block),s.push(this.convert),l.push(this.impersonateContact),this.moreOptionsMenu.hideItems(l),this.moreOptionsMenu.showItems(s)}else{var d=[],u=[this.unBlockContact,this.sendVerifyEmail,this.verifyManually,this.restore];this.accessToCreateOrEdit?d.push(this.sendResetPass):u.push(this.sendResetPass),this.accessToDeleteOrRestoreContact?d.push(this.delete):u.push(this.delete),this.accessToBlockOrUnBlockContact?d.push(this.block):u.push(this.block),this.accessToImpersonate?d.push(this.impersonateContact):u.push(this.impersonateContact),this.canConvertContact?d.push(this.convert):u.push(this.convert),this.moreOptionsMenu.hideItems(u),this.moreOptionsMenu.showItems(d)}}},{key:"moreOptionsClick",value:function(){this.contactListGrid.clearSelection()}},{key:"moreOptionsSelect",value:function(t,e){var c=this;t.item.id===C.a.Edit&&(Object(T.X)(e)||this.contactEditClick(e.userId)),t.item.id===C.a.Block&&(this.id=this.contactData.userId,this.blockUnblockContactDialog.show(),this.UnblockContact=!1,this.blockContact=!0,this.deleteContact=!1,this.restoreContact=!1,this.markAllTicketsSpam.checked=!0),t.item.id===C.a.Unblock&&(this.id=this.contactData.userId,this.blockUnblockContactDialog.show(),this.UnblockContact=!0,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.removeAllTicketsSpam.checked=!0),t.item.id===C.a.Delete&&(this.id=this.contactData.userId,this.deleteRestoreContactDialog.show(),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!0,this.restoreContact=!1,this.markDeletedTicketTicketsSpam.checked=!0),t.item.id===C.a.Restore&&(this.id=this.contactData.userId,this.deleteRestoreContactDialog.show(),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!0,this.removeRestoredTicketsSpam.checked=!0),t.item.id===C.a.SendVerificationEmail&&(this.id=this.contactData.userId,this.sendEmailAction(C.a.SendVerificationEmail),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.sendInvitation=!0),t.item.id===C.a.SendResetPasswordEmail&&(this.id=this.contactData.userId,this.sendEmailAction(C.a.SendResetPasswordEmail),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.sendResetPasswordMail=!0),t.item.id===C.a.VerifyNow&&(this.id=this.contactData.userId,this.sendEmailAction(C.a.VerifyNow),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.verifyNow=!0),t.item.id===C.a.ImpersonateContact&&(this.spinService.showSpinner(),this.contactAPIService.requestToImpersonateGuidId(this.contactData.userId).then((function(t){Object(v.j)(),window.location.href=y.b+t.guidId})).catch((function(t){var e=Object(v.q)(t.error);400===t.status&&c.toastService.failureToast(e),c.spinService.hideSpinner()})).finally((function(){}))),t.item.id===C.a.ConvertToAgent&&(this.canConvertContact?this.convertAgent.convertContactClick(this.contactData.userId):this.toastService.failureToast(Object(x.a)("NOPERMISSIONTOCONVERT"))),t.item.id===C.a.ViewProfile&&this.router.navigateByUrl("/contacts/"+this.contactData.userId)}},{key:"contactListExcelQueryCellInfo",value:function(t){if("timeZone"===t.column.field)t.value=t.value.name;else if("contactGroup"===t.column.field){var e=t.value.map((function(t){return t.name})).join(",");t.value=e}else"name"===t.column.field?t.value=t.data.name+"\n"+t.data.emailId:"isVerified"===t.column.field&&(t.value=t.value?"Yes":"No")}},{key:"excelExportComplete",value:function(){this.contactListGrid.columns[6].visible=!0}},{key:"updateBlockContact",value:function(){var t=this;this.spinService.showSpinner();var e=+this.id;this.markTicketAsSpam=!!this.markAllTicketsSpam.checked,this.contactAPIService.blockContact(e,this.markTicketAsSpam).then((function(e){e&&(t.blockUnblockContactDialog.hide(),t.toastService.successToast(e.message),t.contactRootService.setContactGridAction("refreshData"))})).finally((function(){t.blockUnblockContactDialog.hide(),t.spinService.hideSpinner()}))}},{key:"updateDeleteContact",value:function(){var t=this;this.spinService.showSpinner();var e=+this.id;this.markConatctTicketAsSpam=!!this.markDeletedTicketTicketsSpam.checked,this.contactAPIService.deleteContact(e,this.markConatctTicketAsSpam).then((function(e){e&&(t.deleteRestoreContactDialog.hide(),t.toastService.successToast(e.message),t.contactRootService.setContactGridAction("refreshData"))})).catch((function(e){t.deleteFailErrorMessage=e.error.errors[0].errorMessage,t.errorDialog.show()})).finally((function(){t.deleteRestoreContactDialog.hide(),t.spinService.hideSpinner()}))}},{key:"updateUnblockContact",value:function(){var t=this;this.spinService.showSpinner();var e=+this.id;this.removeTicketFromSpam=!!this.removeAllTicketsSpam.checked,this.contactAPIService.unblockContact(e,this.removeTicketFromSpam).then((function(e){e&&(t.blockUnblockContactDialog.hide(),t.toastService.successToast(e.message),t.contactRootService.setContactGridAction("refreshData"))})).finally((function(){t.blockUnblockContactDialog.hide(),t.spinService.hideSpinner()}))}},{key:"updateRestoreContact",value:function(){var t=this;this.spinService.showSpinner();var e=+this.id;this.removeContactTicketFromSpam=!!this.removeRestoredTicketsSpam.checked,this.contactAPIService.restoreContact(e,this.removeContactTicketFromSpam).then((function(e){e&&(t.deleteRestoreContactDialog.hide(),t.toastService.successToast(e.message),t.contactRootService.setContactGridAction("refreshData"))})).finally((function(){t.deleteRestoreContactDialog.hide(),t.spinService.hideSpinner()}))}},{key:"sendEmailAction",value:function(t){var e=this;this.spinService.showSpinner(),this.contactAPIService.sendEmailAction(t,+this.id).then((function(c){c&&e.toastService.successToast(c.message),t===C.a.VerifyNow&&e.refrehsGrid()})).catch((function(t){var c=Object(v.q)(t.error);400===t.status&&e.toastService.failureToast(c)})).finally((function(){e.spinService.hideSpinner()}))}},{key:"overlayClick",value:function(t){t.closeIcon.click()}},{key:"blockUnblockDialogOpen",value:function(){this.blockUnblockContactDialog.showCloseIcon=!0}},{key:"cancelDialog",value:function(t){t.closeIcon.click()}},{key:"errorDialogOkay",value:function(){this.errorDialog.hide()}},{key:"sideBarClick",value:function(t){this.nodataFound=!1;var e=t.event,c=t.name;location.pathname.includes("contact-groups")?this.router.navigate(["/contacts"],{state:{data:{name:c}}}):this.contactRootService.sideBarActionFn({event:e,action:c})}},{key:"searchNodes",value:function(){var t=this.contactListEle.nativeElement.querySelector("#search").ej2_instances[0].value;this.contactListGrid.search(t)}},{key:"createNewContactClick",value:function(){this.contactRootService.setContactDialogTitle("ADDCONTACT"),this.contactRootService.setContactDialogSubmitText("ADD"),this.contactRootService.showAddEditContactForm("Add")}}]),e}()).\u0275fac=function(t){return new(t||Wt)(E.Nb(D.a),E.Nb(p.a),E.Nb(p.g),E.Nb(B),E.Nb(R.a),E.Nb(I.a),E.Nb(L.a),E.Nb(w.a),E.Nb(P.a),E.Nb(j.a))},Wt.\u0275cmp=E.Hb({type:Wt,selectors:[["user-contact"]],viewQuery:function(t,e){var c;1&t&&(E.Gc(ht,!0),E.Qc(bt,!0),E.Qc(pt,!0),E.Qc(mt,!0),E.Qc(gt,!0),E.Qc(ft,!0),E.Qc(vt,!0),E.Qc(Ct,!0),E.Qc(Tt,!0),E.Qc(St,!0),E.Qc(Ot,!0),E.Qc(kt,!0),E.Qc(xt,!0),E.Gc(yt,!0),E.Qc(Et,!0)),2&t&&(E.xc(c=E.fc())&&(e.usersideBar=c.first),E.xc(c=E.fc())&&(e.contactSideBar=c.first),E.xc(c=E.fc())&&(e.contactListGrid=c.first),E.xc(c=E.fc())&&(e.blockUnblockContactDialog=c.first),E.xc(c=E.fc())&&(e.markAllTicketsSpam=c.first),E.xc(c=E.fc())&&(e.removeAllTicketsSpam=c.first),E.xc(c=E.fc())&&(e.deleteRestoreContactDialog=c.first),E.xc(c=E.fc())&&(e.markDeletedTicketTicketsSpam=c.first),E.xc(c=E.fc())&&(e.removeRestoredTicketsSpam=c.first),E.xc(c=E.fc())&&(e.errorDialog=c.first),E.xc(c=E.fc())&&(e.contactListEle=c.first),E.xc(c=E.fc())&&(e.contactGridEle=c.first),E.xc(c=E.fc())&&(e.moreOptionsMenu=c.first),E.xc(c=E.fc())&&(e.ContactTitle=c.first),E.xc(c=E.fc())&&(e.convertAgent=c.first))},decls:49,vars:31,consts:[[1,"contact-container"],[1,"height-100"],[1,"contact-chip-list","contact-grid",2,"height","100%"],["contactListEle",""],[2,"height","56px","border-bottom","1px solid #E2E8F0"],[2,"height","100%"],[1,"search-box"],["id","search","showClearButton","true","autocomplete","off","maxlength","150",3,"placeholder","change"],["search",""],["class","add-button-container",4,"ngIf"],[2,"height","calc(100% - 56px)","overflow","auto","padding","8px"],["contactGridEle",""],["class","pt-2",4,"ngIf"],["class","no-list-found text-center",4,"ngIf"],["id","userListGrid",3,"dataSource","allowSorting","allowPaging","pageSettings","allowExcelExport","hidden","showColumnChooser","allowResizing","excelQueryCellInfo","beforeDataBound","excelExportComplete","dataBound","actionBegin"],["userListGrid",""],["field","name","minWidth","120","width","160",3,"headerText"],["template",""],["field","emailId","minWidth","160","width","180","clipMode","EllipsisWithTooltip",3,"headerText","allowSorting"],["field","contactGroup","minWidth","100","width","120","clipMode","EllipsisWithTooltip",3,"headerText","allowSorting"],["field","isVerified","minWidth","60","width","80","clipMode","EllipsisWithTooltip",3,"headerText","allowSorting"],["minWidth","100","width","100","textAlign","Center","name","action"],["id","contextmenu","cssClass","context-view-more-options",3,"items","select","beforeOpen"],["moreOptionsContextMenu",""],["usersideBar",""],[1,"block-conatct-dialog"],["id","blockUnblockContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick","open",4,"ngIf"],[1,"delete-conatct-dialog"],["id","deleteRestoreContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick",4,"ngIf"],[1,"error-dialog"],["id","errorDialog","width","480px","isModal","true","height","Auto","closeOnEscape","true",3,"visible",4,"ngIf"],["contacttitle",""],[1,"convert-contact-to-agent-dialog"],["convertAgent",""],[1,"add-button-container"],["type","button","ejs-button","",1,"e-btn","add-button","e-primary","e-outline",3,"click"],[1,"pt-2"],["type","grid"],[1,"no-list-found","text-center"],[1,"ticket-no-records"],["src","assets/images/group.png","alt","Loading",1,"no-contact-image"],[1,"no-ticket-text"],[1,"flex-horizontal"],[1,"e-avatar","e-avatar-small","e-avatar-circle",3,"ngStyle"],[1,"no-wrap","ellipsis"],[1,"primary-link-color","cursor-pointer",3,"click"],[1,"grid-text-font-color"],[1,"flex-horizontal",2,"height","inherit"],[2,"padding-left","0",3,"ngClass"],["class","more-option-button bd-icon bd-icon-edit",3,"click",4,"ngIf"],[4,"ngIf"],[1,"more-option-button","bd-icon","bd-icon-edit",3,"click"],[1,"hd-icon","hd-vertical-menu","more-option-button",3,"click"],[3,"activateActive","activeItem","isResponseComplete","chipClick"],["contactSideBar",""],["id","blockUnblockContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick","open"],["blockUnblockContactDialog",""],["header",""],["footerTemplate",""],["content",""],[3,"hidden"],["data-ripple","true","autofocus","",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat","block-contact-button",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true","autofocus","",1,"e-control","e-btn","e-primary","e-flat","unblock-contact-button",3,"click"],["blockUnblockForm",""],[1,"mb-5"],[3,"label","checked"],["markAllTicketsSpam",""],[1,"pb-3"],[1,"spam-action-font-size"],[1,"contact-details"],["removeAllTicketsSpam",""],["id","deleteRestoreContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick"],["deleteRestoreContactDialog",""],["deleteRestoreForm",""],["markDeletedTicketTicketsSpam",""],["removeRestoredTicketsSpam",""],[2,"margin-bottom","5px"],["id","errorDialog","width","480px","isModal","true","height","Auto","closeOnEscape","true",3,"visible"],["errorDialog",""],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat",3,"click"],["errorForm",""],[1,"flex-horizontal","width-100"],["cssClass","title-text-view",1,"flex-horizontal","title-view-widths"],[1,"view-title-text","ellipsis"],[1,"title-view-buttons","ticket-view-refresh-button",2,"margin-left","8px"],["data-non-elliptical","true",1,"bd-icon","bd-icon-reset","e-btn","no-border","e-btn-icon",3,"click"]],template:function(t,e){1&t&&(E.Tb(0,"div",0),E.Tb(1,"div",1),E.Tb(2,"div",2,3),E.Tb(4,"div",4),E.Tb(5,"div",5),E.Tb(6,"div",6),E.Tb(7,"ejs-textbox",7,8),E.ec("change",(function(){return e.searchNodes()})),E.Sb(),E.Sb(),E.Jc(9,Dt,4,3,"div",9),E.Sb(),E.Sb(),E.Tb(10,"div",10,11),E.Jc(12,At,2,0,"div",12),E.Jc(13,Nt,6,3,"div",13),E.Tb(14,"ejs-grid",14,15),E.ec("excelQueryCellInfo",(function(t){return e.contactListExcelQueryCellInfo(t)}))("beforeDataBound",(function(t){return e.gridBeforedataBound(t)}))("excelExportComplete",(function(){return e.excelExportComplete()}))("dataBound",(function(){return e.userListGridDataBound()}))("actionBegin",(function(t){return e.contactListGridActionBegin(t)})),E.Tb(16,"e-columns"),E.Tb(17,"e-column",16),E.hc(18,"translate"),E.Jc(19,It,6,6,"ng-template",null,17,E.Kc),E.Sb(),E.Ob(21,"e-column",18),E.hc(22,"translate"),E.Tb(23,"e-column",19),E.hc(24,"translate"),E.Jc(25,Lt,2,1,"ng-template",null,17,E.Kc),E.Sb(),E.Tb(27,"e-column",20),E.hc(28,"translate"),E.Jc(29,Pt,4,2,"ng-template",null,17,E.Kc),E.Sb(),E.Tb(31,"e-column",21),E.Jc(32,wt,2,2,"ng-template",null,17,E.Kc),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(34,"ejs-contextmenu",22,23),E.ec("select",(function(t){return e.moreOptionsSelect(t)}))("beforeOpen",(function(t){return e.contextMenuBeforeOpen(t,e.contactData)})),E.Sb(),E.Jc(36,jt,2,3,"ng-template",null,24,E.Kc),E.Tb(38,"div",25),E.Jc(39,Gt,8,1,"ejs-dialog",26),E.Sb(),E.Tb(40,"div",27),E.Jc(41,Kt,8,1,"ejs-dialog",28),E.Sb(),E.Tb(42,"div",29),E.Jc(43,zt,8,1,"ejs-dialog",30),E.Sb(),E.Jc(44,Zt,11,12,"ng-template",null,31,E.Kc),E.Tb(46,"div",32),E.Ob(47,"convert-contact-agent",null,33),E.Sb()),2&t&&(E.xb(7),E.nc("placeholder",e.searchPlaceholder),E.xb(2),E.nc("ngIf",e.accessToCreateOrEdit),E.xb(3),E.nc("ngIf",e.stillFetching),E.xb(1),E.nc("ngIf",!e.stillFetching&&e.nodataFound),E.xb(1),E.nc("dataSource",e.customerData)("allowSorting",!0)("allowPaging",!0)("pageSettings",e.pageSettings)("allowExcelExport",!0)("hidden",e.stillFetching||e.nodataFound)("showColumnChooser",!0)("allowResizing",!0),E.xb(3),E.oc("headerText",E.ic(18,23,"NAME")),E.xb(4),E.oc("headerText",E.ic(22,25,"EMAIL")),E.nc("allowSorting",!0),E.xb(2),E.oc("headerText",E.ic(24,27,"CONTACTGROUP")),E.nc("allowSorting",!1),E.xb(4),E.oc("headerText",E.ic(28,29,"STATUS")),E.nc("allowSorting",!1),E.xb(7),E.nc("items",e.moreOptionsContacts),E.xb(5),E.nc("ngIf",e.accessToBlockOrUnBlockContact),E.xb(2),E.nc("ngIf",e.accessToDeleteOrRestoreContact),E.xb(2),E.nc("ngIf",e.accessToDeleteOrRestoreContact))},directives:[h.i,a.n,r.k,r.e,r.b,r.d,r.a,d.f,lt,l.c,dt.a,a.o,a.l,ut.a,u.b,l.e],pipes:[U.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.success[_ngcontent-%COMP%]{color:#0dbfb0}.failure[_ngcontent-%COMP%]{color:#777}.contact-grid[_ngcontent-%COMP%]   .e-btn[_ngcontent-%COMP%]{padding-bottom:0!important;padding-top:0!important}.contact-grid[_ngcontent-%COMP%]   .e-btn[_ngcontent-%COMP%]:active{box-shadow:none!important}.contact-grid[_ngcontent-%COMP%]   .e-icon-btn[_ngcontent-%COMP%]{padding-bottom:0!important;padding-top:0!important}.contact-grid[_ngcontent-%COMP%]   .hd-icon[_ngcontent-%COMP%]{padding:0!important}.contact-grid[_ngcontent-%COMP%]   .e-content[_ngcontent-%COMP%]{overflow-y:auto!important}.contact-grid[_ngcontent-%COMP%]   .cursor-auto[_ngcontent-%COMP%]{cursor:auto!important}.contact-details[_ngcontent-%COMP%]{line-height:25px;padding-left:20px;padding-right:10px}.block-contact-button[_ngcontent-%COMP%]{background-color:red!important;border-color:red!important;max-width:160px!important}.unblock-contact-button[_ngcontent-%COMP%]{max-width:195px!important}.mb-5[_ngcontent-%COMP%]{margin-bottom:5px!important}.spam-action-font-size[_ngcontent-%COMP%]{font-size:13px!important}.contact-container[_ngcontent-%COMP%], .height-100[_ngcontent-%COMP%]{height:100%}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]{overflow:hidden}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]{box-sizing:content-box;min-height:50px}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .e-chip[_ngcontent-%COMP%]{background:#fff!important}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .e-chip[_ngcontent-%COMP%]   .e-chip-text[_ngcontent-%COMP%]{font-size:14px}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%], .contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .e-chip[_ngcontent-%COMP%]:hover{background:#f5f9fd!important;border-color:#4a90e2!important}.context-view-more-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .e-menu-item[_ngcontent-%COMP%]   .e-menu-icon[_ngcontent-%COMP%]{padding:0}",".contact-container[_ngcontent-%COMP%]   .contact-list-contant[_ngcontent-%COMP%], .contact-group-container[_ngcontent-%COMP%]   .contact-list-contant[_ngcontent-%COMP%]{border-radius:0;height:32px;width:432px}.contact-container[_ngcontent-%COMP%]   .add-button-container[_ngcontent-%COMP%], .contact-group-container[_ngcontent-%COMP%]   .add-button-container[_ngcontent-%COMP%]{padding:12px!important}"]}),Wt),Yt=n("JxJv"),te=n("HuM0"),ee=n("OPsy"),ce=n("64zv"),ie=["contactGroupDetailSideBar"],ne=["moreOptionsContextMenu"],oe=["deleteRestoreContactDialog"],ae=["blockUnblockContactDialog"],re=["errorDialog"],se=["markAllTicketsSpam"],le=["removeAllTicketsSpam"],de=["markDeletedTicketTicketsSpam"],ue=["removeRestoredTicketsSpam"],he=["contactDetailEleRef"],be=["convertAgent"],pe=["agentSettingsTab"];function me(t,e){if(1&t){var c=E.Ub();E.Tb(0,"button",62),E.ec("click",(function(){return E.Bc(c),E.gc(2).editClick()})),E.Lc(1),E.hc(2,"translate"),E.Sb()}2&t&&(E.xb(1),E.Mc(E.ic(2,1,"EDIT")))}function ge(t,e){if(1&t){var c=E.Ub();E.Tb(0,"button",62),E.ec("click",(function(){return E.Bc(c),E.gc(2).deleteContactClick()})),E.Lc(1),E.hc(2,"translate"),E.Sb()}2&t&&(E.xb(1),E.Mc(E.ic(2,1,"DELETE")))}function fe(t,e){if(1&t){var c=E.Ub();E.Tb(0,"span",66),E.ec("click",(function(t){E.Bc(c);var e=E.gc(3);return e.moreOptionButtonClick(t,e.customerDetailList)})),E.Ob(1,"i",67),E.Sb()}}function ve(t,e){if(1&t){var c=E.Ub();E.Tb(0,"span",66),E.ec("click",(function(t){E.Bc(c);var e=E.gc(3);return e.moreOptionButtonClick(t,e.customerDetailList)})),E.Ob(1,"i",67),E.Sb()}}function Ce(t,e){if(1&t){var c=E.Ub();E.Tb(0,"span",66),E.ec("click",(function(t){E.Bc(c);var e=E.gc(3);return e.moreOptionButtonClick(t,e.customerDetailList)})),E.Ob(1,"i",67),E.Sb()}}function Te(t,e){if(1&t){var c=E.Ub();E.Tb(0,"span",66),E.ec("click",(function(t){E.Bc(c);var e=E.gc(4);return e.moreOptionButtonClick(t,e.customerDetailList)})),E.Ob(1,"i",67),E.Sb()}}function Se(t,e){if(1&t&&(E.Tb(0,"span"),E.Jc(1,Te,2,0,"span",65),E.Sb()),2&t){var c=E.gc(3);E.xb(1),E.nc("ngIf",c.accessToCreateOrEdit&&!c.customerDetailList.isBlocked&&!c.customerDetailList.isDeleted||c.accessToImpersonate&&!c.customerDetailList.isBlocked&&!c.customerDetailList.isDeleted&&c.customerDetailList.isVerified||c.accessToBlockOrUnBlockContact||c.accessToDeleteOrRestoreContact)}}function Oe(t,e){if(1&t&&(E.Tb(0,"span",63),E.Tb(1,"div",64),E.Jc(2,fe,2,0,"span",65),E.Jc(3,ve,2,0,"span",65),E.Jc(4,Ce,2,0,"span",65),E.Jc(5,Se,2,1,"span",43),E.Sb(),E.Sb()),2&t){var c=E.gc(2);E.xb(2),E.nc("ngIf",c.permissionToOnlyImpersonate&&!c.customerDetailList.isBlocked&&!c.customerDetailList.isDeleted),E.xb(1),E.nc("ngIf",c.permissionToOnlyEdit&&!c.customerDetailList.isBlocked&&!c.customerDetailList.isDeleted),E.xb(1),E.nc("ngIf",c.permissionToOnlyDelete&&c.customerDetailList.isDeleted),E.xb(1),E.nc("ngIf",!c.permissionToOnlyImpersonate&&!c.permissionToOnlyEdit&&!c.permissionToOnlyDelete)}}function ke(t,e){if(1&t){var c=E.Ub();E.Tb(0,"span",66),E.ec("click",(function(t){E.Bc(c);var e=E.gc(3);return e.moreOptionButtonClick(t,e.customerDetailList)})),E.Ob(1,"i",67),E.Sb()}}function xe(t,e){if(1&t&&(E.Tb(0,"span",68),E.Jc(1,ke,2,0,"span",65),E.Sb()),2&t){var c=E.gc(2);E.xb(1),E.nc("ngIf",!c.customerDetailList.isBlocked&&!c.customerDetailList.isDeleted)}}function ye(t,e){1&t&&(E.Tb(0,"div"),E.Ob(1,"lib-shimmer",69),E.Sb())}function Ee(t,e){1&t&&(E.Tb(0,"div",70),E.Tb(1,"div",71),E.Ob(2,"img",72),E.Sb(),E.Tb(3,"div",73),E.Lc(4),E.hc(5,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(4),E.Mc(E.ic(5,1,"NOTICKETSFOUND")))}function De(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div",74),E.ec("click",(function(){E.Bc(c);var t=e.$implicit;return E.gc(2).ticketLinkClick(t.ticketId)})),E.Tb(1,"span",75),E.Lc(2),E.Sb(),E.Sb()}if(2&t){var i=e.$implicit;E.xb(2),E.Nc(" ",i.ticketId,"")}}function Ae(t,e){if(1&t&&(E.Tb(0,"div",76),E.Lc(1),E.Sb()),2&t){var c=e.$implicit;E.xb(1),E.Nc(" ",c.title," ")}}function Ne(t,e){if(1&t&&(E.Tb(0,"span"),E.Ob(1,"app-date-time",60),E.Sb()),2&t){var c=e.$implicit,i=E.gc(2);E.xb(1),E.nc("date",c.createdOn)("format",i.format)("timezone",i.timeZone)}}function Me(t,e){if(1&t&&(E.Tb(0,"div",76),E.Lc(1),E.Sb()),2&t){var c=e.$implicit;E.xb(1),E.Nc(" ",c.brand?c.brand:"--"," ")}}var Ie=function(t){return{color:t}};function Le(t,e){if(1&t&&(E.Tb(0,"div",77),E.Lc(1),E.Sb()),2&t){var c=e.$implicit;E.nc("ngStyle",E.tc(2,Ie,c.status.backgroundColor)),E.xb(1),E.Nc(" ",c.status.description," ")}}function Pe(t,e){1&t&&(E.Tb(0,"span"),E.Lc(1),E.hc(2,"translate"),E.Sb()),2&t&&(E.xb(1),E.Nc(" ",E.ic(2,1,"VERIFIED"),""))}function Be(t,e){1&t&&(E.Tb(0,"span"),E.Lc(1),E.hc(2,"translate"),E.Sb()),2&t&&(E.xb(1),E.Nc(" ",E.ic(2,1,"UNVERIFIED"),""))}function Re(t,e){1&t&&(E.Tb(0,"span"),E.Lc(1),E.hc(2,"translate"),E.Sb()),2&t&&(E.xb(1),E.Mc(E.ic(2,1,"BLOCKED")))}function we(t,e){1&t&&(E.Tb(0,"span"),E.Lc(1),E.hc(2,"translate"),E.Sb()),2&t&&(E.xb(1),E.Mc(E.ic(2,1,"DELETED")))}function je(t,e){if(1&t&&(E.Tb(0,"div"),E.Tb(1,"div",58),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Tb(4,"div",59),E.Tb(5,"span"),E.Lc(6),E.Sb(),E.Sb(),E.Sb()),2&t){var c=E.gc(2);E.xb(2),E.Nc(" ",E.ic(3,3,"CONTACTACCESSSCOPE")," "),E.xb(3),E.yb("data-title",c.customerDetailList.contactGroup?1===c.customerDetailList.contactGroup[0].accessScopeId?c.accessList[0].text:c.accessList[1].text:"--"),E.xb(1),E.Nc(" ",c.customerDetailList.contactGroup?1===c.customerDetailList.contactGroup[0].accessScopeId?c.accessList[0].text:c.accessList[1].text:"--"," ")}}function Fe(t,e){if(1&t&&(E.Tb(0,"div",81),E.Tb(1,"span"),E.Lc(2),E.Sb(),E.Sb()),2&t){var c=E.gc().$implicit;E.xb(1),E.yb("data-title",c.label),E.xb(1),E.Mc(c.label)}}function _e(t,e){if(1&t&&(E.Tb(0,"div",81),E.Tb(1,"span"),E.Lc(2),E.Sb(),E.Sb()),2&t){var c=E.gc().$implicit;E.xb(1),E.yb("data-title",c.checkBoxGroups[0].label),E.xb(1),E.Mc(c.checkBoxGroups[0].label)}}function Ue(t,e){if(1&t&&(E.Tb(0,"div"),E.Tb(1,"div",59),E.Tb(2,"span"),E.Lc(3),E.Sb(),E.Sb(),E.Sb()),2&t){var c=E.gc().$implicit;E.xb(2),E.yb("data-title",c.text),E.xb(1),E.Mc(c.text?c.text:"--")}}function Ge(t,e){if(1&t&&(E.Tb(0,"div",59),E.Tb(1,"span"),E.Lc(2),E.Sb(),E.Sb()),2&t){var c=E.gc().$implicit;E.xb(1),E.yb("data-title",c.value),E.xb(1),E.Mc(c.value?c.value:"--")}}function Ve(t,e){if(1&t&&(E.Tb(0,"span"),E.Ob(1,"app-date-time",60),E.Sb()),2&t){var c=E.gc(2).$implicit,i=E.gc(2);E.xb(1),E.nc("date",c.value)("format",i.format)("timezone",i.timeZone)}}function qe(t,e){1&t&&(E.Tb(0,"span"),E.Lc(1,"--"),E.Sb())}function Je(t,e){if(1&t&&(E.Tb(0,"div",82),E.Jc(1,Ve,2,3,"span",43),E.Jc(2,qe,2,0,"span",43),E.Sb()),2&t){var c=E.gc().$implicit;E.xb(1),E.nc("ngIf",c.value),E.xb(1),E.nc("ngIf",!c.value)}}function Ke(t,e){if(1&t&&(E.Tb(0,"div",82),E.Lc(1),E.Sb()),2&t){var c=E.gc().$implicit;E.xb(1),E.Nc(" ",c.value?c.value:"--"," ")}}function Xe(t,e){if(1&t&&(E.Tb(0,"div",82),E.Lc(1),E.Sb()),2&t){var c=E.gc().$implicit;E.xb(1),E.Nc(" ",c.value," ")}}function Qe(t,e){if(1&t&&(E.Tb(0,"div",82),E.Lc(1),E.Sb()),2&t){var c=E.gc().$implicit;E.xb(1),E.Nc(" ",c.radioGroups[0].checked?c.radioGroups[0].label:c.radioGroups[1].label," ")}}function He(t,e){if(1&t&&(E.Tb(0,"div"),E.Jc(1,Fe,3,2,"div",78),E.Jc(2,_e,3,2,"div",78),E.Jc(3,Ue,4,2,"div",43),E.Jc(4,Ge,3,2,"div",79),E.Jc(5,Je,3,2,"div",80),E.Jc(6,Ke,2,1,"div",80),E.Jc(7,Xe,2,1,"div",80),E.Jc(8,Qe,2,1,"div",80),E.Sb()),2&t){var c=e.$implicit;E.xb(1),E.nc("ngIf","checkbox"!==c.type),E.xb(1),E.nc("ngIf","checkbox"===c.type),E.xb(1),E.nc("ngIf","multiSelect"===c.type||"dropdown"===c.type||"tag"===c.type),E.xb(1),E.nc("ngIf","multiSelect"!==c.type&&"dropdown"!==c.type&&"tag"!==c.type&&"date"!==c.type&&"datetime"!==c.type&&"checkbox"!==c.type&&"radio"!==c.type),E.xb(1),E.nc("ngIf","datetime"===c.type),E.xb(1),E.nc("ngIf","date"===c.type),E.xb(1),E.nc("ngIf","checkbox"===c.type),E.xb(1),E.nc("ngIf","radio"===c.type)}}var ze=function(t){return{background:t}};function Ze(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div",13),E.Tb(1,"div",14),E.Tb(2,"div",15),E.Tb(3,"div",16),E.Lc(4),E.Sb(),E.Tb(5,"div",17),E.Tb(6,"div",18),E.Tb(7,"span"),E.Lc(8),E.Sb(),E.Sb(),E.Tb(9,"div",19),E.Tb(10,"span"),E.Lc(11),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(12,"div",20),E.Jc(13,me,3,3,"button",21),E.Tb(14,"span",22),E.Jc(15,ge,3,3,"button",21),E.Sb(),E.Jc(16,Oe,6,4,"span",23),E.Jc(17,xe,2,1,"span",24),E.Sb(),E.Sb(),E.Tb(18,"div",25),E.Tb(19,"div",26),E.Tb(20,"div",27),E.Tb(21,"div",28),E.Tb(22,"div",29),E.Tb(23,"div",30),E.Lc(24),E.Sb(),E.Tb(25,"div",31),E.Lc(26),E.hc(27,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Tb(28,"div",32),E.Tb(29,"div",29),E.Tb(30,"div",33),E.Lc(31),E.Sb(),E.Tb(32,"div",31),E.Lc(33),E.hc(34,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Tb(35,"div",32),E.Tb(36,"div",29),E.Tb(37,"div",34),E.Lc(38),E.Sb(),E.Tb(39,"div",31),E.Lc(40),E.hc(41,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Tb(42,"div",32),E.Tb(43,"div",29),E.Tb(44,"div",34),E.Lc(45),E.Sb(),E.Tb(46,"div",31),E.Lc(47),E.hc(48,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(49,"div",35),E.Tb(50,"ejs-tab",36,37),E.Tb(52,"div",38),E.Tb(53,"div"),E.Tb(54,"span",39),E.Lc(55),E.hc(56,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Tb(57,"div",40,41),E.Tb(59,"div",42),E.Jc(60,ye,2,0,"div",43),E.Jc(61,Ee,6,3,"div",44),E.Tb(62,"ejs-grid",45,46),E.ec("beforeDataBound",(function(t){return E.Bc(c),E.gc().gridBeforedataBound(t)}))("dataBound",(function(){return E.Bc(c),E.gc().ticketListDataBound()})),E.Tb(64,"e-columns"),E.Tb(65,"e-column",47),E.hc(66,"translate"),E.Jc(67,De,3,1,"ng-template",null,48,E.Kc),E.Sb(),E.Tb(69,"e-column",49),E.hc(70,"translate"),E.Jc(71,Ae,2,1,"ng-template",null,48,E.Kc),E.Sb(),E.Tb(73,"e-column",50),E.hc(74,"translate"),E.Jc(75,Ne,2,3,"ng-template",null,48,E.Kc),E.Sb(),E.Tb(77,"e-column",51),E.hc(78,"translate"),E.Jc(79,Me,2,1,"ng-template",null,48,E.Kc),E.Sb(),E.Tb(81,"e-column",52),E.hc(82,"translate"),E.Jc(83,Le,2,4,"ng-template",null,48,E.Kc),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(85,"div",53),E.Tb(86,"div",54),E.Ob(87,"div",55),E.Tb(88,"div",56),E.Lc(89),E.hc(90,"translate"),E.Sb(),E.Sb(),E.Tb(91,"div",57),E.Tb(92,"div"),E.Tb(93,"div",58),E.Lc(94),E.hc(95,"translate"),E.Sb(),E.Tb(96,"div",59),E.Ob(97,"app-date-time",60),E.Sb(),E.Sb(),E.Tb(98,"div"),E.Tb(99,"div",58),E.Lc(100),E.hc(101,"translate"),E.Sb(),E.Tb(102,"div",59),E.Jc(103,Pe,3,3,"span",43),E.Jc(104,Be,3,3,"span",43),E.Jc(105,Re,3,3,"span",43),E.Jc(106,we,3,3,"span",43),E.Sb(),E.Sb(),E.Tb(107,"div"),E.Tb(108,"div",58),E.Lc(109),E.hc(110,"translate"),E.Sb(),E.Tb(111,"div",59),E.Tb(112,"span"),E.Lc(113),E.Sb(),E.Sb(),E.Sb(),E.Tb(114,"div"),E.Tb(115,"div",58),E.Lc(116),E.hc(117,"translate"),E.Sb(),E.Tb(118,"div",59),E.Tb(119,"span"),E.Lc(120),E.Sb(),E.Sb(),E.Sb(),E.Tb(121,"div"),E.Tb(122,"div",58),E.Lc(123),E.hc(124,"translate"),E.Sb(),E.Tb(125,"div",59),E.Tb(126,"span"),E.Lc(127),E.Sb(),E.Sb(),E.Sb(),E.Jc(128,je,7,5,"div",43),E.Tb(129,"div"),E.Jc(130,He,9,8,"div",61),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb()}if(2&t){var i=E.gc();E.xb(3),E.nc("ngStyle",E.tc(87,ze,i.customerDetailList.colorCode)),E.xb(1),E.Nc(" ",i.customerDetailList.shortCode," "),E.xb(3),E.yb("data-title",i.customerDetailList.contactName),E.xb(1),E.Nc(" ",i.customerDetailList.contactDisplayName," "),E.xb(2),E.yb("data-title",i.customerDetailList.emailId),E.xb(1),E.Nc(" ",i.customerDetailList.emailId," "),E.xb(2),E.nc("ngIf",i.accessToCreateOrEdit&&!i.customerDetailList.isDeleted&&!i.customerDetailList.isBlocked),E.xb(2),E.nc("ngIf",i.accessToDeleteOrRestoreContact&&!i.customerDetailList.isDeleted),E.xb(1),E.nc("ngIf",i.showActionButton),E.xb(1),E.nc("ngIf",!i.showActionButton),E.xb(4),E.yb("data-href","tickets/"),E.xb(3),E.Nc("",i.statusCollection?i.statusCollection.allTicketsCount:"--"," "),E.xb(2),E.Nc(" ",E.ic(27,55,"ALLTICKETS"),""),E.xb(5),E.Nc(" ",i.statusCollection?i.statusCollection.pendingTicketsCount?i.statusCollection.pendingTicketsCount:0:"--"," "),E.xb(2),E.Mc(E.ic(34,57,"PENDINGTICKETS")),E.xb(5),E.Nc(" ",i.statusCollection?i.statusCollection.holdTicketsCount?i.statusCollection.holdTicketsCount:0:"--"," "),E.xb(2),E.Mc(E.ic(41,59,"HOLDTICKETS")),E.xb(5),E.Nc(" ",i.statusCollection?i.statusCollection.closedTicketsCount:"--",""),E.xb(2),E.Mc(E.ic(48,61,"CLOSEDTICKETS")),E.xb(3),E.nc("animation",i.tabAnimationSettings),E.xb(5),E.Nc(" ",E.ic(56,63,"TICKET")," "),E.xb(2),E.nc("ngClass",i.stillFetching?"overflow-hidden":"overflow-auto"),E.xb(3),E.nc("ngIf",i.stillFetching),E.xb(1),E.nc("ngIf",!i.stillFetching&&i.nodataFound),E.xb(1),E.nc("dataSource",i.ticketDataSource)("hidden",i.stillFetching||i.nodataFound)("pageSettings",i.pageSettings)("allowSorting",!0),E.xb(3),E.oc("headerText",E.ic(66,65,"ID")),E.xb(4),E.oc("headerText",E.ic(70,67,"SUBJECT")),E.xb(4),E.oc("headerText",E.ic(74,69,"CREATEDDATE")),E.xb(4),E.oc("headerText",E.ic(78,71,"BRAND")),E.xb(4),E.oc("headerText",E.ic(82,73,"STATUS")),E.nc("allowSorting",!1),E.xb(8),E.Mc(E.ic(90,75,"DETAILS")),E.xb(5),E.Nc(" ",E.ic(95,77,"CREATEDDATE")," "),E.xb(3),E.nc("date",i.customerDetailList.createdOn)("format",i.format)("timezone",i.timeZone),E.xb(3),E.Nc(" ",E.ic(101,79,"STATUS")," "),E.xb(3),E.nc("ngIf",i.customerDetailList.isVerified&&!i.customerDetailList.isDeleted&&!i.customerDetailList.isBlocked),E.xb(1),E.nc("ngIf",!i.customerDetailList.isVerified&&!i.customerDetailList.isDeleted&&!i.customerDetailList.isBlocked),E.xb(1),E.nc("ngIf",i.customerDetailList.isBlocked),E.xb(1),E.nc("ngIf",i.customerDetailList.isDeleted),E.xb(3),E.Nc(" ",E.ic(110,81,"EMAIL")," "),E.xb(3),E.yb("data-title",i.customerDetailList.emailId),E.xb(1),E.Mc(i.customerDetailList.emailId),E.xb(3),E.Nc(" ",E.ic(117,83,"DISPLAYNAME")," "),E.xb(3),E.yb("data-title",i.customerDetailList.contactDisplayName),E.xb(1),E.Mc(i.customerDetailList.contactDisplayName),E.xb(3),E.Nc(" ",E.ic(124,85,"CONTACTGROUP")," "),E.xb(3),E.zb("data-title"," ",i.customerDetailList.contactGroup?i.customerDetailList.contactGroup[0].name:"--",""),E.xb(1),E.Nc(" ",i.customerDetailList.contactGroup?i.customerDetailList.contactGroup[0].name:"--"," "),E.xb(1),E.nc("ngIf",i.customerDetailList.contactGroup),E.xb(2),E.nc("ngForOf",i.detailsList)}}function We(t,e){if(1&t&&(E.Tb(0,"div",88),E.Lc(1),E.hc(2,"translate"),E.Sb(),E.Tb(3,"div",88),E.Lc(4),E.hc(5,"translate"),E.Sb()),2&t){var c=E.gc(2);E.nc("hidden",!c.blockContact),E.xb(1),E.Mc(E.ic(2,4,"BLOCKCONTACT")),E.xb(2),E.nc("hidden",!c.UnblockContact),E.xb(1),E.Mc(E.ic(5,6,"UNBLOCKCONTACT"))}}function $e(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div",88),E.Tb(1,"button",89),E.ec("click",(function(){E.Bc(c),E.gc();var t=E.yc(1);return E.gc().cancelDialog(t)})),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Tb(4,"button",90),E.ec("click",(function(){return E.Bc(c),E.gc(2).updateBlockContact()})),E.Lc(5),E.hc(6,"translate"),E.Sb(),E.Sb(),E.Tb(7,"div",88),E.Tb(8,"button",91),E.ec("click",(function(){E.Bc(c),E.gc();var t=E.yc(1);return E.gc().cancelDialog(t)})),E.Lc(9),E.hc(10,"translate"),E.Sb(),E.Tb(11,"button",92),E.ec("click",(function(){return E.Bc(c),E.gc(2).updateUnblockContact()})),E.Lc(12),E.hc(13,"translate"),E.Sb(),E.Sb()}if(2&t){var i=E.gc(2);E.nc("hidden",!i.blockContact),E.xb(2),E.Mc(E.ic(3,6,"CANCEL")),E.xb(3),E.Mc(E.ic(6,8,"BLOCKCONTACT")),E.xb(2),E.nc("hidden",!i.UnblockContact),E.xb(2),E.Mc(E.ic(10,10,"CANCEL")),E.xb(3),E.Mc(E.ic(13,12,"UNBLOCKCONTACT"))}}function Ye(t,e){if(1&t&&(E.Tb(0,"div",null,93),E.Tb(2,"div",88),E.Tb(3,"div",94),E.Ob(4,"ejs-checkbox",95,96),E.hc(6,"translate"),E.Sb(),E.Ob(7,"div",97),E.Tb(8,"div",98),E.Tb(9,"div",94),E.Lc(10),E.hc(11,"translate"),E.Sb(),E.Tb(12,"ul",99),E.Tb(13,"li"),E.Lc(14),E.hc(15,"translate"),E.Sb(),E.Tb(16,"li"),E.Lc(17),E.hc(18,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(19,"div",88),E.Tb(20,"div",94),E.Ob(21,"ejs-checkbox",95,100),E.hc(23,"translate"),E.Sb(),E.Ob(24,"div",97),E.Tb(25,"div",98),E.Tb(26,"div",94),E.Lc(27),E.hc(28,"translate"),E.Sb(),E.Tb(29,"ul",99),E.Tb(30,"li"),E.Lc(31),E.hc(32,"translate"),E.Sb(),E.Tb(33,"li"),E.Lc(34),E.hc(35,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb()),2&t){var c=E.gc(2);E.xb(2),E.nc("hidden",!c.blockContact),E.xb(2),E.oc("label",E.ic(6,12,"BLOCKCHECKBOX")),E.nc("checked",!0),E.xb(6),E.Nc("",E.ic(11,14,"BLOCKCONTACTACTIONS"),":"),E.xb(4),E.Mc(E.ic(15,16,"BLOCKCONTACTACTIONONE")),E.xb(3),E.Mc(E.ic(18,18,"BLOCKCONTACTACTIONTWO")),E.xb(2),E.nc("hidden",!c.UnblockContact),E.xb(2),E.oc("label",E.ic(23,20,"UNBLOCKCHECKBOX")),E.nc("checked",!1),E.xb(6),E.Nc("",E.ic(28,22,"UNBLOCKCONTACTACTIONS"),":"),E.xb(4),E.Mc(E.ic(32,24,"UNBLOCKCONTACTSPAMACTIONTWO")),E.xb(3),E.Mc(E.ic(35,26,"UNBLOCKCONTACTACTIONONE"))}}function tc(t,e){if(1&t){var c=E.Ub();E.Tb(0,"ejs-dialog",83,84),E.ec("overlayClick",(function(){E.Bc(c);var t=E.yc(1);return E.gc().overlayClick(t)}))("open",(function(){return E.Bc(c),E.gc().blockUnblockDialogOpen()})),E.Jc(2,We,6,8,"ng-template",null,85,E.Kc),E.Jc(4,$e,14,14,"ng-template",null,86,E.Kc),E.Jc(6,Ye,36,28,"ng-template",null,87,E.Kc),E.Sb()}2&t&&E.nc("visible",!1)}function ec(t,e){if(1&t&&(E.Tb(0,"div",88),E.Lc(1),E.hc(2,"translate"),E.Sb(),E.Tb(3,"div",88),E.Lc(4),E.hc(5,"translate"),E.Sb()),2&t){var c=E.gc(2);E.nc("hidden",!c.deleteContact),E.xb(1),E.Mc(E.ic(2,4,"DELETECONTACT")),E.xb(2),E.nc("hidden",!c.restoreContact),E.xb(1),E.Mc(E.ic(5,6,"RESTORECONTACT"))}}function cc(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div",88),E.Tb(1,"button",89),E.ec("click",(function(){E.Bc(c),E.gc();var t=E.yc(1);return E.gc().cancelDialog(t)})),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Tb(4,"button",90),E.ec("click",(function(){return E.Bc(c),E.gc(2).updateDeleteContact()})),E.Lc(5),E.hc(6,"translate"),E.Sb(),E.Sb(),E.Tb(7,"div",88),E.Tb(8,"button",91),E.ec("click",(function(){E.Bc(c),E.gc();var t=E.yc(1);return E.gc().cancelDialog(t)})),E.Lc(9),E.hc(10,"translate"),E.Sb(),E.Tb(11,"button",92),E.ec("click",(function(){return E.Bc(c),E.gc(2).updateRestoreContact()})),E.Lc(12),E.hc(13,"translate"),E.Sb(),E.Sb()}if(2&t){var i=E.gc(2);E.nc("hidden",!i.deleteContact),E.xb(2),E.Mc(E.ic(3,6,"CANCEL")),E.xb(3),E.Mc(E.ic(6,8,"DELETECONTACT")),E.xb(2),E.nc("hidden",!i.restoreContact),E.xb(2),E.Mc(E.ic(10,10,"CANCEL")),E.xb(3),E.Mc(E.ic(13,12,"RESTORECONTACT"))}}function ic(t,e){if(1&t&&(E.Tb(0,"div",null,103),E.Tb(2,"div",88),E.Tb(3,"div",94),E.Ob(4,"ejs-checkbox",95,104),E.hc(6,"translate"),E.Sb(),E.Ob(7,"div",97),E.Tb(8,"div",98),E.Tb(9,"div",94),E.Lc(10),E.hc(11,"translate"),E.Sb(),E.Tb(12,"ul",99),E.Tb(13,"li"),E.Lc(14),E.hc(15,"translate"),E.Sb(),E.Tb(16,"li"),E.Lc(17),E.hc(18,"translate"),E.Sb(),E.Tb(19,"li"),E.Lc(20),E.hc(21,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(22,"div",88),E.Tb(23,"div",94),E.Ob(24,"ejs-checkbox",95,105),E.hc(26,"translate"),E.Sb(),E.Ob(27,"div",97),E.Tb(28,"div",98),E.Tb(29,"div",106),E.Lc(30),E.hc(31,"translate"),E.Sb(),E.Tb(32,"ul",99),E.Tb(33,"li"),E.Lc(34),E.hc(35,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb()),2&t){var c=E.gc(2);E.xb(2),E.nc("hidden",!c.deleteContact),E.xb(2),E.oc("label",E.ic(6,12,"BLOCKCHECKBOX")),E.nc("checked",!0),E.xb(6),E.Nc("",E.ic(11,14,"DELETECONTACTACTIONS"),":"),E.xb(4),E.Mc(E.ic(15,16,"DELETECONTACTACTIONONE")),E.xb(3),E.Mc(E.ic(18,18,"DELETECONTACTACTIONTWO")),E.xb(3),E.Mc(E.ic(21,20,"DELETECONTACTACTIONTHREE")),E.xb(2),E.nc("hidden",!c.restoreContact),E.xb(2),E.oc("label",E.ic(26,22,"UNBLOCKCHECKBOX")),E.nc("checked",!1),E.xb(6),E.Nc("",E.ic(31,24,"RESTORECONTACTACTIONS"),":"),E.xb(4),E.Mc(E.ic(35,26,"RESTORECONTACTACTIONONE"))}}function nc(t,e){if(1&t){var c=E.Ub();E.Tb(0,"ejs-dialog",101,102),E.ec("overlayClick",(function(){E.Bc(c);var t=E.yc(1);return E.gc().overlayClick(t)})),E.Jc(2,ec,6,8,"ng-template",null,85,E.Kc),E.Jc(4,cc,14,14,"ng-template",null,86,E.Kc),E.Jc(6,ic,36,28,"ng-template",null,87,E.Kc),E.Sb()}2&t&&E.nc("visible",!1)}function oc(t,e){1&t&&(E.Tb(0,"div"),E.Lc(1),E.hc(2,"translate"),E.Sb()),2&t&&(E.xb(1),E.Mc(E.ic(2,1,"DELETECONTACT")))}function ac(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div"),E.Tb(1,"button",109),E.ec("click",(function(){return E.Bc(c),E.gc(2).errorDialogOkay()})),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()}2&t&&(E.xb(2),E.Mc(E.ic(3,1,"OKAY")))}function rc(t,e){if(1&t&&(E.Tb(0,"div",null,110),E.Tb(2,"div",88),E.Tb(3,"div"),E.Lc(4),E.Sb(),E.Sb(),E.Sb()),2&t){var c=E.gc(2);E.xb(2),E.nc("hidden",!c.deleteContact),E.xb(2),E.Mc(c.deleteFailErrorMessage)}}function sc(t,e){1&t&&(E.Tb(0,"ejs-dialog",107,108),E.Jc(2,oc,3,3,"ng-template",null,85,E.Kc),E.Jc(4,ac,4,3,"ng-template",null,86,E.Kc),E.Jc(6,rc,5,2,"ng-template",null,87,E.Kc),E.Sb()),2&t&&E.nc("visible",!1)}var lc,dc,uc=((dc=function(){function e(c,i,n,o,a,r,s,l,d,u){var h=this;t(this,e),this.appRootService=c,this.spinService=i,this.route=n,this.seoService=o,this.appPermissionService=a,this.jwtService=r,this.contactAPIService=s,this.contactRootService=l,this.router=d,this.toastService=u,this.block=Object(x.a)("BLOCKCONTACT"),this.unBlockContact=Object(x.a)("UNBLOCKCONTACT"),this.restore=Object(x.a)("RESTORECONTACT"),this.sendVerifyEmail=Object(x.a)("SENDVERIFICATIONEMAIL"),this.sendResetPass=Object(x.a)("SENDRESETPASSWORD"),this.verifyManually=Object(x.a)("VERIFYMANUALLY"),this.impersonateContact=Object(x.a)("IMPERSONATE"),this.convert=Object(x.a)("CONVERTTOAGENT"),this.moreOptionsContacts=[{text:this.convert,id:"9",iconCss:"bd-icon bd-icon-groups"},{text:this.impersonateContact,id:"8",iconCss:"bd-icon bd-icon-groups"},{text:this.sendVerifyEmail,id:"5",iconCss:"bd-icon bd-icon-mail"},{text:this.sendResetPass,id:"6",iconCss:"bd-icon bd-icon-mail"},{text:this.verifyManually,id:"7",iconCss:"bd-icon bd-icon-tick24"},{text:this.unBlockContact,id:"2",iconCss:"hd-icon hd-forward"},{text:this.restore,id:"4",iconCss:"hd-icon hd-forward"},{text:this.block,id:"1",iconCss:"bd-icon bd-icon-error"}],this.tabAnimationSettings={next:{effect:"None"},previous:{effect:"None"}},this.showActionButton=!0,this.accessList=[{value:1,text:Object(x.a)("CONTACTACCESSSCOPE1")},{value:2,text:Object(x.a)("CONTACTACCESSSCOPE2")}],this.stillFetching=!0,this.customerId=this.route.snapshot.paramMap.get("customerId"),this.route.data.subscribe((function(t){h.customerDetailList=t.data,h.spinService.hideSpinner()})),this.appRootService.isSideBarNeeded(!1),this.appRootService.setAppTitleText(Object(x.a)("CONTACT")+" / "+this.customerDetailList.contactName),this.seoService.setHeaderElements({title:Object(x.a)("PROFILE")+" | "+Object(x.a)("CONTACT")}),this.accessToCreateOrEdit=this.appPermissionService.hasPermission([k.a.CreateOrEditContact,k.a.ViewContact]),this.accessToBlockOrUnBlockContact=this.appPermissionService.hasPermission([k.a.BlockOrUnblockContactAndDeleteOrSpamAssociatedTickets,k.a.ViewContact])&&O.P.ticketAccessScopeId===C.b.Global&&O.P.hasAllBrandAccess,this.accessToDeleteOrRestoreContact=this.appPermissionService.hasPermission([k.a.DeleteOrRestoreContactAndDeleteOrSpamAssociatedTickets,k.a.ViewContact])&&O.P.ticketAccessScopeId===C.b.Global&&O.P.hasAllBrandAccess,this.accessToImpersonate=this.appPermissionService.hasPermission([k.a.ImpersonateContact])&&!this.jwtService.isImpersonated(),this.permissionToOnlyImpersonate=!(this.accessToBlockOrUnBlockContact||this.accessToCreateOrEdit||this.accessToDeleteOrRestoreContact)&&this.accessToImpersonate,this.permissionToOnlyEdit=!(this.accessToBlockOrUnBlockContact||this.accessToImpersonate||this.accessToDeleteOrRestoreContact)&&this.accessToCreateOrEdit,this.contactAPIService.contactstatus(+this.customerId).then((function(t){t&&(h.statusCollection=t)})).catch((function(t){var e=Object(v.q)(t.error);400===t.status&&h.toastService.failureToast(e)})),this.format=O.e.dateFormat+" "+O.e.timeFormat,this.timeZone=O.P.timeZoneOffset,this.permissionToOnlyDelete=!(this.accessToBlockOrUnBlockContact||this.accessToImpersonate||this.accessToCreateOrEdit)&&this.accessToDeleteOrRestoreContact,this.canConvertContact=this.appPermissionService.hasPermission([k.a.ManageAgents])}return c(e,[{key:"ngOnInit",value:function(){var t=N.a.requestToContactTickets+this.customerId;t=Object(v.i)(t,"Page","1"),t=Object(v.i)(t,"PerPage","99"),this.ticketDataSource=new m.a({url:t,adaptor:new f.a}),this.pageSettings={pageSize:S.g},this.accessToBlockOrUnBlockContact||this.accessToImpersonate||this.accessToDeleteOrRestoreContact||this.accessToCreateOrEdit||(this.showActionButton=!1)}},{key:"ngAfterViewInit",value:function(){var t=this,e=this.contactDetailEleRef.nativeElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;e.querySelectorAll(".sidebar-expand-button")[0]&&(e.querySelectorAll(".sidebar-expand-button")[0].style.display="none"),this.contactAPIService.getContactForm().then((function(e){t.contactCollection=Object(Yt.b)(e.result,t.customerDetailList,"contact"),t.detailsList=t.contactCollection.formComponents})).catch((function(e){var c=Object(v.q)(e.error);400===e.status&&t.toastService.failureToast(c)}))}},{key:"editClick",value:function(){var t=this;Object(T.X)(this.customerId)||(this.spinService.showSpinner(),this.contactAPIService.getContactByUserId(+this.customerId).then((function(e){Object(T.X)(e)||t.contactRootService.setContactObjectOnEditDialog(e)})).catch((function(e){var c=Object(v.q)(e.error);400===e.status&&t.toastService.failureToast(c)})),this.contactRootService.setContactDialogTitle("EDITCONTACT"),this.contactRootService.setContactDialogSubmitText("UPDATE"),this.contactRootService.showAddEditContactForm("Edit"),this.contactRootService.setProfileOrAddEdit(!0))}},{key:"deleteContactClick",value:function(){this.deleteRestoreContactDialog.show(),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!0,this.restoreContact=!1,this.markDeletedTicketTicketsSpam.checked=!0}},{key:"moreOptionButtonClick",value:function(t,e){var c=t.target,i=Object(u.f)(c);this.contactData=e,this.moreOptionsMenu.open(i.top+25,i.left,c)}},{key:"contextMenuBeforeOpen",value:function(t){if(t.isBlocked||t.isDeleted||!t.isVerified)if(t.isBlocked||t.isDeleted||t.isVerified)if(!t.isBlocked&&t.isDeleted){var e=[],c=[this.unBlockContact,this.sendResetPass,this.verifyManually,this.sendVerifyEmail,this.convert];this.accessToDeleteOrRestoreContact?e.push(this.restore):c.push(this.restore),this.accessToBlockOrUnBlockContact?e.push(this.block):c.push(this.block),c.push(this.impersonateContact),this.moreOptionsMenu.hideItems(c),this.moreOptionsMenu.showItems(e)}else if(t.isBlocked&&!t.isDeleted){var i=[],n=[this.restore,this.sendResetPass,this.verifyManually,this.sendVerifyEmail,this.block,this.convert];this.accessToBlockOrUnBlockContact?i.push(this.unBlockContact):n.push(this.unBlockContact),n.push(this.impersonateContact),this.moreOptionsMenu.hideItems(n),this.moreOptionsMenu.showItems(i)}else{var o=[],a=[this.sendResetPass,this.verifyManually,this.sendVerifyEmail,this.block,this.convert];this.accessToDeleteOrRestoreContact?o.push(this.restore):a.push(this.restore),this.accessToBlockOrUnBlockContact?o.push(this.unBlockContact):a.push(this.unBlockContact),a.push(this.impersonateContact),this.moreOptionsMenu.hideItems(a),this.moreOptionsMenu.showItems(o)}else{var r=[],s=[this.unBlockContact,this.sendResetPass,this.restore];this.accessToCreateOrEdit?(r.push(this.sendVerifyEmail),r.push(this.verifyManually)):(s.push(this.sendVerifyEmail),s.push(this.verifyManually)),this.accessToBlockOrUnBlockContact?r.push(this.block):s.push(this.block),r.push(this.convert),s.push(this.impersonateContact),this.moreOptionsMenu.hideItems(s),this.moreOptionsMenu.showItems(r)}else{var l=[],d=[this.unBlockContact,this.sendVerifyEmail,this.verifyManually,this.restore];this.accessToCreateOrEdit?l.push(this.sendResetPass):d.push(this.sendResetPass),this.accessToBlockOrUnBlockContact?l.push(this.block):d.push(this.block),this.accessToImpersonate?l.push(this.impersonateContact):d.push(this.impersonateContact),l.push(this.convert),this.moreOptionsMenu.hideItems(d),this.moreOptionsMenu.showItems(l)}}},{key:"addTicketClick",value:function(){this.router.navigateByUrl("tickets/create",{state:{data:{customerId:this.customerId}}})}},{key:"ticketLinkClick",value:function(t){this.router.navigateByUrl("tickets/"+t)}},{key:"cancelDialog",value:function(t){t.closeIcon.click()}},{key:"moreOptionsSelect",value:function(t){var e=this;t.item.id===C.a.Block?(this.blockUnblockContactDialog.show(),this.UnblockContact=!1,this.blockContact=!0,this.deleteContact=!1,this.restoreContact=!1,this.markAllTicketsSpam.checked=!0):t.item.id===C.a.Unblock?(this.blockUnblockContactDialog.show(),this.UnblockContact=!0,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.removeAllTicketsSpam.checked=!0):t.item.id===C.a.Restore?(this.deleteRestoreContactDialog.show(),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!0,this.removeRestoredTicketsSpam.checked=!0):t.item.id===C.a.SendVerificationEmail?(this.sendEmailAction(C.a.SendVerificationEmail),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.sendInvitation=!0):t.item.id===C.a.SendResetPasswordEmail?(this.sendEmailAction(C.a.SendResetPasswordEmail),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.sendResetPasswordMail=!0):t.item.id===C.a.VerifyNow?(this.sendEmailAction(C.a.VerifyNow),this.UnblockContact=!1,this.blockContact=!1,this.deleteContact=!1,this.restoreContact=!1,this.verifyNow=!0):t.item.id===C.a.ImpersonateContact?(this.spinService.showSpinner(),this.contactAPIService.requestToImpersonateGuidId(this.contactData.userId).then((function(t){Object(v.j)(),window.location.href=y.b+t.guidId})).catch((function(t){var c=Object(v.q)(t.error);400===t.status&&e.toastService.failureToast(c),e.spinService.hideSpinner()})).finally((function(){}))):t.item.id===C.a.ConvertToAgent&&(this.canConvertContact?(this.convertAgent.convertContactClick(this.contactData.userId),this.contactRootService.setProfileOrAddEdit(!0)):this.toastService.failureToast(Object(x.a)("NOPERMISSIONTOCONVERT")))}},{key:"sendEmailAction",value:function(t){var e=this;this.spinService.showSpinner(),this.contactAPIService.sendEmailAction(t,+this.customerId).then((function(c){c&&e.toastService.successToast(c.message),t===C.a.VerifyNow&&e.router.navigateByUrl("contacts")})).catch((function(t){var c=Object(v.q)(t.error);400===t.status&&e.toastService.failureToast(c)})).finally((function(){e.spinService.hideSpinner()}))}},{key:"updateDeleteContact",value:function(){var t=this;this.spinService.showSpinner();var e=+this.customerId;this.markConatctTicketAsSpam=!!this.markDeletedTicketTicketsSpam.checked,this.contactAPIService.deleteContact(e,this.markConatctTicketAsSpam).then((function(e){e&&(t.deleteRestoreContactDialog.hide(),t.toastService.successToast(e.message),t.router.navigateByUrl("contacts"))})).catch((function(e){t.deleteFailErrorMessage=e.error.errors[0].errorMessage,t.errorDialog.show()})).finally((function(){t.deleteRestoreContactDialog.hide(),t.spinService.hideSpinner()}))}},{key:"updateBlockContact",value:function(){var t=this;this.spinService.showSpinner();var e=+this.customerId;this.markTicketAsSpam=!!this.markAllTicketsSpam.checked,this.contactAPIService.blockContact(e,this.markTicketAsSpam).then((function(e){e&&(t.blockUnblockContactDialog.hide(),t.toastService.successToast(e.message),t.router.navigateByUrl("contacts"))})).catch((function(e){var c=Object(v.q)(e.error);400===e.status&&t.toastService.failureToast(c)})).finally((function(){t.blockUnblockContactDialog.hide(),t.spinService.hideSpinner()}))}},{key:"updateUnblockContact",value:function(){var t=this;this.spinService.showSpinner();var e=+this.customerId;this.removeTicketFromSpam=!!this.removeAllTicketsSpam.checked,this.contactAPIService.unblockContact(e,this.removeTicketFromSpam).then((function(e){e&&(t.blockUnblockContactDialog.hide(),t.toastService.successToast(e.message),t.router.navigateByUrl("contacts"))})).finally((function(){t.blockUnblockContactDialog.hide(),t.spinService.hideSpinner()}))}},{key:"errorDialogOkay",value:function(){this.errorDialog.hide()}},{key:"blockUnblockDialogOpen",value:function(){this.blockUnblockContactDialog.showCloseIcon=!0}},{key:"overlayClick",value:function(t){t.closeIcon.click()}},{key:"updateRestoreContact",value:function(){var t=this;this.spinService.showSpinner();var e=+this.customerId;this.removeContactTicketFromSpam=!!this.removeRestoredTicketsSpam.checked,this.contactAPIService.restoreContact(e,this.removeContactTicketFromSpam).then((function(e){e&&(t.deleteRestoreContactDialog.hide(),t.toastService.successToast(e.message),t.router.navigateByUrl("contacts"))})).finally((function(){t.deleteRestoreContactDialog.hide(),t.spinService.hideSpinner()}))}},{key:"gridBeforedataBound",value:function(t){0===t.count?(this.stillFetching=!1,this.nodataFound=!0):(this.stillFetching=!0,this.nodataFound=!1)}},{key:"ticketListDataBound",value:function(){this.stillFetching=!1,this.agentSettingsTab.element.querySelector(".e-content").scrollTop=0}}]),e}()).\u0275fac=function(t){return new(t||dc)(E.Nb(D.a),E.Nb(L.a),E.Nb(p.a),E.Nb(R.a),E.Nb(te.b),E.Nb(ee.c),E.Nb(B),E.Nb(I.a),E.Nb(p.g),E.Nb(_.b))},dc.\u0275cmp=E.Hb({type:dc,selectors:[["ng-component"]],viewQuery:function(t,e){var c;1&t&&(E.Gc(ie,!0),E.Qc(ne,!0),E.Qc(oe,!0),E.Qc(ae,!0),E.Qc(re,!0),E.Qc(se,!0),E.Qc(le,!0),E.Qc(de,!0),E.Qc(ue,!0),E.Qc(he,!0),E.Qc(be,!0),E.Qc(pe,!0)),2&t&&(E.xc(c=E.fc())&&(e.contactGroupDetailSideBar=c.first),E.xc(c=E.fc())&&(e.moreOptionsMenu=c.first),E.xc(c=E.fc())&&(e.deleteRestoreContactDialog=c.first),E.xc(c=E.fc())&&(e.blockUnblockContactDialog=c.first),E.xc(c=E.fc())&&(e.errorDialog=c.first),E.xc(c=E.fc())&&(e.markAllTicketsSpam=c.first),E.xc(c=E.fc())&&(e.removeAllTicketsSpam=c.first),E.xc(c=E.fc())&&(e.markDeletedTicketTicketsSpam=c.first),E.xc(c=E.fc())&&(e.removeRestoredTicketsSpam=c.first),E.xc(c=E.fc())&&(e.contactDetailEleRef=c.first),E.xc(c=E.fc())&&(e.convertAgent=c.first),E.xc(c=E.fc())&&(e.agentSettingsTab=c.first))},decls:14,vars:5,consts:[[1,"contact-detail","height100"],["contactDetailEleRef",""],["class","height100",4,"ngIf"],[1,"block-conatct-dialog"],["id","blockUnblockContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick","open",4,"ngIf"],[1,"delete-conatct-dialog"],["id","deleteRestoreContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick",4,"ngIf"],[1,"error-dialog"],["id","errorDialog","width","480px","isModal","true","height","Auto","closeOnEscape","true",3,"visible",4,"ngIf"],[1,"convert-contact-to-agent-dialog"],["convertAgent",""],["id","contextmenu","cssClass","context-view-more-options",3,"items","select","beforeOpen"],["moreOptionsContextMenu",""],[1,"height100"],[1,"flex-horizontal","pl-32","pt-3","pb-3"],[1,"flex-horizontal","title-width"],[1,"e-avatar","e-avatar-small","e-avatar-circle","short-code",3,"ngStyle"],[1,"no-wrap","ellipsis","flex-vertical","pl-2","contact-overview-name-header"],[1,"font-16","ellipsis","no-wrap"],[1,"font-12","ellipsis","no-wrap"],[1,"align-right"],["ejs-button","","class","e-flat e-btn e-outline edit-button",3,"click",4,"ngIf"],[1,"pl-3"],["class","pl-3 pr-3",4,"ngIf"],["class","cursor-pointer pl-3 pr-3 ",4,"ngIf"],[1,"flex-horizontal",2,"height","calc(100% - 74px)"],[1,"flex-vertical","ticket-count-banner","height100"],[1,"flex-horizontal","pl-32","height-100px","pr-32"],[1,"all-tickets","cursor-pointer","flex","width-100"],[1,"count-style","flex-vertical","align-center"],[1,"total-count"],[1,"count-description","no-wrap"],[1,"all-tickets","margin-left-52","flex","width-100"],[1,"total-count","green-color"],[1,"total-count","orange-color"],[1,"tab-style"],["id","element","height","100%",3,"animation"],["agentSettingsTab",""],[1,"e-tab-header"],[1,"flex","align-center"],[1,"e-content",2,"padding-top","18px","height","calc(100% - 40px) !important",3,"ngClass"],["tabConntent",""],[2,"height","100%"],[4,"ngIf"],["class","no-list-found text-center",4,"ngIf"],["id","userListGrid","allowPaging","true","allowResizing","true","locale","customNoRecordsFoundTemplate",3,"dataSource","hidden","pageSettings","allowSorting","beforeDataBound","dataBound"],["userListGrid",""],["field","ticketId","minWidth","80","width","100",3,"headerText"],["template",""],["field","title","minWidth","150","width","180","clipMode","EllipsisWithTooltip",3,"headerText"],["field","createdOn","minWidth","120px","width","130",3,"headerText"],["field","brand","minWidth","80px","width","120","clipMode","EllipsisWithTooltip",3,"headerText"],["field","status","width","120","minWidth","80px","textAlign","Center","clipMode","EllipsisWithTooltip",3,"headerText","allowSorting"],[1,"property-style"],[1,"property-header","flex-horizontal"],[1,"bd-icon","bd-icon-profile","user-icon-style"],[1,"header-style"],[2,"padding-left","17px","overflow","auto","height","calc(100% - 48px)"],[1,"label-style","secondary"],[1,"label-value-style","ellipsis","no-wrap"],[3,"date","format","timezone"],[4,"ngFor","ngForOf"],["ejs-button","",1,"e-flat","e-btn","e-outline","edit-button",3,"click"],[1,"pl-3","pr-3"],[1,"cursor-pointer"],["class","e-btn e-flat icon-rotate e-icon-btn more-option-button no-border more-option-button-background",3,"click",4,"ngIf"],[1,"e-btn","e-flat","icon-rotate","e-icon-btn","more-option-button","no-border","more-option-button-background",3,"click"],[1,"hd-icon","hd-vertical-menu"],[1,"cursor-pointer","pl-3","pr-3"],["type","grid"],[1,"no-list-found","text-center"],[1,"no-records"],["height","250","width","250","src","assets/images/no-tickets.png","alt","Loading",1,"no-ticket-image"],[1,"no-ticket-text"],[1,"no-wrap","ellipsis",3,"click"],[1,"primary-link-color","cursor-pointer"],[1,"no-wrap","ellipsis"],[1,"font-500",3,"ngStyle"],["class","label-style secondary ellipsis no-wrap",4,"ngIf"],["class","label-value-style ellipsis no-wrap",4,"ngIf"],["class","label-value-style",4,"ngIf"],[1,"label-style","secondary","ellipsis","no-wrap"],[1,"label-value-style"],["id","blockUnblockContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick","open"],["blockUnblockContactDialog",""],["header",""],["footerTemplate",""],["content",""],[3,"hidden"],["data-ripple","true","autofocus","",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat","block-contact-button",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true","autofocus","",1,"e-control","e-btn","e-primary","e-flat","unblock-contact-button",3,"click"],["blockUnblockForm",""],[1,"mb-5"],[3,"label","checked"],["markAllTicketsSpam",""],[1,"pb-3"],[1,"spam-action-font-size"],[1,"contact-details"],["removeAllTicketsSpam",""],["id","deleteRestoreContactDialog","width","480px","isModal","true","showCloseIcon","true","height","Auto","closeOnEscape","true",3,"visible","overlayClick"],["deleteRestoreContactDialog",""],["deleteRestoreForm",""],["markDeletedTicketTicketsSpam",""],["removeRestoredTicketsSpam",""],[2,"margin-bottom","5px"],["id","errorDialog","width","480px","isModal","true","height","Auto","closeOnEscape","true",3,"visible"],["errorDialog",""],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat",3,"click"],["errorForm",""]],template:function(t,e){1&t&&(E.Tb(0,"div",0,1),E.Jc(2,Ze,131,89,"div",2),E.Sb(),E.Tb(3,"div",3),E.Jc(4,tc,8,1,"ejs-dialog",4),E.Sb(),E.Tb(5,"div",5),E.Jc(6,nc,8,1,"ejs-dialog",6),E.Sb(),E.Tb(7,"div",7),E.Jc(8,sc,8,1,"ejs-dialog",8),E.Sb(),E.Tb(9,"div",9),E.Ob(10,"convert-contact-agent",null,10),E.Sb(),E.Tb(12,"ejs-contextmenu",11,12),E.ec("select",(function(t){return e.moreOptionsSelect(t)}))("beforeOpen",(function(){return e.contextMenuBeforeOpen(e.contactData)})),E.Sb()),2&t&&(E.xb(2),E.nc("ngIf",e.customerDetailList),E.xb(2),E.nc("ngIf",e.accessToBlockOrUnBlockContact),E.xb(2),E.nc("ngIf",e.accessToDeleteOrRestoreContact),E.xb(2),E.nc("ngIf",e.accessToDeleteOrRestoreContact),E.xb(4),E.nc("items",e.moreOptionsContacts))},directives:[a.n,lt,d.f,a.o,d.m,a.l,r.k,r.e,r.b,r.d,r.a,ce.a,a.m,l.c,dt.a,u.b,l.e],pipes:[U.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.contact-detail[_ngcontent-%COMP%]   .title-width[_ngcontent-%COMP%]{width:calc(100% - 300px)}.contact-detail[_ngcontent-%COMP%]   .short-code[_ngcontent-%COMP%]{height:40px;width:40px}.contact-detail[_ngcontent-%COMP%]   .all-tickets[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:4px;box-shadow:0 1px 4px rgba(18,22,31,.1);height:92px}.contact-detail[_ngcontent-%COMP%]   .margin-left-52[_ngcontent-%COMP%]{margin-left:52px}.contact-detail[_ngcontent-%COMP%]   .seperator-style[_ngcontent-%COMP%]{border-bottom:1px solid #cbd2e0;margin-left:24px;transform:rotate(90deg);width:77px}.contact-detail[_ngcontent-%COMP%]   .add-ticket-style[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:4px;box-shadow:0 1px 4px rgba(18,22,31,.1);height:92px;margin-left:24px;width:133px}.contact-detail[_ngcontent-%COMP%]   .count-style[_ngcontent-%COMP%]{padding:12px 0}.contact-detail[_ngcontent-%COMP%]   .total-count[_ngcontent-%COMP%]{font-size:32px;font-weight:400;text-align:center}.contact-detail[_ngcontent-%COMP%]   .total-count.green-color[_ngcontent-%COMP%]{color:#1aaa55}.contact-detail[_ngcontent-%COMP%]   .total-count.orange-color[_ngcontent-%COMP%]{color:#f56700}.contact-detail[_ngcontent-%COMP%]   .count-description[_ngcontent-%COMP%]{color:#2d3748;font-size:16px;font-weight:400;text-align:center}.contact-detail[_ngcontent-%COMP%]   .count-description.hover-all-tickets[_ngcontent-%COMP%]:hover{color:#0565ff;cursor:pointer;text-decoration:underline}.contact-detail[_ngcontent-%COMP%]   .plus-icon[_ngcontent-%COMP%]{color:#007aff;font-size:24px;height:24px;margin:7px 54px 10px;padding:0;width:24px}.contact-detail[_ngcontent-%COMP%]   .new-ticket[_ngcontent-%COMP%]{color:#007aff;font-size:14px;font-weight:500;text-align:center}.contact-detail[_ngcontent-%COMP%]   .new-ticket[_ngcontent-%COMP%]:hover{color:#0565ff;cursor:pointer;text-decoration:underline}.contact-detail[_ngcontent-%COMP%]   .property-style[_ngcontent-%COMP%]{border-color:#e2e8f0;border-style:solid;border-width:1px 0 0 1px;height:100%;width:300px}.contact-detail[_ngcontent-%COMP%]   .property-header[_ngcontent-%COMP%]{background:#f3f7fa;border:solid #e2e8f0;border-width:0 0 1px;height:44px;width:300px}.contact-detail[_ngcontent-%COMP%]   .user-icon-style[_ngcontent-%COMP%]{color:#4a5568;font-size:18px;padding:14px 10px 15px 22px}.contact-detail[_ngcontent-%COMP%]   .header-style[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.contact-detail[_ngcontent-%COMP%]   .label-style[_ngcontent-%COMP%]{font-size:14px;font-weight:400;padding:10px 8px 5px}.contact-detail[_ngcontent-%COMP%]   .label-value-style[_ngcontent-%COMP%]{font-size:14px;font-weight:400;padding:0 8px 9px}.contact-detail[_ngcontent-%COMP%]   .e-content[_ngcontent-%COMP%]{height:calc(100% - 40px)!important}.contact-detail[_ngcontent-%COMP%]   .more-option-button[_ngcontent-%COMP%]{background:none!important;border-radius:50%!important;display:inline-block;height:32px!important;line-height:32px;margin:0!important;padding:0!important;width:32px!important}.contact-detail[_ngcontent-%COMP%]   .more-option-button[_ngcontent-%COMP%]:hover{background:#edf2f7!important}.contact-detail[_ngcontent-%COMP%]   .icon-rotate[_ngcontent-%COMP%]{transform:rotate(90deg)}.contact-detail[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]{width:82px}.contact-detail[_ngcontent-%COMP%]   .bd-icon-high[_ngcontent-%COMP%]:before{color:#f9a400}.contact-detail[_ngcontent-%COMP%]   .bd-icon-normal[_ngcontent-%COMP%]:before{color:#1dc060}.contact-detail[_ngcontent-%COMP%]   .bd-icon-low[_ngcontent-%COMP%]:before{color:#3395ff}.contact-detail[_ngcontent-%COMP%]   .icon-urgent-color[_ngcontent-%COMP%]{color:red}.contact-detail[_ngcontent-%COMP%]   .bd-icon-critical[_ngcontent-%COMP%]:before{color:#e20c00}.contact-detail[_ngcontent-%COMP%]   .height-100px[_ngcontent-%COMP%]{height:100px}.contact-detail[_ngcontent-%COMP%]   .ticket-count-banner[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden;width:calc(100% - 300px)}.contact-detail[_ngcontent-%COMP%]   .tab-style[_ngcontent-%COMP%]{height:calc(100% - 100px);padding-left:32px;padding-right:32px}.contact-detail[_ngcontent-%COMP%]   .pr-32[_ngcontent-%COMP%]{padding-right:32px}.context-view-more-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .e-menu-item[_ngcontent-%COMP%]   .e-menu-icon[_ngcontent-%COMP%]{padding:0}.contact-overview-name-header[_ngcontent-%COMP%]{max-width:calc(100% - 40px)!important}","body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.success[_ngcontent-%COMP%]{color:#0dbfb0}.failure[_ngcontent-%COMP%]{color:#777}.contact-grid[_ngcontent-%COMP%]   .e-btn[_ngcontent-%COMP%]{padding-bottom:0!important;padding-top:0!important}.contact-grid[_ngcontent-%COMP%]   .e-btn[_ngcontent-%COMP%]:active{box-shadow:none!important}.contact-grid[_ngcontent-%COMP%]   .e-icon-btn[_ngcontent-%COMP%]{padding-bottom:0!important;padding-top:0!important}.contact-grid[_ngcontent-%COMP%]   .hd-icon[_ngcontent-%COMP%]{padding:0!important}.contact-grid[_ngcontent-%COMP%]   .e-content[_ngcontent-%COMP%]{overflow-y:auto!important}.contact-grid[_ngcontent-%COMP%]   .cursor-auto[_ngcontent-%COMP%]{cursor:auto!important}.contact-details[_ngcontent-%COMP%]{line-height:25px;padding-left:20px;padding-right:10px}.block-contact-button[_ngcontent-%COMP%]{background-color:red!important;border-color:red!important;max-width:160px!important}.unblock-contact-button[_ngcontent-%COMP%]{max-width:195px!important}.mb-5[_ngcontent-%COMP%]{margin-bottom:5px!important}.spam-action-font-size[_ngcontent-%COMP%]{font-size:13px!important}.contact-container[_ngcontent-%COMP%], .height-100[_ngcontent-%COMP%]{height:100%}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]{overflow:hidden}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]{box-sizing:content-box;min-height:50px}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .e-chip[_ngcontent-%COMP%]{background:#fff!important}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .e-chip[_ngcontent-%COMP%]   .e-chip-text[_ngcontent-%COMP%]{font-size:14px}.contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%], .contact-container[_ngcontent-%COMP%]   .contact-chip-list[_ngcontent-%COMP%]   .chip-position[_ngcontent-%COMP%]   .e-chip[_ngcontent-%COMP%]:hover{background:#f5f9fd!important;border-color:#4a90e2!important}.context-view-more-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .e-menu-item[_ngcontent-%COMP%]   .e-menu-icon[_ngcontent-%COMP%]{padding:0}"]}),dc),hc=((lc=function(){function e(c,i,n){t(this,e),this.http=c,this.spinService=i,this.router=n}return c(e,[{key:"resolve",value:function(t){var e=this;return this.spinService.showSpinner(),this.http.get(g.a.UserList+"/"+ +t.params.customerId).toPromise().catch((function(t){return e.router.navigateByUrl("error",{state:{message:t.error.errors[0].errorMessage,type:"contact"},skipLocationChange:!0})}))}}]),e}()).\u0275fac=function(t){return new(t||lc)(E.bc(A.b),E.bc(L.a),E.bc(p.g))},lc.\u0275prov=E.Jb({token:lc,factory:lc.\u0275fac}),lc),bc=n("6pkR"),pc=n("2Cb5"),mc=n("EiDu"),gc=["addEditContactDialog"],fc=["contactForms"],vc=["contentContactForm"],Cc=["contactName"],Tc=["contactDisplayName"],Sc=["contactEmail"],Oc=["contactGroup"],kc=["contactGroupAccess"];function xc(t,e){if(1&t&&(E.Tb(0,"div"),E.Lc(1),E.hc(2,"translate"),E.Sb()),2&t){var c=E.gc(2);E.xb(1),E.Nc(" ",E.ic(2,1,c.contactDialogTitle)," ")}}function yc(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div",11),E.Tb(1,"span",12),E.ec("click",(function(){return E.Bc(c),E.gc(3).navigateToContactForms()})),E.Tb(2,"span",13),E.Lc(3),E.hc(4,"translate"),E.Sb(),E.Sb(),E.Sb()}2&t&&(E.xb(3),E.Mc(E.ic(4,1,"CONFIGUREFIELDS")))}function Ec(t,e){if(1&t){var c=E.Ub();E.Jc(0,yc,5,3,"div",8),E.Tb(1,"div"),E.Tb(2,"button",9),E.ec("click",(function(){return E.Bc(c),E.gc(2).cancelDialog()})),E.Lc(3),E.hc(4,"translate"),E.Sb(),E.Tb(5,"button",10),E.ec("click",(function(){return E.Bc(c),E.gc(2).addUpdateContact()})),E.Lc(6),E.hc(7,"translate"),E.Sb(),E.Sb()}if(2&t){var i=E.gc(2);E.nc("ngIf",i.manageFieldPermission),E.xb(3),E.Mc(E.ic(4,3,"CANCEL")),E.xb(3),E.Mc(E.ic(7,5,i.contactDialogSubmitButtonText))}}function Dc(t,e){if(1&t&&(E.Tb(0,"div",40),E.Ob(1,"span",41),E.hc(2,"safe"),E.Sb()),2&t){var c=E.gc(3);E.xb(1),E.nc("innerHTML",E.jc(2,1,c.errorMessage,"html"),E.Cc)}}function Ac(t,e){1&t&&(E.Tb(0,"div",42),E.Tb(1,"span",20),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(2),E.Nc(" ",E.ic(3,1,"FIELDREQUIRED"),""))}function Nc(t,e){1&t&&(E.Tb(0,"div",42),E.Tb(1,"span",20),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(2),E.Nc(" ",E.ic(3,1,"INVALIDNAME"),""))}function Mc(t,e){1&t&&(E.Tb(0,"div",42),E.Tb(1,"span",20),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(2),E.Nc(" ",E.ic(3,1,"FIELDREQUIRED"),""))}function Ic(t,e){1&t&&(E.Tb(0,"div",42),E.Tb(1,"span",20),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(2),E.Nc(" ",E.ic(3,1,"INVALIDDISPLAYNAME"),""))}function Lc(t,e){1&t&&(E.Tb(0,"div",42),E.Tb(1,"span",20),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(2),E.Nc(" ",E.ic(3,1,"FIELDREQUIRED"),""))}function Pc(t,e){1&t&&(E.Tb(0,"div",42),E.Tb(1,"span",20),E.Lc(2),E.hc(3,"translate"),E.Sb(),E.Sb()),2&t&&(E.xb(2),E.Nc(" ",E.ic(3,1,"EMAILNOTVALID"),""))}function Bc(t,e){if(1&t){var c=E.Ub();E.Tb(0,"div",null,14),E.Jc(2,Dc,3,4,"div",15),E.Tb(3,"div",16),E.Tb(4,"div",17),E.Tb(5,"div",18),E.Tb(6,"div",19),E.Tb(7,"label"),E.Lc(8),E.hc(9,"translate"),E.Tb(10,"span",20),E.Lc(11,"*"),E.Sb(),E.Sb(),E.Tb(12,"ejs-textbox",21,22),E.ec("blur",(function(){return E.Bc(c),E.gc(2).contactNameFocusOut()}))("change",(function(t){return E.Bc(c),E.gc(2).contactNameChange(t)}))("input",(function(t){return E.Bc(c),E.gc(2).contactNameInput(t)})),E.hc(14,"translate"),E.Sb(),E.Jc(15,Ac,4,3,"div",23),E.Jc(16,Nc,4,3,"div",23),E.Tb(17,"div",24),E.Ob(18,"span",25),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(19,"div",17),E.Tb(20,"div",18),E.Tb(21,"div",19),E.Tb(22,"label"),E.Lc(23),E.hc(24,"translate"),E.Tb(25,"span",20),E.Lc(26,"*"),E.Sb(),E.Sb(),E.Tb(27,"ejs-textbox",21,26),E.ec("blur",(function(){return E.Bc(c),E.gc(2).contactDisplayNameFocusOut()}))("change",(function(t){return E.Bc(c),E.gc(2).contactDisplayNameChange(t)}))("input",(function(t){return E.Bc(c),E.gc(2).contactDisplayNameInput(t)})),E.hc(29,"translate"),E.Sb(),E.Jc(30,Mc,4,3,"div",23),E.Jc(31,Ic,4,3,"div",23),E.Tb(32,"div",27),E.Ob(33,"span",25),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(34,"div",17),E.Tb(35,"div",18),E.Tb(36,"div",19),E.Tb(37,"label"),E.Lc(38),E.hc(39,"translate"),E.Tb(40,"span",20),E.Lc(41,"*"),E.Sb(),E.Sb(),E.Tb(42,"ejs-textbox",28,29),E.ec("blur",(function(){return E.Bc(c),E.gc(2).contactEmailFocusOut()}))("change",(function(t){return E.Bc(c),E.gc(2).contactEmailChange(t)})),E.hc(44,"translate"),E.Sb(),E.Jc(45,Lc,4,3,"div",23),E.Jc(46,Pc,4,3,"div",23),E.Tb(47,"div",30),E.Ob(48,"span",25),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(49,"div",17),E.Tb(50,"div",18),E.Tb(51,"div",19),E.Tb(52,"label"),E.Lc(53),E.hc(54,"translate"),E.Sb(),E.Tb(55,"ejs-dropdownlist",31,32),E.ec("change",(function(t){return E.Bc(c),E.gc(2).contactGroupChange(t)}))("dataBound",(function(){return E.Bc(c),E.gc(2).contactGroupDataBound()})),E.hc(57,"translate"),E.hc(58,"translate"),E.Sb(),E.Tb(59,"div",33),E.Ob(60,"span",25),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(61,"div",34),E.Tb(62,"div",18),E.Tb(63,"div",19),E.Tb(64,"label"),E.Lc(65),E.hc(66,"translate"),E.Sb(),E.Ob(67,"ejs-dropdownlist",35,36),E.hc(69,"translate"),E.hc(70,"translate"),E.Tb(71,"div",37),E.Ob(72,"span",25),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(73,"form-builder",38,39),E.ec("fieldChange",(function(t){return E.Bc(c),E.gc(2).fieldChange(t)})),E.Sb(),E.Sb()}if(2&t){var i=E.gc(2);E.xb(2),E.nc("ngIf",i.errorMessage),E.xb(6),E.Nc(" ",E.ic(9,35,"NAME")," "),E.xb(4),E.oc("placeholder",E.ic(14,37,"TEXTBOXPLACEHOLDER")),E.nc("htmlAttributes",i.inputAttribute),E.xb(3),E.nc("ngIf",i.contactNameRequired),E.xb(1),E.nc("ngIf",i.contactNameIsError),E.xb(7),E.Nc(" ",E.ic(24,39,"DISPLAYNAME")," "),E.xb(4),E.oc("placeholder",E.ic(29,41,"TEXTBOXPLACEHOLDER")),E.nc("htmlAttributes",i.inputAttribute),E.xb(3),E.nc("ngIf",i.contactDisplayNameRequired),E.xb(1),E.nc("ngIf",i.contactDisplayNameIsError),E.xb(7),E.Nc(" ",E.ic(39,43,"EMAIL")," "),E.xb(4),E.oc("placeholder",E.ic(44,45,"TEXTBOXPLACEHOLDER")),E.nc("htmlAttributes",i.inputAttribute),E.xb(3),E.nc("ngIf",i.contactEmailRequired),E.xb(1),E.nc("ngIf",i.invalidEmail),E.xb(7),E.Nc(" ",E.ic(54,47,"CONTACTGROUP")," "),E.xb(2),E.oc("placeholder",E.ic(57,49,"DROPDOWNPLACEHOLDER")),E.oc("filterBarPlaceholder",E.ic(58,51,"SEARCH")),E.nc("dataSource",i.contactGroupDataConfig)("allowFiltering",!0)("fields",i.contactGroupFields)("htmlAttributes",i.autoCompleteAttribute)("showClearButton",!0)("query",i.contactGroupDropDownQuery),E.xb(6),E.nc("hidden",!i.showAcessScope),E.xb(4),E.Nc(" ",E.ic(66,53,"CONTACTACCESSSCOPE")," "),E.xb(2),E.pc("placeholder"," ",E.ic(69,55,"DROPDOWNPLACEHOLDER"),""),E.oc("filterBarPlaceholder",E.ic(70,57,"SEARCH")),E.nc("dataSource",i.accessList)("fields",i.accessFields)("htmlAttributes",i.autoCompleteAttribute),E.xb(6),E.nc("collections",i.contactCollection)("myForm",i.myForm)("fieldDependency",i.fieldDependencyObj)}}function Rc(t,e){if(1&t){var c=E.Ub();E.Tb(0,"ejs-dialog",3,4),E.ec("created",(function(){return E.Bc(c),E.gc().contactDialogCreated()}))("close",(function(){return E.Bc(c),E.gc().contactDialogClose()}))("beforeOpen",(function(){return E.Bc(c),E.gc().contactDialogBeforeOpen()}))("overlayClick",(function(){return E.Bc(c),E.gc().dialogOverlayClick()}))("beforeClose",(function(t){return E.Bc(c),E.gc().beforeDialogClose(t)})),E.Jc(2,xc,3,3,"ng-template",null,5,E.Kc),E.Jc(4,Ec,8,7,"ng-template",null,6,E.Kc),E.Jc(6,Bc,75,59,"ng-template",null,7,E.Kc),E.Sb()}if(2&t){var i=E.gc();E.nc("visible",!1)("position",i.dialogContactPosition)}}function wc(t,e){if(1&t&&(E.Ob(0,"span",43),E.hc(1,"safe")),2&t){var c=E.gc();E.nc("innerHTML",E.jc(1,1,c.commonInputValidationErrorMessage,"html"),E.Cc)}}var jc,Fc,_c,Uc=[{path:"",component:(jc=function(){function e(c,i,n,o,a,r,s,l){t(this,e),this.http=c,this.appRootService=i,this.contactRootService=n,this.spinService=o,this.contactAPIService=a,this.toastService=r,this.appPermissionService=s,this.router=l,this.dialogContactPosition={X:"right"},this.validationFailed=!1,this.contactGroupFields={text:"name",value:"id"},this.autoCompleteAttribute={autocomplete:"anyrandomstring"},this.inputAttribute={maxlength:O.s,autocomplete:"anyrandomstring"},this.accessList=[{value:1,text:Object(x.a)("CONTACTACCESSSCOPE1")},{value:2,text:Object(x.a)("CONTACTACCESSSCOPE2")}],this.accessFields={text:"text",value:"value"},this.accessToCreateOrEdit=this.appPermissionService.hasPermission([k.a.CreateOrEditContact,k.a.ViewContact]),this.manageFieldPermission=this.appPermissionService.hasPermission([k.a.ManageTicketFieldsAndForms]),this.contactGroupDropDownQuery=new m.g,this.contactGroupDataConfig=new m.a({url:g.a.ContactGroupCollectionForDropdown,adaptor:new f.b}),this.commonInputValidationErrorMessage=v.e}return c(e,[{key:"ngAfterViewInit",value:function(){var t=this;this.showAddEditContactGroup=this.contactRootService.showAddEditContact.subscribe((function(e){t.addEditContactDialog&&(t.addEditContactDialog.width="500px",t.addEditContactDialog.height="100%",t.addEditContactDialog.showCloseIcon=!0,t.errorMessage=null,t.addEditContactDialog.position=t.dialogContactPosition,t.actionType=e,"Add"==e&&(t.getContactFieldDependency(),t.addEditContactDialog.show(),setTimeout((function(){t.contactForm.defaultValueObjReset(),setTimeout((function(){t.setDependencyDataSource()}),1e3)}))))})),this.newContactGroupObject=this.contactRootService.newContactGroupObject.subscribe((function(e){t.contactAPIService.getContactForm().then((function(c){Object(T.X)(t.actionType)||("Add"==t.actionType?t.currentEditContact=null:(t.currentEditContact=e,t.setContactObjectValues(t.currentEditContact))),t.contactCollection=Object(Yt.b)(c.result,t.currentEditContact,t.actionType&&"Add"!==t.actionType?"contact":"create"),setTimeout((function(){t.contactCollection.fieldDisplayCondition.length>0&&t.contactForm.applyFieldDisplayCondition(t.contactCollection.fieldDisplayCondition)}),1e3),t.spinService.hideSpinner(),"Edit"==t.actionType&&(t.getContactFieldDependency(),setTimeout((function(){t.addEditContactDialog.show(),setTimeout((function(){t.setDependencyDataSource()}),1e3)})))}))})),this.addorEditAction=this.contactRootService.addorEditAction.subscribe((function(e){t.contactDialogTitle=e})),this.setContactGroupDialogSubmitButtonText=this.contactRootService.setContactGroupDialogSubmitButtonText.subscribe((function(e){t.contactDialogSubmitButtonText=e})),this.profileOrAddEdit=this.contactRootService.profileOrAddEdit.subscribe((function(e){t.isProfilePage=e})),this.setContactGroupOnLoad=this.contactRootService.setContactGroupOnLoad.subscribe((function(e){t.contactGroupDropDownQuery=(new m.g).addParams("includeAdditionalIds",e),setTimeout((function(){t.contactGroup.value=+e}),500)}))}},{key:"getContactFieldDependency",value:function(){var t=this,e=bc.b.FormFieldDependency;e=Object(v.i)(e,"fieldModuleId",""+bc.a.Contact);var c="Edit"==this.actionType?Object(v.i)(e,"isReadOnlyOptionsRequired","true"):e;return this.http.get(c).toPromise().then((function(e){t.fieldDependencyObj=e.result})).catch((function(e){if(400===e.status){var c=Object(v.q)(e.error);t.toastService.failureToast(c)}}))}},{key:"setDependencyDataSource",value:function(){var t=this;setTimeout((function(){Object(T.X)(t.fieldDependencyObj)||t.contactForm.assignFieldDependency(t.fieldDependencyObj,!0)}),1500)}},{key:"setContactObjectValues",value:function(t){if(!Object(T.X)(t)){this.contactName.value=t.contactName,this.contactDisplayName.value=t.contactDisplayName,this.contactEmail.value=t.emailId;var e=!Object(T.X)(t.contactGroup)&&t.contactGroup.length>0&&t.contactGroup[0].id>0?t.contactGroup[0].id:null;Object(T.X)(e)?this.showAcessScope=!1:(this.showAcessScope=!0,this.contactGroup.query=(new m.g).addParams("includeAdditionalIds",e.toString()),this.contactGroupAccess.value=!Object(T.X)(t.contactGroup)&&t.contactGroup.length>0?t.contactGroup[0].accessScopeId:null),this.contactGroup.value=e}}},{key:"contactDialogCreated",value:function(){this.dialogCreate=!0}},{key:"contactDialogClose",value:function(){Object(O.V)(!1),this.errorMessage=null,this.formUnTouch(),this.actionType=null,this.resetContactStaticFormValue(),this.removeCustomError()}},{key:"contactDialogBeforeOpen",value:function(){this.errorMessage=null,Object(O.V)(!0)}},{key:"dialogOverlayClick",value:function(){this.addEditContactDialog.closeIcon.click(),O.H||(this.errorMessage=null,this.formUnTouch(),this.actionType=null,this.resetContactStaticFormValue(),this.removeCustomError())}},{key:"formValues",value:function(){var t=Object(Yt.c)(this.contactForm.value);return Object.assign(Object.assign({},t),{contactName:this.contactName&&!Object(T.X)(this.contactName.value)?this.contactName.value.trim():null,contactDisplayName:this.contactDisplayName&&!Object(T.X)(this.contactDisplayName.value)?this.contactDisplayName.value.trim():null,emailId:this.contactEmail&&!Object(T.X)(this.contactEmail.value)?this.contactEmail.value.trim():null,contactGroup:this.contactGroup&&!Object(T.X)(this.contactGroup.value)?this.contactGroup.value.toString():null,contactGroupAccessScopeId:this.contactGroupAccess&&this.contactGroup&&!Object(T.X)(this.contactGroup.value)?this.contactGroupAccess.value:null})}},{key:"getFormJson",value:function(){var t=this,e="",c=this.formValues();return Object.keys(c).map((function(i){e=i,Object(T.X)(c[i])||"contactTag"!=e||(c[i]=t.contactForm.ej2Obj.contactTag.text)})),c}},{key:"addUpdateContact",value:function(){var t=this;if(this.contactForm.setDefaultDependableObjValue(),this.errorMessage=null,this.contactNameFocusOut(),this.contactEmailFocusOut(),this.contactDisplayNameFocusOut(),this.validationCheck()){var e=this.getFormJson();this.clearCustomError(),this.removeCustomError(),this.spinService.showSpinner(),"ADD"===this.contactDialogSubmitButtonText?this.contactAPIService.addContact(e).then((function(e){e&&(t.addEditContactDialog.hide(),t.spinService.hideSpinner(),t.toastService.successToast(e.message),t.router.navigateByUrl("/contacts/"+e.id))})).catch((function(e){400===e.status&&(t.validationFailed=!0,e.error&&e.error.message&&t.toastService.failureToast(e.error.message),t.customErrorHandling(e.error.errors))})).finally((function(){t.spinService.hideSpinner()})):"UPDATE"===this.contactDialogSubmitButtonText&&this.contactAPIService.editContact(e,this.currentEditContact.userId).then((function(e){e&&(t.addEditContactDialog.hide(),t.spinService.hideSpinner(),t.isProfilePage?(Object(O.V)(!1),location.reload()):t.contactRootService.setContactGridAction("refreshData"),t.toastService.successToast(e.message))})).catch((function(e){400===e.status&&(t.validationFailed=!0,e.error&&e.error.message&&t.toastService.failureToast(e.error.message),t.customErrorHandling(e.error.errors))})).finally((function(){t.spinService.hideSpinner()}))}else[this.contactForm].forEach((function(t){Object.keys(t.myForm.controls).forEach((function(e){t.myForm.controls[e].markAsTouched()}))})),setTimeout((function(){t.formErrorEleFocus()}))}},{key:"customErrorHandling",value:function(t){var e=this;t.forEach((function(t){e.contactForm.customErrorAppend(t),e.staticFieldsCustomErrorAppend(t)})),setTimeout((function(){e.formErrorEleFocus()}))}},{key:"staticFieldsCustomErrorAppend",value:function(t){var e=this,c=this.addEditContactDialogHtmlElement;if(c){var i=c.nativeElement;if(!t.length){var n=i.querySelector("#"+this.convertToCamelCase(t.field)+".custom-error span.error");n&&(n.classList.add("custom-error-appended"),n.innerText=t.errorMessage)}t.length&&t.forEach((function(t){var c=i.querySelector("#"+e.convertToCamelCase(t.field)+".custom-error span.error");c&&(c.classList.add("custom-error-appended"),c.innerText=t.errorMessage)}))}}},{key:"convertToCamelCase",value:function(t){return t.charAt(0).toLowerCase()+t.slice(1)}},{key:"clearCustomError",value:function(){[this.contactForm].forEach((function(t){t.clearCustomErrors()}))}},{key:"formErrorEleFocus",value:function(){var t=this.addEditContactDialogHtmlElement;if(t&&t.nativeElement){var e,c=t.nativeElement;if((e=this.addEditContactDialog.element.querySelector(".error-msg"))||(e=this.addEditContactDialog.element.querySelector(".custom-error-appended")),!e)return;var i=Object(T.C)(e,".product-header");if(i){var n=i.querySelector("input");Object(T.X)(n)?i.querySelector("textarea").focus():n.focus()}else c.querySelector("input").focus()}}},{key:"cancelDialog",value:function(){this.addEditContactDialog.closeIcon.click(),O.H||(this.formUnTouch(),this.errorMessage=null,this.actionType=null,this.resetContactStaticFormValue(),this.removeCustomError())}},{key:"resetContactStaticFormValue",value:function(){this.contactNameRequired=!1,this.contactNameIsError=!1,this.contactDisplayNameRequired=!1,this.contactDisplayNameIsError=!1,this.contactEmailRequired=!1,this.invalidEmail=!1,this.contactName.value=null,this.contactDisplayName.value=null,this.contactEmail.value=null,this.contactGroup.value=null,Object(T.X)(this.contactGroupAccess)||(this.contactGroupAccess.value=null),this.validationFailed=!1,this.contactForm.formValue.persistance={}}},{key:"formUnTouch",value:function(){[this.contactForm].forEach((function(t){Object.keys(t.myForm.controls).forEach((function(e){t.myForm.controls[e].reset()})),setTimeout((function(){t.resettingData()}))}))}},{key:"ngOnDestroy",value:function(){this.addEditContactDialog&&this.dialogCreate&&this.addEditContactDialog.element&&Object(T.I)(this.addEditContactDialog.element),this.showAddEditContactGroup.unsubscribe(),this.newContactGroupObject.unsubscribe(),this.addorEditAction.unsubscribe(),this.setContactGroupDialogSubmitButtonText.unsubscribe(),this.profileOrAddEdit.unsubscribe()}},{key:"beforeDialogClose",value:function(t){if(t.isInteracted){var e=window.confirm(""+Object(x.a)("CONFORMDATALOSE"));t.cancel=!e,t.cancel||Object(O.V)(!1)}}},{key:"convertArrayToArrayString",value:function(t,e){var c="";return"contactGroup"===t&&(c=e.toString()),c}},{key:"fieldChange",value:function(t){if(!Object(T.X)(t))if(Object(T.X)(t.element))if(Object(T.X)(t.container))if(Object(T.X)(t.event.element)){if(!Object(T.X)(t.event.container)){var e=t.event.container.parentElement.parentElement.parentElement.querySelector(".custom-error span.error");Object(T.X)(e)||(e.classList.remove("custom-error-appended"),e.innerText="")}}else{var c=t.event.element.parentElement.parentElement.querySelector(".custom-error span.error");Object(T.X)(c)||(c.classList.remove("custom-error-appended"),c.innerText="")}else t.container.parentElement.parentElement.parentElement.querySelector(".custom-error span.error").classList.remove("custom-error-appended"),t.container.parentElement.parentElement.parentElement.querySelector(".custom-error span.error").innerText="";else t.element.parentElement.parentElement.querySelector(".custom-error span.error").classList.remove("custom-error-appended"),t.element.parentElement.parentElement.querySelector(".custom-error span.error").innerText=""}},{key:"contactGroupChange",value:function(t){this.contactGroup&&this.contactGroup.value?(this.showAcessScope=!0,this.contactGroupAccess&&(this.contactGroupAccess.value=Object(T.X)(this.currentEditContact)?1:this.currentEditContact.contactGroup[0].accessScopeId)):(this.contactGroupAccess.value=null,this.showAcessScope=!1),this.validationFailed&&this.fieldChange(t)}},{key:"contactGroupDataBound",value:function(){Object(T.X)(this.currentEditContact)||(this.contactGroup.value=this.currentEditContact.contactGroup[0].id)}},{key:"contactDisplayNameFocusOut",value:function(){if(Object(T.X)(this.contactDisplayName.value))this.contactDisplayNameRequired=!0;else{var t=this.contactDisplayName.value.trim();Object(T.X)(t)||0!==t.length||(this.contactDisplayNameRequired=!0)}}},{key:"contactDisplayNameInput",value:function(t){var e=t.value;if(this.contactDisplayNameRequired=!(!Object(T.X)(e)&&""!==e.trim()),e){var c=!F.c.test(e.trim());this.contactDisplayNameIsError=!!c}else this.contactDisplayNameIsError=!1}},{key:"contactDisplayNameChange",value:function(t){if(null!=this.contactDisplayName.value){this.contactDisplayNameRequired=!1;var e=!F.c.test(this.contactDisplayName.value);this.contactDisplayNameIsError=!!e}else this.contactDisplayNameRequired=!1,this.contactDisplayNameIsError=!1;this.validationFailed&&this.fieldChange(t)}},{key:"contactNameFocusOut",value:function(){if(Object(T.X)(this.contactName.value))this.contactNameRequired=!0;else{var t=this.contactName.value.trim();Object(T.X)(t)||0!==t.length||(this.contactNameRequired=!0)}}},{key:"contactNameChange",value:function(t){if(null!=this.contactName.value){this.contactNameRequired=!1;var e=!F.j.test(this.contactName.value.trim());this.contactNameIsError=!!e}else this.contactNameRequired=!1,this.contactNameIsError=!1;this.validationFailed&&this.fieldChange(t)}},{key:"contactNameInput",value:function(t){var e=t.value;if(this.contactNameRequired=!(!Object(T.X)(e)&&""!==e.trim()),e){var c=!F.j.test(e.trim());this.contactNameIsError=!!c}else this.contactNameIsError=!1}},{key:"contactEmailFocusOut",value:function(){if(Object(T.X)(this.contactEmail.value))return this.invalidEmail=!1,void(this.contactEmailRequired=!0);var t=this.contactEmail.value.trim();if(t&&t.length>0){if(this.contactEmailRequired=!1,!F.e.test(t.trim()))return void(this.invalidEmail=!0);this.invalidEmail=!1}else this.invalidEmail=!1,this.contactEmailRequired=!0}},{key:"contactEmailChange",value:function(t){this.contactEmailRequired=!1,this.validationFailed&&this.fieldChange(t)}},{key:"validationCheck",value:function(){var t=this.contactForm.checkInputValidationErrorExist(),e=this.contactForm.myForm.valid;return e=e&&!t,[this.contactForm].forEach((function(t){e=e&&t.customUploadValidation()})),e&&!(this.contactNameRequired||this.contactNameIsError||this.contactDisplayNameRequired||this.contactDisplayNameIsError||this.contactEmailRequired||this.invalidEmail)}},{key:"removeCustomError",value:function(){Object(T.X)(this.addEditContactDialogHtmlElement)||[].slice.call(this.addEditContactDialogHtmlElement.nativeElement.querySelectorAll(".custom-error span.error")).forEach((function(t){t.classList.remove("custom-error-appended"),t.innerText=""}))}},{key:"navigateToContactForms",value:function(){window.open("./admin/contact-fields","_blank")}}]),e}(),jc.\u0275fac=function(t){return new(t||jc)(E.Nb(A.b),E.Nb(D.a),E.Nb(I.a),E.Nb(L.a),E.Nb(B),E.Nb(P.a),E.Nb(w.a),E.Nb(p.g))},jc.\u0275cmp=E.Hb({type:jc,selectors:[["ng-component"]],viewQuery:function(t,e){var c;1&t&&(E.Qc(gc,!0),E.Qc(fc,!0),E.Qc(vc,!0),E.Qc(Cc,!0),E.Qc(Tc,!0),E.Qc(Sc,!0),E.Qc(Oc,!0),E.Qc(kc,!0)),2&t&&(E.xc(c=E.fc())&&(e.addEditContactDialog=c.first),E.xc(c=E.fc())&&(e.contactForm=c.first),E.xc(c=E.fc())&&(e.addEditContactDialogHtmlElement=c.first),E.xc(c=E.fc())&&(e.contactName=c.first),E.xc(c=E.fc())&&(e.contactDisplayName=c.first),E.xc(c=E.fc())&&(e.contactEmail=c.first),E.xc(c=E.fc())&&(e.contactGroup=c.first),E.xc(c=E.fc())&&(e.contactGroupAccess=c.first))},decls:5,vars:1,consts:[["id","addEditContactDialog","width","400px","isModal","true","showCloseIcon","true","closeOnEscape","true","height","100%","cssClass","contact-dialog rounded-0",3,"visible","position","created","close","beforeOpen","overlayClick","beforeClose",4,"ngIf"],[2,"height","100%"],["errorInputValidation",""],["id","addEditContactDialog","width","400px","isModal","true","showCloseIcon","true","closeOnEscape","true","height","100%","cssClass","contact-dialog rounded-0",3,"visible","position","created","close","beforeOpen","overlayClick","beforeClose"],["addEditContactDialog",""],["header",""],["footerTemplate",""],["content",""],["class","float-left",4,"ngIf"],["data-ripple","true",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat",3,"click"],[1,"float-left"],[1,"align-right","flex-horizontal","field-link",3,"click"],[1,"pt-1","link"],["contentContactForm",""],["class","pl-3",4,"ngIf"],[1,"contact-form"],[1,"custom-form-builder","form-builder","product-header"],[1,"form-group","row","flex-vertical"],[1,"col"],[1,"error"],["autocomplete","off",3,"placeholder","htmlAttributes","blur","change","input"],["contactName",""],["class","error-msg",4,"ngIf"],["id","contactName",1,"col","custom-error","no-padding"],[1,"error","primary"],["contactDisplayName",""],["id","contactDisplayName",1,"col","custom-error","no-padding"],["autocomplete","off",3,"placeholder","htmlAttributes","blur","change"],["contactEmail",""],["id","emailId",1,"col","custom-error","no-padding"],["popupHeight","200px",3,"dataSource","allowFiltering","placeholder","fields","htmlAttributes","showClearButton","filterBarPlaceholder","query","change","dataBound"],["contactGroup",""],["id","contactGroup",1,"col","custom-error","no-padding"],[1,"custom-form-builder","form-builder","product-header",3,"hidden"],["popupHeight","200px",3,"dataSource","placeholder","filterBarPlaceholder","fields","htmlAttributes"],["contactGroupAccess",""],["id","contactGroupAccessScopeId",1,"col","custom-error","no-padding"],[3,"collections","myForm","fieldDependency","fieldChange"],["contactForms",""],[1,"pl-3"],["tabindex","0",1,"required","hd-error-message",3,"innerHTML"],[1,"error-msg"],[1,"error",3,"innerHTML"]],template:function(t,e){1&t&&(E.Jc(0,Rc,8,2,"ejs-dialog",0),E.Tb(1,"div",1),E.Ob(2,"router-outlet"),E.Sb(),E.Jc(3,wc,2,4,"ng-template",null,2,E.Kc)),2&t&&E.nc("ngIf",e.accessToCreateOrEdit)},directives:[a.n,p.l,u.b,h.i,b.e,pc.a],pipes:[U.a,mc.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.secondary-email-id-multi-select.e-popup-open[_ngcontent-%COMP%]{display:none}.e-dialog.contact-dialog[_ngcontent-%COMP%]{max-height:100%!important}.e-dialog.contact-dialog[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]{padding:0 5px!important}"]}),jc),children:[{path:"",component:$t},{path:":customerId",component:uc,resolve:{data:hc}}]}],Gc=((Fc=function e(){t(this,e)}).\u0275mod=E.Lb({type:Fc}),Fc.\u0275inj=E.Kb({factory:function(t){return new(t||Fc)},imports:[[p.k.forChild(Uc)],p.k]}),Fc),Vc=n("ltyr"),qc=n("Wmr3"),Jc=n("lZTi"),Kc=((_c=function e(c){var i=this;t(this,e),this.spinService=c,setTimeout((function(){i.spinService.hideSpinner()}),100)}).\u0275mod=E.Lb({type:_c}),_c.\u0275inj=E.Kb({factory:function(t){return new(t||_c)(E.bc(L.a))},providers:[r.l,r.s,r.h,B,r.c,r.t,r.o,r.g,r.q,hc],imports:[[a.b,Gc,r.j,s.c,l.l,d.j,l.g,u.a,h.h,h.e,b.g,b.d,l.h,d.l,Vc.a,qc.a,l.d,Jc.a,d.a,d.e,l.b]]}),_c)}}])}();