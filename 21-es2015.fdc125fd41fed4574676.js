(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{EiDu:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var o=i("fXoL"),n=i("jhN1");let r=(()=>{class e{constructor(e){this.sanitizer=e}transform(e,t){switch(t){case"html":return this.sanitizer.bypassSecurityTrustHtml(e);case"style":return this.sanitizer.bypassSecurityTrustStyle(e);case"script":return this.sanitizer.bypassSecurityTrustScript(e);case"url":return this.sanitizer.bypassSecurityTrustUrl(e);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(e);default:throw new Error("Invalid safe type specified: "+t)}}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(n.c))},e.\u0275pipe=o.Mb({name:"safe",type:e,pure:!0}),e})()},bqpE:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var o=i("1gpv");const n={RoleList:o.f+"roles",MemberList:o.f+"roles/",RoleDetail:o.f+"roles/",AddMember:o.f+"roles/",RemoveMember:o.f+"roles/",UserList:o.f+"agents/collections",AddRole:o.f+"roles",EditRole:o.f+"roles",DeleteRole:o.f+"roles/",PermissionList:o.f+"permissions/",RoleCollection:o.f+"roles/collections",CloneRole:o.f+"roles/clone_role"}},mrjb:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var o=i("dSv1"),n=i("fXoL");let r=(()=>{class e{constructor(){this.title=Object(o.a)("PAGENOTFOUND"),this.message=Object(o.a)("PAGENOTFOUNDMESSAGE")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Hb({type:e,selectors:[["app-page-not-found"]],decls:10,vars:2,consts:[[1,"fallback-container","flex-vertical"],[1,"row","container","align-center","mt-100"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"fallback_image"],["height","300","width","300","src","assets/images/page-not-found.png"],[1,"fallback_message"],[1,"error-font"],[1,"message-style","font-16"]],template:function(e,t){1&e&&(n.Tb(0,"div",0),n.Tb(1,"div",1),n.Tb(2,"div",2),n.Tb(3,"div",3),n.Ob(4,"img",4),n.Sb(),n.Tb(5,"div",5),n.Tb(6,"div",6),n.Lc(7),n.Sb(),n.Tb(8,"span",7),n.Lc(9),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&e&&(n.xb(7),n.Mc(t.title),n.xb(2),n.Mc(t.message))},styles:[".fallback-container[_ngcontent-%COMP%]{height:100%;text-align:center}.fallback-container[_ngcontent-%COMP%]   .message-style[_ngcontent-%COMP%]{font-weight:400;line-height:24px;padding-top:6px}"]}),e})()},rPV0:function(e,t,i){"use strict";i.r(t),i.d(t,"RoleModule",(function(){return Ft}));var o=i("ofXK"),n=i("tyNb"),r=i("H552"),s=i("Pk9d"),c=i("bqpE"),l=i("4SUy"),a=i("M9dC"),d=i("58Y9"),h=i("dSv1"),b=i("A4Lh"),u=function(e){return e.EditRole="0",e.CloneRole="1",e.DeleteRole="2",e}({}),p=i("fXoL"),g=i("1kef"),m=i("IaKf"),f=i("CRtO"),v=i("JCZ/"),S=i("tk/3"),R=i("2Vo4"),x=i("X8pc");let T=(()=>{class e{constructor(e,t,i,o,n){this.appRootService=e,this.router=t,this.route=i,this.spinService=o,this.toastService=n,this.roleErrorIntercept=new R.a(null),this.httpRoleErrorIntercept=this.roleErrorIntercept.asObservable()}roleModuleErrorHandling(e,t){switch(this.errorMessage=Object(d.q)(e.error),t){case"roleList":break;case"addRole":case"editRole":400===e.status&&this.roleErrorHandling(this.errorMessage);break;case"deleteRole":400===e.status&&this.toastService.failureToast(this.errorMessage),this.spinService.hideSpinner();break;case"addMember":400===e.status&&this.roleErrorHandling(this.errorMessage);break;case"removeMember":400===e.status&&this.toastService.failureToast(this.errorMessage),this.spinService.hideSpinner();break;case"roleDetail":if(400===e.status)return this.router.navigateByUrl("error",{state:e.error.errors[0].errorMessage,skipLocationChange:!0})}}roleErrorHandling(e){this.roleErrorIntercept.next(e)}}return e.\u0275fac=function(t){return new(t||e)(p.bc(g.a),p.bc(n.g),p.bc(n.a),p.bc(x.a),p.bc(m.a))},e.\u0275prov=p.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),O=(()=>{class e{constructor(e,t){this.http=e,this.roleRootService=t,this.httpOptions={headers:new S.e({"Content-Type":"application/json"})}}removeMember(e,t){return this.http.delete(c.a.RemoveMember+t+"/members/"+e,this.httpOptions).toPromise().catch(e=>{this.roleRootService.roleModuleErrorHandling(e,"removeMember")})}addMember(e,t){return this.http.post(c.a.AddMember+t+"/members/",e,this.httpOptions).toPromise()}addRole(e){return this.http.post(c.a.AddRole,e,this.httpOptions).toPromise()}cloneRole(e){return this.http.post(c.a.CloneRole,e,this.httpOptions).toPromise()}editRole(e){return this.http.put(c.a.EditRole,e).toPromise().catch(e=>{this.roleRootService.roleModuleErrorHandling(e,"editRole")})}deleteRole(e,t){const i=c.a.DeleteRole+e;if(!Object(l.X)(t)){const e={headers:new S.e({"Content-Type":"application/json"}),body:t};return this.http.delete(i,e).toPromise()}return this.http.delete(i).toPromise()}editPermission(e){return this.http.put(c.a.PermissionList,e).toPromise()}getRoles(e){return new r.a({url:c.a.RoleCollection,adaptor:new a.b}).executeQuery((new r.g).addParams("exclusionIds",e.toString()).requiresCount())}}return e.\u0275fac=function(t){return new(t||e)(p.bc(S.b),p.bc(T))},e.\u0275prov=p.Jb({token:e,factory:e.\u0275fac}),e})();var E=i("QYJQ"),M=i("SRvG"),C=i("GJ+o"),D=i("hXFv"),I=i("jcQU"),N=i("AjNn"),L=i("EiDu");const A=["roleDialog"],P=["roleName"],y=["roleDescription"],w=["editRoleName"],k=["editRoleDescription"],j=["roleListGrid"],_=["contentRoleForm"],B=["roleDrop"],q=["contextmenu"],F=["roleListPage"],J=["searchRole"];function U(e,t){if(1&e&&(p.Tb(0,"div",28),p.Lc(1),p.hc(2,"translate"),p.Sb(),p.Tb(3,"div",28),p.Lc(4),p.hc(5,"translate"),p.Sb()),2&e){const e=p.gc();p.nc("hidden",!e.cloneRole),p.xb(1),p.Nc(" ",p.ic(2,4,"CLONEROLE")," "),p.xb(2),p.nc("hidden",!e.deleteRole),p.xb(1),p.Nc(" ",p.ic(5,6,"DELETEROLE")," ")}}function G(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",28),p.Tb(1,"button",29),p.ec("click",(function(){return p.Bc(e),p.gc().cancelDialog()})),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Tb(4,"button",30),p.ec("click",(function(){return p.Bc(e),p.gc().updateCloneRole()})),p.Lc(5),p.hc(6,"translate"),p.Sb(),p.Sb(),p.Tb(7,"div",28),p.Tb(8,"button",29),p.ec("click",(function(){return p.Bc(e),p.gc().cancelDialog()})),p.Lc(9),p.hc(10,"translate"),p.Sb(),p.Tb(11,"button",31),p.ec("click",(function(){return p.Bc(e),p.gc().updateDeleteRole()})),p.Lc(12),p.hc(13,"translate"),p.Sb(),p.Sb()}if(2&e){const e=p.gc();p.nc("hidden",!e.cloneRole),p.xb(2),p.Mc(p.ic(3,6,"CANCEL")),p.xb(3),p.Mc(p.ic(6,8,"CREATE")),p.xb(2),p.nc("hidden",!e.deleteRole),p.xb(2),p.Mc(p.ic(10,10,"CANCEL")),p.xb(3),p.Mc(p.ic(13,12,"YESDELETE"))}}function H(e,t){if(1&e&&(p.Tb(0,"div"),p.Ob(1,"span",46),p.hc(2,"safe"),p.Sb()),2&e){const e=p.gc(2);p.xb(1),p.nc("innerHTML",p.jc(2,1,e.errorMessage,"html"),p.Cc)}}function Q(e,t){1&e&&(p.Tb(0,"div"),p.Tb(1,"span",47),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(2),p.Nc(" ",p.ic(3,1,"FIELDREQUIRED"),""))}function V(e,t){1&e&&p.Pb(0)}function X(e,t){if(1&e&&(p.Tb(0,"div"),p.Jc(1,V,1,0,"ng-container",48),p.Sb()),2&e){p.gc(2);const e=p.yc(46);p.xb(1),p.nc("ngTemplateOutlet",e)}}function z(e,t){1&e&&p.Pb(0)}function $(e,t){if(1&e&&(p.Tb(0,"div"),p.Jc(1,z,1,0,"ng-container",48),p.Sb()),2&e){p.gc(2);const e=p.yc(46);p.xb(1),p.nc("ngTemplateOutlet",e)}}function K(e,t){if(1&e&&(p.Tb(0,"div",49),p.Ob(1,"span",50),p.hc(2,"safe"),p.Sb()),2&e){const e=p.gc(2);p.xb(1),p.nc("innerHtml",p.jc(2,1,e.deleteRoleErrorMessage,"html"),p.Cc)}}function W(e,t){1&e&&(p.Tb(0,"div"),p.Tb(1,"span",47),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(2),p.Nc(" ",p.ic(3,1,"FIELDREQUIRED"),""))}function Y(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",null,32),p.Tb(2,"div",28),p.Jc(3,H,3,4,"div",33),p.Tb(4,"div",34),p.Tb(5,"label"),p.Lc(6),p.hc(7,"translate"),p.Tb(8,"span",35),p.Lc(9,"*"),p.Sb(),p.Sb(),p.Tb(10,"ejs-textbox",36,37),p.ec("blur",(function(){return p.Bc(e),p.gc().createRoleFocusOut()}))("change",(function(){return p.Bc(e),p.gc().createRoleChange()}))("created",(function(){return p.Bc(e),p.gc().controlCreated("roleNameField")}))("input",(function(t){return p.Bc(e),p.gc().createRoleInput(t)}))("focus",(function(){return p.Bc(e),p.gc().createRoleFocus()})),p.hc(12,"translate"),p.Sb(),p.Jc(13,Q,4,3,"div",33),p.Jc(14,X,2,1,"div",33),p.Sb(),p.Tb(15,"div",34),p.Tb(16,"label"),p.Lc(17),p.hc(18,"translate"),p.Sb(),p.Tb(19,"ejs-textbox",38,39),p.ec("change",(function(){return p.Bc(e),p.gc().createRoleDescriptionChange()})),p.hc(21,"translate"),p.Sb(),p.Jc(22,$,2,1,"div",33),p.Sb(),p.Sb(),p.Tb(23,"div",28),p.Jc(24,K,3,4,"div",40),p.Tb(25,"div"),p.Tb(26,"span",41),p.Lc(27),p.hc(28,"translate"),p.Sb(),p.Sb(),p.Tb(29,"div",42),p.Tb(30,"div",43),p.Tb(31,"label"),p.Lc(32),p.hc(33,"translate"),p.Tb(34,"span",35),p.Lc(35,"*"),p.Sb(),p.Sb(),p.Tb(36,"ejs-dropdownlist",44,45),p.ec("blur",(function(){return p.Bc(e),p.gc().roleDropFocusOut()}))("change",(function(){return p.Bc(e),p.gc().roleDropChange()}))("created",(function(){return p.Bc(e),p.gc().controlCreated("role-swap-drop")})),p.hc(38,"translate"),p.Sb(),p.Jc(39,W,4,3,"div",33),p.Sb(),p.Sb(),p.Sb(),p.Sb()}if(2&e){const e=p.gc();p.xb(2),p.nc("hidden",!e.cloneRole),p.xb(1),p.nc("ngIf",e.errorMessage),p.xb(3),p.Nc(" ",p.ic(7,21,"ROLENAME")," "),p.xb(4),p.oc("placeholder",p.ic(12,23,"TEXTBOXPLACEHOLDER")),p.nc("htmlAttributes",e.inputAttribute),p.xb(3),p.nc("ngIf",e.isRequired),p.xb(1),p.nc("ngIf",e.roleNameError),p.xb(3),p.Nc(" ",p.ic(18,25,"DESCRIPTION")," "),p.xb(2),p.oc("placeholder",p.ic(21,27,"TEXTBOXPLACEHOLDER")),p.nc("htmlAttributes",e.textAreaAttribute),p.xb(3),p.nc("ngIf",e.roleDescriptionError),p.xb(1),p.nc("hidden",!e.deleteRole),p.xb(1),p.nc("ngIf",e.deleteRoleError),p.xb(3),p.Mc(p.ic(28,29,"MOVEROLEALERT")),p.xb(5),p.Nc(" ",p.ic(33,31,"ROLE")," "),p.xb(4),p.oc("placeholder",p.ic(38,33,"DROPDOWNPLACEHOLDER")),p.nc("dataSource",e.roleDropData)("fields",e.roleFields)("allowFiltering",!0)("htmlAttributes",e.autoCompleteAttribute),p.xb(3),p.nc("ngIf",e.roleRequired)}}function Z(e,t){1&e&&(p.Tb(0,"div",56),p.hc(1,"translate"),p.Tb(2,"span"),p.Lc(3),p.hc(4,"translate"),p.Sb(),p.Sb()),2&e&&(p.yb("data-title",p.ic(1,2,"SYSTEM")),p.xb(3),p.Nc(" ",p.ic(4,4,"SYSTEM")," "))}const ee=function(e){return{background:e}};function te(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",51),p.Tb(1,"div",52),p.Lc(2),p.Sb(),p.Tb(3,"div",53),p.Tb(4,"span",54),p.ec("click",(function(){p.Bc(e);const i=t.$implicit;return p.gc().roleDetails(i)})),p.Lc(5),p.Sb(),p.Sb(),p.Jc(6,Z,5,6,"div",55),p.Sb()}if(2&e){const e=t.$implicit;p.xb(1),p.nc("ngStyle",p.tc(5,ee,e.colorCode)),p.xb(1),p.Nc(" ",e.shortCode," "),p.xb(2),p.yb("data-title",e.roleName),p.xb(1),p.Mc(e.roleName),p.xb(1),p.nc("ngIf",e.isDefault)}}function ie(e,t){if(1&e){const e=p.Ub();p.Tb(0,"span",57),p.ec("click",(function(){p.Bc(e);const i=t.$implicit;return p.gc().membersPage(i)})),p.Lc(1),p.Sb()}if(2&e){const e=t.$implicit;p.xb(1),p.Mc(e.agentCount)}}function oe(e,t){if(1&e){const e=p.Ub();p.Tb(0,"span",60),p.ec("click",(function(){p.Bc(e);const t=p.gc().$implicit,i=p.gc();return i.select(i.editItem,t)})),p.hc(1,"translate"),p.Sb()}2&e&&p.yb("data-title",p.ic(1,1,"EDIT"))}function ne(e,t){if(1&e){const e=p.Ub();p.Jc(0,oe,2,3,"span",58),p.Tb(1,"span",59),p.ec("click",(function(i){p.Bc(e);const o=t.$implicit;return p.gc().bindBtnTemplate(i,o)})),p.Sb()}2&e&&p.nc("ngIf",!t.$implicit.isDefault)}function re(e,t){if(1&e&&(p.Ob(0,"span",61),p.hc(1,"safe")),2&e){const e=p.gc();p.nc("innerHTML",p.jc(1,1,e.commonInputValidationErrorMessage,"html"),p.Cc)}}let se=(()=>{class e{constructor(e,t,i,o,n,r,s,c){this.appRootService=e,this.router=t,this.toastService=i,this.authService=o,this.seoService=n,this.roleService=r,this.roleRootService=s,this.spinService=c,this.inputAttribute={maxlength:b.s,autocomplete:"anyrandomstring"},this.textAreaAttribute={maxlength:b.M,autocomplete:"anyrandomstring"},this.roleRequired=!1,this.roleFields=b.r,this.animation={effect:"none"},this.autoCompleteAttribute={autocomplete:"anyrandomstring"},this.create=Object(h.a)("CREATEROLE"),this.moreAction=[Object(h.a)("CLONE"),Object(h.a)("DELETE")],this.moreActionDefault=[Object(h.a)("CLONE")],this.moreActionItems=[{id:u.CloneRole,text:Object(h.a)("CLONE")},{id:u.DeleteRole,text:Object(h.a)("DELETE")}],this.editItem={item:{id:u.EditRole}};const l=Object(h.a)("ADMIN")+" / "+Object(h.a)("ROLESPERMISSION"),a=Object(h.a)("ROLESPERMISSION")+" | "+Object(h.a)("ADMIN");this.appRootService.setAppTitleText(l),this.seoService.setHeaderElements({title:a}),this.appRootService.isSideBarNeeded(!0),this.appRootService.setBrandDropDownVisibility(!1)}roleDetails(e){this.router.navigateByUrl("/admin/roles-permissions/"+e.roleId)}membersPage(e){this.router.navigate(["/admin/roles-permissions/"+e.roleId],{state:{data:{isMembers:!0}}})}ngOnInit(){this.pageSettings={pageSize:50},this.roleList=new r.a({url:c.a.RoleList,adaptor:new a.b}),this.roleListError=this.roleRootService.httpRoleErrorIntercept.subscribe(e=>{null!=e&&(this.spinService.hideSpinner(),this.errorMessage=e)}),this.commonInputValidationErrorMessage=d.e}ngAfterViewInit(){this.roleListPageEle.nativeElement.addEventListener("scroll",()=>{this.contextmenu.close()})}roleListDataBound(){Object(d.a)(this.roleListGrid)}roleListGridActionBegin(e){"refresh"===e.requestType&&this.roleListGrid.searchModule.refreshSearch&&(this.roleListGrid.searchModule.refreshSearch=!1)}createRoleClick(){this.router.navigateByUrl("/admin/roles-permissions/new")}select(e,t){e.item.id===u.EditRole?this.router.navigateByUrl("/admin/roles-permissions/"+t.roleId):e.item.id===u.DeleteRole?this.openDeleteRoleDialog(this.selectedItemData.roleId):e.item.id===u.CloneRole&&this.openCloneRoleDialog(this.selectedItemData.roleId,this.selectedItemData)}createRoleFocusOut(){if(this.isRequired=!this.roleName.value,!this.isRequired){const e=Object(d.d)(this.roleName.value);this.roleNameError=!!e}}createRoleChange(){if(null!=this.roleName.value){this.isRequired=!1,this.errorMessage=null;const e=Object(d.d)(this.roleName.value);this.roleNameError=!!e}else this.isRequired=!1,this.roleNameError=!1}createRoleInput(e){const t=e.value;this.isRequired=!(!Object(l.X)(t)&&""!==t.trim());const i=Object(d.d)(t);this.roleNameError=!!i}createRoleFocus(){this.isRequired=!1,this.roleNameError=!1}createRoleDescriptionChange(){if(null!=this.roleDescription.value){const e=Object(d.d)(this.roleDescription.value);this.roleDescriptionError=!!e}else this.roleDescriptionError=!1}editRoleFocusOut(){if(this.isRequired=!this.editRoleName.value,!this.isRequired){const e=Object(d.d)(this.editRoleName.value);this.editRoleNameError=!!e}}editRoleChange(){if(null!=this.editRoleName.value){this.isRequired=!1,this.noChangesValidation=!1,this.errorMessage=null;const e=Object(d.d)(this.editRoleName.value);this.editRoleNameError=!!e}else this.isRequired=!0,this.editRoleNameError=!1}editRoleInput(e){const t=e.value;this.isRequired=!(!Object(l.X)(t)&&""!==t.trim());const i=Object(d.d)(t);this.editRoleNameError=!!i}editRoleFocus(){this.isRequired=!1,this.editRoleNameError=!1}editRoleDescriptionChange(){if(null!=this.editRoleDescription.value){const e=Object(d.d)(this.editRoleDescription.value);this.editRoleDescriptionError=!!e}else this.editRoleDescriptionError=!1}openEditRoleDialog(e){this.roleId=e.roleId,this.roleDialog.showCloseIcon=!0,this.roleDialog.cssClass="",this.dialogRoleName=e.roleName,this.dialogRoleDescription=e.description,this.roleDialog.show(),this.cloneRole=!1,this.editRole=!0,this.deleteRole=!1,this.errorMessage=null,this.isRequired=!1}roleDialogOpen(){this.editRole?setTimeout(()=>{this.editRoleName.focusIn()}):this.cloneRole&&setTimeout(()=>{this.roleName.focusIn()})}openDeleteRoleDialog(e){this.roleService.getRoles(e).then(e=>{this.roleDropData=e.result}),this.roleRequired=!1,this.roleDialog.cssClass="role-delete-dialog",this.roleDialog.position={X:"center",Y:"center"},this.roleId=e,this.deleteRole=!0,this.editRole=!1,this.cloneRole=!1,this.roleDialog.show()}openCloneRoleDialog(e,t){this.roleRequired=!1,this.roleDialog.cssClass="",this.roleId=e,this.roleName.value=Object(h.a)("CLONEOF")+t.roleName,this.roleDescription.value=t.description,this.errorMessage=null,this.deleteRole=!1,this.editRole=!1,this.cloneRole=!0,this.roleDialog.show()}roleDropFocusOut(){this.roleRequired=!this.roleDrop.value}roleDropChange(){this.roleRequired=!!Object(l.X)(this.roleDrop.value)}cancelDialog(){this.roleDialog.hide(),this.isRequired=!1,this.noChangesValidation=!1,this.deleteRoleError=!1,this.deleteRoleErrorMessage=null,this.dialogRoleName=null,this.dialogRoleDescription=null,this.errorMessage=null,this.roleName.value=null,this.roleDescription.value=null,this.deleteDialog&&this.deleteDialog.hide(),this.roleRequired=!1}resetDialog(){this.isRequired=!1,this.roleName.value=null,this.roleDescription.value=null,this.errorMessage=null}updateDeleteRole(){if(this.spinService.showSpinner(),this.roleId=+this.roleId,Object(l.X)(this.roleDrop.value))return this.roleRequired=!0,void this.spinService.hideSpinner();{const e={};e.newRoleId=this.roleDrop.value,this.roleService.deleteRole(this.roleId,e).then(e=>{e&&(this.spinService.hideSpinner(),this.roleDialog.hide(),this.toastService.successToast(Object(h.a)("ROLEREMOVED")),this.loadGrid(),this.isRequired=!1)}).catch(e=>{this.spinService.hideSpinner(),e.error&&e.error.errors.length>0&&400===e.error.statusCode&&(this.deleteRoleError=!0,this.deleteRoleErrorMessage=e.error.errors[0].errorMessage)})}}overlayClick(){this.roleDialog.hide(),this.isRequired=null,this.noChangesValidation=null,this.dialogRoleName=null,this.dialogRoleDescription=null,this.errorMessage=null,this.roleName.value=null,this.roleDescription.value=null,this.deleteRoleError=!1,this.deleteRoleErrorMessage=null,Object(l.X)(this.roleDrop)||Object(l.X)(this.roleDrop.value)||(this.roleDrop.value=null)}updateCloneRole(){this.errorMessage=null,null!=this.roleName.value&&""!==this.roleName.value&&this.roleName.value.length>0&&!this.roleNameError&&!this.roleDescriptionError?(this.spinService.showSpinner(),this.roleService.cloneRole({roleName:this.roleName.value,description:this.roleDescription.value,roleId:this.roleId}).then(e=>{this.spinService.hideSpinner(),e&&(this.toastService.successToast(e.message),this.router.navigateByUrl("admin/roles-permissions/"+e.roleId,{state:{data:{isMembers:!0}}}),this.roleDialog.hide())}).catch(e=>{e.error&&e.error.errors&&null!==e.error.errors[0].errorMessage&&(this.errorMessage=e.error.errors[0].errorMessage,this.spinService.hideSpinner())})):this.roleNameError||this.roleDescriptionError||(this.isRequired=!0,this.errorMessage=null)}dialogClose(){this.isRequired=null,this.noChangesValidation=null,this.deleteRoleError=!1,this.deleteRoleErrorMessage=null,this.dialogRoleName=null,this.dialogRoleDescription=null,this.errorMessage=null,this.roleName.value=null,this.roleDescription.value=null,this.roleRequired=!1,Object(l.X)(this.roleDrop)||Object(l.X)(this.roleDrop.value)||(this.roleDrop.value=null)}updateEditRole(){if(this.spinService.showSpinner(),this.roleId=+this.roleId,this.editRoleName.value===this.dialogRoleName&&this.editRoleDescription.value===this.dialogRoleDescription)this.spinService.hideSpinner(),this.noChangesValidation=!0,this.isRequired=null;else if(0===this.editRoleName.value.length||""===this.editRoleName.value)this.spinService.hideSpinner(),this.isRequired=!0,this.noChangesValidation=null;else if(this.editRoleNameError||this.editRoleDescriptionError)this.spinService.hideSpinner();else{const e={roleId:this.roleId,roleName:this.editRoleName.value,description:this.editRoleDescription.value};this.errorMessage=null,this.noChangesValidation=!1,this.roleService.editRole(e).then(e=>{e&&(this.spinService.hideSpinner(),this.roleDialog.hide(),this.toastService.successToast(Object(h.a)("ROLEUPDATED")),this.loadGrid(),this.isRequired=!1)})}}dialogCreated(){this.dialogCreate=!0}ngOnDestroy(){this.roleDialog&&this.dialogCreate&&this.roleDialog.element&&Object(l.I)(this.roleDialog.element),this.roleListError.unsubscribe()}loadGrid(){setTimeout(()=>{this.roleListGrid.refresh()})}controlCreated(e){setTimeout(()=>{const t=this.addEditRoleForm.nativeElement;Object(d.h)(t.querySelector("#"+e))})}bindBtnTemplate(e,t){this.selectedItemData=t;const i=Object(s.f)(e.target);this.contextmenu.open(i.top+16,i.left-5,e.target)}itemBeforeEvent(){this.selectedItemData.isDefault?(this.contextmenu.hideItems(this.moreAction),this.contextmenu.showItems(this.moreActionDefault)):(this.contextmenu.hideItems(this.moreActionDefault),this.contextmenu.showItems(this.moreAction))}searchNodes(){const e=this.searchRole.value.trim();this.roleListGrid.search(e)}}return e.\u0275fac=function(t){return new(t||e)(p.Nb(g.a),p.Nb(n.g),p.Nb(m.a),p.Nb(f.a),p.Nb(v.a),p.Nb(O),p.Nb(T),p.Nb(x.a))},e.\u0275cmp=p.Hb({type:e,selectors:[["app-role-list"]],viewQuery:function(e,t){var i;1&e&&(p.Qc(A,!0),p.Qc(P,!0),p.Qc(y,!0),p.Qc(w,!0),p.Qc(k,!0),p.Qc(j,!0),p.Qc(_,!0),p.Qc(B,!0),p.Qc(q,!0),p.Qc(F,!0),p.Qc(J,!0)),2&e&&(p.xc(i=p.fc())&&(t.roleDialog=i.first),p.xc(i=p.fc())&&(t.roleName=i.first),p.xc(i=p.fc())&&(t.roleDescription=i.first),p.xc(i=p.fc())&&(t.editRoleName=i.first),p.xc(i=p.fc())&&(t.editRoleDescription=i.first),p.xc(i=p.fc())&&(t.roleListGrid=i.first),p.xc(i=p.fc())&&(t.addEditRoleForm=i.first),p.xc(i=p.fc())&&(t.roleDrop=i.first),p.xc(i=p.fc())&&(t.contextmenu=i.first),p.xc(i=p.fc())&&(t.roleListPageEle=i.first),p.xc(i=p.fc())&&(t.searchRole=i.first))},decls:47,vars:26,consts:[["id","roleListDialog","width","400px","isModal","true","showCloseIcon","true","closeOnEscape","true","height","Auto",3,"visible","overlayClick","close","created","open"],["roleDialog",""],["header",""],["footerTemplate",""],["content",""],[1,"role-list","no-margin","pl-20","pr-20"],["roleListPage",""],[1,"secondary","padding-10","information-content"],[1,"bd-icon","bd-icon-info","information-icon","information-icon-position"],[1,"no-padding"],[1,"grid-menu-bar"],[1,"grid-menu"],[1,"search-box","pr-0"],["id","search","showClearButton","true","autocomplete","off","maxlength","150",3,"placeholder","change"],["searchRole",""],[1,"add-button-container"],["type","button","ejs-button","",1,"e-btn","add-button","e-outline","e-primary",3,"click"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","control-section","no-padding","hd-grid-full-height"],[3,"dataSource","allowSorting","allowPaging","pageSettings","allowResizing","actionBegin","dataBound"],["roleListGrid",""],["field","roleName","minWidth","150","width","200","textAlign","left",3,"headerText"],["template",""],["field","description","minWidth","200","width","260","textAlign","left","clipMode","EllipsisWithTooltip",3,"headerText"],["field","agentCount","minWidth","120","width","130","textAlign","Center",3,"headerText"],["minWidth","100","width","100","textAlign","Center"],[3,"items","animationSettings","beforeOpen","select"],["contextmenu",""],["errorInputValidation",""],[3,"hidden"],["data-ripple","true",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat",3,"click"],["isPrimary","true","data-ripple","true",1,"e-control","e-btn","e-primary","e-flat","dialog-delete-button",3,"click"],["contentRoleForm",""],[4,"ngIf"],[1,"form-group","pt-3"],[1,"error"],["id","roleNameField","autocomplete","off",3,"placeholder","htmlAttributes","blur","change","created","input","focus"],["roleName",""],["data-id","roleDescription","autocomplete","off",3,"placeholder","htmlAttributes","change"],["roleDescription",""],["class","pb-1",4,"ngIf"],[1,"line-height-25px"],[1,"pt-3"],[1,"col-6","padding-left-0"],["id","role-swap-drop","popupHeight","200",3,"placeholder","dataSource","fields","allowFiltering","htmlAttributes","blur","change","created"],["roleDrop",""],[3,"innerHTML"],[1,"required"],[4,"ngTemplateOutlet"],[1,"pb-1"],[1,"required",3,"innerHtml"],[1,"flex-horizontal"],[1,"e-avatar","e-avatar-small","e-avatar-circle","permission-list-avatar",3,"ngStyle"],[1,"no-wrap","ellipsis","role-name-width"],[1,"primary-link-color","cursor-pointer",3,"click"],["class","grid-label left-spacing",4,"ngIf"],[1,"grid-label","left-spacing"],[1,"cursor-pointer","primary-link-color",3,"click"],["class","bd-icon bd-icon-edit more-option-button",3,"click",4,"ngIf"],[1,"hd-icon","hd-vertical-menu","more-option-button",3,"click"],[1,"bd-icon","bd-icon-edit","more-option-button",3,"click"],[1,"error",3,"innerHTML"]],template:function(e,t){1&e&&(p.Tb(0,"div"),p.Tb(1,"ejs-dialog",0,1),p.ec("overlayClick",(function(){return t.overlayClick()}))("close",(function(){return t.dialogClose()}))("created",(function(){return t.dialogCreated()}))("open",(function(){return t.roleDialogOpen()})),p.Jc(3,U,6,8,"ng-template",null,2,p.Kc),p.Jc(5,G,14,14,"ng-template",null,3,p.Kc),p.Jc(7,Y,40,35,"ng-template",null,4,p.Kc),p.Sb(),p.Sb(),p.Tb(9,"div",5,6),p.Tb(11,"div",7),p.Ob(12,"div",8),p.Lc(13),p.hc(14,"translate"),p.Sb(),p.Tb(15,"div",9),p.Tb(16,"div",10),p.Tb(17,"div",11),p.Tb(18,"div",12),p.Tb(19,"ejs-textbox",13,14),p.ec("change",(function(){return t.searchNodes()})),p.hc(21,"translate"),p.Sb(),p.Sb(),p.Tb(22,"div",15),p.Tb(23,"button",16),p.ec("click",(function(){return t.createRoleClick()})),p.Lc(24),p.hc(25,"translate"),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(26,"div",17),p.Tb(27,"ejs-grid",18,19),p.ec("actionBegin",(function(e){return t.roleListGridActionBegin(e)}))("dataBound",(function(){return t.roleListDataBound()})),p.Tb(29,"e-columns"),p.Tb(30,"e-column",20),p.hc(31,"translate"),p.Jc(32,te,7,7,"ng-template",null,21,p.Kc),p.Sb(),p.Ob(34,"e-column",22),p.hc(35,"translate"),p.Tb(36,"e-column",23),p.hc(37,"translate"),p.Jc(38,ie,2,1,"ng-template",null,21,p.Kc),p.Sb(),p.Tb(40,"e-column",24),p.Jc(41,ne,2,1,"ng-template",null,21,p.Kc),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(43,"ejs-contextmenu",25,26),p.ec("beforeOpen",(function(){return t.itemBeforeEvent()}))("select",(function(e){return t.select(e)})),p.Sb(),p.Jc(45,re,2,4,"ng-template",null,27,p.Kc)),2&e&&(p.xb(1),p.nc("visible",!1),p.xb(12),p.Nc(" ",p.ic(14,14,"ROLESMODULEINFO")," "),p.xb(6),p.oc("placeholder",p.ic(21,16,"SEARCH")),p.xb(5),p.Nc(" ",p.ic(25,18,"CREATEROLE")," "),p.xb(3),p.nc("dataSource",t.roleList)("allowSorting",!0)("allowPaging",!0)("pageSettings",t.pageSettings)("allowResizing",!0),p.xb(3),p.oc("headerText",p.ic(31,20,"ROLENAME")),p.xb(4),p.oc("headerText",p.ic(35,22,"DESCRIPTION")),p.xb(2),p.oc("headerText",p.ic(37,24,"AGENTS")),p.xb(7),p.nc("items",t.moreActionItems)("animationSettings",t.animation))},directives:[s.b,E.i,M.c,C.k,C.e,C.b,C.d,C.a,D.f,o.n,I.e,o.r,o.o],pipes:[N.a,L.a],styles:[".role-delete-dialog[_ngcontent-%COMP%]{height:40%!important;max-height:590px;width:40%!important}.role-delete-dialog.e-dialog[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]{padding-bottom:0!important}.role-list[_ngcontent-%COMP%]   .information-content[_ngcontent-%COMP%]{margin:16px 0 0!important}.role-list[_ngcontent-%COMP%]   .role-name-width[_ngcontent-%COMP%]{width:auto!important}.role-list[_ngcontent-%COMP%]   .permission-list-avatar[_ngcontent-%COMP%]{min-height:24px;min-width:24px}"]}),e})();const ce=["contentRoleForm"];function le(e,t){if(1&e&&p.Ob(0,"span",17),2&e){const e=p.gc(2);p.yb("data-title",e.moduleDisableTooltip)}}const ae=function(e){return{"hd-active":e}},de=function(e){return{"cursor-block":e}};function he(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",9),p.Tb(1,"div",10),p.Tb(2,"div",11),p.ec("click",(function(i){p.Bc(e);const o=t.$implicit;return p.gc().moduleClick(i,o.moduleId)})),p.Tb(3,"div",12),p.Lc(4),p.Jc(5,le,1,1,"span",13),p.Sb(),p.Sb(),p.Tb(6,"div",14),p.Tb(7,"ejs-switch",15,16),p.ec("change",(function(){p.Bc(e);const i=t.$implicit,o=p.yc(8);return p.gc().switchChange(o,i.moduleId)})),p.Sb(),p.Sb(),p.Sb(),p.Sb()}if(2&e){const e=t.$implicit,i=t.first,o=t.index,n=p.gc();p.xb(2),p.nc("ngClass",p.tc(12,ae,i)),p.xb(2),p.Nc("",e.moduleName," "),p.xb(1),p.nc("ngIf",i),p.xb(1),p.nc("ngClass",p.tc(14,de,0===o||!n.canEdit)),p.yb("data-title",n.moduleDisableTooltip)("data-non-elliptical",0===o||!n.canEdit||null),p.xb(1),p.nc("id",e.moduleId)("hidden",i)("disabled",i||!n.canEdit)("checked",e.isModuleEnabled),p.yb("data-permissionId",e.permissionId)("data-permissionName",e.moduleName)}}function be(e,t){if(1&e&&p.Ob(0,"span",27),2&e){const e=p.gc().$implicit,t=p.gc().$implicit,i=p.gc();p.nc("hidden",t.moduleId!==i.moduleId),p.yb("data-title",e.description)("data-non-elliptical",e.description&&"null"!==e.description?"true":null)}}function ue(e,t){if(1&e&&p.Ob(0,"span",27),2&e){const e=p.gc(2).$implicit,t=p.gc(2).$implicit,i=p.gc();p.nc("hidden",t.moduleId!==i.moduleId),p.yb("data-title",e.description)("data-non-elliptical",e.description&&"null"!==e.description?"true":null)}}function pe(e,t){if(1&e&&(p.Tb(0,"div",29),p.Ob(1,"ejs-radiobutton",30,31),p.Jc(3,ue,1,3,"span",25),p.Sb()),2&e){const e=p.gc().$implicit,t=p.gc().$implicit,i=p.gc().$implicit,o=p.gc();p.xb(1),p.oc("label",e.name),p.oc("name","radionBtnId_"+t.id),p.nc("hidden",i.moduleId!==o.moduleId)("disabled",!i.isModuleEnabled||!t.isEnabled||!o.canEdit)("checked",e.isEnabled),p.yb("data-permissionId",e.id),p.xb(2),p.nc("ngIf",e.description&&"null"!==e.description)}}function ge(e,t){if(1&e&&p.Ob(0,"span",27),2&e){const e=p.gc(2).$implicit,t=p.gc(2).$implicit,i=p.gc();p.nc("hidden",t.moduleId!==i.moduleId),p.yb("data-title",e.description)("data-non-elliptical",e.description&&"null"!==e.description?"true":null)}}function me(e,t){if(1&e&&(p.Tb(0,"div",29),p.Ob(1,"ejs-checkbox",32,24),p.Jc(3,ge,1,3,"span",25),p.Sb()),2&e){const e=p.gc().$implicit,t=p.gc().$implicit,i=p.gc().$implicit,o=p.gc();p.xb(1),p.oc("label",e.name),p.nc("hidden",i.moduleId!==o.moduleId)("disabled",!i.isModuleEnabled||!t.isEnabled||!o.canEdit)("checked",e.isEnabled),p.yb("data-permissionId",e.id),p.xb(2),p.nc("ngIf",e.description&&"null"!==e.description)}}function fe(e,t){if(1&e&&(p.Tb(0,"div"),p.Jc(1,pe,4,7,"div",28),p.Jc(2,me,4,6,"div",28),p.Sb()),2&e){const e=p.gc().$implicit;p.xb(1),p.nc("ngIf","Single"===e.selectionType),p.xb(1),p.nc("ngIf","Multiple"===e.selectionType)}}const ve=function(e){return{"set-width":e}};function Se(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",20),p.Tb(1,"div",21),p.Tb(2,"div",22),p.Tb(3,"ejs-checkbox",23,24),p.ec("change",(function(){p.Bc(e);const i=t.$implicit,o=p.yc(4);return p.gc(2).checkBoxChange(o,i.id)})),p.Sb(),p.Jc(5,be,1,3,"span",25),p.Sb(),p.Tb(6,"div",26),p.Jc(7,fe,3,2,"div",8),p.Sb(),p.Sb(),p.Sb()}if(2&e){const e=t.$implicit,i=p.gc().$implicit,o=p.gc();p.xb(1),p.nc("ngClass",p.tc(10,ve,i.moduleId!==o.moduleId)),p.xb(2),p.oc("label",e.name),p.nc("hidden",i.moduleId!==o.moduleId)("disabled",!i.isModuleEnabled||!o.canEdit)("checked",e.isEnabled),p.yb("data-permissionId",e.id),p.xb(2),p.nc("ngIf",e.description&&"null"!==e.description),p.xb(1),p.oc("id","permissionId_"+e.id),p.nc("ngClass",p.tc(12,ve,i.moduleId!==o.moduleId)),p.xb(1),p.nc("ngForOf",e.childPermissions)}}const Re=function(e,t){return{"set-width":e,"cursor-block":t}};function xe(e,t){if(1&e&&(p.Tb(0,"div"),p.Tb(1,"div",18),p.Jc(2,Se,8,14,"div",19),p.Sb(),p.Sb()),2&e){const e=t.$implicit,i=p.gc();p.xb(1),p.oc("id","moduleId_"+e.moduleId),p.nc("ngClass",p.uc(5,Re,e.moduleId!==i.moduleId,!e.isModuleEnabled||!i.canEdit)),p.yb("data-title",i.permissionDisableTooltip)("data-non-elliptical",e.isModuleEnabled&&i.canEdit?null:"true"),p.xb(1),p.nc("ngForOf",e.permissions)}}let Te=(()=>{class e{constructor(e,t,i,o,n,r,s,c,l,a){this.route=e,this.router=t,this.appRootService=i,this.roleService=o,this.toastService=n,this.roleRootService=r,this.authService=s,this.seoService=c,this.spinService=l,this.viewContainerRef=a,this.canEdit=!0,this.inputAttribute={maxlength:b.s,autocomplete:"anyrandomstring"},this.textAreaAttribute={maxlength:b.M,autocomplete:"anyrandomstring"},this.permissionListDetail=this.route.data.subscribe(e=>{this.permissionList=e.permissionData.result,this.moduleId=this.permissionList[0].moduleId,this.spinService.hideSpinner(),this.permissionList||this.router.navigateByUrl("error",{state:Object(h.a)("SERVERERROR"),skipLocationChange:!0})})}ngOnInit(){this.moduleDisableTooltip=this.canEdit?Object(h.a)("TICKETPERMISSIONDISABLE"):Object(h.a)("DEFAULTPERMISSIONDISABLE"),this.permissionDisableTooltip=this.canEdit?Object(h.a)("MODULEDISABLE"):Object(h.a)("DEFAULTPERMISSIONDISABLE")}cancelDialog(){this.router.navigateByUrl("/admin/roles-permissions")}moduleSelection(e,t){const i=e.parentElement.parentElement.parentElement.parentElement.querySelectorAll(".module-btn"),o=this.addEditRoleForm.nativeElement.querySelector("#moduleId_"+t),n=e.parentElement.querySelector(".switch-control input.e-control");let r;n&&(r=n.ej2_instances[0]);for(const s of Array.from(i))s.classList.remove("hd-active");e.classList.add("hd-active"),setTimeout(()=>{this.moduleId=t,setTimeout(()=>{r&&(r.checked?o.classList.remove("cursor-block"):o.classList.add("cursor-block"))})},0)}moduleClick(e,t){this.moduleSelection(e.currentTarget,t)}getPermissionLists(){const e=[],t=this.addEditRoleForm.nativeElement.querySelectorAll('.checkbox-control ejs-checkbox[aria-checked="true"]:not([aria-disabled="true"])');for(const o of Array.from(t))o.parentElement.parentElement.querySelectorAll("ejs-radiobutton").forEach(t=>{const i=t.firstElementChild.ej2_instances[0];i.checked&&e.push(parseInt(i.element.getAttribute("data-permissionId"),10))}),e.push(parseInt(o.getAttribute("data-permissionId"),10));const i=this.addEditRoleForm.nativeElement.querySelectorAll('.switch-control ejs-switch[aria-checked="true"]:not([aria-disabled])');return Array.from(i).forEach(t=>{this.addEditRoleForm.nativeElement.querySelectorAll(`#moduleId_${t.id} ejs-checkbox[aria-checked="true"]`).length>0&&e.push(parseInt(t.getAttribute("data-permissionId"),10))}),e}switchChange(e,t){const i=this.addEditRoleForm.nativeElement.querySelector("#moduleId_"+t).querySelectorAll("input:not(.child)"),o=this.addEditRoleForm.nativeElement.querySelector("#moduleId_"+t);e.checked?(o.removeAttribute("data-non-elliptical"),o.classList.remove("cursor-block")):(o.setAttribute("data-non-elliptical","true"),o.classList.add("cursor-block")),i.forEach(t=>{if(e.checked){t.ej2_instances[0].disabled=!1;const e=t.getAttribute("data-permissionId");o.querySelector("#permissionId_"+e).querySelectorAll("input.child").forEach(e=>{e.ej2_instances[0].disabled=!t.ej2_instances[0].checked})}else{t.ej2_instances[0].disabled=!0;const e=t.getAttribute("data-permissionId");o.querySelector("#permissionId_"+e).querySelectorAll("input.child").forEach(e=>{e.ej2_instances[0].disabled=!0})}}),this.moduleSelection(e.element.parentElement.parentElement.parentElement.querySelector(".module-btn"),t)}checkBoxChange(e,t){const i=this.addEditRoleForm.nativeElement.querySelector("#permissionId_"+t).querySelectorAll("input");let o;i.forEach(t=>{e.checked?(t.ej2_instances[0].disabled=!1,!0===t.ej2_instances[0].checked&&(o=!0)):(t.ej2_instances[0].disabled=!0,t.ej2_instances[0].checked=!1)}),e.checked&&!o&&i[0]&&(i[0].ej2_instances[0].checked=!0)}}return e.\u0275fac=function(t){return new(t||e)(p.Nb(n.a),p.Nb(n.g),p.Nb(g.a),p.Nb(O),p.Nb(m.a),p.Nb(T),p.Nb(f.a),p.Nb(v.a),p.Nb(x.a),p.Nb(p.O))},e.\u0275cmp=p.Hb({type:e,selectors:[["app-permisson-list"]],viewQuery:function(e,t){var i;1&e&&(p.Qc(ce,!0),p.Qc(M.e,!0),p.Qc(M.i,!0)),2&e&&(p.xc(i=p.fc())&&(t.addEditRoleForm=i.first),p.xc(i=p.fc())&&(t.checkbox=i),p.xc(i=p.fc())&&(t.radiobutton=i))},inputs:{roleId:"roleId",canEdit:"canEdit"},decls:15,vars:8,consts:[["contentRoleForm",""],[1,"pb-5"],[1,"flex-horizontal","align-items-start"],[1,"mr-4"],[1,"font-500","font-14","pb-3"],["class","permission-switch",4,"ngFor","ngForOf"],[1,"checkbox-items","font-500","font-14","pb-3","flex-vertical"],[1,"checkbox-items","flex-horizontal"],[4,"ngFor","ngForOf"],[1,"permission-switch"],[1,"row","set-fixed-width","permission-module-switch"],[1,"col-8","pr-3","module-btn",3,"ngClass","click"],[1,"cursor-pointer","font-14"],["class","hd-icon hd-info","placement","bottom",4,"ngIf"],[1,"col-4","pb-2","pr-0","switch-control",3,"ngClass"],["cssClass","e-small",3,"id","hidden","disabled","checked","change"],["switch",""],["placement","bottom",1,"hd-icon","hd-info"],[3,"id","ngClass"],["class","pb-3",4,"ngFor","ngForOf"],[1,"pb-3"],[1,"checkbox-control",3,"ngClass"],[1,"flex-horizontal","row"],[3,"hidden","disabled","label","checked","change"],["checkBox",""],["class","hd-icon hd-info","id","content","placement","bottom",3,"hidden",4,"ngIf"],[1,"pl-3","flex-vertical",3,"id","ngClass"],["id","content","placement","bottom",1,"hd-icon","hd-info",3,"hidden"],["class","pt-3 radiobtn-control flex-horizontal",4,"ngIf"],[1,"pt-3","radiobtn-control","flex-horizontal"],[1,"child",3,"hidden","disabled","label","name","checked"],["radioBtn",""],[1,"child",3,"hidden","disabled","label","checked"]],template:function(e,t){1&e&&(p.Tb(0,"div",null,0),p.Tb(2,"div",1),p.Tb(3,"div",2),p.Tb(4,"div",3),p.Tb(5,"div",4),p.Lc(6),p.hc(7,"translate"),p.Sb(),p.Jc(8,he,9,16,"div",5),p.Sb(),p.Tb(9,"div"),p.Tb(10,"div",6),p.Lc(11),p.hc(12,"translate"),p.Sb(),p.Tb(13,"div",7),p.Jc(14,xe,3,8,"div",8),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb()),2&e&&(p.xb(6),p.Mc(p.ic(7,4,"MODULES")),p.xb(2),p.nc("ngForOf",t.permissionList),p.xb(3),p.Mc(p.ic(12,6,"PERMISSIONS")),p.xb(3),p.nc("ngForOf",t.permissionList))},directives:[o.m,o.l,o.n,M.k,M.e,M.i],pipes:[N.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.checkbox-items[_ngcontent-%COMP%]{align-items:inherit!important;border-left:1px solid #e2e8f0}.checkbox-items[_ngcontent-%COMP%], .checkbox-items[_ngcontent-%COMP%]   .checkbox-control[_ngcontent-%COMP%]{padding-left:20px}.checkbox-items[_ngcontent-%COMP%]   .e-checkbox-wrapper.e-checkbox-disabled[_ngcontent-%COMP%]   .e-label[_ngcontent-%COMP%], .checkbox-items[_ngcontent-%COMP%]   .e-radio-wrapper[_ngcontent-%COMP%]   .e-radio[_ngcontent-%COMP%]:disabled + label[_ngcontent-%COMP%]   .e-label[_ngcontent-%COMP%]{color:var(--secondary-color)!important}.set-width[_ngcontent-%COMP%]{width:0!important}.hd-active[_ngcontent-%COMP%]{border-left:4px solid #0450cc;color:#0450cc}.set-fixed-width[_ngcontent-%COMP%]{width:200px}.permission-switch[_ngcontent-%COMP%]   .module-btn[_ngcontent-%COMP%]{height:32px;padding-left:16px!important}.permission-switch[_ngcontent-%COMP%]   .module-btn.hd-active[_ngcontent-%COMP%]{padding-left:12px!important}.permission-switch[_ngcontent-%COMP%]   .permission-module-switch[_ngcontent-%COMP%]{height:32px;line-height:32px;margin-bottom:8px;padding-left:12px}.permission-switch[_ngcontent-%COMP%]   .permission-module-switch[_ngcontent-%COMP%]   .switch-control[_ngcontent-%COMP%]{height:32px;line-height:40px}"]}),e})();const Oe=["settingsSideBar"],Ee=["roleMemberDialog"],Me=["roleMember"],Ce=["agentGrid"],De=["contentRoleForm"],Ie=["roleTab"],Ne=["permission"],Le=["updateButton"],Ae=["roleDialog"],Pe=["editRoleName"],ye=["editRoleDescription"],we=["searchAgent"];function ke(e,t){if(1&e&&(p.Tb(0,"div",16),p.Lc(1),p.hc(2,"translate"),p.Sb()),2&e){const e=p.gc();p.nc("hidden",!e.addMember),p.xb(1),p.Nc(" ",p.ic(2,2,"ADDAGENT")," ")}}function je(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",16),p.Tb(1,"button",17),p.ec("click",(function(){return p.Bc(e),p.gc().cancelDialog()})),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Tb(4,"button",18,19),p.ec("click",(function(){return p.Bc(e),p.gc().updateAddMember()})),p.Lc(6),p.hc(7,"translate"),p.Sb(),p.Sb()}if(2&e){const e=p.gc();p.nc("hidden",!e.addMember),p.xb(2),p.Nc(" ",p.ic(3,4,"CANCEL"),""),p.xb(2),p.nc("disabled",!0),p.xb(2),p.Nc(" ",p.ic(7,6,"SAVE"),"")}}function _e(e,t){1&e&&(p.Tb(0,"div"),p.Tb(1,"span",33),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(2),p.Nc(" ",p.ic(3,1,"FIELDREQUIRED"),""))}function Be(e,t){1&e&&(p.Tb(0,"div"),p.Ob(1,"span",50),p.hc(2,"translate"),p.Sb()),2&e&&(p.xb(1),p.yb("data-non-elliptical",!0)("data-title",p.ic(2,2,"AGENTADDED")))}function qe(e,t){1&e&&(p.Tb(0,"div"),p.Ob(1,"span",51),p.hc(2,"translate"),p.Sb()),2&e&&(p.xb(1),p.yb("data-non-elliptical",!0)("data-title",p.ic(2,2,"AGENTALREADYEXIST")))}function Fe(e,t){1&e&&p.Ob(0,"div",52)}function Je(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div"),p.Tb(1,"div",40),p.Tb(2,"div",41),p.Tb(3,"div",42),p.Tb(4,"div",43),p.Lc(5),p.Sb(),p.Sb(),p.Tb(6,"div",44),p.Tb(7,"span",45),p.Tb(8,"span"),p.Lc(9),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(10,"div",46),p.Tb(11,"span",45),p.Tb(12,"span"),p.Lc(13),p.Sb(),p.Sb(),p.Sb(),p.Tb(14,"div",47),p.Jc(15,Be,3,4,"div",29),p.Jc(16,qe,3,4,"div",29),p.Tb(17,"div"),p.Tb(18,"span",48),p.ec("click",(function(){p.Bc(e);const i=t.$implicit;return p.gc(3).removeMemberFromList(i.userId)})),p.hc(19,"translate"),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Jc(20,Fe,1,0,"div",49),p.Sb()}if(2&e){const e=t.$implicit,i=t.last;p.xb(4),p.Ic("background-color",e.colorCode),p.xb(1),p.Nc(" ",e.shortCode," "),p.xb(3),p.yb("data-title",e.displayName),p.xb(1),p.Mc(e.displayName),p.xb(3),p.yb("data-title",e.emailId),p.xb(1),p.Mc(e.emailId),p.xb(2),p.nc("ngIf",1==e.isSuccess),p.xb(1),p.nc("ngIf",0==e.isSuccess),p.xb(2),p.yb("data-title",p.ic(19,11,"REMOVEAGENT")),p.xb(2),p.nc("ngIf",!i)}}function Ue(e,t){if(1&e&&(p.Tb(0,"div",34),p.Tb(1,"div",35),p.Tb(2,"div",36),p.Lc(3),p.hc(4,"translate"),p.Sb(),p.Tb(5,"div",36),p.Lc(6),p.hc(7,"translate"),p.Sb(),p.Ob(8,"div",37),p.Sb(),p.Tb(9,"div",38),p.Jc(10,Je,21,13,"div",39),p.Sb(),p.Sb()),2&e){const e=p.gc(2);p.xb(3),p.Mc(p.ic(4,3,"AGENTNAME")),p.xb(3),p.Mc(p.ic(7,5,"EMAIL")),p.xb(4),p.nc("ngForOf",e.filterAgent)}}const Ge=function(e){return{error:e}};function He(e,t){if(1&e&&(p.Tb(0,"div",53),p.Ob(1,"span",54),p.hc(2,"safe"),p.Sb()),2&e){const e=p.gc(2);p.nc("ngClass",p.tc(5,Ge,e.isError)),p.xb(1),p.nc("innerHTML",p.jc(2,2,e.errorMessage,"html"),p.Cc)}}function Qe(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",20),p.Tb(1,"div",21),p.Tb(2,"div",22),p.Tb(3,"div",23),p.Tb(4,"ejs-multiselect",24,25),p.ec("change",(function(){return p.Bc(e),p.gc().addMemberChange()}))("created",(function(){return p.Bc(e),p.gc().addMemberCreated()})),p.hc(6,"translate"),p.hc(7,"translate"),p.Sb(),p.Sb(),p.Tb(8,"div",26),p.Tb(9,"button",27),p.ec("click",(function(){return p.Bc(e),p.gc().showMembersList()})),p.Tb(10,"span",28),p.Lc(11),p.hc(12,"translate"),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Jc(13,_e,4,3,"div",29),p.Sb(),p.Tb(14,"div",30),p.Jc(15,Ue,11,7,"div",31),p.Sb(),p.Jc(16,He,3,7,"div",32),p.Sb()}if(2&e){const e=p.gc();p.nc("hidden",!e.addMember),p.xb(4),p.oc("placeholder",p.ic(6,13,"SELECTAGENT")),p.oc("filterBarPlaceholder",p.ic(7,15,"SEARCH")),p.nc("dataSource",e.userList)("fields",e.fields)("allowFiltering",!0)("itemTemplate",e.agentItemTemplate)("maximumSelectionLength",100),p.xb(5),p.nc("isPrimary",!0),p.xb(2),p.Mc(p.ic(12,17,"ADD")),p.xb(2),p.nc("ngIf",e.isRequired),p.xb(2),p.nc("ngIf",e.showAgentList),p.xb(1),p.nc("ngIf",e.errorMessage)}}function Ve(e,t){if(1&e&&(p.Tb(0,"div",16),p.Lc(1),p.hc(2,"translate"),p.Sb()),2&e){const e=p.gc();p.nc("hidden",!e.editRole),p.xb(1),p.Nc(" ",p.ic(2,2,"EDITROLE")," ")}}function Xe(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",16),p.Tb(1,"button",55),p.ec("click",(function(){return p.Bc(e),p.gc().cancelEditRoleDialog()})),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Tb(4,"button",56),p.ec("click",(function(){return p.Bc(e),p.gc().updateEditRole()})),p.Lc(5),p.hc(6,"translate"),p.Sb(),p.Sb()}if(2&e){const e=p.gc();p.nc("hidden",!e.editRole),p.xb(2),p.Mc(p.ic(3,3,"CANCEL")),p.xb(3),p.Mc(p.ic(6,5,"UPDATE"))}}function ze(e,t){if(1&e&&(p.Tb(0,"div"),p.Ob(1,"span",54),p.hc(2,"safe"),p.Sb()),2&e){const e=p.gc(2);p.xb(1),p.nc("innerHTML",p.jc(2,1,e.errorMessage,"html"),p.Cc)}}function $e(e,t){1&e&&(p.Tb(0,"div"),p.Tb(1,"span",33),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(2),p.Nc(" ",p.ic(3,1,"NOCHANGES"),""))}function Ke(e,t){1&e&&(p.Tb(0,"div"),p.Tb(1,"span",33),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(2),p.Nc(" ",p.ic(3,1,"FIELDREQUIRED"),""))}function We(e,t){1&e&&p.Pb(0)}function Ye(e,t){if(1&e&&(p.Tb(0,"div"),p.Jc(1,We,1,0,"ng-container",12),p.Sb()),2&e){p.gc(2);const e=p.yc(26);p.xb(1),p.nc("ngTemplateOutlet",e)}}function Ze(e,t){1&e&&p.Pb(0)}function et(e,t){if(1&e&&(p.Tb(0,"div"),p.Jc(1,Ze,1,0,"ng-container",12),p.Sb()),2&e){p.gc(2);const e=p.yc(26);p.xb(1),p.nc("ngTemplateOutlet",e)}}function tt(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",null,8),p.Tb(2,"div",16),p.Jc(3,ze,3,4,"div",29),p.Jc(4,$e,4,3,"div",29),p.Tb(5,"div",57),p.Tb(6,"label"),p.Lc(7),p.hc(8,"translate"),p.Tb(9,"span",58),p.Lc(10,"*"),p.Sb(),p.Sb(),p.Tb(11,"ejs-textbox",59,60),p.ec("blur",(function(){return p.Bc(e),p.gc().editRoleFocusOut()}))("change",(function(){return p.Bc(e),p.gc().editRoleChange()}))("created",(function(){return p.Bc(e),p.gc().controlCreated("editRoleNameField")}))("input",(function(t){return p.Bc(e),p.gc().editRoleInput(t)}))("focus",(function(){return p.Bc(e),p.gc().editRoleFocus()})),p.hc(13,"translate"),p.Sb(),p.Jc(14,Ke,4,3,"div",29),p.Jc(15,Ye,2,1,"div",29),p.Sb(),p.Tb(16,"div",57),p.Tb(17,"label"),p.Lc(18),p.hc(19,"translate"),p.Sb(),p.Tb(20,"ejs-textbox",61,62),p.ec("change",(function(){return p.Bc(e),p.gc().editRoleDescriptionChange()})),p.hc(22,"translate"),p.Sb(),p.Jc(23,et,2,1,"div",29),p.Sb(),p.Sb(),p.Sb()}if(2&e){const e=p.gc();p.xb(2),p.nc("hidden",!e.editRole),p.xb(1),p.nc("ngIf",e.errorMessage),p.xb(1),p.nc("ngIf",e.noChangesValidation),p.xb(3),p.Nc(" ",p.ic(8,14,"ROLENAME")," "),p.xb(4),p.oc("placeholder",p.ic(13,16,"TEXTBOXPLACEHOLDER")),p.nc("value",e.dialogRoleName)("htmlAttributes",e.inputAttribute),p.xb(3),p.nc("ngIf",e.isRequired),p.xb(1),p.nc("ngIf",e.editRoleNameError),p.xb(3),p.Nc(" ",p.ic(19,18,"DESCRIPTION")," "),p.xb(2),p.oc("placeholder",p.ic(22,20,"TEXTBOXPLACEHOLDER")),p.nc("value",e.dialogRoleDescription)("htmlAttributes",e.textAreaAttribute),p.xb(3),p.nc("ngIf",e.editRoleDescriptionError)}}function it(e,t){1&e&&p.Pb(0)}function ot(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div"),p.Tb(1,"button",65),p.ec("click",(function(){return p.Bc(e),p.gc(2).updateCreateRole()})),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Tb(4,"button",66),p.ec("click",(function(){return p.Bc(e),p.gc(2).cancelPermissionDialog()})),p.Lc(5),p.hc(6,"translate"),p.Sb(),p.Sb()}2&e&&(p.xb(2),p.Mc(p.ic(3,2,"UPDATE")),p.xb(3),p.Mc(p.ic(6,4,"CANCEL")))}function nt(e,t){if(1&e&&(p.Tb(0,"div",63),p.Tb(1,"div",64),p.Jc(2,ot,7,6,"div",29),p.Sb(),p.Sb()),2&e){const e=p.gc();p.xb(2),p.nc("ngIf",e.roleId>0)}}function rt(e,t){if(1&e&&(p.Ob(0,"span",67),p.hc(1,"safe")),2&e){const e=p.gc();p.nc("innerHTML",p.jc(1,1,e.commonInputValidationErrorMessage,"html"),p.Cc)}}function st(e,t){1&e&&(p.Tb(0,"span",87),p.Tb(1,"span"),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(2),p.Nc(" ",p.ic(3,1,"SYSTEM"),""))}function ct(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",88),p.ec("click",(function(){return p.Bc(e),p.gc(2).editClick()})),p.hc(1,"translate"),p.Sb()}2&e&&p.yb("data-title",p.ic(1,1,"EDIT"))}function lt(e,t){if(1&e&&(p.Tb(0,"div",74),p.Tb(1,"span",89),p.Lc(2),p.Sb(),p.Sb()),2&e){const e=p.gc(2);p.xb(1),p.yb("data-title",e.description),p.xb(1),p.Mc(e.description)}}function at(e,t){1&e&&(p.Tb(0,"div",90),p.Ob(1,"div",91),p.Tb(2,"div"),p.Lc(3),p.hc(4,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(3),p.Nc(" ",p.ic(4,1,"ROLESINFOLABEL"),""))}const dt=function(e){return{"set-padding":e}};function ht(e,t){if(1&e&&(p.Tb(0,"div",92),p.Tb(1,"div"),p.Ob(2,"app-permisson-list",93,94),p.Sb(),p.Sb()),2&e){const e=p.gc(2);p.nc("ngClass",p.tc(3,dt,!e.isGridPage)),p.xb(2),p.nc("roleId",e.roleId)("canEdit",e.canEdit)}}function bt(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",110),p.Tb(1,"div",111),p.Lc(2),p.Sb(),p.Tb(3,"div",44),p.Tb(4,"span",112),p.ec("click",(function(){p.Bc(e);const i=t.$implicit;return p.gc(3).userDetails(i)})),p.Lc(5),p.Sb(),p.Sb(),p.Sb()}if(2&e){const e=t.$implicit;p.xb(1),p.Ic("background-color",e.colorCode),p.xb(1),p.Nc(" ",e.shortCode," "),p.xb(2),p.yb("data-title",e.userName),p.xb(1),p.Nc(" ",e.userName," ")}}function ut(e,t){if(1&e){const e=p.Ub();p.Tb(0,"span",113),p.ec("click",(function(){p.Bc(e);const i=t.$implicit;return p.gc(3).openRemoveUserDialog(i)})),p.hc(1,"translate"),p.Sb()}2&e&&p.yb("data-title",p.ic(1,1,"REMOVEAGENT"))}function pt(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",95),p.Tb(1,"div",96),p.Tb(2,"div",97),p.Tb(3,"div",98),p.Tb(4,"div",99),p.Tb(5,"ejs-textbox",100,101),p.ec("change",(function(){return p.Bc(e),p.gc(2).searchNodes()})),p.hc(7,"translate"),p.Sb(),p.Sb(),p.Tb(8,"div",102),p.Tb(9,"button",103),p.ec("click",(function(){return p.Bc(e),p.gc(2).addAgentClick()})),p.Lc(10),p.hc(11,"translate"),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(12,"ejs-grid",104,105),p.ec("dataBound",(function(){return p.Bc(e),p.gc(2).agentGridDataBound()})),p.Tb(14,"e-columns"),p.Tb(15,"e-column",106),p.hc(16,"translate"),p.Jc(17,bt,6,5,"ng-template",null,107,p.Kc),p.Sb(),p.Ob(19,"e-column",108),p.hc(20,"translate"),p.Tb(21,"e-column",109),p.hc(22,"translate"),p.Jc(23,ut,2,3,"ng-template",null,107,p.Kc),p.Sb(),p.Sb(),p.Sb(),p.Sb()}if(2&e){const e=p.gc(2);p.xb(5),p.oc("placeholder",p.ic(7,10,"SEARCH")),p.xb(5),p.Nc(" ",p.ic(11,12,"ADDAGENT")," "),p.xb(2),p.nc("dataSource",e.membersList)("allowSorting",!0)("allowPaging",!0)("pageSettings",e.pageSettings)("allowResizing",!0),p.xb(3),p.oc("headerText",p.ic(16,14,"AGENT")),p.xb(4),p.oc("headerText",p.ic(20,16,"EMAIL")),p.xb(2),p.oc("headerText",p.ic(22,18,"ACTION"))}}const gt=function(e){return{background:e}};function mt(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",68),p.Tb(1,"div",69),p.Tb(2,"div",70),p.Tb(3,"div",71),p.Lc(4),p.Sb(),p.Tb(5,"div",72),p.Tb(6,"div",73),p.Tb(7,"div"),p.Tb(8,"div",74),p.Tb(9,"span",75),p.Lc(10),p.Sb(),p.Sb(),p.Sb(),p.Jc(11,st,4,3,"span",76),p.Jc(12,ct,2,3,"div",77),p.Sb(),p.Jc(13,lt,3,2,"div",78),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Jc(14,at,5,3,"div",79),p.Tb(15,"div",80),p.Tb(16,"div",81),p.Tb(17,"div",82),p.Tb(18,"ejs-tab",83,84),p.ec("selecting",(function(){return p.Bc(e),p.gc().tabSelecting()})),p.Tb(20,"e-tabitems"),p.Tb(21,"e-tabitem",85),p.Jc(22,ht,4,5,"ng-template",null,4,p.Kc),p.Sb(),p.Tb(24,"e-tabitem",86),p.Jc(25,pt,25,20,"ng-template",null,4,p.Kc),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb()}if(2&e){const e=p.gc();p.xb(3),p.nc("ngStyle",p.tc(11,gt,e.colorCode)),p.xb(1),p.Mc(e.shortCode),p.xb(5),p.yb("data-title",e.roleName),p.xb(1),p.Mc(e.roleName),p.xb(1),p.nc("ngIf",e.data.isDefault),p.xb(1),p.nc("ngIf",!e.data.isDefault),p.xb(1),p.nc("ngIf",e.data.description),p.xb(1),p.nc("ngIf",e.data.isDefault),p.xb(4),p.nc("animation",e.tabAnimationSettings),p.xb(3),p.nc("header",e.tabHeaders[0]),p.xb(3),p.nc("header",e.tabHeaders[1])}}const ft=function(e){return{"set-height-100":e}};let vt=(()=>{class e{constructor(e,t,i,o,n,r,s,c){this.route=e,this.router=t,this.appRootService=i,this.roleService=o,this.toastService=n,this.roleRootService=r,this.seoService=s,this.spinService=c,this.tabAnimationSettings={next:{effect:"None"},previous:{effect:"None"}},this.tabHeaders=[{text:Object(h.a)("PERMISSIONS")},{text:Object(h.a)("AGENTS")}],this.fields={text:"displayName",value:"userId"},this.canEdit=!0,this.agentItemTemplate=Object(d.B)(),this.agentTempData=[],this.agentValue=[],this.showAgentList=!1,this.filterAgent=[],this.filterAgentArray=[],this.tempData=[],this.showStatusHeader=!1,this.canRemoveAgent=!0,this.isMembersTab=!1,this.noChangesValidation=!1,this.inputAttribute={maxlength:b.s,autocomplete:"anyrandomstring"},this.textAreaAttribute={maxlength:b.M,autocomplete:"anyrandomstring"},this.roleId=parseInt(this.route.snapshot.paramMap.get("roleId"),10),this.roleDetail=this.route.data.subscribe(e=>{this.isMembersTab=!Object(l.X)(history.state.data)&&history.state.data.isMembers,this.data=e.data,this.dialogRoleName=this.data.roleName,this.dialogRoleDescription=this.data.description,this.roleName=this.data.roleName,this.description=this.data.description,this.canEdit=this.data.canEdit,this.shortCode=this.data.shortCode,this.colorCode=this.data.colorCode,this.spinService.hideSpinner()}),this.data||this.router.navigateByUrl("error",{state:Object(h.a)("ROLENOTEXIST"),skipLocationChange:!0});const a=Object(h.a)("ADMIN")+" / "+Object(h.a)("ROLESPERMISSION")+" / "+Object(h.a)("DETAIL")+",/admin/roles-permissions",u=Object(h.a)("EDITROLE")+" | "+Object(h.a)("ADMIN");this.appRootService.setAppTitleText(a),this.seoService.setHeaderElements({title:u}),this.appRootService.isSideBarNeeded(!0),this.appRootService.setBrandDropDownVisibility(!1),this.appRootService.getNavigateUrl("/admin/roles-permissions")}userDetails(e){this.router.navigateByUrl("/admin/agents/"+e.userId)}ngOnInit(){this.pageSettings={pageSize:50},this.membersList=new r.a({url:c.a.MemberList+this.roleId+"/members",adaptor:new a.b}),this.userList=new r.a({url:c.a.UserList,adaptor:new a.b}),this.roleDetailError=this.roleRootService.httpRoleErrorIntercept.subscribe(e=>{null!=e&&(this.spinService.hideSpinner(),this.errorMessage=e)}),this.commonInputValidationErrorMessage=d.e}ngAfterViewInit(){this.isMembersTab?(this.roleTab.selectedItem=1,setTimeout(()=>{this.isGridPage=!0})):this.roleTab.selectedItem=2}addAgentClick(){this.canLoadGrid=!1,this.roleMemberDialog.showCloseIcon=!0,this.roleMemberDialog.show(),this.addMember=!0,this.removeMember=!1,this.roleMember.value=null,this.isRequired=!1,this.errorMessage=null}agentGridDataBound(){Object(d.a)(this.grid)}addMemberCreated(){setTimeout(()=>{this.roleMember&&this.roleMember.element&&Object(d.h)(this.roleMember.element)})}addMemberFocusOut(){this.isRequired=!this.roleMember.value}addMemberChange(){null!=this.roleMember.value&&this.roleMember.value.length>0?this.isRequired=!1:this.roleMember.value=null}showMembersList(){Object(l.X)(this.roleMember.value)?this.isRequired=!0:this.roleMember.value.length>0&&(this.isRequired=!1,this.filterAgent=[],this.tempData=[],this.addMemberList())}addMemberList(){this.removeObject(),this.showStatusHeader=!1,this.canRemoveAgent=!0,this.agentTempData=this.roleMember.element.ej2_instances[0].listData,this.agentTempData.length>0&&!Object(l.X)(this.roleMember.value)&&(this.agentValue=this.roleMember.value,this.agentTempData.map(e=>{this.agentValue.map(t=>{e.userId===t&&this.filterAgentArray.push(e)})}),this.filterAgentArray.length>0&&(this.showAgentList=!0,this.filterAgent=this.filterAgentArray.filter((e,t,i)=>t===i.indexOf(e)),this.updateButton.isPrimary=!0,this.updateButton.disabled=!1)),this.roleMember.value=null,this.updateUserMessage()}removeMemberFromList(e){this.errorMessage=null,this.filterAgentArray=[],this.filterAgent.map(t=>{t.userId!==e&&this.filterAgentArray.push(t)}),this.filterAgent=this.filterAgentArray,0===this.filterAgent.length&&(this.showAgentList=!1,this.updateButton.isPrimary=!1,this.updateButton.disabled=!0),this.updateUserMessage()}updateUserMessage(){const e=this.filterAgent.filter(e=>!e.isSuccess&&!Object(l.X)(e.isSuccess)).length>0,t=this.filterAgent.filter(e=>e.isSuccess&&!Object(l.X)(e.isSuccess)).length>0;e?(this.errorMessage=this.filterAgent.filter(e=>!e.isSuccess).length+" "+Object(h.a)("USER(S)FAILEDTOADD"),this.isError=!0):t?(this.errorMessage=this.filterAgent.length+" "+Object(h.a)("USERSADDED"),this.isError=!1):(this.errorMessage=this.filterAgent.length+" "+Object(h.a)("USERSWILLBEADDED"),this.isError=!1)}openRemoveUserDialog(e){this.userId=+e.userId;const t="<span>"+Object(h.a)("REMOVEAGENTALERT")+' </span><span class="font-500">'+e.userName+" </span><span>"+Object(h.a)("FROMTHISROLE")+"</span>";Object(d.b)(this.updateRemoveUser,this.cancelDialog,this,Object(h.a)("REMOVEAGENT"),t,Object(h.a)("YES")+", "+Object(h.a)("REMOVE"))}cancelDialog(){this.removeObject(),this.roleMemberDialog.hide(),this.isRequired=null,this.errorMessage=null,this.roleMember.value=null,this.deleteDialog&&this.deleteDialog.hide(),this.updateButton.isPrimary=!1,this.updateButton.disabled=!0,this.showAgentList=!1,this.filterAgent=null,this.canLoadGrid&&this.loadGrid(),this.canRemoveAgent=!0,this.filterAgentArray=[]}overlayClick(){this.isRequired=null,this.errorMessage=null,this.roleMember.value=null,this.showAgentList=!1,this.filterAgent=null,this.roleMemberDialog.hide(),this.roleDialog.hide(),this.noChangesValidation=null,this.editRole=!1,this.dialogRoleName=null,this.dialogRoleDescription=null,this.editRoleName.value=null,this.editRoleDescription.value=null}openAddUserDialog(){this.roleMember.value=null,this.roleMemberDialog.showCloseIcon=!0,this.roleMemberDialog.width="450px",this.roleMemberDialog.show(),this.addMember=!0,this.removeMember=!1,this.isRequired=!1,this.errorMessage=null,this.showAgentList=!1,this.filterAgent=null}roleDialogOpen(){this.addMember&&setTimeout(()=>{this.roleMember.focusIn(),this.errorMessage="0 "+Object(h.a)("USERSWILLBEADDED"),this.isError=!1})}updateRemoveUser(){this.spinService.showSpinner(),this.roleService.removeMember(this.userId,this.roleId).then(e=>{e&&(this.spinService.hideSpinner(),this.deleteDialog.hide(),this.toastService.successToast(Object(h.a)("AGENTREMOVED")),this.loadGrid(),this.isRequired=!1)})}getAgentIds(){return this.filterAgent.map(e=>e.userId)}updateAddMember(){if(this.errorMessage=null,!Object(l.X)(this.filterAgent)&&this.filterAgent.length>0){this.spinService.showSpinner();const e=this.getAgentIds();this.isRequired=!1,this.roleService.addMember(e,this.roleId).then(e=>{e&&(this.spinService.hideSpinner(),this.roleMemberDialog.hide(),this.toastService.successToast(Object(h.a)("AGENTADDED")),this.loadGrid(),this.isRequired=!1)}).catch(e=>{this.spinService.hideSpinner(),400===e.status&&(this.roleMember.focusIn(),Object(l.X)(e.error.result)||(this.canLoadGrid=e.error.result.filter(e=>e.isSuccess).length>0,this.addObject(e.error.result),this.errorMessage=e.error.result.filter(e=>!e.isSuccess).length+" "+Object(h.a)("USER(S)FAILEDTOADD"),this.isError=!0))}).finally(()=>{this.updateButton.isPrimary=!1,this.updateButton.disabled=!0,this.filterAgentArray=[]})}else this.roleMember.focusIn(),this.isRequired=!0,this.errorMessage=null}addObject(e){this.canRemoveAgent=!1,this.filterAgent.map(t=>{e.map(e=>{t.userId===e.id&&(t.isSuccess=e.isSuccess)})}),this.filterAgent=this.filterAgent.filter(e=>!e.isSuccess)}removeObject(){this.tempData=this.roleMember.element.ej2_instances[0].listData,Object(l.X)(this.tempData)||this.tempData.length>0&&this.tempData.map(e=>{Object(l.X)(e.isSuccess)||delete e.isSuccess})}updateCreateRole(){this.spinService.showSpinner();const e=this.permissionListRef.getPermissionLists();this.roleService.editPermission({roleId:this.roleId,permissions:e}).then(e=>{this.spinService.hideSpinner(),e&&this.toastService.successToast(e.message),this.cancelPermissionDialog()}).catch(e=>{this.spinService.hideSpinner(),e.error&&e.error.errors.length>0&&this.toastService.failureToast(e.error.errors[0].errorMessage)})}cancelPermissionDialog(){this.router.navigateByUrl("/admin/roles-permissions")}focusIn(){this.isRequired=!1}dialogClose(){this.removeObject(),this.isRequired=null,this.errorMessage=null,this.roleMember.value=null,this.showAgentList=!1,this.filterAgent=null,this.canLoadGrid&&this.loadGrid(),this.updateButton.isPrimary=!1,this.updateButton.disabled=!0,this.canRemoveAgent=!0,this.filterAgentArray=[],this.noChangesValidation=null,this.editRole=!1,this.dialogRoleName=null,this.dialogRoleDescription=null,this.editRoleName.value=null,this.editRoleDescription.value=null}dialogCreated(){this.dialogCreate=!0}ngOnDestroy(){this.roleMemberDialog&&this.dialogCreate&&this.roleMemberDialog.element&&Object(l.I)(this.roleMemberDialog.element),this.roleDialog&&this.dialogCreate&&this.roleDialog.element&&Object(l.I)(this.roleDialog.element),this.roleDetail.unsubscribe(),this.roleDetailError.unsubscribe()}loadGrid(){this.membersList=new r.a({url:c.a.MemberList+this.roleId+"/members",adaptor:new a.b})}tabSelecting(){this.isGridPage="1"===this.roleTab.selectingID}editClick(){this.editRole=!0,this.dialogRoleName=this.roleName,this.dialogRoleDescription=this.description,this.roleDialog.show()}editRoleFocusOut(){if(this.isRequired=!this.editRoleName.value,!this.isRequired){const e=Object(d.d)(this.editRoleName.value);this.editRoleNameError=!!e}}editRoleChange(){if(null!=this.editRoleName.value){this.isRequired=!1,this.noChangesValidation=!1,this.errorMessage=null;const e=Object(d.d)(this.editRoleName.value);this.editRoleNameError=!!e}else this.isRequired=!0,this.editRoleNameError=!1}controlCreated(e){setTimeout(()=>{const t=this.addEditRoleForm.nativeElement;Object(d.h)(t.querySelector("#"+e))})}editRoleInput(e){const t=e.value;this.isRequired=!(!Object(l.X)(t)&&""!==t.trim());const i=Object(d.d)(t);this.editRoleNameError=!!i}editRoleFocus(){this.isRequired=!1,this.editRoleNameError=!1}editRoleDescriptionChange(){if(null!=this.editRoleDescription.value){const e=Object(d.d)(this.editRoleDescription.value);this.editRoleDescriptionError=!!e}else this.editRoleDescriptionError=!1}cancelEditRoleDialog(){this.roleDialog.hide(),this.isRequired=!1,this.noChangesValidation=!1,this.errorMessage=null,this.editRole=!1,this.dialogRoleName=null,this.dialogRoleDescription=null,this.editRoleName.value=null,this.editRoleDescription.value=null}updateEditRole(){if(this.spinService.showSpinner(),this.roleId=+this.roleId,this.editRoleName.value.trim()===this.dialogRoleName&&(this.editRoleDescription.value&&this.editRoleDescription.value.trim()===this.dialogRoleDescription||this.editRoleDescription.value===this.dialogRoleDescription))this.spinService.hideSpinner(),this.noChangesValidation=!0,this.isRequired=null;else if(0===this.editRoleName.value.length||""===this.editRoleName.value)this.spinService.hideSpinner(),this.isRequired=!0,this.noChangesValidation=null;else if(this.editRoleNameError||this.editRoleDescriptionError)this.spinService.hideSpinner();else{const e={roleId:this.roleId,roleName:this.editRoleName.value.trim(),description:this.editRoleDescription.value?this.editRoleDescription.value.trim():null};this.errorMessage=null,this.noChangesValidation=!1,this.roleService.editRole(e).then(e=>{e&&(this.spinService.hideSpinner(),this.roleDialog.hide(),this.toastService.successToast(Object(h.a)("ROLEUPDATED")),this.isRequired=!1,this.shortCode=e.shortCode,this.colorCode=e.colorCode,this.roleName=this.editRoleName.value.trim(),this.description=this.editRoleDescription.value?this.editRoleDescription.value.trim():null)})}}searchNodes(){const e=this.searchAgent.value.trim();this.grid.search(e)}}return e.\u0275fac=function(t){return new(t||e)(p.Nb(n.a),p.Nb(n.g),p.Nb(g.a),p.Nb(O),p.Nb(m.a),p.Nb(T),p.Nb(v.a),p.Nb(x.a))},e.\u0275cmp=p.Hb({type:e,selectors:[["app-role-details"]],viewQuery:function(e,t){var i;1&e&&(p.Qc(Oe,!0),p.Qc(Ee,!0),p.Qc(Me,!0),p.Qc(Ce,!0),p.Qc(De,!0),p.Qc(Ie,!0),p.Qc(Ne,!0),p.Qc(Le,!0),p.Qc(Ae,!0),p.Qc(Pe,!0),p.Qc(ye,!0),p.Qc(we,!0)),2&e&&(p.xc(i=p.fc())&&(t.settingsSideBar=i.first),p.xc(i=p.fc())&&(t.roleMemberDialog=i.first),p.xc(i=p.fc())&&(t.roleMember=i.first),p.xc(i=p.fc())&&(t.grid=i.first),p.xc(i=p.fc())&&(t.addEditRoleForm=i.first),p.xc(i=p.fc())&&(t.roleTab=i.first),p.xc(i=p.fc())&&(t.permissionListRef=i.first),p.xc(i=p.fc())&&(t.updateButton=i.first),p.xc(i=p.fc())&&(t.roleDialog=i.first),p.xc(i=p.fc())&&(t.editRoleName=i.first),p.xc(i=p.fc())&&(t.editRoleDescription=i.first),p.xc(i=p.fc())&&(t.searchAgent=i.first))},decls:29,vars:7,consts:[["id","roleDetailDialog","width","500","isModal","true","showCloseIcon","true","closeOnEscape","true","height","600","cssClass","add-member-dialog",3,"visible","close","created","open"],["roleMemberDialog",""],["header",""],["footerTemplate",""],["content",""],["id","roleListDialog","width","400px","isModal","true","showCloseIcon","true","closeOnEscape","true","height","Auto",3,"visible","overlayClick","close","created"],["roleDialog",""],[1,"h-100"],["contentRoleForm",""],[1,"permission-form"],[1,"permission-overflow","overflow-auto-align",3,"ngClass"],[1,"row","pt-3"],[4,"ngTemplateOutlet"],["class","action-buttons",4,"ngIf"],["errorInputValidation",""],["mainContent",""],[3,"hidden"],["ejs-button","","cssClass","e-flat",3,"click"],["ejs-button","",3,"disabled","click"],["updateButton",""],[1,"add-agent-container",3,"hidden"],[1,"email-selection"],[1,"flex-horizontal"],[1,"pt-3",2,"width","85%"],["floatLabelType","Never","mode","CheckBox",3,"dataSource","fields","placeholder","allowFiltering","filterBarPlaceholder","itemTemplate","maximumSelectionLength","change","created"],["roleMember",""],[1,"pl-3","pt-3"],["ejs-button","","cssClass","e-outline e-flat",3,"isPrimary","click"],[1,"pl-2","pr-2"],[4,"ngIf"],[1,"email-list"],["class","email-list-container",4,"ngIf"],["class","error-block",3,"ngClass",4,"ngIf"],[1,"required"],[1,"email-list-container"],[1,"flex-horizontal","pt-2","list-header"],[1,"pl-2","font-500",2,"width","40%"],[1,"font-500","text-center",2,"width","20%"],[1,"border-top","list-item"],[4,"ngFor","ngForOf"],[1,"flex-horizontal","secondary","pl-2","py-2"],[1,"flex-horizontal","pr-2",2,"width","40%"],[1,"pr-3"],[1,"e-avatar","e-avatar-small","e-avatar-circle","agent-avatar",2,"text-indent","initial"],[1,"no-wrap","ellipsis"],[1,"e-text"],[1,"no-wrap","ellipsis","pr-2",2,"width","40%"],[1,"flex-horizontal","justify-content-center",2,"width","20%"],[1,"hd-icon","hd-close","action-button","p-2","icon-font-size","cursor-pointer",3,"click"],["class","border-bottom ml-1 mr-1",4,"ngIf"],[1,"hd-icon","hd-toast-success","hd-success","success-icon"],[1,"hd-icon","hd-warning-icon","required","success-icon"],[1,"border-bottom","ml-1","mr-1"],[1,"error-block",3,"ngClass"],[3,"innerHTML"],["data-ripple","true","autofocus","",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat",3,"click"],[1,"form-group","pt-3"],[1,"error"],["id","editRoleNameField","autocomplete","off",3,"placeholder","value","htmlAttributes","blur","change","created","input","focus"],["editRoleName",""],["data-id","editRoleDescription","autocomplete","off",3,"placeholder","value","htmlAttributes","change"],["editRoleDescription",""],[1,"action-buttons"],[1,"row","col-lg-8"],["data-ripple","true",1,"e-control","e-btn","e-primary","mr-3",3,"click"],["data-ripple","true",1,"e-control","e-outline","e-btn","e-secondary",3,"click"],[1,"error",3,"innerHTML"],[1,"row","container"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","flex"],[1,"flex-horizontal","pl-4"],[1,"groups-and-roles-label",3,"ngStyle"],[1,"flex-vertical","pl-3"],[1,"flex-horizontal","label-text"],[1,"view-title-text","ellipsis"],[1,"h6"],["class","status ellipsis no-wrap left-spacing custom-chip",4,"ngIf"],["class","bd-icon bd-icon-edit bd-icon-hover-bg cursor-pointer",3,"click",4,"ngIf"],["class","view-title-text ellipsis",4,"ngIf"],["class","secondary padding-10 information-content","style","width: 100%; margin: 16px 40px;",4,"ngIf"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","flex","pl-4","pt-3"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","px-0"],[1,"no-margin","no-padding"],["ngClass","permission-tab",3,"animation","selecting"],["roleTab",""],["cssClass","permission-member",3,"header"],[3,"header"],[1,"status","ellipsis","no-wrap","left-spacing","custom-chip"],[1,"bd-icon","bd-icon-edit","bd-icon-hover-bg","cursor-pointer",3,"click"],[1,"secondary","font-13","pb-2","pt-2"],[1,"secondary","padding-10","information-content",2,"width","100%","margin","16px 40px"],[1,"bd-icon","bd-icon-info","information-icon","information-icon-position"],[1,"pt-2","flex-vertical",3,"ngClass"],[3,"roleId","canEdit"],["permission",""],[1,"pl-3","pr-4","role-detail-grid"],[1,"row","no-padding"],[1,"grid-menu-bar"],[1,"grid-menu"],[1,"search-box"],["id","search","showClearButton","true","autocomplete","off","maxlength","150",3,"placeholder","change"],["searchAgent",""],[1,"add-button-container"],["type","button","ejs-button","",1,"e-btn","add-agent-button","e-outline","e-primary",3,"click"],[3,"dataSource","allowSorting","allowPaging","pageSettings","allowResizing","dataBound"],["agentGrid",""],["field","userName","minWidth","200","width","250",3,"headerText"],["template",""],["field","emailId","minWidth","300","width","350","clipMode","EllipsisWithTooltip",3,"headerText"],["minWidth","100","width","100","clipMode","EllipsisWithTooltip","textAlign","Center",3,"headerText"],[1,"flex-horizontal","secondary","p-1"],[1,"e-avatar","e-avatar-small","e-avatar-circle"],[1,"primary-link-color","cursor-pointer",3,"click"],[1,"hd-icon","hd-close","action-button","padding-10","icon-font-size","cursor-pointer",2,"font-size","14px",3,"click"]],template:function(e,t){if(1&e&&(p.Tb(0,"div"),p.Tb(1,"ejs-dialog",0,1),p.ec("close",(function(){return t.dialogClose()}))("created",(function(){return t.dialogCreated()}))("open",(function(){return t.roleDialogOpen()})),p.Jc(3,ke,3,4,"ng-template",null,2,p.Kc),p.Jc(5,je,8,8,"ng-template",null,3,p.Kc),p.Jc(7,Qe,17,19,"ng-template",null,4,p.Kc),p.Sb(),p.Sb(),p.Tb(9,"div"),p.Tb(10,"ejs-dialog",5,6),p.ec("overlayClick",(function(){return t.overlayClick()}))("close",(function(){return t.dialogClose()}))("created",(function(){return t.dialogCreated()})),p.Jc(12,Ve,3,4,"ng-template",null,2,p.Kc),p.Jc(14,Xe,7,7,"ng-template",null,3,p.Kc),p.Jc(16,tt,24,22,"ng-template",null,4,p.Kc),p.Sb(),p.Sb(),p.Tb(18,"div",7,8),p.Tb(20,"div",9),p.Tb(21,"div",10),p.Tb(22,"div",11),p.Jc(23,it,1,0,"ng-container",12),p.Sb(),p.Sb(),p.Jc(24,nt,3,1,"div",13),p.Sb(),p.Sb(),p.Jc(25,rt,2,4,"ng-template",null,14,p.Kc),p.Jc(27,mt,27,13,"ng-template",null,15,p.Kc)),2&e){const e=p.yc(28);p.xb(1),p.nc("visible",!1),p.xb(9),p.nc("visible",!1),p.xb(11),p.nc("ngClass",p.tc(5,ft,t.isGridPage||t.data.isDefault)),p.xb(2),p.nc("ngTemplateOutlet",e),p.xb(1),p.nc("ngIf",!t.isGridPage&&t.canEdit)}},directives:[s.b,o.l,o.r,o.n,M.c,I.h,o.m,E.i,o.o,D.m,D.o,D.n,Te,C.k,C.e,C.b,C.d,C.a],pipes:[N.a,L.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.grid-table-view[_ngcontent-%COMP%]{border:solid #e2e8f0;border-width:1px 0 0;text-align:center}.permission-form[_ngcontent-%COMP%]{height:100%}.permission-form[_ngcontent-%COMP%]   .form-builder[_ngcontent-%COMP%]{margin:0 auto 0 5%}.action-buttons[_ngcontent-%COMP%]{background:#f7fafc;border-top:1px solid #e8eaed;bottom:0;height:50px;left:0;margin-left:0;padding:10px 10px 10px 24px;position:fixed;width:100%}.permission-overflow[_ngcontent-%COMP%]{height:calc(100% - 50px);max-height:100%!important;top:0!important}.overflow-auto-align[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}.set-height-100[_ngcontent-%COMP%]{height:100%!important}.permission-tab[_ngcontent-%COMP%]   .e-tab-header[_ngcontent-%COMP%]{padding-left:1rem!important}.permission-tab[_ngcontent-%COMP%] > .e-content[_ngcontent-%COMP%]{margin-top:15px}.permission-tab[_ngcontent-%COMP%]   .set-padding[_ngcontent-%COMP%]{padding-left:1rem!important}.padding-bottom-11px[_ngcontent-%COMP%]{padding-bottom:11px}.custom-chip[_ngcontent-%COMP%]{background:#e2e8f0;border:1px solid #cbd2e0;border-radius:16px;color:#4a5568;font-size:12px;height:20px;line-height:18px;padding:0 10px}","body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.icon-font-size[_ngcontent-%COMP%]{font-size:10px!important}.add-member-dialog.e-dialog[_ngcontent-%COMP%]{max-height:70%!important}.add-member-dialog[_ngcontent-%COMP%]   .e-split-btn-wrapper[_ngcontent-%COMP%]   .e-btn[_ngcontent-%COMP%]{background-color:#fff!important}.add-member-dialog[_ngcontent-%COMP%]   .hd-close[_ngcontent-%COMP%]{height:25px!important}.add-member-dialog[_ngcontent-%COMP%]   .e-dlg-content[_ngcontent-%COMP%]{padding:0}.add-member-dialog[_ngcontent-%COMP%]   .add-agent-container[_ngcontent-%COMP%]{height:100%}.add-member-dialog[_ngcontent-%COMP%]   .add-agent-container[_ngcontent-%COMP%]   .email-selection[_ngcontent-%COMP%]{height:20%;padding:0 16px}.add-member-dialog[_ngcontent-%COMP%]   .add-agent-container[_ngcontent-%COMP%]   .email-list[_ngcontent-%COMP%]{height:70%;padding:0 16px}.add-member-dialog[_ngcontent-%COMP%]   .add-agent-container[_ngcontent-%COMP%]   .email-list[_ngcontent-%COMP%]   .email-list-container[_ngcontent-%COMP%]{height:100%;padding-bottom:10px}.add-member-dialog[_ngcontent-%COMP%]   .add-agent-container[_ngcontent-%COMP%]   .email-list[_ngcontent-%COMP%]   .email-list-container[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]{height:35%}.add-member-dialog[_ngcontent-%COMP%]   .add-agent-container[_ngcontent-%COMP%]   .email-list[_ngcontent-%COMP%]   .email-list-container[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{height:65%;overflow:auto}.add-member-dialog[_ngcontent-%COMP%]   .add-agent-container[_ngcontent-%COMP%]   .error-block[_ngcontent-%COMP%]{background:#e5efff;font-size:12px;height:10%;padding-top:5px;text-align:center}.hd-success[_ngcontent-%COMP%]{color:#28a745}.success-icon[_ngcontent-%COMP%]{font-size:14px!important}.border-margin[_ngcontent-%COMP%]{margin:12px 4px 0}.add-button[_ngcontent-%COMP%]{height:34px;width:70px}.agent-avatar[_ngcontent-%COMP%]{height:24px!important;width:24px!important}.btn-text-weight[_ngcontent-%COMP%]{font-weight:400!important}.text-color[_ngcontent-%COMP%]{color:var(--secondary-color)}.view-title-text[_ngcontent-%COMP%]{max-width:450px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.label-text[_ngcontent-%COMP%]   .hd-data-edit[_ngcontent-%COMP%]:hover{background-color:rgba(5,101,255,.04);border-color:transparent;color:#0565ff}.groups-and-roles-label[_ngcontent-%COMP%]{background:#007bff;border-radius:50%;color:#fff;font-size:20px;height:55px;line-height:55px;text-align:center;vertical-align:middle;width:55px}.add-member-grid[_ngcontent-%COMP%]   .e-split-btn-wrapper[_ngcontent-%COMP%]   .e-btn[_ngcontent-%COMP%]{background:inherit!important}"]}),e})(),St=(()=>{class e{constructor(e,t,i){this.http=e,this.roleRootService=t,this.spinService=i}resolve(e){return this.spinService.showSpinner(),this.http.get(c.a.RoleDetail+e.params.roleId).toPromise().catch(e=>{this.roleRootService.roleModuleErrorHandling(e,"roleDetail")})}}return e.\u0275fac=function(t){return new(t||e)(p.bc(S.b),p.bc(T),p.bc(x.a))},e.\u0275prov=p.Jb({token:e,factory:e.\u0275fac}),e})();var Rt=i("mrjb");let xt=(()=>{class e{constructor(e,t,i){this.http=e,this.roleRootService=t,this.spinService=i}resolve(e){this.spinService.showSpinner();const t=Object(l.X)(e.params.roleId)?"0":e.params.roleId,i=Object(d.i)(c.a.PermissionList,"roleid",t);return this.http.get(i).toPromise().catch(e=>{this.roleRootService.roleModuleErrorHandling(e,"permissionListDetail")})}}return e.\u0275fac=function(t){return new(t||e)(p.bc(S.b),p.bc(T),p.bc(x.a))},e.\u0275prov=p.Jb({token:e,factory:e.\u0275fac}),e})();const Tt=["roleName"],Ot=["roleDescription"],Et=["contentRoleForm"],Mt=["permission"];function Ct(e,t){1&e&&p.Pb(0)}function Dt(e,t){if(1&e&&(p.Tb(0,"div"),p.Ob(1,"span",24),p.hc(2,"safe"),p.Sb()),2&e){const e=p.gc(2);p.xb(1),p.nc("innerHTML",p.jc(2,1,e.errorMessage,"html"),p.Cc)}}function It(e,t){1&e&&(p.Tb(0,"div"),p.Tb(1,"span",25),p.Lc(2),p.hc(3,"translate"),p.Sb(),p.Sb()),2&e&&(p.xb(2),p.Nc(" ",p.ic(3,1,"FIELDREQUIRED"),""))}function Nt(e,t){1&e&&p.Pb(0)}function Lt(e,t){if(1&e&&(p.Tb(0,"div"),p.Jc(1,Nt,1,0,"ng-container",5),p.Sb()),2&e){p.gc(2);const e=p.yc(19);p.xb(1),p.nc("ngTemplateOutlet",e)}}function At(e,t){1&e&&p.Pb(0)}function Pt(e,t){if(1&e&&(p.Tb(0,"div"),p.Jc(1,At,1,0,"ng-container",5),p.Sb()),2&e){p.gc(2);const e=p.yc(19);p.xb(1),p.nc("ngTemplateOutlet",e)}}function yt(e,t){if(1&e){const e=p.Ub();p.Tb(0,"div",12),p.Jc(1,Dt,3,4,"div",13),p.Tb(2,"div",14),p.Tb(3,"label"),p.Lc(4),p.hc(5,"translate"),p.Tb(6,"span",15),p.Lc(7,"*"),p.Sb(),p.Sb(),p.Tb(8,"ejs-textbox",16,17),p.ec("blur",(function(){return p.Bc(e),p.gc().createRoleFocusOut()}))("change",(function(){return p.Bc(e),p.gc().createRoleChange()}))("created",(function(){return p.Bc(e),p.gc().controlCreated("roleNameField")}))("input",(function(t){return p.Bc(e),p.gc().createRoleInput(t)}))("focus",(function(){return p.Bc(e),p.gc().createRoleFocus()})),p.hc(10,"translate"),p.Sb(),p.Jc(11,It,4,3,"div",13),p.Jc(12,Lt,2,1,"div",13),p.Sb(),p.Tb(13,"div",18),p.Tb(14,"label"),p.Lc(15),p.hc(16,"translate"),p.Sb(),p.Tb(17,"ejs-textbox",19,20),p.ec("change",(function(){return p.Bc(e),p.gc().createRoleDescriptionChange()})),p.hc(19,"translate"),p.Sb(),p.Jc(20,Pt,2,1,"div",13),p.Sb(),p.Tb(21,"div",21),p.Tb(22,"h6"),p.Lc(23),p.hc(24,"translate"),p.Sb(),p.Tb(25,"div",22),p.Ob(26,"app-permisson-list",null,23),p.Sb(),p.Sb(),p.Sb()}if(2&e){const e=p.gc();p.xb(1),p.nc("ngIf",e.errorMessage),p.xb(3),p.Nc(" ",p.ic(5,11,"ROLENAME")," "),p.xb(4),p.oc("placeholder",p.ic(10,13,"TEXTBOXPLACEHOLDER")),p.nc("htmlAttributes",e.inputAttribute),p.xb(3),p.nc("ngIf",e.isRequired),p.xb(1),p.nc("ngIf",e.roleNameError),p.xb(3),p.Nc(" ",p.ic(16,15,"DESCRIPTION")," "),p.xb(2),p.oc("placeholder",p.ic(19,17,"TEXTBOXPLACEHOLDER")),p.nc("htmlAttributes",e.textAreaAttribute),p.xb(3),p.nc("ngIf",e.roleDescriptionError),p.xb(3),p.Mc(p.ic(24,19,"PERMISSIONS"))}}function wt(e,t){if(1&e&&(p.Ob(0,"span",26),p.hc(1,"safe")),2&e){const e=p.gc();p.nc("innerHTML",p.jc(1,1,e.commonInputValidationErrorMessage,"html"),p.Cc)}}const kt=[{path:"",component:se},{path:"new",component:(()=>{class e{constructor(e,t,i,o,n,r,s,c,l,a){this.route=e,this.router=t,this.appRootService=i,this.roleService=o,this.toastService=n,this.roleRootService=r,this.authService=s,this.seoService=c,this.spinService=l,this.viewContainerRef=a,this.inputAttribute={maxlength:b.s,autocomplete:"anyrandomstring"},this.textAreaAttribute={maxlength:b.M,autocomplete:"anyrandomstring"},this.permissionListDetail=this.route.data.subscribe(e=>{this.permissionList=e.data,this.spinService.hideSpinner()});const d=Object(h.a)("ADMIN")+" / "+Object(h.a)("ROLESPERMISSION")+" / "+Object(h.a)("CREATEROLE")+",/admin/roles-permissions",u=Object(h.a)("CREATEROLE")+" | "+Object(h.a)("ADMIN");this.appRootService.setAppTitleText(d),this.seoService.setHeaderElements({title:u}),this.appRootService.isSideBarNeeded(!0),this.appRootService.setBrandDropDownVisibility(!1),this.appRootService.getNavigateUrl("/admin/roles-permissions")}ngOnInit(){this.commonInputValidationErrorMessage=d.e}createRoleFocusOut(){if(this.isRequired=!this.roleName.value,!this.isRequired){const e=Object(d.d)(this.roleName.value);this.roleNameError=!!e}}createRoleChange(){if(null!=this.roleName.value){this.isRequired=!1,this.errorMessage=null;const e=Object(d.d)(this.roleName.value);this.roleNameError=!!e}else this.isRequired=!1,this.roleNameError=!1}controlCreated(e){setTimeout(()=>{const t=this.addEditRoleForm.nativeElement;Object(d.h)(t.querySelector("#"+e))})}createRoleInput(e){const t=e.value;this.isRequired=!(!Object(l.X)(t)&&""!==t.trim());const i=Object(d.d)(t);this.roleNameError=!!i}createRoleFocus(){this.isRequired=!1,this.roleNameError=!1}createRoleDescriptionChange(){if(null!=this.roleDescription.value){const e=Object(d.d)(this.roleDescription.value);this.roleDescriptionError=!!e}else this.roleDescriptionError=!1}updateCreateRole(){if(this.errorMessage=null,null!=this.roleName.value&&""!==this.roleName.value&&this.roleName.value.length>0&&!this.roleNameError&&!this.roleDescriptionError){this.spinService.showSpinner();const e=this.permissionListRef.getPermissionLists();this.roleService.addRole({roleName:this.roleName.value,description:this.roleDescription.value,permissions:e}).then(e=>{this.spinService.hideSpinner(),e?(this.toastService.successToast(e.message),this.router.navigateByUrl("admin/roles-permissions/"+e.roleId,{state:{data:{isMembers:!0}}})):this.cancelDialog()}).catch(e=>{this.spinService.hideSpinner(),e.error&&e.error.errors.length>0&&this.toastService.failureToast(e.error.errors[0].errorMessage)})}else this.roleNameError||this.roleDescriptionError||(this.isRequired=!0,this.errorMessage=null)}cancelDialog(){this.router.navigateByUrl("/admin/roles-permissions")}}return e.\u0275fac=function(t){return new(t||e)(p.Nb(n.a),p.Nb(n.g),p.Nb(g.a),p.Nb(O),p.Nb(m.a),p.Nb(T),p.Nb(f.a),p.Nb(v.a),p.Nb(x.a),p.Nb(p.O))},e.\u0275cmp=p.Hb({type:e,selectors:[["app-new-role"]],viewQuery:function(e,t){var i;1&e&&(p.Qc(Tt,!0),p.Qc(Ot,!0),p.Qc(Et,!0),p.Qc(Mt,!0),p.Qc(M.e,!0),p.Qc(M.i,!0)),2&e&&(p.xc(i=p.fc())&&(t.roleName=i.first),p.xc(i=p.fc())&&(t.roleDescription=i.first),p.xc(i=p.fc())&&(t.addEditRoleForm=i.first),p.xc(i=p.fc())&&(t.permissionListRef=i.first),p.xc(i=p.fc())&&(t.checkbox=i),p.xc(i=p.fc())&&(t.radiobutton=i))},decls:20,vars:7,consts:[["contentRoleForm",""],[1,"permission-form","permission-overflow","overflow-auto-align"],[1,"row"],[1,"permission-part","col-lg-12"],[1,"pt-3","full-width"],[4,"ngTemplateOutlet"],[1,"row","action-buttons"],[1,"col-lg-8"],["data-ripple","true",1,"e-control","e-btn","e-primary","mr-3",3,"click"],["data-ripple","true",1,"e-control","e-outline","e-btn","e-secondary",3,"click"],["mainContent",""],["errorInputValidation",""],[1,"flex-vertical","control-width","pl-5","pt-4"],[4,"ngIf"],[1,"form-group","pb-3"],[1,"error"],["id","roleNameField","autocomplete","off",3,"placeholder","htmlAttributes","blur","change","created","input","focus"],["roleName",""],[1,"form-group","pb-2"],["data-id","roleDescription","autocomplete","off",3,"placeholder","htmlAttributes","change"],["roleDescription",""],[1,"form-group"],[1,"pt-2"],["permission",""],[3,"innerHTML"],[1,"required"],[1,"error",3,"innerHTML"]],template:function(e,t){if(1&e&&(p.Tb(0,"div",null,0),p.Tb(2,"div",1),p.Tb(3,"div",2),p.Tb(4,"div",3),p.Tb(5,"div",2),p.Tb(6,"div",4),p.Jc(7,Ct,1,0,"ng-container",5),p.Sb(),p.Sb(),p.Tb(8,"div",6),p.Tb(9,"div",7),p.Tb(10,"button",8),p.ec("click",(function(){return t.updateCreateRole()})),p.Lc(11),p.hc(12,"translate"),p.Sb(),p.Tb(13,"button",9),p.ec("click",(function(){return t.cancelDialog()})),p.Lc(14),p.hc(15,"translate"),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Jc(16,yt,28,21,"ng-template",null,10,p.Kc),p.Jc(18,wt,2,4,"ng-template",null,11,p.Kc)),2&e){const e=p.yc(17);p.xb(7),p.nc("ngTemplateOutlet",e),p.xb(4),p.Mc(p.ic(12,3,"CREATE")),p.xb(3),p.Mc(p.ic(15,5,"CANCEL"))}},directives:[o.r,o.n,E.i,Te],pipes:[N.a,L.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.control-width[_ngcontent-%COMP%]{width:80%}.permission-form[_ngcontent-%COMP%]   .form-builder[_ngcontent-%COMP%]{margin:0 auto 0 5%}.action-buttons[_ngcontent-%COMP%]{background:#f7fafc;border-top:1px solid #e8eaed;bottom:0;height:55px;margin-left:0;padding:10px;position:fixed;width:100%}.permission-part[_ngcontent-%COMP%]{width:80%}.permission-overflow[_ngcontent-%COMP%]{height:calc(100vh - 110px);max-height:100%!important;top:0!important}.overflow-auto-align[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}"]}),e})(),resolve:{permissionData:xt}},{path:":roleId",component:vt,resolve:{data:St,permissionData:xt}},{path:"**",component:Rt.a}];let jt=(()=>{class e{}return e.\u0275mod=p.Lb({type:e}),e.\u0275inj=p.Kb({factory:function(t){return new(t||e)},imports:[[n.k.forChild(kt)],n.k]}),e})();var _t=i("ltyr"),Bt=i("np3I"),qt=i("5OZa");let Ft=(()=>{class e{constructor(e){this.roleRootService=e}}return e.\u0275mod=p.Lb({type:e}),e.\u0275inj=p.Kb({factory:function(t){return new(t||e)(p.bc(T))},providers:[St,C.l,C.s,C.t,O,C.g,T,C.q,xt],imports:[[o.b,_t.a,C.j,jt,M.b,s.a,E.h,Bt.AdminModule,I.b,I.d,M.d,M.f,M.l,M.h,D.l,I.g,qt.a,D.e]]}),e})()}}]);