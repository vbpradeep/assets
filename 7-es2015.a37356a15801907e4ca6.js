(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1UK9":function(e,t,l){"use strict";l.d(t,"b",(function(){return X})),l.d(t,"k",(function(){return K})),l.d(t,"a",(function(){return Y})),l.d(t,"m",(function(){return J})),l.d(t,"n",(function(){return ee})),l.d(t,"f",(function(){return te})),l.d(t,"p",(function(){return le})),l.d(t,"l",(function(){return ie})),l.d(t,"c",(function(){return re})),l.d(t,"i",(function(){return ae})),l.d(t,"j",(function(){return oe})),l.d(t,"d",(function(){return ue})),l.d(t,"e",(function(){return de})),l.d(t,"h",(function(){return he})),l.d(t,"g",(function(){return me})),l.d(t,"o",(function(){return ge}));var n,i,r,s,a,o,u,d,c,p,h,m,g,f,b,y,v,C,O,E,S,x,I,N,w,j,R,A,T=l("H552"),q=l("4SUy"),D=l("A4Lh"),k=l("dSv1"),L=l("OyPL"),B=l("ScLb"),P=l("ngVE"),M=l("1gpv"),G=l("bqpE"),_=l("CU1o"),V=l("gnsf"),F=l("M9dC"),H=l("58Y9"),W=l("zZ4g");!function(e){e[e.TimeTrigger=1]="TimeTrigger",e[e.EventTrigger=2]="EventTrigger",e[e.AutoAssignment=3]="AutoAssignment"}(n||(n={})),function(e){e.AutomationType="automationType",e.EventType="eventType",e.AutomationTriggerType="automationTriggerType"}(i||(i={})),function(e){e[e.AssignTicket=1]="AssignTicket",e[e.TicketFieldUpdate=2]="TicketFieldUpdate",e[e.SendNotification=3]="SendNotification",e[e.ContactFiledUpdate=4]="ContactFiledUpdate",e[e.ContactGroupFieldUpdate=5]="ContactGroupFieldUpdate"}(r||(r={})),function(e){e[e.CreateTicketAutomation=2]="CreateTicketAutomation",e[e.UpdateTicketAutomation=3]="UpdateTicketAutomation",e[e.TimeTriggerAutomation=4]="TimeTriggerAutomation",e[e.AutoAssignmentAutomation=5]="AutoAssignmentAutomation"}(s||(s={})),function(e){e[e.TicketCreated=1]="TicketCreated",e[e.TicketUpdated=2]="TicketUpdated",e[e.ContactCreated=3]="ContactCreated",e[e.ContactUpdated=4]="ContactUpdated",e[e.ContactGroupCreated=5]="ContactGroupCreated",e[e.TimeTrigger=7]="TimeTrigger",e[e.AutoAssignment=8]="AutoAssignment"}(a||(a={})),function(e){e[e.MoveToFirst=1]="MoveToFirst",e[e.MoveToLast=2]="MoveToLast",e[e.ToPosition=3]="ToPosition"}(o||(o={})),function(e){e.CreateTicketAutomation="create-ticket-triggers",e.UpdateTicketAutomation="update-ticket-triggers",e.AutoAssignmentAutomation="auto-assignments",e.TimeTriggerAutomation="time-triggers",e.SLAAutomation="sla"}(u||(u={})),function(e){e.CreateTicketAutomation="Create Trigger",e.UpdateTicketAutomation="Event Trigger",e.AutoAssignmentAutomation="Auto Assignment",e.TimeTriggerAutomation="Time Trigger",e.SLAAutomation="SLA"}(d||(d={})),function(e){e[e.Direct=1]="Direct",e[e.RoundRobin=2]="RoundRobin"}(c||(c={})),function(e){e[e.Agent=1]="Agent",e[e.Group=2]="Group",e[e.AgentAndGroup=3]="AgentAndGroup"}(p||(p={})),function(e){e[e.Private=1]="Private",e[e.Public=2]="Public"}(h||(h={})),function(e){e.Equal="equal",e.NotEqual="not_equal",e.Greater="greater",e.Less="less",e.GreaterOrEqual="greater_or_equal",e.LessOrEqual="less_or_equal",e.IsNull="is_null",e.IsNotNull="is_not_null",e.IsEmpty="is_empty",e.IsNotEmpty="is_not_empty",e.In="in",e.NotIn="not_in",e.Contains="contains",e.NotContains="not_contains",e.BeginsWith="begins_with",e.EndsWith="ends_with",e.NotBeginsWith="not_begins_with",e.NotEndsWith="not_ends_with",e.Between="between",e.NotBetween="not_between",e.IsChanged="is_changed",e.IsPublic="is_public",e.IsPrivate="is_private",e.Businesshours="during_business_hours",e.NonBusinessHours="during_non_business_hours",e.Holidays="during_holidays",e.After="after",e.Before="before"}(m||(m={})),function(e){e.Equal="Is",e.NotEqual="Is not",e.Greater="Greater than",e.Less="Less than",e.GreaterOrEqual="Greater than equal to",e.LessOrEqual="Less than equal to",e.IsNull="Is none",e.IsNotNull="Is not none",e.IsEmpty="Is empty",e.IsNotEmpty="Is not empty",e.In="In",e.NotIn="Not in",e.Contains="Contains",e.NotContains="Does not contain",e.BeginsWith="Starts with",e.EndsWith="Ends with",e.NotBeginsWith="Not starts with",e.NotEndsWith="Not ends with",e.Between="Between",e.NotBetween="Not between",e.IsChanged="Is changed",e.IsPublic="Is Public",e.IsPrivate="Is Private",e.Businesshours="Business Hours",e.NonBusinessHours="Non-Business Hours",e.Holidays="Holidays",e.After="After",e.Before="Before"}(g||(g={})),function(e){e.TicketId="ticketId",e.BrandId="brandId",e.Subject="subject",e.Description="description",e.StatusId="statusId",e.PriorityId="priorityId",e.TypeId="typeId",e.SourceId="sourceId",e.AgentId="agentId",e.GroupId="groupId",e.ContactGroup="contactGroupId",e.CategoryId="categoryId",e.ResolutionDue="resolutionDue",e.Tags="tag",e.CCs="cc",e.IsPublicTicket="isPublicTicket",e.IsMarkedAsSpam="isMarkedAsSpam",e.RequestedBy="requesterId",e.RequesterEmail="requesterEmail",e.RequesterType="requesterType",e.RequesterCountry="requesterCountryId",e.RequesterRole="requesterRole",e.RequesterTimeZone="requesterTimezoneId",e.RequesterLanguage="requesterLanguageId",e.EventPerformerTypeId="eventPerformerTypeId",e.EventType="eventType",e.SupportTierId="supportTierId",e.HoursSinceCreated="hoursSinceCreated",e.HoursSinceResolved="hoursSinceResolved",e.HoursSinceClosed="hoursSinceClosed",e.HoursSinceReopened="hoursSinceReopened",e.HoursSinceFirstAssigned="hoursSinceFirstAssigned",e.HoursSinceAssigned="hoursSinceAssigned",e.HoursSinceRequesterResponded="hoursSinceRequesterResponded",e.HoursSinceAgentResponded="hoursSinceAgentResponded",e.HoursSinceStatusUpdated="hoursSinceStatusUpdated",e.HoursSinceDueDate="hoursSinceResolutionDue",e.HoursUntilDueDate="hoursUntilResolutionDue",e.HoursSinceModified="hoursSinceModified",e.EmailReceivedAt="emailReceivedAt",e.ResolutionDueOn="resolutionDueOn",e.HoursSinceResponseDue="hoursSinceResponseDue",e.HoursUntilResponseDue="hoursUntilResponseDue",e.Domain="contactGroupDomain"}(f||(f={})),function(e){e.Status="statusId",e.Priority="priorityId",e.Type="typeId",e.Category="categoryId",e.Subject="subject",e.Duedate="resolutiondue",e.AddTags="add_tag",e.RemoveTags="remove_tag",e.AddCcs="add_cc",e.RemoveCcs="remove_cc",e.UpdateAssignee="update_assignee",e.AddNote="add_note",e.SendUserNotification="send_user_notification",e.SendGroupNotification="send_group_notification",e.AddWatchers="add_watcher"}(b||(b={})),function(e){e[e.EventPerformer=-1]="EventPerformer",e[e.Requester=-2]="Requester",e[e.None=-3]="None",e[e.AssignedAgent=-4]="AssignedAgent",e[e.AssignedGroup=-5]="AssignedGroup",e[e.Any=-6]="Any",e[e.CalendarHours=0]="CalendarHours"}(y||(y={})),function(e){e.EventPerformer="{{CurrentUser.Id}}",e.Requester="{{Requester.Id}}",e.None="none",e.NoneAsZero="0",e.AssignedAgent="{{Agent.Id}}",e.AssignedGroup="{{Group.Id}}",e.Any="*",e.RequesterEventPerformer="1",e.AgentEventPerformer="2",e.ReplyAdded="2",e.NoteAdded="3",e.PropertyUpdated="4"}(v||(v={})),function(e){e.EventPerformer="Event performer",e.Requester="Requester",e.None="None",e.AssignedAgent="Assigned Agent",e.AssignedGroup="Assigned Group",e.Any="Any",e.AgentEventPerformer="Agent",e.RequesterEventPerformer="Requester",e.ReplyAdded="Reply Added",e.NoteAdded="Note Added",e.PropertyUpdated="Property Updated"}(C||(C={})),function(e){e.User="userId",e.Group="groupId",e.Category="categoryId",e.RequesterCountry="countryIds",e.RequesterTimeZone="timezoneIds",e.RequesterLanguage="languageIds",e.SupportTier="supporttierIds",e.Tags="includeAdditionalTags",e.IncludeAdditionalIds="includeAdditionalIds",e.BusinessHourQuery="businessHourQuery",e.IsNewStatusRequired="isNewStatusRequired",e.InclusionIds="inclusionIds",e.IncludeReadOnlyAlso="includeReadOnlyAlso"}(O||(O={})),function(e){e.Group="groupValue",e.Assignee="assigneeValue",e.AssigneeType="assigneeType",e.RTENotes="rteNotesContent",e.RTEUserNotificationContent="rteContent",e.SubjUserNotificationContent="subContent",e.AssigneeUserNotificationValue="assigneeUserEmailValue",e.RteGroupContent="rteGroupContent",e.SubjectGroupContent="subGroupContent",e.AssigneeGroupNotificationValue="assigneeGroupEmailValue",e.AddTags="add-tags",e.RemoveTags="remove-tags",e.TagsAction="tags",e.FromInActionIsChanged="from",e.ToInActionIsChanged="to"}(E||(E={})),function(e){e.Name="name",e.GroupInSetAssignee="groupId",e.AgentInUpdateAssignee="agentId",e.AssigneeTypeInUpdateAssignee="AssigneeType",e.SendNotificationBodyContent="body",e.SendNotificationSubjectContent="subject",e.IsChangedFrom="from",e.IsChangedto="to"}(S||(S={})),function(e){e.Created="Created",e.Updated="Updated",e.TimeTriggerContent="Runs every hour"}(x||(x={})),function(e){e.Active="Active",e.Inactive="Inactive"}(I||(I={})),function(e){e.Edit="0",e.Activate="1",e.Deactivate="2",e.Delete="3"}(N||(N={})),function(e){e.ViewSummary="0",e.Edit="1",e.Activate="2",e.Deactivate="3",e.Delete="4"}(w||(w={})),function(e){e.Multiselect="multiselect",e.Numeric="numeric",e.Textarea="textarea",e.Textbox="textbox",e.CheckBox="checkbox",e.Dropdown="dropdown",e.MultiselectUrlPrefix="multiselect_url_prefix",e.UrlPrefix="url_prefix",e.Regex="regex",e.Date="date",e.DateTime="datetime",e.Decimal="decimal",e.Url="url",e.RadioButton="radiobutton"}(j||(j={})),function(e){e.Yes="1",e.No="0"}(R||(R={})),function(e){e.Integer="int",e.DateTime="datetime",e.Date="date",e.Decimal="decimal",e.Long="long"}(A||(A={}));const U={BusinessHourList:M.f+"business_hours",BusinessHourDetail:M.f+"business_hours",AddBusinessHour:M.f+"business_hours",EditBusinessHour:M.f+"business_hours",DeleteBusinessHour:M.f+"business_hours",DeleteHoliday:M.f+"business_hours/holiday",BusinessWorkingDaysList:M.k+"/assets/mock.json/businessDays.json"},z=/^[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/;function X(e,t,l,n,i,r){return{create:e=>{if(e.operator===m.IsChanged){const e=document.createElement("div");return e.innerHTML='<input type="text" id="groupInput"/><span style="padding:10px">To</span><input type="text" id="asigneeInput"/>',e}return Object(q.F)("input",{attrs:{type:"text"}})},destroy:l=>{if(Object(q.X)(l.elements))return;const n=Object(q.C)(l.elements[0],".e-rule-container"),i=[].slice.call(n.parentElement.children).indexOf(n),r=t.nativeElement.querySelector("#"+l.elementId);if(r.classList.contains("e-control")){const e=r.ej2_instances[0];e.destroy(),e.element.parentElement.parentElement.parentElement.parentElement.classList.remove("e-domain")}else r.querySelectorAll(".e-control").forEach(e=>{e.ej2_instances[0].destroy()});delete e.rule.rules[i].custom,e.rule.rules[i].value="";const s=l.elements[0].parentElement.parentElement.querySelector(".hd-info");s&&s.parentElement.remove();const a=l.elements[0].parentElement.parentElement.querySelector(".hd-toast-success");a&&a.parentElement.remove();const o=l.elements[0].parentElement.parentElement.querySelector(".hd-warning-icon");o&&o.parentElement.remove()},write:t=>{const r=Object(q.C)(t.elements,".e-rule-container"),a=e,o=[],u=[].slice.call(r.parentElement.children).indexOf(r);e.rule.rules[u]&&(delete e.rule.rules[u][S.IsChangedFrom],delete e.rule.rules[u][S.IsChangedto]);const d=t.elements.parentElement.parentElement.querySelector(".hd-info");d&&d.parentElement.remove();const c=t.elements.parentElement.parentElement.querySelector(".hd-toast-success");c&&c.parentElement.remove();const p=t.elements.parentElement.parentElement.querySelector(".hd-warning-icon");p&&p.parentElement.remove();const h=l;if(t.operator!==m.Contains&&t.operator!==m.NotContains||n.field!==f.Tags){if(t.operator===m.IsChanged)if(t.elements.parentElement.parentElement.parentElement.classList.add("condition-update-style"),n.field===f.ResolutionDue)a.element.querySelectorAll(".e-rule-value")[u].classList.remove("e-show"),a.element.querySelectorAll(".e-rule-value")[u].classList.add("e-hide"),e.rule.rules[u].value=["true"],e.rule.rules[u][S.IsChangedFrom]="",e.rule.rules[u][S.IsChangedto]="";else{const l=new L.d({dataSource:oe(n.field,n.isCustomField),cssClass:"e-is-changed-from",allowFiltering:!0,showClearButton:!1,filterBarPlaceholder:Object(k.a)("SEARCH"),popupHeight:D.g,placeholder:Object(k.a)("DROPDOWNPLACEHOLDER"),floatLabelType:"Never",popupWidth:n.field===f.AgentId?"250px":"200px",value:ce(e,u,E.FromInActionIsChanged),text:pe(e,u,E.FromInActionIsChanged),fields:K(n.field),itemTemplate:J(n.field,t.operator),actionComplete:()=>{const e=l.value;l.actionCompleteData={},e<=0&&(l.selectedLI=null)},change:()=>{const t=l.value?l.value===y.Any?v.Any:l.value===y.None?v.NoneAsZero:l.value.toString():"";e.rule.rules[u].custom?de(e,u,t,E.FromInActionIsChanged):ue(e,u,o,t,E.FromInActionIsChanged),e.rule.rules[u].value=["true"],e.rule.rules[u][S.IsChangedFrom]=t,n.field===f.PriorityId&&l.value>0?se(l,r):l.value&&(r.query=(new T.g).addParams("exclusionIds",l.value))},blur:()=>{l.value||re(l)},focus:()=>{ie(l)},dataBound:r=>{if(0===r.items.filter(e=>e.id===y.Any).length){const e=Y(n.field,i,0,0,0,t.operator);if(e){for(let t=0;t<e.length;t++)l.addItem(e[t],0);Object(H.D)(l.value)&&(l.index=0)}}l.value&&(e.rule.rules[u][S.IsChangedFrom]=e.rule.rules[u].custom?e.rule.rules[u].custom.filter(e=>e.key===E.FromInActionIsChanged)[0].value:"")}});$(n.field)?l.query=n.field===f.StatusId?(new T.g).addParams("page","1").addParams("perPage",""+D.E).addParams(O.IsNewStatusRequired,"true"):(new T.g).addParams("page","1").addParams("perPage",""+D.E):l.value&&(l.query=(new T.g).addParams(Q(n.field),l.value));const r=new L.d({dataSource:oe(n.field,n.isCustomField),cssClass:"e-is-changed-to",allowFiltering:!0,showClearButton:!1,popupHeight:D.g,placeholder:Object(k.a)("DROPDOWNPLACEHOLDER"),floatLabelType:"Never",popupWidth:n.field===f.AgentId?"250px":"200px",value:ce(e,u,E.ToInActionIsChanged),text:pe(e,u,E.ToInActionIsChanged),fields:K(n.field),itemTemplate:J(n.field,t.operator),actionComplete:()=>{const e=r.value;r.actionCompleteData={},e<=0&&(r.selectedLI=null)},change:()=>{const t=r.value?r.value===y.Any?v.Any:r.value===y.None?v.NoneAsZero:r.value.toString():"";e.rule.rules[u].custom?de(e,u,t,E.ToInActionIsChanged):ue(e,u,o,t,E.ToInActionIsChanged),e.rule.rules[u][S.IsChangedto]=t,e.rule.rules[u].value=["true"],n.field===f.PriorityId&&r.value>0?se(r,l):r.value&&(l.query=(new T.g).addParams("exclusionIds",r.value))},blur:()=>{l.value||re(l)},focus:()=>{ie(l)},dataBound:l=>{if(0===l.items.filter(e=>e.id===y.Any).length){const e=Y(n.field,i,0,0,0,t.operator);if(e){for(let t=0;t<e.length;t++)r.addItem(e[t],0);setTimeout(()=>{Object(H.D)(r.value)&&(r.index=0)})}}r.value&&(e.rule.rules[u][S.IsChangedto]=e.rule.rules[u].custom?e.rule.rules[u].custom.filter(e=>e.key===E.ToInActionIsChanged)[0].value:"")}});$(n.field)?r.query=n.field===f.StatusId?(new T.g).addParams("page","1").addParams("perPage",""+D.E).addParams(O.IsNewStatusRequired,"true"):(new T.g).addParams("page","1").addParams("perPage",""+D.E):r.value&&(r.query=(new T.g).addParams(Q(n.field),r.value)),l.appendTo(e.element.querySelector("#"+t.elements.id).getElementsByTagName("input")[0]),r.appendTo(e.element.querySelector("#"+t.elements.id).getElementsByTagName("input")[1])}else if(t.operator===m.In||t.operator===m.NotIn||n.isCustomField&&n.controlName===j.Multiselect){let l,r;if(n.field===f.TicketId&&""===n.controlName||n.isCustomField&&n.controlName===j.Numeric||n.isCustomField&&n.controlName===j.MultiselectUrlPrefix){r=new P.g({autocomplete:"off",placeholder:Object(k.a)("TEXTBOXPLACEHOLDER"),value:t.values,floatLabelType:"Never",showClearButton:!1,width:"200px",change:()=>{const e=r.value.toString().trim().split(",");h(a,r.element,e)},blur:()=>{r.value||re(r)},focus:()=>{ie(r)}});const e=document.createElement("span");e.innerHTML='<span class="hd-icon hd-info" id="content" data-title="Separate multiple values by using a comma"></span>',t.elements.parentElement.append(e),r.appendTo("#"+t.elements.id),r.value&&r.change()}else{if(n.field===f.Tags&&!n.isCustomField||n.field===f.Domain)l=new L.g({cssClass:n.field===f.Domain?"e-contact-group-domain":null,dataSource:oe(n.field,n.isCustomField),showClearButton:!1,placeholder:Object(k.a)("DROPDOWNPLACEHOLDER"),allowFiltering:!0,floatLabelType:"Never",allowCustomValue:!0,popupHeight:D.g,filterBarPlaceholder:Object(k.a)("SEARCH"),popupWidth:n.field===f.Domain?"250px":"200px",locale:"customRecordsTemplate",fields:n.field===f.Tags?D.r:null,itemTemplate:J(n.field,t.operator),mode:"Box",showDropDownIcon:n.field!==f.Domain,value:ce(e,u,E.TagsAction),change:()=>{const t=l.text.split(",");h(a,l.element,t),ue(e,u,o,t,E.TagsAction)},blur:()=>{n.field===f.Domain&&l.value&&fe(t,l),l.value||re(l)},focus:()=>{if(n.field===f.Domain){const e=t.elements.parentElement.parentElement.parentElement.parentElement.querySelector(".invalid-error");e&&e.parentElement.remove()}ie(l)},tagging:()=>{n.field===f.Domain&&l.value&&fe(t,l)},removed:()=>{n.field===f.Domain&&l.value&&fe(t,l)},created:()=>{n.field===f.Domain&&l.element.parentElement.parentElement.parentElement.parentElement.classList.add("e-domain")}});else{let e=!1;const r=te(t.values,n.field,t.operator);l=new L.g({dataSource:oe(n.field,n.isCustomField),allowFiltering:!0,showClearButton:!1,popupHeight:D.g,popupWidth:n.field===f.AgentId||n.field===f.RequestedBy||n.field===f.CCs||n.field===b.AddCcs||n.field===b.RemoveCcs?"250px":"200px",filterBarPlaceholder:Object(k.a)("SEARCH"),placeholder:Object(k.a)("DROPDOWNPLACEHOLDER"),value:te(t.values,n.field,t.operator),floatLabelType:"Never",mode:"CheckBox",showDropDownIcon:!0,fields:K(n.field),itemTemplate:J(n.field,t.operator),change:()=>{const e=l.value.map(String);for(let t=0;t<e.length;t++)e[t]===y.EventPerformer.toString()?e[t]=v.EventPerformer:e[t]===y.None.toString()&&(e[t]=v.NoneAsZero);h(a,l.element,e)},dataBound:()=>{l.requestCount?++l.requestCount:l.requestCount=1,e=ae(n.field,e,l,i),1===l.requestCount&&r&&r.length>0&&(l.value=r,l.dataBind()),l.value&&l.change()},blur:()=>{l.value||re(l)},focus:()=>{ie(l)}})}$(n.field)?l.query=n.field===f.StatusId?(new T.g).addParams("page","1").addParams("perPage",""+D.E).addParams(O.IsNewStatusRequired,"true"):(new T.g).addParams("page","1").addParams("perPage",""+D.E):l.value&&(l.query=(new T.g).addParams(Q(n.field),l.value.join())),l.appendTo("#"+t.elements.id)}}else if(n.field===f.TicketId||!0===n.isHourBasedField||n.isCustomField&&n.controlName===j.Numeric||n.isCustomField&&n.controlName===j.Decimal){const e=new P.e({placeholder:Object(k.a)("NUMERICBOXPLACEHOLDER"),value:null===t.values?null:+t.values,floatLabelType:"Never",showClearButton:!1,width:"200px",min:0,format:n.controlName===j.Decimal?"###.##":"###",decimals:n.controlName===j.Decimal?2:0,validateDecimalOnType:!0,change:()=>{const t=e.value?e.value.toString():null;h(a,e.element,[t])},blur:()=>{e.value||re(e)},focus:()=>{ie(e)}});e.appendTo("#"+t.elements.id),e.value&&e.change()}else if(n.field===f.Subject||n.field===f.Description||n.field===f.RequesterEmail||n.field===f.EmailReceivedAt||n.isCustomField&&n.controlName===j.Textbox||n.isCustomField&&n.controlName===j.Textarea||n.isCustomField&&n.controlName===j.MultiselectUrlPrefix||n.isCustomField&&n.controlName===j.UrlPrefix||n.isCustomField&&n.controlName===j.Regex||n.isCustomField&&n.controlName===j.Url){const e=new P.g({autocomplete:"off",placeholder:Object(k.a)("TEXTBOXPLACEHOLDER"),value:t.values,floatLabelType:"Never",showClearButton:!1,width:"200px",multiline:n.controlName===j.Textarea,change:()=>{const t=e.value.toString().trim();h(a,e.element,[t])},blur:()=>{e.value||re(e)},focus:()=>{ie(e)}});e.appendTo("#"+t.elements.id),e.value&&e.change()}else if(n.field===f.ResolutionDue||n.field===f.ResolutionDueOn||n.isCustomField&&n.controlName===j.DateTime||t.operator===m.After||t.operator===m.Before){const e=new V.d({placeholder:Object(k.a)("DATETIMEPICKERPLACEHOLDER"),floatLabelType:"Never",showClearButton:!1,width:"200px",allowEdit:!0,value:t.values?Array.isArray(t.values)?Object(H.u)(t.values[0]):Object(H.u)(t.values):null,change:()=>{h(a,e.element,[Object(H.n)(e.value.toString())])},blur:()=>{e.value||re(e)},focus:()=>{ie(e)}});e.appendTo("#"+t.elements.id)}else if(n.isCustomField&&n.controlName===j.Date){const e=new V.b({placeholder:Object(k.a)("DATETIMEPICKERPLACEHOLDER"),floatLabelType:"Never",showClearButton:!1,width:"200px",allowEdit:!0,value:t.values?Array.isArray(t.values)?Object(H.u)(t.values[0]):Object(H.u)(t.values):null,change:()=>{h(a,e.element,[Object(H.F)(e.value.toString())])},blur:()=>{e.value||re(e)},focus:()=>{ie(e)}});e.appendTo("#"+t.elements.id)}else if(n.field===f.EventPerformerTypeId){const e=new L.d({dataSource:ne(n.field),fields:{value:"value",text:"text"},allowFiltering:!0,showClearButton:!1,filterBarPlaceholder:Object(k.a)("SEARCH"),popupHeight:D.g,floatLabelType:"Never",placeholder:Object(k.a)("DROPDOWNPLACEHOLDER"),value:Array.isArray(t.values)?t.values[0]:t.values,change:()=>{h(a,e.element,[e.value])},blur:()=>{e.value||re(e)},focus:()=>{ie(e)}});e.appendTo("#"+t.elements.id),e.value&&e.change()}else if(n.field===f.EventType){const e=new L.d({dataSource:ne(n.field),fields:{value:"value",text:"text"},allowFiltering:!0,showClearButton:!1,filterBarPlaceholder:Object(k.a)("SEARCH"),popupHeight:D.g,floatLabelType:"Never",placeholder:Object(k.a)("DROPDOWNPLACEHOLDER"),value:Array.isArray(t.values)?t.values[0]:t.values,change:()=>{h(a,e.element,[e.value])},blur:()=>{e.value||re(e)},focus:()=>{ie(e)}});e.appendTo("#"+t.elements.id),e.value&&e.change()}else if(t.operator===m.IsPublic||t.operator===m.IsPrivate)a.element.querySelectorAll(".e-rule-value")[u].classList.remove("e-show"),a.element.querySelectorAll(".e-rule-value")[u].classList.add("e-hide"),e.rule.rules[u].value=[""];else if(t.operator===m.Businesshours||t.operator===m.NonBusinessHours||t.operator===m.Holidays){const e=new L.d({dataSource:new T.a({url:U.BusinessHourList,adaptor:new F.a}),fields:{text:"name",value:"id"},allowFiltering:!0,showClearButton:!1,popupHeight:D.g,filterBarPlaceholder:Object(k.a)("SEARCH"),floatLabelType:"Never",placeholder:Object(k.a)("DROPDOWNPLACEHOLDER"),value:te(t.values,n.field,t.operator),change:()=>{h(a,e.element,[e.value.toString()])},dataBound:()=>{e.value&&e.change()},blur:()=>{e.value||n.controlName===j.CheckBox||n.controlName===j.RadioButton?n.controlName!==j.CheckBox&&n.controlName!==j.RadioButton||null===e.value&&re(e):re(e)},focus:()=>{ie(e)}});$(n.field)?e.query=(new T.g).addParams("page","1").addParams("perPage",""+D.E):e.value&&(e.query=(new T.g).addParams(Q(n.field,n.isCustomField),e.value)),e.appendTo("#"+t.elements.id)}else if(!n.controlName||""===n.controlName||n.isCustomField&&n.controlName===j.Dropdown||n.isCustomField&&n.controlName===j.CheckBox||n.isCustomField&&n.controlName===j.RadioButton){let e=!1;const l=new L.d({dataSource:oe(n.field,n.isCustomField,n.controlName),allowFiltering:!0,showClearButton:!1,popupHeight:D.g,popupWidth:n.field===f.AgentId||n.field===f.RequestedBy||n.field===f.CCs||n.field===b.AddCcs||n.field===b.RemoveCcs?"250px":"200px",filterBarPlaceholder:Object(k.a)("SEARCH"),floatLabelType:"Never",placeholder:Object(k.a)("DROPDOWNPLACEHOLDER"),value:te(t.values,n.field,t.operator),fields:K(n.field),itemTemplate:J(n.field,t.operator),change:()=>{const e=l.itemData;if(e&&(l.value=e.displayName===C.None||e.groupName===C.None||e.name===C.None?v.None:e.displayName===C.EventPerformer||e.groupName===C.EventPerformer?v.EventPerformer:l.itemData.userId?l.itemData.userId:l.itemData.groupID?l.itemData.groupID:l.value.toString()),n.isCustomField&&n.controlName===j.CheckBox||n.isCustomField&&n.controlName===j.RadioButton){const e=l.value.toString()===R.Yes;h(a,l.element,[e])}else h(a,l.element,[l.value.toString()])},dataBound:()=>{e=ae(n.field,e,l,i),l.value!==y.None&&l.value!==y.EventPerformer||(l.text=l.value===y.None?C.None:l.value===y.EventPerformer?C.EventPerformer:l.text),l.value&&l.change()},blur:()=>{l.value||n.controlName===j.CheckBox||n.controlName===j.RadioButton?n.controlName!==j.CheckBox&&n.controlName!==j.RadioButton||null===l.value&&re(l):re(l)},focus:()=>{ie(l)}});if($(n.field)?l.query=n.field===f.StatusId?i===s.TimeTriggerAutomation?(new T.g).addParams("page","1").addParams("perPage",""+D.E).addParams(O.IsNewStatusRequired,"true").addParams("exclusionIds","5"):(new T.g).addParams("page","1").addParams("perPage",""+D.E).addParams(O.IsNewStatusRequired,"true"):(new T.g).addParams("page","1").addParams("perPage",""+D.E):l.value&&(l.query=(new T.g).addParams(Q(n.field,n.isCustomField),l.value)),!l.value){const e=Y(n.field,i);e&&(e.filter(e=>"None"===e.name).length||e.filter(e=>"None"===e.groupName).length||e.filter(e=>"None"===e.displayName))}l.appendTo("#"+t.elements.id),n.field===f.PriorityId&&l.value&&setTimeout(()=>{l.change()})}}else{const l=new L.g({dataSource:oe(n.field,n.isCustomField),placeholder:Object(k.a)("DROPDOWNPLACEHOLDER"),allowFiltering:!0,showClearButton:!1,floatLabelType:"Never",allowCustomValue:!0,popupHeight:D.g,locale:"customRecordsTemplate",filterBarPlaceholder:Object(k.a)("SEARCH"),fields:K(n.field),itemTemplate:J(n.field,t.operator),mode:"Box",showDropDownIcon:!0,value:ce(e,u,E.TagsAction),change:()=>{const t=l.text.split(",");h(a,l.element,t),ue(e,u,o,t,E.TagsAction)},blur:()=>{l.value||re(l)},focus:()=>{ie(l)}});l.appendTo("#"+t.elements.id)}}}}function $(e){return-1!==["statusId","status","TypeId","type","BrandId","SourceId","RequesterRole"].indexOf(e)}function Q(e,t){let l;return l=e===f.AgentId||e===f.CCs||e===f.RequestedBy?O.User:e===f.GroupId?O.Group:e===f.CategoryId?O.Category:e===f.RequesterCountry?O.RequesterCountry:e===f.RequesterTimeZone?O.RequesterTimeZone:e===f.RequesterLanguage?O.RequesterLanguage:e===f.SupportTierId?O.SupportTier:e===f.Tags?O.Tags:t?O.InclusionIds:O.IncludeAdditionalIds,l}function Z(e){switch(e){case f.BrandId:return M.a.Brand;case f.StatusId:case b.Status:return B.a.Status;case f.SourceId:return B.a.SourceCollection;case f.TypeId:case b.Type:return B.a.Type;case f.AgentId:return B.a.Assignee;case f.CCs:return B.a.Requester;case f.GroupId:return B.a.Group;case f.CategoryId:case b.Category:return B.a.Category;case f.Tags:case b.AddTags:case b.RemoveTags:return B.a.Tags;case f.ContactGroup:return B.a.ContactGroups;case f.RequestedBy:case b.AddCcs:case b.RemoveCcs:return B.a.Requester;case f.RequesterLanguage:return _.a.Language;case f.RequesterCountry:return _.a.Country;case f.RequesterTimeZone:return _.a.TimeZone;case f.RequesterRole:return G.a.RoleList;case f.SupportTierId:return _.a.SupportTier;case b.AddWatchers:return B.a.Assignee}}function K(e){let t;return t=e===f.BrandId?{value:"value",text:"text"}:e===f.AgentId||e===f.RequestedBy||e===f.CCs||e===b.AddCcs||e===b.RemoveCcs||e===b.AddWatchers?{value:"userId",text:"displayName"}:e===f.GroupId?{value:"groupID",text:"groupName"}:e===f.RequesterTimeZone?{value:"id",text:"description"}:e===f.RequesterRole?{value:"roleId",text:"roleName"}:D.r,t}function Y(e,t,l,n,i,r){let a;return a=r===m.IsChanged?e===f.AgentId||e===f.RequestedBy?[{userId:y.Any,displayName:C.Any,shortCode:"AN",colorCode:"#0450cc",emailId:""}]:e===f.GroupId?[{groupID:y.Any,groupName:C.Any}]:[{id:y.Any,name:C.Any}]:e===f.AgentId&&t!==s.TimeTriggerAutomation&&!Object(H.D)(t)||e===f.RequestedBy&&t!==s.TimeTriggerAutomation&&t!==s.AutoAssignmentAutomation&&!Object(H.D)(t)?[{displayName:C.EventPerformer,userId:y.EventPerformer,shortCode:"EP",colorCode:"#0450cc",emailId:""}]:"",a}function J(e,t){let l;return l=t===m.In||t===m.NotIn||e===b.AddCcs||e===b.RemoveCcs||e===b.AddWatchers?e===f.AgentId||e===f.RequestedBy||e===f.CCs||e===b.AddCcs||e===b.RemoveCcs||e===b.AddWatchers?'<span style="display:inline-flex;width:calc(100% - 36px)"><div class="flex-horizontal ellipsis no-wrap" style = "padding:5px;padding-right:0px"><div class="wrapper flex-horizontal" style="width:100%"><div class="flex-vertical ellipsis no-wrap" style="text-indent: initial"><span class="e-text">${displayName}</span><span class="e-text"><span class="font-12">${emailId}</span></span></div></div></div></span>':e===f.Tags||e===b.AddTags||e===b.RemoveTags?'<div style="width:100%;height:100%;">${if(id === name)} ${hdTagFieldCustom(name)} - (New) ${else} ${name} ${/if}</div>':"":e===f.AgentId||e===f.RequestedBy||e===f.CCs||e===b.AddCcs||e===b.RemoveCcs||e===b.AddWatchers?'<span style="display:inline-flex;width:calc(100% - 36px)"><div class="flex-horizontal ellipsis no-wrap" style = "padding:5px;padding-right:0px"><div class="wrapper flex-horizontal" style="width:100%"><div class="flex-vertical ellipsis no-wrap" style="text-indent:initial"><span class="e-text">${displayName}</span><span class="e-text"><span class="font-12">${emailId}</span></span></div></div></div></span>':e===f.Tags||e===b.AddTags||e===b.RemoveTags?'<div style="width:100%;height:100%;">${if(id === name)} ${hdTagFieldCustom(name)} - (New) ${else} ${name} ${/if}</div>':"",l}function ee(e){switch(e){case 1:return{key:g.Equal,value:m.Equal};case 2:return{key:g.NotEqual,value:m.NotEqual};case 3:return{key:g.Greater,value:m.Greater};case 4:return{key:g.Less,value:m.Less};case 5:return{key:g.GreaterOrEqual,value:m.GreaterOrEqual};case 6:return{key:g.LessOrEqual,value:m.LessOrEqual};case 7:return{key:g.IsNull,value:m.IsNull};case 8:return{key:g.IsNotNull,value:m.IsNotNull};case 9:return{key:g.IsEmpty,value:m.IsEmpty};case 10:return{key:g.IsNotEmpty,value:m.IsNotEmpty};case 11:return{key:g.In,value:m.In};case 12:return{key:g.NotIn,value:m.NotIn};case 13:return{key:g.Contains,value:m.Contains};case 14:return{key:g.NotContains,value:m.NotContains};case 15:return{key:g.BeginsWith,value:m.BeginsWith};case 16:return{key:g.EndsWith,value:m.EndsWith};case 17:return{key:g.NotBeginsWith,value:m.NotBeginsWith};case 18:return{key:g.NotEndsWith,value:m.NotEndsWith};case 19:return{key:g.Between,value:m.Between};case 20:return{key:g.NotBetween,value:m.NotBetween};case 21:return{key:g.IsChanged,value:m.IsChanged};case 22:return{key:g.IsPublic,value:m.IsPublic};case 23:return{key:g.IsPrivate,value:m.IsPrivate};case 24:return{key:g.Businesshours,value:m.Businesshours};case 25:return{key:g.NonBusinessHours,value:m.NonBusinessHours};case 26:return{key:g.Holidays,value:m.Holidays};case 27:return{key:g.After,value:m.After};case 28:return{key:g.Before,value:m.Before};default:return{key:""+e,value:""+e}}}function te(e,t,l,n,i){if(Object(H.D)(e))return null;if(l===m.In||l===m.NotIn){if(Array.isArray(e)){for(let t=0;t<e.length;t++)e[t]===v.EventPerformer?e[t]=y.EventPerformer.toString():e[t]===v.NoneAsZero&&(e[t]=y.None.toString());return e.map(Number)}return null}if(t===f.BrandId||t===b.AddCcs||t===b.RemoveCcs||t===b.AddWatchers||i){if(t===b.AddCcs||t===b.RemoveCcs||t===b.AddWatchers)return e?e.split(","):e;if(n===j.Multiselect&&i){if(e){const t=e.split(",");for(let e=0;e<t.length;e++)t[e]===v.NoneAsZero&&(t[e]=y.None.toString());return t.map(Number)}return e}return Array.isArray(e)?e[0]:e}return Array.isArray(e)?e[0]===v.None?y.None:e[0]===v.EventPerformer?y.EventPerformer:+e[0]:e===v.None?y.None:e===v.EventPerformer?y.EventPerformer:+e}function le(e,t){const l=e.element.querySelectorAll(".e-rule-value:not(.e-hide) .e-dropdownlist, .e-rule-value:not(.e-hide) .e-textbox, .e-rule-value:not(.e-hide) .e-numerictextbox, .e-rule-value:not(.e-hide) .e-multiselect .e-control, .e-rule-value:not(.e-hide) .e-datepicker"),n=t.element.querySelectorAll(".e-rule-value:not(.e-hide) .e-dropdownlist, .e-rule-value:not(.e-hide) .e-textbox, .e-rule-value:not(.e-hide) .e-numerictextbox, .e-rule-value:not(.e-hide) .e-multiselect .e-control, .e-rule-value:not(.e-hide) .e-datepicker");for(let i=0;i<l.length;i++)l[i].ej2_instances[0].blur();for(let i=0;i<n.length;i++)n[i].ej2_instances[0].blur()}function ne(e){switch(e){case f.EventType:return[{value:v.ReplyAdded,text:C.ReplyAdded},{value:v.NoteAdded,text:C.NoteAdded},{value:v.PropertyUpdated,text:C.PropertyUpdated}];case f.EventPerformerTypeId:return[{value:v.AgentEventPerformer,text:C.AgentEventPerformer},{value:v.RequesterEventPerformer,text:C.RequesterEventPerformer}]}}function ie(e){e.element.parentElement.classList.contains("e-control-wrapper")?e.element.parentElement.classList.remove("e-error"):e.element.parentElement.parentElement.parentElement.classList.remove("e-error")}function re(e){e.element.parentElement.classList.contains("e-control-wrapper")?e.value&&!Object(H.D)(e.value)||e.element.parentElement.classList.add("e-error"):e.value&&0!==e.value.length||e.element.parentElement.parentElement.parentElement.classList.add("e-error")}function se(e,t){const l=[];W.forEach(e=>{l.push(e)}),-1!==l.findIndex(t=>t.id===e.value)&&l.splice(l.findIndex(t=>t.id===e.value),1);const n=[];l.forEach(t=>{-1===l.findIndex(t=>t.id===e.value)&&n.push(t)}),t.dataSource=n,t.dataBind()}function ae(e,t,l,n,i,r,s,a){const o=Y(e,n);if(!t&&o){for(let e=0;e<o.length;e++)l.addItem(o[e],0);t=!0}return t}function oe(e,t,l){let n;if(e===f.PriorityId||e===b.Priority)n=W;else if(t||e===f.Domain)if(t&&l===j.CheckBox||t&&l===j.RadioButton)n=[{id:1,name:"Yes"},{id:0,name:"No"}];else if(t&&e.startsWith(D.m))n=new T.a({url:B.a.AutomationCustomFields+e+"/options",adaptor:new F.a});else if(t&&!e.startsWith(D.m)){const t=e.split("_").slice(1).join("_");n=new T.a({url:B.a.AutomationCustomFields+t+"/options",adaptor:new F.a})}else n=e===f.Tags?new T.a({url:Z(e),adaptor:new F.a}):[];else n=new T.a({url:Z(e),adaptor:new F.a});return n}function ue(e,t,l,n,i){l.filter(e=>e.key===i)[0]?l.filter(e=>e.key===i)[0].value=n:l.push({key:i,value:n}),e.rule.rules[t].custom=l}function de(e,t,l,n){e.rule.rules[t].custom.filter(e=>e.key===n)[0]?e.rule.rules[t].custom.filter(e=>e.key===n)[0].value=l:e.rule.rules[t].custom.push({key:n,value:l})}function ce(e,t,l){const n=e.rule.rules[t].custom;let i,r;return n&&(r=n.filter(e=>e.key===l)[0].value||""),i=r?l===E.TagsAction?r:r===v.Any?y.Any:r===v.NoneAsZero?y.None:+r:"",i}function pe(e,t,l){const n=e.rule.rules[t].custom;let i,r;return n&&(r=n.filter(e=>e.key===l)[0].value||""),i=r?r===v.Any?C.Any:r===v.NoneAsZero?C.None:"":"",i}function he(e,t){let l;const n=e.filter(e=>e.key===t)[0];return l=n?n.value:null,l}function me(e,t){let l;return l=e!==y.None&&e.toString()!==y.None.toString()||t===b.UpdateAssignee?e!==y.None&&e.toString()!==y.None.toString()||t!==b.UpdateAssignee?e===y.EventPerformer?v.EventPerformer:e===y.Requester?v.Requester:e===y.AssignedAgent?v.AssignedAgent:e:v.None:v.NoneAsZero,l}function ge(e,t){const l=new RegExp(t);return!Object(q.X)(e)&&l.test(e)}function fe(e,t){const l=e.elements.parentElement.parentElement.parentElement.parentElement.querySelector(".invalid-error");if(function(e,t){const l=new RegExp(t);if(!Object(q.X)(e)){for(let t=0;t<e.length;t++)if(!l.test(e[t]))return!1;return!0}}(t.value,z))t.element.parentElement.parentElement.parentElement.classList.remove("e-error"),l&&l.parentElement.remove();else if(!l){t.element.parentElement.parentElement.parentElement.classList.add("e-error");const l=document.createElement("div");l.innerHTML=`<span class='error invalid-error'>${Object(k.a)("INVALIDREGEX")}</span>`,e.elements.parentElement.parentElement.parentElement.parentElement.append(l)}}new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/),new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/),L.g.Inject(L.b)},"64zv":function(e,t,l){"use strict";l.d(t,"a",(function(){return u}));var n=l("58Y9"),i=l("fXoL"),r=l("qZph"),s=l("ofXK");let a=(()=>{class e{transform(e,t){if(e){const l=Object(n.t)(!0),i=Object(n.u)(e,!1),r=Math.floor((+l-+i)/1e3),s=Math.floor(r/60);if(s<1)return"1 min ago";const a={day:1440,hour:60,min:1};let o;for(const n in a){if(o=Math.floor(s/a[n]),o>0&&t)return 1===o?o+" "+n+" ago":o+" "+n+"s ago";if(o>0&&!t)return 1===o?o+" "+n+" ago":o<=7||"day"!==n?o+" "+n+"s ago":e}}return e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"dateAgo",type:e,pure:!0}),e})(),o=(()=>{class e{transform(e){if(e){const t=Object(n.t)(!0),l=Object(n.u)(e,!1),i=Math.floor((+t-+l)/1e3);if(Math.floor(i/60)<1)return"1 min ago";const r={day:86400,hour:3600,minute:60,second:1};let s;for(const e in r)if(s=Math.floor(i/r[e]),s>0)return 1===s?s+" "+e:s+" "+e+"s"}return e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"dateDays",type:e,pure:!0}),e})(),u=(()=>{class e{constructor(){this.format="MMM dd, yyyy hh:mm a",this.date=new Date,this.timeZoneWithUTC=Object(n.K)()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-date-time"]],inputs:{timezone:"timezone",format:"format",tooltipPrefix:"tooltipPrefix",prefixString:"prefixString",suffixString:"suffixString",date:"date",enableAgo:"enableAgo",enableDays:"enableDays",enableOnlyAgo:"enableOnlyAgo"},decls:11,vars:34,consts:[["data-non-elliptical","true"]],template:function(e,t){1&e&&(i.Tb(0,"span",0),i.hc(1,"dateTimeUTC"),i.hc(2,"date"),i.Lc(3),i.hc(4,"dateAgo"),i.hc(5,"date"),i.hc(6,"dateAgo"),i.hc(7,"date"),i.hc(8,"dateDays"),i.hc(9,"date"),i.hc(10,"date"),i.Sb()),2&e&&(i.Ab("data-title","",t.tooltipPrefix," ",i.ic(1,5,i.kc(2,7,t.date,t.format,t.timezone)),""),i.xb(3),i.Pc(" ",t.prefixString," ",t.enableAgo&&!t.enableOnlyAgo?i.ic(4,11,i.kc(5,13,t.date,t.format,t.timezone)):t.enableAgo&&t.enableOnlyAgo?i.jc(6,17,i.kc(7,20,t.date,t.format,t.timezone),!0):t.enableDays?i.ic(8,24,i.kc(9,26,t.date,t.format,t.timezone)):i.kc(10,30,t.date,t.format,t.timezone)," ",t.suffixString," "))},pipes:[r.a,s.d,a,o],styles:[""]}),e})()},"N/Vq":function(e,t,l){"use strict";l.d(t,"a",(function(){return O})),l.d(t,"b",(function(){return E})),l.d(t,"d",(function(){return N})),l.d(t,"c",(function(){return j}));var n=l("fXoL"),i=l("k5hD"),r=l("4SUy"),s=l("TF3C"),a=l("OyPL"),o=l("H552"),u=l("ngVE"),d=l("gnsf"),c=l("n6zm"),p=l("Naoh"),h=function(e,t,l,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,l):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,l,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,l,s):i(t,l))||s);return r>3&&s&&Object.defineProperty(t,l,s),s};let m=(()=>{class e extends r.e{}return h([Object(r.s)(null)],e.prototype,"condition",void 0),h([Object(r.f)([],e)],e.prototype,"rules",void 0),h([Object(r.s)(null)],e.prototype,"field",void 0),h([Object(r.s)(null)],e.prototype,"label",void 0),h([Object(r.s)(null)],e.prototype,"type",void 0),h([Object(r.s)(null)],e.prototype,"operator",void 0),h([Object(r.s)(null)],e.prototype,"value",void 0),h([Object(r.s)(!1)],e.prototype,"not",void 0),e})(),g=(()=>{let e=class extends r.h{constructor(e,t){super(e,t),this.isReadonly=!0,this.fields={text:"label",value:"field"},this.updatedRule={not:!1,condition:"and"},this.isLocale=!1,this.isRefreshed=!1,a.g.Inject(a.b)}getPersistData(){return this.addOnPersist(["rule"])}reset(){this.isImportRules=!1;let e=this.element.querySelector(".e-group-body");e.innerHTML="",this.enableNotCondition&&Object(r.ib)(this.element.querySelectorAll(".e-qb-toggle"),"e-active-toggle"),e.appendChild(this.createElement("div",{attrs:{class:"e-rule-list"}})),this.levelColl[this.element.id+"_group0"]=[0],this.rule={condition:"and",not:!1,rules:[]},this.disableRuleCondition(e.parentElement)}getWrapper(){return this.element}getModuleName(){return"query-builder"}initialize(){if(this.dataColl.length){let e,t,l=Object.keys(this.dataColl[0]),n=[],i=[],r=!1,s=!1,a={isRequired:!0,min:0,max:Number.MAX_VALUE};if(this.columns.length){this.columnSort();let n=this.columns;for(let o=0,u=n.length;o<u;o++)this.updateCustomOperator(n[o]),n[o].type||(l.indexOf(n[o].field)>-1&&(t=this.dataColl[0][n[o].field],e=typeof t,"string"===e?s=!isNaN(Date.parse(t)):"object"===e&&(s=t instanceof Date&&!isNaN(t.getTime()),e="string"),n[o].type=e,s=!1),e="string"),n[o].validation||(n[o].validation=a),n[o].category?r=!0:n[o].category=this.l10n.getConstant("OtherFields"),i.indexOf(n[o].category)<0&&i.push(n[o].category),n[o].operators&&!this.isLocale||(n[o].operators=this.customOperators[n[o].type+"Operator"]);r&&(i.length>1||i[0]!==this.l10n.getConstant("OtherFields"))&&(this.fields={text:"label",value:"field",groupBy:"category"})}else{for(let i=0,r=l.length;i<r;i++)t=this.dataColl[0][l[i]],e=typeof t,"string"===e?s=!isNaN(Date.parse(t)):"object"===e&&(s=t instanceof Date&&!isNaN(t.getTime()),e="string"),n[i]={field:l[i],label:l[i],type:s?"date":e,validation:a},s=!1,n[i].operators=this.customOperators[n[i].type+"Operator"];this.columns=n}}else if(this.columns.length){let e=this.columns;for(let t=0,l=e.length;t<l;t++)e[t].category?this.fields={text:"label",value:"field",groupBy:"category"}:e[t].category=this.l10n.getConstant("OtherFields"),this.updateCustomOperator(e[t]),e[t].operators&&!this.isLocale||(e[t].operators=this.customOperators[e[t].type+"Operator"])}}updateCustomOperator(e){if(e.operators)for(let t=0;t<e.operators.length;t++){let l=Object.keys(e.operators[t]).indexOf("sqlOperator");if(l>-1){let n=e.operators[t],i=Object.keys(n),r=i.map(e=>n[e]).join(",").split(","),s=i.indexOf("value");this.operators[r[s]]=r[l]}}}focusEventHandler(e){this.target=e.target}clickEventHandler(e){let t,l,n=e.target;if(this.isImportRules=!1,"SPAN"===n.tagName&&(n=n.parentElement),n.className.indexOf("e-collapse-rule")>-1){let e=new r.b({duration:1e3,delay:0});this.element.querySelectorAll(".e-summary-content").length<1&&this.renderSummary();let t=document.getElementById(this.element.id+"_summary_content"),l=t.querySelector(".e-summary-text");e.animate(".e-query-builder",{name:"SlideLeftIn"}),this.element.querySelector(".e-group-container").style.display="none",l.textContent=this.getSqlFromRules(this.rule),t.style.display="block",l.style.height=l.scrollHeight+"px"}if("BUTTON"===n.tagName&&n.className.indexOf("e-qb-toggle")<0){if(n.className.indexOf("e-removerule")>-1)this.actionButton=n,this.deleteRule(n);else if(n.className.indexOf("e-deletegroup")>-1)this.actionButton=n,this.deleteGroup(Object(r.C)(n,".e-group-container"));else if(n.className.indexOf("e-edit-rule")>-1)if(new r.b({duration:1e3,delay:0}).animate(".e-query-builder",{name:"SlideLeftIn"}),document.getElementById(this.element.id+"_summary_content").style.display="none",this.element.querySelectorAll(".e-group-container").length<1){this.addGroupElement(!1,this.element,this.rule.condition);let e=Object(r.K)({},this.rule,{},!0);this.setGroupRules(e),this.renderSummaryCollapse()}else{let e=this.element.querySelector(".e-group-container");e.querySelectorAll(".e-collapse-rule").length<1&&this.renderSummaryCollapse(),e.style.display="block"}}else if("LABEL"===n.tagName&&n.parentElement.className.indexOf("e-btn-group")>-1||n.className.indexOf("e-qb-toggle")>-1){let e,i=Object(r.C)(n,".e-group-container"),s=n.getAttribute("for");s&&(e=document.getElementById(s).getAttribute("value")),l=i.id.replace(this.element.id+"_","");let a,o=this.getGroup(l);if(this.enableNotCondition)if(n.className.indexOf("e-qb-toggle")>-1){let t=i.getElementsByClassName("e-qb-toggle")[0];t.className.indexOf("e-active-toggle")>-1?(Object(r.ib)([t],"e-active-toggle"),a=!1):(Object(r.v)([t],"e-active-toggle"),a=!0),e=o.condition}else a=o.not;t={groupID:l,cancel:!1,type:"condition",value:e.toLowerCase()},this.enableNotCondition&&(t={groupID:l,cancel:!1,type:"condition",value:e.toLowerCase(),not:a}),this.isImportRules?this.beforeSuccessCallBack(t,n):this.trigger("beforeChange",t,e=>{this.beforeSuccessCallBack(e,n)})}this.target=n}beforeSuccessCallBack(e,t){if(!e.cancel){let l=Object(r.C)(t,".e-group-container"),n=l.id.replace(this.element.id+"_",""),i=this.getValidRules(this.rule),s=this.getParentGroup(l);s.condition=e.value,this.enableNotCondition&&(s.not=e.not),this.isImportRules||this.trigger("change",{groupID:n,type:"condition",value:s.condition}),this.filterRules(i,this.getValidRules(this.rule),"condition")}}selectBtn(e,t){"beforeOpen"===t.name?this.showButtons.groupInsert?Object(r.ib)([t.element.querySelector("li span.e-addgroup").parentElement],"e-button-hide"):Object(r.v)([t.element.querySelector("li span.e-addgroup").parentElement],"e-button-hide"):t.element.children[0].className.indexOf("e-addrule")>-1?this.addRuleElement(Object(r.C)(e,".e-group-container"),{}):t.element.children[0].className.indexOf("e-addgroup")>-1&&this.addGroupElement(!0,Object(r.C)(e,".e-group-container"),"",!0)}appendRuleElem(e,t,l,n,i,s){let a,o,u,d=e.querySelector(".e-rule-list");if("change"===l?a=Object(r.lb)("#"+n,e):(a=this.createElement("div",{attrs:{class:"e-rule-container"}}),a.setAttribute("id",e.id+"_rule"+this.ruleIdCounter),d.appendChild(a),this.ruleIdCounter++),t&&t.ruleTemplate){u={requestType:"template-initialize",ruleID:a.id,action:i,fields:this.fields,rule:s},this.trigger("actionBegin",u),this.ruleTemplateFn=this.templateParser(t.ruleTemplate);let e,l=this.element.id+t.field;u.fields=this.fields,u.columns=this.columns,u.operators=this.getOperators(s.field),u.operatorFields={text:"key",value:"value"},e=this.ruleTemplateFn(u,this,this.isReact||this.isAngular?a.id:"Template",l),o=e[0],o.className+=" e-rule-field"}else o=this.ruleElem.querySelector(".e-rule-field").cloneNode(!0);return a.appendChild(o),t&&t.ruleTemplate&&this.renderReactTemplates(),a}addRuleElement(e,t,l,n,i,r){if(!e)return;let s={groupID:e.id.replace(this.element.id+"_",""),cancel:!1,type:"insertRule"};this.isImportRules||this.isInitialLoad?(this.isInitialLoad=!1,this.addRuleSuccessCallBack(s,e,t,l,n,i,r)):this.trigger("beforeChange",s,s=>{this.addRuleSuccessCallBack(s,e,t,l,n,i,r)})}addRuleSuccessCallBack(e,t,l,n,i,s,o){let u,d,c,h,m=this.element.className.indexOf("e-device")>-1?"250px":"200px",g=l&&l.field?this.getColumn(l.field):n||this.columns[0],f={label:"",field:"",type:"",operator:""};if(!e.cancel){if(g&&g.ruleTemplate){this.selectedColumn=g,d=this.selectedColumn.operators,f={label:g.label,field:g.field,type:g.type,operator:d[0].value};let e=Object.keys(l).length?l:f;h=this.appendRuleElem(t,g,i,s,"field",e),this.trigger("actionBegin",{requestType:"template-create",action:"insert-rule",ruleID:h.id,fields:this.fields,rule:e})}else{h=this.appendRuleElem(t,g,i,s,"field"),h.querySelector(".e-filter-input").setAttribute("id",h.id+"_filterkey");let e=h.querySelector("button");this.element.className.indexOf("e-device")>-1||"Vertical"===this.displayMode?(e.textContent=this.l10n.getConstant("Remove"),Object(r.v)([e],"e-flat"),Object(r.v)([e],"e-primary")):(Object(r.v)([e],"e-round"),Object(r.v)([e],"e-icon-btn"),new p.d({content:this.l10n.getConstant("DeleteRule")}).appendTo(e),e=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-delete-icon"}}),h.querySelector("button").appendChild(e))}h.className="Vertical"===this.displayMode||this.element.className.indexOf("e-device")>-1?"e-rule-container e-vertical-mode":"e-rule-container e-horizontal-mode",h.previousElementSibling&&h.previousElementSibling.className.indexOf("e-rule-container")>-1&&(h.className.indexOf("e-joined-rule")<0&&(h.className+=" e-joined-rule"),h.previousElementSibling.className.indexOf("e-prev-joined-rule")<0&&(h.previousElementSibling.className+=" e-prev-joined-rule")),h.previousElementSibling&&h.previousElementSibling.className.indexOf("e-group-container")>-1&&h.className.indexOf("e-separate-rule")<0&&(h.className+=" e-separate-rule"),this.isImportRules||this.updateAddedRule(t,l,f,o),(!g||g&&!g.ruleTemplate)&&(c=new a.d({dataSource:this.columns,fields:this.fields,placeholder:this.l10n.getConstant("SelectField"),popupHeight:this.columns.length>5?m:"auto",change:this.changeField.bind(this),value:l?l.field:null}),c.appendTo("#"+h.id+"_filterkey"),this.selectedColumn=c.getDataByValue(c.value),Object.keys(l).length&&this.changeRule(l,{element:c.element,itemData:this.selectedColumn})),u=h.id.replace(this.element.id+"_",""),this.isImportRules||this.trigger("change",{groupID:t.id.replace(this.element.id+"_",""),ruleID:u,type:"insertRule"})}}updateAddedRule(e,t,l,n){let i=Object(r.C)(e,".e-group-container"),s=this.getParentGroup(i),a=Object(r.C)(e,".e-rule-container"),o=0;for(;a&&null!==a.previousElementSibling;)a=a.previousElementSibling,o++;n?s.rules[o]=t:Object.keys(t).length?s.rules.push({field:t.field,type:t.type,label:t.label,operator:t.operator,value:t.value}):s.rules.push(l),this.disableRuleCondition(e,s)}changeRuleTemplate(e,t,l,n){let i=this.selectedColumn.operators;if(!e.ruleTemplate){let l=Object(r.C)(t,".e-rule-container").id;if(this.previousColumn&&this.previousColumn.ruleTemplate&&(Object(r.I)(t.closest('[id="'+l+'"]').querySelector(".e-rule-field")),this.clearQBTemplate([l])),e){let t={field:e.field,label:e.label,operator:i[0].value,value:""};this.addRuleElement(this.element.querySelector(".e-group-container"),t,e,"change",l,!0)}}}renderToolTip(e){let t=new p.d({content:this.l10n.getConstant("ValidationMessage"),position:"BottomCenter",cssClass:"e-querybuilder-error"});t.appendTo(e),t.open(e)}validateFields(){let e=!0;if(this.allowValidation){let t,l,n,i,s,a,o,u,d,c,p=["isnull","isnotnull","isempty","isnotempty"],h=[],m=this.element.querySelectorAll(".e-rule-container");for(t=0,l=m.length;t<l;t++)if(s=Object(r.C)(m[t],".e-group-container"),d=this.getParentGroup(s),a=0,i=u=m[t],o=Object(r.M)(m[t].querySelector(".e-rule-field input.e-control"),"dropdownlist"),this.selectedColumn=o.getDataByValue(o.value),c=!Object(r.X)(o.index)&&this.selectedColumn.validation,n=u.querySelector(".e-rule-field input.e-control"),c&&c.isRequired){for(;i&&null!==i.previousElementSibling;)i=i.previousElementSibling,a++;if(n=u.querySelector(".e-rule-field input.e-control"),d.rules[a].field||(n.parentElement.className.indexOf("e-tooltip")<0&&this.renderToolTip(n.parentElement),e=!1),n=u.querySelector(".e-rule-operator input.e-control"),d.rules[a].operator||(n.parentElement.className.indexOf("e-tooltip")<0&&this.renderToolTip(n.parentElement),e=!1),d.rules[a].value instanceof Array&&(h=d.rules[a].value),p.indexOf(d.rules[a].operator)<0&&Object(r.X)(d.rules[a].value)&&"date"!==d.rules[a].type||""===d.rules[a].value||d.rules[a].value instanceof Array&&h.length<1){let t=u.querySelectorAll(".e-rule-value input.e-control");e=!1;for(let e=0,l=t.length;e<l;e++){let l,n=t[e];n.parentElement.className.indexOf("e-searcher")>-1?(l=Object(r.C)(n,".e-multi-select-wrapper"),l.className.indexOf("e-tooltip")<0&&this.renderToolTip(l)):t[e].parentElement.className.indexOf("e-tooltip")<0&&this.renderToolTip(t[e].parentElement),e++}}}else o.element&&Object(r.X)(o.index)&&(n.parentElement.className.indexOf("e-tooltip")<0&&this.renderToolTip(n.parentElement),e=!1)}return e}refreshLevelColl(){this.levelColl={};let e=this.element.querySelector(".e-group-container");this.levelColl[e.id]=[0],this.refreshLevel({groupElement:e,level:[0]})}refreshLevel(e){let t,l,n=e.groupElement.querySelector(".e-rule-list").children,i=e.groupElement,s=n.length,a=0;for(l=0;l<s;l++)t=n[l],t.className.indexOf("e-group-container")>-1&&(e.level.push(a),this.levelColl[t.id]=e.level.slice(),a++,e.groupElement=t,e=this.refreshLevel(e));let o=Object(r.C)(i,".e-rule-list");return e.groupElement=o?Object(r.C)(o,".e-group-container"):i,e.level=this.levelColl[e.groupElement.id].slice(),e}groupTemplate(){let e,t,l,n,i,r,s,a,o;return e=this.createElement("div",{attrs:{class:"e-group-container"}}),l=this.createElement("div",{attrs:{class:"e-group-header"}}),t=this.createElement("div",{attrs:{class:"e-group-body"}}),n=this.createElement("div",{attrs:{class:"e-rule-list"}}),e.appendChild(l),t.appendChild(n),e.appendChild(t),i=this.createElement("div",{attrs:{class:"e-lib e-btn-group"}}),this.enableNotCondition&&(r=this.createElement("button",{attrs:{type:"button",class:"e-qb-toggle"}}),i.appendChild(r)),r=this.createElement("input",{attrs:{type:"radio",class:"e-btngroup-and",value:"AND"}}),r.setAttribute("checked","true"),i.appendChild(r),s=this.createElement("label",{attrs:{class:"e-lib e-btn e-btngroup-and-lbl e-small"},innerHTML:this.l10n.getConstant("AND")}),i.appendChild(s),r=this.createElement("input",{attrs:{type:"radio",class:"e-btngroup-or",value:"OR"}}),i.appendChild(r),s=this.createElement("label",{attrs:{class:"e-lib e-btn e-btngroup-or-lbl e-small"},innerHTML:this.l10n.getConstant("OR")}),i.appendChild(s),l.appendChild(i),a=this.createElement("div",{attrs:{class:"e-group-action"}}),o=this.createElement("button",{attrs:{type:"button",class:"e-add-btn"}}),a.appendChild(o),l.appendChild(a),e}ruleTemplate(){let e,t,l,n,i,r;return e=this.createElement("div"),i=this.createElement("div",{attrs:{class:"e-rule-field"}}),l=this.createElement("div",{attrs:{class:"e-rule-filter"}}),t=this.createElement("input",{attrs:{type:"text",class:"e-filter-input"}}),l.appendChild(t),i.appendChild(l),l=this.createElement("div",{attrs:{class:"e-rule-operator"}}),i.appendChild(l),l=this.createElement("div",{attrs:{class:"e-rule-value"}}),i.appendChild(l),l=this.createElement("div",{attrs:{class:"e-rule-value-delete"}}),r=this.showButtons.ruleDelete?"e-removerule e-rule-delete e-css e-btn e-small":"e-removerule e-rule-delete e-css e-btn e-small e-button-hide",n=this.createElement("button",{attrs:{class:r}}),l.appendChild(n),i.appendChild(l),e.appendChild(i),e}addGroupElement(e,t,l,n){let i={groupID:t.id.replace(this.element.id+"_",""),cancel:!1,type:"insertGroup"};this.isImportRules||this.isInitialLoad?(this.isInitialLoad=!1,this.addGroupSuccess(i,e,t,l,n)):this.trigger("beforeChange",i,i=>{this.addGroupSuccess(i,e,t,l,n)})}addGroupSuccess(e,t,l,n,i){if(!e.cancel&&this.element.querySelectorAll(".e-group-container").length<=this.maxGroupCount){let e,n=l,a=this.groupElem.cloneNode(!0);a.setAttribute("id",this.element.id+"_group"+this.groupIdCounter),this.groupIdCounter++;let o=a.querySelector(".e-btngroup-and"),u=a.querySelector(".e-btngroup-or"),d=a.querySelector(".e-btngroup-and-lbl"),h=a.querySelector(".e-btngroup-or-lbl"),m=a.querySelector(".e-qb-toggle");if(o.setAttribute("id",this.element.id+"_and"+this.btnGroupId),u.setAttribute("id",this.element.id+"_or"+this.btnGroupId),o.setAttribute("name",this.element.id+"_and"+this.btnGroupId),u.setAttribute("name",this.element.id+"_and"+this.btnGroupId),d.setAttribute("for",this.element.id+"_and"+this.btnGroupId),h.setAttribute("for",this.element.id+"_or"+this.btnGroupId),this.btnGroupId++,t){e=this.createElement("button",{attrs:{class:this.showButtons.groupDelete?"e-deletegroup":"e-deletegroup e-button-hide"}}),new s.a({iconCss:"e-icons e-delete-icon",cssClass:"e-small e-round"}).appendTo(e),new p.d({content:this.l10n.getConstant("DeleteGroup")}).appendTo(e),Object(r.kb)(e,{selector:".deletegroup"}),a.querySelector(".e-group-action").appendChild(e);let t=n.querySelector(".e-rule-list"),l=t.children,o=0;for(let e=0,n=l.length;e<n;e++)l[e].className.indexOf("e-group-container")>-1&&(o+=1);t.appendChild(a);let u=this.levelColl[n.id].slice(0);u.push(o),this.levelColl[a.id]=u,this.isImportRules||(this.addGroups([],n.id.replace(this.element.id+"_","")),i&&this.addRuleElement(a,{}))}else n.appendChild(a),this.levelColl[a.id]=[0];this.enableNotCondition&&(new s.a({content:this.l10n.getConstant("NOT"),cssClass:"e-btn e-small"}).appendTo(m),a.querySelector(".e-btngroup-and-lbl").classList.add("e-not"),this.updatedRule&&this.updatedRule.not&&Object(r.v)([m],"e-active-toggle")),this.updatedRule=null;let g=a.querySelector(".e-add-btn");if(new c.b({items:this.items,cssClass:"e-round e-small e-caret-hide e-addrulegroup",iconCss:"e-icons e-add-icon",beforeOpen:this.selectBtn.bind(this,g),select:this.selectBtn.bind(this,g)}).appendTo(g),!this.isImportRules){let e=n.id.replace(this.element.id+"_",""),t=a.id.replace(this.element.id+"_","");this.trigger("change",{groupID:e,type:"insertGroup",childGroupID:t})}}}notifyChange(e,t,l){let n=Object(r.C)(t,".e-group-container"),i=this.getParentGroup(n),s=Object(r.C)(t,".e-rule-container"),a=0;for(;s&&null!==s.previousElementSibling;)s=s.previousElementSibling,a++;let o=this.getColumn(i.rules[a].field),u=this.getFormat(o.format);if("date"===o.type)if(e instanceof Date)e=this.intl.formatDate(e,u);else if(e instanceof Array)for(let r=0;r<e.length;r++)e[r]&&e[r]instanceof Date&&(e[r]=this.intl.formatDate(e[r],u));if(o.ruleTemplate)this.templateChange(t,e,l);else{let l=Object(r.C)(t,".e-rule-value").querySelectorAll(".e-template"),n=Object(r.C)(t,".e-rule-container").querySelector(".e-filter-input"),i=Object(r.M)(n,"dropdownlist");o=i.getDataByValue(i.value);let s=[];for(let t=0,r=l.length;t<r;t++)l.length>1&&"date"===o.type&&e[t]&&e[t]instanceof Date?s.push(this.intl.formatDate(e[t],u)):s=e;this.updateRules(t,l.length>1?s:e)}}templateChange(e,t,l){let n=Object(r.C)(e,".e-group-container"),i=this.getParentGroup(n),s=Object(r.C)(e,".e-rule-container"),a=0;for(;s&&null!==s.previousElementSibling;)s=s.previousElementSibling,a++;let o,u=i.rules[a];"field"===l?this.selectedColumn=this.getColumn(t):u&&(this.selectedColumn=this.getColumn(u.field)),this.previousColumn=this.getColumn(u.field);let d=this.getValidRules(this.rule);this.selectedColumn&&(o=this.selectedColumn.operators?this.selectedColumn.operators:this.customOperators[this.selectedColumn.type+"Operator"]);let c,p=["in","notin","between","notbetween"];switch(l){case"field":u.field=t,u.label=this.selectedColumn.label,u.type=this.selectedColumn.type,u.value="",u.operator=o[0].value;break;case"operator":c=u.operator,u.operator=t,p.indexOf(u.operator)>-1?u.value=[]:p.indexOf(c)>-1&&(u.value="");break;case"value":u.value=t}if(this.changeRuleTemplate(this.selectedColumn,e,u,l),this.filterRules(d,this.getValidRules(this.rule),l),this.selectedColumn&&this.selectedColumn.ruleTemplate&&("field"===l||"operator"===l)){let t=Object(r.C)(e,".e-rule-container");this.destroyControls(t,!0),Object(r.I)(t.querySelector(".e-rule-field"));let n=this.appendRuleElem(Object(r.C)(t,".e-group-container"),this.selectedColumn,"change",t.id,l,u);n.className="Vertical"===this.displayMode||this.element.className.indexOf("e-device")>-1?"e-rule-container e-vertical-mode":"e-rule-container e-horizontal-mode",n.previousElementSibling&&n.previousElementSibling.className.indexOf("e-rule-container")>-1&&(n.className.indexOf("e-joined-rule")<0&&(n.className+=" e-joined-rule"),n.previousElementSibling.className.indexOf("e-prev-joined-rule")<0&&(n.previousElementSibling.className+=" e-prev-joined-rule")),n.previousElementSibling&&n.previousElementSibling.className.indexOf("e-group-container")>-1&&n.className.indexOf("e-separate-rule")<0&&(n.className+=" e-separate-rule"),this.trigger("actionBegin",{requestType:"template-create",action:l,ruleID:t.id,fields:this.fields,rule:u})}}changeValue(e,t){let l,n,i;i=t.event?t.event.target:t.element,(i.className.indexOf("e-day")>-1||i.className.indexOf("e-cell")>-1)&&(i=t.element);let s=Object(r.C)(i,".e-group-container"),a=Object(r.C)(i,".e-rule-container");l=s&&s.id.replace(this.element.id+"_",""),n=a.id.replace(this.element.id+"_","");let o,u,d,c=t;c.element&&c.element.className.indexOf("e-datepicker")>-1&&(i=c.element),i.className.indexOf("e-radio")>-1?(u=parseInt(i.id.split("valuekey")[1],0),d=Object(r.M)(Object(r.C)(i,".e-rule-container").querySelector(".e-filter-input"),"dropdownlist"),this.selectedColumn=d.getDataByValue(d.value),o=this.selectedColumn.values?this.selectedColumn.values[u]:[!0,!1][u]):o=i.className.indexOf("e-multiselect")>-1?Object(r.M)(i,"multiselect").value:t.value,"input"===t.name&&this.immediateModeDelay?(window.clearInterval(this.timer),this.timer=window.setInterval(()=>{this.filterValue(l,n,o,e,i)},this.immediateModeDelay)):this.filterValue(l,n,o,e,i)}filterValue(e,t,l,n,i){let r={groupID:e,ruleID:t,value:l,cancel:!1,type:"value"};window.clearInterval(this.timer),this.isImportRules?this.changeValueSuccessCallBack(r,i,n,e,t):this.trigger("beforeChange",r,l=>{this.changeValueSuccessCallBack(l,i,n,e,t)})}changeValueSuccessCallBack(e,t,l,n,i){e.cancel||(this.updateRules(t,e.value,l),this.isImportRules||this.trigger("change",{groupID:n,ruleID:i,value:e.value,cancel:!1,type:"value"}))}changeField(e){if(e.isInteracted){let t=this.getColumn(e.value);if(t&&t.ruleTemplate)this.templateChange(e.element,t.field,"field");else{let t=Object(r.C)(e.element,".e-group-container"),l=this.getParentGroup(t),n=Object(r.C)(e.element,".e-rule-container"),i=0;for(;n&&null!==n.previousElementSibling;)n=n.previousElementSibling,i++;this.changeRule(l.rules[i],e)}}}changeRule(e,t){if(!t.itemData)return;let l=Object(r.C)(t.element,".e-rule-filter"),n=Object(r.M)(t.element,"dropdownlist"),i=Object(r.C)(t.element,".e-group-container").id.replace(this.element.id+"_","");this.changeFilter(l,n,i,e,{},t)}changeFilter(e,t,l,n,i,s){if(e){let a;this.selectedColumn=t.getDataByValue(t.value),a={groupID:l,ruleID:Object(r.C)(e,".e-rule-container").id.replace(this.element.id+"_",""),selectedField:t.value,cancel:!1,type:"field"},this.isImportRules?this.fieldChangeSuccess(a,i,e,n,s):this.trigger("beforeChange",a,t=>{this.fieldChangeSuccess(t,i,e,n,s)})}else{let a=Object(r.C)(s.element,".e-rule-operator");this.changeOperator(e,a,t,l,n,i,s)}}changeOperator(e,t,l,n,i,s,a){let o,u,d;t?(o=Object(r.C)(t,".e-rule-container"),u=o.id.replace(this.element.id+"_",""),d={groupID:n,ruleID:u,selectedIndex:l.index,cancel:!1,type:"operator"},this.isImportRules?this.operatorChangeSuccess(d,e,s,i,a):this.trigger("beforeChange",d,t=>{this.operatorChangeSuccess(t,e,s,i,a)})):this.changeRuleValues(e,i,s,a)}fieldChangeSuccess(e,t,l,n,i){let s=Object(r.C)(l,".e-rule-container"),a=Object(r.C)(i.element,".e-rule-operator"),o=Object(r.C)(i.element,".e-group-container").id.replace(this.element.id+"_",""),u=Object(r.M)(i.element,"dropdownlist"),d=s.querySelectorAll(".e-tooltip.e-input-group");for(let c=0;c<d.length;c++)Object(r.M)(d[c],"tooltip").destroy();e.cancel||(t.type=this.selectedColumn.type,s.querySelector(".e-template")&&(n.value="")),this.changeOperator(l,a,u,o,n,t,i)}operatorChangeSuccess(e,t,l,n,i){if(!e.cancel){let e=Object(r.C)(i.element,".e-rule-operator"),s=e.nextElementSibling,a=Object(r.M)(i.element,"dropdownlist"),o=n.operator?n.operator.toString().toLowerCase():"";l.operator=a.value.toString();let u=l.operator.toLowerCase();if(l.operator.toLowerCase().indexOf("between")>-1||l.operator.toLowerCase().indexOf("in")>-1&&l.operator.toLowerCase().indexOf("contains")<0?(t=e.previousElementSibling,l.type=n.type,(l.operator.toLowerCase().indexOf("in")<0||o.indexOf("in")<0)&&(n.value=[])):"object"==typeof n.value&&null!=n.value&&(n.value=n.value.length>0?n.value[0]:""),i.previousItemData){let r=i.previousItemData.value.toString().toLowerCase();(r.indexOf("between")>-1||(r.indexOf("in")>-1||r.indexOf("null")>-1||r.indexOf("empty")>-1)&&r.indexOf("contains")<0)&&(t=e.previousElementSibling,l.type=n.type)}if(o.indexOf("in")>-1&&o.indexOf("in")<5&&u.indexOf("in")>-1&&u.indexOf("in")<5&&(t=null),l.operator.indexOf("null")>-1||l.operator.indexOf("empty")>-1){let t=e.parentElement.querySelector(".e-rule-value"),l=t.querySelector(".e-tooltip.e-input-group");l&&Object(r.M)(l,"tooltip").destroy(),Object(r.ib)([t],"e-show"),Object(r.v)([t],"e-hide")}s&&s.querySelector(".e-template")&&(t=e.previousElementSibling),this.changeRuleValues(t,n,l,i)}}changeRuleValues(e,t,l,n){let i,s,o,u=Object(r.C)(n.element,".e-rule-operator");if(e)if(u=e.nextElementSibling,Object(r.v)([u],"e-operator"),u.childElementCount)i=Object(r.M)(u.querySelector(".e-dropdownlist"),"dropdownlist"),l.operator=i.value,this.renderValues(u,n.itemData,n.previousItemData,!0,t,l,n.element);else{let e=Object(r.C)(u,".e-rule-container").id;o=this.createElement("input",{attrs:{type:"text",id:e+"_operatorkey"}}),u.appendChild(o),this.selectedColumn.operators?s=this.selectedColumn.operators:n.itemData&&(s=this.customOperators[this.selectedColumn.type+"Operator"]);let i=this.element.className.indexOf("e-device")>-1?"250px":"200px",d=s[0].value;d=t&&""!==t.operator?t.operator:d,new a.d({dataSource:s,fields:{text:"key",value:"value"},placeholder:this.l10n.getConstant("SelectOperator"),popupHeight:s.length>5?i:"auto",change:this.changeField.bind(this),index:0,value:d}).appendTo("#"+e+"_operatorkey"),l.operator=t&&""!==t.operator?t.operator:s[0].value,this.isImportRules&&(l.type=this.selectedColumn.type,l.operator=t.operator),this.renderValues(u,this.selectedColumn,n.previousItemData,!1,t,l,n.element)}this.isImportRules||this.updateRules(n.element,n.item)}destroyControls(e,t){let l,n,i=t?e:e.nextElementSibling;l=i.querySelectorAll("input.e-control"),n=i.querySelectorAll("div.e-control:not(.e-handle)");let s,a=this.columns;for(let o=0,u=l.length;o<u;o++){if(l[o].classList.contains("e-textbox"))Object(r.M)(l[o],"textbox").destroy(),Object(r.I)(Object(r.lb)("input#"+l[o].id,i));else if(l[o].classList.contains("e-dropdownlist"))this.allowValidation&&l[o].parentElement.className.indexOf("e-tooltip")>-1&&Object(r.M)(l[o].parentElement,"tooltip").destroy(),Object(r.M)(l[o],"dropdownlist").destroy();else if(l[o].classList.contains("e-radio"))Object(r.M)(l[o],"radio").destroy();else if(l[o].classList.contains("e-numerictextbox"))Object(r.M)(l[o],"numerictextbox").destroy(),Object(r.I)(Object(r.lb)("input#"+l[o].id,i));else if(l[o].classList.contains("e-datepicker"))Object(r.M)(l[o],"datepicker").destroy();else if(l[o].classList.contains("e-multiselect"))Object(r.M)(l[o],"multiselect").destroy();else if(l[o].className.indexOf("e-template")>-1){let e=l[o].className;for(let t=0,n=a.length;t<n;t++)if(a[t].template&&e.indexOf(a[t].field)>-1){this.templateDestroy(a[t],l[o].id);break}}document.getElementById(l[o].id)&&Object(r.I)(l[o])}for(let o=0,u=n.length;o<u;o++){if(n[o].className.indexOf("e-template")>-1){let e=n[o].className;for(let t=0,l=a.length;t<l;t++)if(a[t].template&&e.indexOf(a[t].field)>-1){this.templateDestroy(a[t],n[o].id);break}}Object(r.I)(n[o])}s=i.querySelectorAll(".e-template:not(.e-control)");for(let o=0,u=s.length;o<u;o++)Object(r.I)(s[o])}templateDestroy(e,t){let l;if("string"==typeof e.template&&void 0!==e.template.destroy)return;l=e.template;let n=l.destroy;if(l.destroy){let i;document.getElementById(t)&&(i=Object(r.C)(document.getElementById(t),".e-rule-field").querySelectorAll(".e-template")),"string"==typeof n?(n=Object(r.V)(n,window),n({field:e.field,elementId:t,elements:i})):l.destroy({field:e.field,elementId:t,elements:i})}}getValues(e){let t,l={},n=[],i=[];this.separator.length>0&&(i=e.split(this.separator));let r=this.dataColl;if(this.dataColl[1])for(let s=0,a=r.length;s<a;s++){let a={};if(i.length>1){let e,l=r[s];for(let n=0,r=i.length;n<r;n++)e=i[n],i.length===n+1?(t=l[e],Number(l[e])===l[e]&&l[e]%1!=0&&(t=l[e].toString())):l=l[e]}else t=r[s][e],Number(r[s][e])===r[s][e]&&r[s][e]%1!=0&&(t=r[s][e].toString());t in l||(l[t]=1,i.length>1?this.createNestedObject(a,i,t):a[e]=t,n.push(a))}return n}createNestedObject(e,t,l){let n,i=t.length-1;for(let r=0;r<i;++r)n=t[r],n in e||(e[n]={}),e=e[n];e[t[i]]=l}getDistinctValues(e,t){let l={},n=[];for(let i=0,r=e.length;i<r;i++){let r=e[i][t];Number(e[i][t])===e[i][t]&&e[i][t]%1!=0&&(r=e[i][t].toString());let s={};r in l||(l[r]=1,s[t]=r,n.push(s))}return n}renderMultiSelect(e,t,l,n,i){let r,s=!1,u=!1;this.dataColl[1]&&Object.keys(this.dataColl[1]).indexOf(e.field)>-1&&(s=!0,r=this.getDistinctValues(this.dataColl,e.field)),!this.dataColl.length&&i.length&&(u=!0);let d=new a.g({dataSource:u?i:s?r:this.dataManager,query:new o.g([e.field]),fields:{text:e.field,value:e.field},placeholder:this.l10n.getConstant("SelectValue"),value:n,mode:"CheckBox",width:"100%",change:this.changeValue.bind(this,l),close:this.closePopup.bind(this,l),actionBegin:this.multiSelectOpen.bind(this,t+"_valuekey"+l)});d.appendTo("#"+t+"_valuekey"+l),this.updateRules(d.element,n,0)}multiSelectOpen(e,t){if(this.dataSource instanceof o.a){let l=document.getElementById(e),n=Object(r.M)(Object(r.C)(l,".e-rule-container").querySelector(".e-filter-input"),"dropdownlist");this.selectedColumn=n.getDataByValue(n.value);let i=this.selectedColumn.field,s=!1;this.dataColl[1]&&Object.keys(this.dataColl[1]).indexOf(i)>-1&&(s=!0),s||(t.cancel=!0,Object(r.W)()?this.bindBlazorMultiSelectData(l,i):this.bindMultiSelectData(l,i))}}bindBlazorMultiSelectData(e,t){return l=this,void 0,i=function*(){yield this.getMultiSelectData(e,t)},new((n=void 0)||(n=Promise))((function(e,t){function r(e){try{a(i.next(e))}catch(l){t(l)}}function s(e){try{a(i.throw(e))}catch(l){t(l)}}function a(t){t.done?e(t.value):new n((function(e){e(t.value)})).then(r,s)}a((i=i.apply(l,[])).next())}));var l,n,i}bindMultiSelectData(e,t){this.getMultiSelectData(e,t)}getMultiSelectData(e,t){let l,n=new o.c,i=this.dataManager.executeQuery((new o.g).select(t)),s=Object(r.M)(e,"multiselect");s.hideSpinner(),this.createSpinner(Object(r.C)(e,".e-multi-select-wrapper").parentElement),Object(p.n)(Object(r.C)(e,".e-multi-select-wrapper").parentElement),i.then(n=>{l=n.actual&&n.actual.result?n.actual.result:n.result,this.dataColl=Object(r.K)(this.dataColl,l,[],!0),s.dataSource=this.getDistinctValues(this.dataColl,t),Object(p.k)(Object(r.C)(e,".e-multi-select-wrapper").parentElement)}).catch(e=>{n.reject(e)})}createSpinner(e){let t=this.createElement("span",{attrs:{class:"e-qb-spinner"}});e.appendChild(t),Object(p.g)({target:t,width:r.d.isDevice?"16px":"14px"})}closePopup(e,t){let l=document.getElementById(t.popup.element.id.replace("_popup","")),n=Object(r.M)(l,"multiselect").value;this.updateRules(l,n,e)}processTemplate(e,t,l,n){let i,s=Object(r.C)(e,".e-rule-container"),a=s.querySelectorAll(".e-template");i=Object(r.M)(s.querySelector(".e-rule-filter .e-filter-input"),"dropdownlist");let o=this.getColumn(i.value);if("string"==typeof t.template||void 0===t.template.write)this.trigger("actionBegin",{rule:l,ruleID:s.id,operator:n.operator,field:o.field,requestType:"value-template-create"});else{let e=t.template;"string"==typeof e.write?Object(r.V)(e.write,window)({elements:a.length>1?a:a[0],values:l.value,operator:n.operator,field:o.field,dataSource:o.values}):t.template.write({elements:a.length>1?a:a[0],values:l.value,operator:n.operator,field:o.field,dataSource:o.values})}}getItemData(e){let t=Object(r.M)(document.getElementById(e+"_filterkey"),"dropdownlist");return this.getColumn(t.value)}setDefaultValue(e,t,l){let n=this.getItemData(e);if(Object(r.X)(n.value))return l?t?[0,0]:0:t?[]:"";if(t){if(!(n.value instanceof Array))return[n.value]}else if(n.value instanceof Array)return n.value[0];return n.value}renderStringValue(e,t,l,n,i){let r,s,a=this.getItemData(e);if(s=this.isImportRules||this.isPublic?t.value:this.setDefaultValue(e,!1,!1),"in"!==l&&"notin"!==l||!this.dataColl.length&&!a.values){"in"!==l&&"notin"!==l||(r=this.isImportRules?t.value:this.setDefaultValue(e,!0,!1),s=r.join(","));let i=new u.g({placeholder:this.l10n.getConstant("SelectValue"),input:this.changeValue.bind(this,n)});i.appendTo("#"+e+"_valuekey"+n),i.value=s,i.dataBind()}else r=this.isImportRules?t.value:this.setDefaultValue(e,!0,!1),this.renderMultiSelect(a,e,n,r,a.values),"Vertical"===this.displayMode||this.element.className.indexOf("e-device")>-1?i.style.width="100%":(i.style.width=null,i.style.minWidth="200px")}renderNumberValue(e,t,l,n,i,s,a){let o=this.getItemData(e),d=this.isImportRules||this.isPublic?t.value:this.setDefaultValue(e,!1,!0);if("in"!==l&&"notin"!==l||!this.dataColl.length&&!o.values)if("in"===l||"notin"===l){d=this.isImportRules?t.value:this.setDefaultValue(e,!0,!1);let l=d.join(","),i=new u.g({placeholder:this.l10n.getConstant("SelectValue"),input:this.changeValue.bind(this,n)});i.appendTo("#"+e+"_valuekey"+n),i.value=l,i.dataBind()}else{let l=Object(r.M)(document.getElementById(e+"_filterkey"),"dropdownlist"),i=(s=this.getColumn(l.value)).validation&&s.validation.min?s.validation.min:0,o=s.validation&&s.validation.max?s.validation.max:Number.MAX_VALUE,c=s.format?s.format:"n";a>1&&t&&(d=t.value[n]?t.value[n]:this.setDefaultValue(e,!0,!0)),new u.e({value:d instanceof Array?d[n]:d,format:c,min:i,max:o,width:"100%",step:s.step?s.step:1,change:this.changeValue.bind(this,n)}).appendTo("#"+e+"_valuekey"+n)}else d=this.isImportRules?t.value:this.setDefaultValue(e,!0,!1),this.renderMultiSelect(o,e,n,d,o.values),this.element.className.indexOf("e-device")>-1||"Vertical"===this.displayMode?i.style.width="100%":(i.style.minWidth="200px",i.style.width=null)}processValueString(e,t){let l=[],n=e.split(",");if("string"===t)return n;for(let i=0,r=n.length;i<r;i++)l.push(Number(n[i]));return l}parseDate(e,t){let l,n;if(t){let i=this.intl.getDateParser({skeleton:"full",type:"dateTime"});l=this.getFormat(t),n=i(e),Object(r.X)(n)&&(n=this.intl.parseDate(e,l))}else n=new Date(e);return n}renderControls(e,t,l,n){if(Object(r.v)([e.parentElement.querySelector(".e-rule-value")],"e-value"),Object(r.ib)([e.parentElement.querySelector(".e-rule-value")],"e-hide"),Object(r.v)([e.parentElement.querySelector(".e-rule-value")],"e-show"),t.template)this.processTemplate(e,t,l,n);else{let i;i="boolean"===n.type?this.selectedColumn.values?this.selectedColumn.values.length:2:n.operator&&n.operator.toString().toLowerCase().indexOf("between")>-1?2:1;let s,a,o=Object(r.C)(e,".e-rule-container").id;if(a=n.operator.toString(),e.className.indexOf("e-rule-operator")>-1||e.className.indexOf("e-rule-filter")>-1){s=e.parentElement.querySelector(".e-rule-value"),this.element.className.indexOf("e-device")>-1||"Vertical"===this.displayMode?s.style.width="100%":"in"!==a&&"notin"!==a?Object(r.v)([s],"e-custom-value"):Object(r.ib)([s],"e-custom-value");for(let e=0;e<i;e++)switch(n.type){case"string":this.renderStringValue(o,l,a,e,s);break;case"number":this.renderNumberValue(o,l,a,e,s,t,i);break;case"boolean":this.processBoolValues(t,l,o,e);break;case"date":{let n,r,s,a=new Date,u=t.format,c=this.l10n.getConstant("SelectValue");if(t.value&&(a=t.value instanceof Date?t.value:t.value instanceof Number?new Date(t.value):this.parseDate(t.value,t.format)),(this.isImportRules||this.isPublic)&&l&&(r=this.getColumn(l.field),u=r.format,l.value?(n=i>1?l.value[e]:l.value,a=this.parseDate(n,r.format)):a=l.value),u){let t=this.getFormat(u);s=new d.b(t.skeleton?{locale:this.getLocale(),value:a,placeholder:c,format:t,change:this.changeValue.bind(this,e)}:{value:a,locale:this.getLocale(),placeholder:c,format:t.format,change:this.changeValue.bind(this,e)})}else s=new d.b({locale:this.getLocale(),value:a,placeholder:c,change:this.changeValue.bind(this,e)});s.appendTo("#"+o+"_valuekey"+e),l.value||this.updateRules(document.getElementById(o+"_valuekey"+e),a)}}}}}processBoolValues(e,t,l,n){let i,a,o,u=!1;if(Object(r.X)(t.type)&&e&&(t.type=e.type),e.values){let l=e.values;"boolean"!==t.type||Object(r.X)(t.value)?e.value?u=l[n].toLowerCase()===e.value.toString().toLowerCase():0===n&&(u=!0):u=l[n].toLowerCase()===t.value.toString().toLowerCase(),a=i=o=l[n]}else{let l=[!0,!1];"boolean"!==t.type||Object(r.X)(t.value)?e.value?u=l[n].toString().toLowerCase()===e.value.toString().toLowerCase():0===n&&(u=!0):u=l[n].toString().toLowerCase()===t.value.toString().toLowerCase(),i=l[n].toString(),a=l[n],o=this.l10n.getConstant(["True","False"][n])}let d=new s.d({label:o,name:l+"default",checked:u,value:i,change:this.changeValue.bind(this,n)});d.appendTo("#"+l+"_valuekey"+n),u&&this.updateRules(d.element,a,0)}getOperatorIndex(e,t){let l,n=e.dataSource.length;for(l=0;l<n;l++)if(t.operator===e.dataSource[l].value)return l;return 0}getPreviousItemData(e,t){return t.template&&e&&Object.keys(e).length<4&&(e.template=t.template),e}renderValues(e,t,l,n,i,s,a){let o=document.getElementById(a.id.replace("operatorkey","filterkey")),u=Object(r.M)(o,"dropdownlist"),d=this.getColumn(u.value);if(n){let l=Object(r.M)(e.querySelector("input"),"dropdownlist");t.operators?(l.value=null,l.dataBind(),l.dataSource=t.operators,l.index=this.getOperatorIndex(l,i),l.value=s.operator=l.dataSource[l.index].value,l.dataBind()):t.type&&(l.value=null,l.dataBind(),l.dataSource=this.customOperators[t.type+"Operator"],l.index=this.getOperatorIndex(l,i),l.value=s.operator=l.dataSource[l.index].value,l.dataBind())}let c=s.operator.toString();if(c.indexOf("null")>-1||c.indexOf("empty")>-1){let t=e.parentElement.querySelector(".e-rule-value");t&&(Object(r.ib)([t],"e-show"),Object(r.v)([t],"e-hide"))}else{let a=Object(r.C)(e,".e-rule-container").id;if((l=this.getPreviousItemData(l,d))&&l.template){if(this.templateDestroy(l,a+"_valuekey0"),Object(r.W)())l.field!==t.field&&(r.z[this.element.id+l.field]=[],Object(r.jb)(this.element.id+l.field,"Template"),Object(r.I)(e.nextElementSibling.querySelector(".e-blazor-template")));else{let t=Object(r.lb)("#"+a+"_valuekey0",e.nextElementSibling);t&&!t.classList.contains("e-control")&&Object(r.I)(Object(r.lb)("#"+a+"_valuekey0",e.nextElementSibling))}"string"!=typeof l.template&&void 0!==l.template.create||(e.nextElementSibling.innerHTML="",this.clearQBTemplate([a]))}if(n&&(this.validatValue(i,Object(r.C)(e,".e-rule-container")),Object(r.W)()&&!l.template?this.destroyControls(e):Object(r.W)()||this.destroyControls(e)),t.template=d.template,t.template){if(Object(r.W)()&&t.field){this.columnTemplateFn=this.templateParser(t.template);let l=this.element.id+t.field,n=this.columnTemplateFn(t,this,"Template",l);e.nextElementSibling.appendChild(n[0]),Object(r.sb)(l,"Template",d,!1)}Object(r.v)([e.nextElementSibling],"e-template-value"),t.template=d.template,this.setColumnTemplate(t,a,d.field,t.value||c,e,i),e.parentElement.querySelector(".e-rule-value").style.width=this.element.className.indexOf("e-device")>-1||"Vertical"===this.displayMode?"100%":"200px"}else{Object(r.ib)([e.nextElementSibling],"e-template-value");let t=1;t="boolean"===s.type?this.selectedColumn.values?this.selectedColumn.values.length:2:c&&c.toLowerCase().indexOf("between")>-1?2:1;for(let l=0;l<t;l++){let t;t=this.createElement("input",{attrs:{type:"text",id:a+"_valuekey"+l}}),e.nextElementSibling.appendChild(t)}}this.renderControls(e,t,i,s)}}setColumnTemplate(e,t,l,n,i,s){let a,o;if(e.template)if("string"==typeof e.template||void 0===e.template.create){o={requestType:"value-template-initialize",ruleID:t,field:l,operator:n,rule:s},this.trigger("actionBegin",o),this.columnTemplateFn=this.templateParser(e.template);let r=this.element.id+l;a=this.isReact||this.isAngular?this.columnTemplateFn(o,this,t,r)[0]:this.columnTemplateFn(o,this,"Template",r)[0],i.nextElementSibling.appendChild(a),this.renderReactTemplates()}else{let s=e.template;if(a="string"==typeof s.create?Object(r.V)(s.create,window)({field:l,operator:n}):s.create({field:l,operator:n}),a instanceof Element)a.id=t+"_valuekey0",Object(r.v)([a],"e-template"),Object(r.v)([a],"e-"+l),i.nextElementSibling.appendChild(a);else if(a instanceof Array){Object(r.v)(a,"e-template");for(let e=0,l=a.length;e<l;e++)a[e].id=t+"_valuekey"+e,i.nextElementSibling.appendChild(a[e])}}}updateValues(e,t){let l=1;e.className.indexOf("e-template")>-1&&(l=3);let n=e.className.split(" e-")[l],i=parseInt(e.id.slice(-1),2);switch(n){case"checkbox":let l=Object(r.M)(e,n).value;t.value=""!==l?l:void 0;break;case"textbox":case"dropdownlist":t.value=Object(r.M)(e,n).value;break;case"radio":let s=Object(r.M)(e,n);s.checked&&(t.value="boolean"==typeof t.value?"true"===s.value:this.getColumn(t.field).values?s.value:"true"===s.value),s.refresh();break;case"numerictextbox":t.operator.indexOf("between")>-1?("string"==typeof t.value&&(t.value=[]),t.value[i]=Object(r.M)(e,n).value):t.value=Object(r.M)(e,n).value;break;case"datepicker":let a=this.getColumn(t.field),o=this.getFormat(a.format),u=Object(r.M)(e,n).value;t.operator.indexOf("between")>-1?("string"==typeof t.value&&(t.value=[]),t.value[i]=u):t.value=Object(r.X)(o.format)&&u?this.intl.formatDate(u):u?this.intl.formatDate(u,o):u;break;case"multiselect":t.value=Object(r.M)(e,n).value}}updateRules(e,t,l){let n,i,s,a=Object(r.C)(e,".e-group-container"),o=this.getParentGroup(a),u=Object(r.C)(e,".e-rule-container"),d=0,c=a.id.replace(this.element.id+"_",""),p=this.getValidRules(this.rule);for(;u&&null!==u.previousElementSibling;)u=u.previousElementSibling,d++;let h=o.rules[d].operator.toString();if(u=Object(r.C)(e,".e-rule-container"),s=u.id.replace(this.element.id+"_",""),Object(r.C)(e,".e-rule-filter")){n=Object(r.M)(e,"dropdownlist");let t=this.getColumn(n.value);this.isImportRules||o.rules[d].field.toLowerCase()===t.field.toLowerCase()||(!u.querySelectorAll(".e-template")&&!(h.indexOf("null")>-1)||h.indexOf("empty")>-1)&&(o.rules[d].value=""),this.selectedColumn=n.getDataByValue(n.value),o.rules[d].field=this.selectedColumn.field,o.rules[d].type=this.selectedColumn.type,o.rules[d].label=this.selectedColumn.label;let l=Object(r.C)(e,".e-rule-filter"),a=l.nextElementSibling.querySelector("input.e-control");h=Object(r.M)(a,"dropdownlist").value.toString(),o.rules[d].operator=h;let m=l.nextElementSibling.nextElementSibling,g=m.querySelectorAll("input.e-control");g.length<1&&(g=m.querySelectorAll(".e-template"));for(let e=0;e<g.length;e++)g[e]||(g[e]=l.nextElementSibling.nextElementSibling.querySelector("div.e-control")),g[e]||(g[e]=l.nextElementSibling.nextElementSibling.querySelector(".e-template")),i={groupID:c,ruleID:s,value:o.rules[d].field,type:"field"},h.indexOf("null")>-1||h.indexOf("empty")>-1?o.rules[d].value=null:this.updateValues(g[e],o.rules[d]);this.isImportRules||this.trigger("change",i),this.allowValidation&&o.rules[d].field&&e.parentElement.className.indexOf("e-tooltip")>-1&&Object(r.M)(e.parentElement,"tooltip").destroy(),this.filterRules(p,this.getValidRules(this.rule),"field")}else if(Object(r.C)(e,".e-rule-operator")){let t;n=Object(r.M)(e,"dropdownlist"),o.rules[d].operator=n.value.toString(),t=u.querySelectorAll(".e-rule-value input.e-control"),i={groupID:c,ruleID:s,value:n.value,type:"operator"},this.allowValidation&&o.rules[d].operator&&e.parentElement.className.indexOf("e-tooltip")>-1&&Object(r.M)(e.parentElement,"tooltip").destroy(),t.length>1&&!(t[0].className.indexOf("e-template")>-1)&&(o.rules[d].value=[]);for(let e=0;e<t.length;e++)o.rules[d].operator.indexOf("null")>-1||o.rules[d].operator.indexOf("empty")>-1?o.rules[d].value=null:t[e].classList.contains("e-template")||this.updateValues(t[e],o.rules[d]);this.isImportRules||this.trigger("change",i),this.filterRules(p,this.getValidRules(this.rule),"operator")}else Object(r.C)(e,".e-rule-value")&&(this.ruleValueUpdate(e,t,o,d,a,u,l),this.filterRules(p,this.getValidRules(this.rule),"value"))}filterRules(e,t,l){JSON.stringify({condition:e.condition,not:e.not,rule:e.rules})!==JSON.stringify({condition:t.condition,not:t.not,rule:t.rules})&&(this.isImportRules||this.trigger("ruleChange",{previousRule:e,rule:t,type:l}))}ruleValueUpdate(e,t,l,n,i,s,o){let u,d,c=["in","between","notin","notbetween"];if(l.rules[n].operator&&(d=l.rules[n].operator.toString().toLowerCase()),null!==t){if(e.className.indexOf("e-multiselect")>-1&&"number"===l.rules[n].type&&!(e.className.indexOf("e-template")>-1)){let e=[],l=t;for(let t=0,n=l.length;t<n;t++)"string"==typeof l[t]&&e.push(parseFloat(l[t]));e.length&&(t=e)}if(e.classList.contains("e-blazor-template")||e.className.indexOf("e-template")>-1)l.rules[n].value=t,u={groupID:i.id,ruleID:s.id,value:l.rules[n].value,type:"value"},this.isImportRules||this.trigger("change",u);else if(e.className.indexOf("e-spin")>-1||e.className.indexOf("e-numeric")>-1)c.indexOf(d)>-1?l.rules[n].value[o]=t:l.rules[n].value=t;else if(e.className.indexOf("e-radio")>-1)l.rules[n].value=t;else if(e.className.indexOf("e-multiselect")>-1)l.rules[n].value=t;else if(e.className.indexOf("e-textbox")>-1)l.rules[n].value="in"===d||"notin"===d?this.processValueString(t,l.rules[n].type):t;else if(e.className.indexOf("e-datepicker")>-1){let e=Object(r.Q)(s.querySelector(".e-rule-filter input"),a.d),i=this.getFormat(this.getColumn(e.value).format);i.type&&(c.indexOf(d)>-1?("string"==typeof l.rules[n].value&&(l.rules[n].value=[]),l.rules[n].value[o]=this.intl.formatDate(t,i)):l.rules[n].value=this.intl.formatDate(t,i))}this.validatValue(l,s,n)}else e.className.indexOf("e-datepicker")>-1&&c.indexOf(d)>-1?("string"==typeof l.rules[n].value&&(l.rules[n].value=[]),l.rules[n].value[o]=t):l.rules[n].value=t}validatValue(e,t,l){Object(r.X)(l)||(e=e.rules[l]);let n="object"==typeof e.value;if(this.allowValidation&&(Object(r.X)(l)||(n?e.value.length>0:e.value))){let e=t.querySelectorAll(".e-rule-value .e-control");e.length>0&&(e[0].className.indexOf("e-tooltip")>-1?Object(r.M)(e[0],"tooltip").destroy():e[0].parentElement.className.indexOf("e-tooltip")>-1&&Object(r.M)(e[0].parentElement,"tooltip").destroy(),e[1]&&e[1].parentElement.className.indexOf("e-tooltip")>-1&&Object(r.M)(e[1].parentElement,"tooltip").destroy())}}getFormat(e){let t;return e?"string"==typeof e?(t={type:"dateTime",format:e},"short"===e&&(t.skeleton=e)):t={type:"dateTime",skeleton:e.skeleton}:t={type:"dateTime",skeleton:"yMd"},t}findGroupByIdx(e,t,l){let n=t.rules,i=[];if(!l){for(let e=0,l=n.length;e<l;e++)(t=n[e]).rules&&i.push(t);return i[e]}return t}destroy(){let e,t,l,n;if(this.element){for(super.destroy(),e=this.element.querySelectorAll(".e-addrulegroup"),l=e.length,t=0;t<l;t++)Object(r.M)(e[t],"dropdown-btn").destroy(),Object(r.I)(e[t]);for(n=this.element.querySelectorAll(".e-rule-filter .e-control.e-tooltip"),t=0;t<n.length;t++)Object(r.M)(n[t],"tooltip").destroy();for(e=this.element.querySelectorAll(".e-rule-filter .e-control:not(.e-tooltip)"),l=e.length,t=0;t<l;t++)Object(r.M)(e[t],"dropdownlist").destroy(),Object(r.I)(e[t]);for(n=this.element.querySelectorAll(".e-rule-operator .e-control.e-tooltip"),t=0;t<n.length;t++)Object(r.M)(n[t],"tooltip").destroy();for(e=this.element.querySelectorAll(".e-rule-operator .e-control:not(.e-tooltip)"),l=e.length,t=0;t<l;t++)Object(r.M)(e[t],"dropdownlist").destroy(),Object(r.I)(e[t]);for(n=this.element.querySelectorAll(".e-rule-value .e-control.e-tooltip"),t=0;t<n.length;t++)Object(r.M)(n[t],"tooltip").destroy();this.isImportRules=!1,this.unWireEvents(),this.levelColl[this.element.id+"_group0"]=[0],this.element.innerHTML="",this.portals&&this.portals.length&&this.clearQBTemplate(),Object(r.A)(this.element,[],["e-rtl","e-responsive","e-device"])}}addRules(e,t){t=this.element.id+"_"+t,this.isPublic=!0;for(let l=0,n=e.length;l<n;l++)this.addRuleElement(document.getElementById(t),e[l]);this.isPublic=!1}addGroups(e,t){t=this.element.id+"_"+t;let l=document.getElementById(t),n=this.getParentGroup(l);if(e.length){this.isPublic=!0;for(let t=0,n=e.length;t<n;t++)this.updatedRule={condition:e[t].condition,not:e[t].not},this.importRules(e[t],l);this.isPublic=!1}else{let e="and",t=!1;this.updatedRule&&(e=this.updatedRule.condition,t=this.updatedRule.not),n.rules.push(this.enableNotCondition?{condition:e,not:t,rules:[]}:{condition:e,rules:[]})}let i=l.querySelector(".e-btngroup-and"),r=l.querySelector(".e-btngroup-or");i.disabled&&(i.removeAttribute("disabled"),i.checked=!0,r.removeAttribute("disabled"))}initWrapper(){if(this.isInitialLoad=!0,this.cssClass&&Object(r.v)([this.element],this.cssClass),this.enableRtl&&Object(r.v)([this.element],"e-rtl"),this.width&&(this.element.style.width=this.width),this.height&&(this.element.style.height=this.height),this.rule.rules.length?this.isImportRules=!0:this.addGroupElement(!1,this.element),r.d.isDevice||"Vertical"===this.displayMode?(r.d.isDevice&&(this.element.style.width="100%",this.element.classList.add("e-device")),Object(r.ib)(this.element.querySelectorAll(".e-rule-container"),"e-horizontal-mode"),Object(r.v)(this.element.querySelectorAll(".e-rule-container"),"e-vertical-mode"),this.displayMode="Vertical"):this.displayMode="Horizontal",this.summaryView)this.isImportRules?this.renderSummary():this.renderSummaryCollapse();else{if(this.columns.length&&this.isImportRules){this.addGroupElement(!1,this.element,this.rule.condition);let e=Object(r.K)({},this.rule,{},!0);this.isRefreshed=!0,this.setGroupRules(e),this.isRefreshed=!1}else this.columns.length&&this.addRuleElement(this.element.querySelector(".e-group-container"),{});this.notGroupRtl(),this.readonly&&this.enableReadonly();let e,t=this.element.querySelectorAll("label.e-btn");for(let l=0;l<t.length;l++)e=t.item(l),Object(r.kb)(e,{selector:".e-btn"})}}renderSummary(){let e=this.createElement("div",{attrs:{class:"e-summary-content",id:this.element.id+"_summary_content"}}),t=this.createElement("textarea",{attrs:{class:"e-summary-text",readonly:"true"},styles:"max-height:500px"}),l=this.createElement("button",{attrs:{class:"e-edit-rule e-css e-btn e-small e-flat e-primary"}}),n=this.createElement("div",{attrs:{class:"e-summary-btndiv"}});e.appendChild(t),t.textContent=this.getSqlFromRules(this.rule),l.textContent=this.l10n.getConstant("Edit"),n.appendChild(l),e.appendChild(n),this.element.appendChild(e)}renderSummaryCollapse(){let e=this.createElement("div",{attrs:{class:"e-collapse-rule e-icons",title:this.l10n.getConstant("SummaryViewTitle")}});this.element.querySelector(".e-group-header").appendChild(e)}columnSort(){"descending"===this.sortDirection.toLowerCase()?this.columns=new o.a(this.columns).executeLocal((new o.g).sortByDesc("field")):"ascending"===this.sortDirection.toLowerCase()&&(this.columns=new o.a(this.columns).executeLocal((new o.g).sortBy("field")))}onChangeNotGroup(){if(this.element.innerHTML="",this.groupIdCounter=0,this.enableNotCondition){if(this.enableNotCondition){let e=this.createElement("button",{attrs:{type:"button",class:"e-qb-toggle"}});this.groupElem.querySelector(".e-btn-group").insertBefore(e,this.groupElem.querySelector(".e-btngroup-and"))}}else this.groupElem.querySelector(".e-qb-toggle").remove();this.rule=this.checkNotGroup(this.rule),this.initWrapper()}notGroupRtl(){this.enableRtl?Object(r.v)(this.element.querySelectorAll(".e-btn-group"),"e-rtl"):Object(r.ib)(this.element.querySelectorAll(".e-btn-group"),"e-rtl")}checkNotGroup(e){let t;if(e.rules)for(let l=0;l<e.rules.length;l++)t=e.rules[l],t=this.checkNotGroup(t),e.rules[l]=t;return Object(r.X)(e.not)?this.enableNotCondition&&!Object(r.X)(e.condition)&&(e.not=!1):(this.enableNotCondition&&(e.not=!1),delete e.not),e}onPropertyChanged(e,t){let l=Object.keys(e);for(let n of l)switch(n){case"summaryView":let l=this.element.querySelector(".e-group-container"),n=this.element.querySelector(".e-summary-content");e.summaryView?(l.style.display="none",this.element.querySelectorAll(".e-summary-content").length<1?(this.renderSummary(),n=this.element.querySelector(".e-summary-content")):this.element.querySelector(".e-summary-text").textContent=this.getSqlFromRules(this.rule),n.style.display="block"):(l.querySelectorAll(".e-collapse-rule").length>-1&&this.renderSummaryCollapse(),l.style.display="block",n.style.display="none");break;case"displayMode":this.refresh();break;case"showButtons":e.showButtons.ruleDelete?Object(r.ib)(this.element.querySelectorAll(".e-rule-delete"),"e-button-hide"):Object(r.v)(this.element.querySelectorAll(".e-rule-delete"),"e-button-hide"),e.showButtons.groupDelete?Object(r.ib)(this.element.querySelectorAll(".e-deletegroup"),"e-button-hide"):Object(r.v)(this.element.querySelectorAll(".e-deletegroup"),"e-button-hide");break;case"cssClass":t.cssClass&&Object(r.ib)([this.element],t.cssClass.split(" ")),e.cssClass&&Object(r.v)([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?(Object(r.v)([this.element],"e-rtl"),this.notGroupRtl()):(Object(r.ib)([this.element],"e-rtl"),this.notGroupRtl());break;case"enablePersistence":this.enablePersistence=e.enablePersistence;break;case"dataSource":this.dataSource=e.dataSource,this.refresh();break;case"columns":if(Object(r.W)()){let t=Object.keys(e.columns).toString(),l=e.columns[t].values;for(;!this.target.classList.contains("e-blazor-template");)this.target=this.target.parentElement;this.updateRules(this.target,l)}else this.columns=e.columns;this.columnSort();break;case"sortDirection":this.sortDirection=e.sortDirection,this.columnSort();break;case"maxGroupCount":this.maxGroupCount=e.maxGroupCount;break;case"height":this.height=e.height,this.element.style.height=this.height;break;case"rule":this.rule=e.rule,e.rule=this.getRuleCollection(this.rule,!1);break;case"width":this.width=e.width,this.element.style.width=this.width;break;case"locale":this.locale=e.locale,this.intl=new r.n(this.locale),this.isLocale=!0,this.refresh(),this.isLocale=!1;break;case"enableNotCondition":this.onChangeNotGroup();break;case"readonly":this.isReadonly=e.readonly,this.enableReadonly()}}preRender(){this.element.id=this.element.id||Object(r.U)("ej2-querybuilder"),this.defaultLocale={StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",Between:"Between",NotBetween:"Not Between",In:"In",NotIn:"Not In",Remove:"REMOVE",SelectField:"Select a field",SelectOperator:"Select operator",DeleteRule:"Remove this condition",DeleteGroup:"Delete group",AddGroup:"Add Group",AddCondition:"Add Condition",Edit:"EDIT",ValidationMessage:"This field is required",SummaryViewTitle:"Summary View",OtherFields:"Other Fields",AND:"AND",OR:"OR",NOT:"NOT",SelectValue:"Enter Value",IsEmpty:"Is Empty",IsNotEmpty:"Is Not Empty",IsNull:"Is Null",IsNotNull:"Is Not Null",True:"true",False:"false"},this.l10n=new r.p("querybuilder",this.defaultLocale,this.locale),this.intl=new r.n(this.locale),this.groupIdCounter=0,this.ruleIdCounter=0,this.btnGroupId=0,this.isImportRules=!1,this.parser=[],this.customOperators={stringOperator:[{value:"startswith",key:this.l10n.getConstant("StartsWith")},{value:"endswith",key:this.l10n.getConstant("EndsWith")},{value:"contains",key:this.l10n.getConstant("Contains")},{value:"equal",key:this.l10n.getConstant("Equal")},{value:"notequal",key:this.l10n.getConstant("NotEqual")},{value:"in",key:this.l10n.getConstant("In")},{value:"notin",key:this.l10n.getConstant("NotIn")},{value:"isempty",key:this.l10n.getConstant("IsEmpty")},{value:"isnotempty",key:this.l10n.getConstant("IsNotEmpty")}],dateOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"greaterthan",key:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",key:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",key:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",key:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",key:this.l10n.getConstant("NotEqual")}],booleanOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"notequal",key:this.l10n.getConstant("NotEqual")}],numberOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"greaterthanorequal",key:this.l10n.getConstant("GreaterThanOrEqual")},{value:"greaterthan",key:this.l10n.getConstant("GreaterThan")},{value:"between",key:this.l10n.getConstant("Between")},{value:"lessthan",key:this.l10n.getConstant("LessThan")},{value:"notbetween",key:this.l10n.getConstant("NotBetween")},{value:"lessthanorequal",key:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",key:this.l10n.getConstant("NotEqual")},{value:"in",key:this.l10n.getConstant("In")},{value:"notin",key:this.l10n.getConstant("NotIn")}]},this.operators={equal:"=",notequal:"!=",greaterthan:">",greaterthanorequal:">=",lessthan:"<",in:"IN",notin:"NOT IN",lessthanorequal:"<=",startswith:"LIKE",endswith:"LIKE",between:"BETWEEN",notbetween:"NOT BETWEEN",contains:"LIKE",isnull:"IS NULL",isnotnull:"IS NOT NULL",isempty:"IS EMPTY",isnotempty:"IS NOT EMPTY",notstartswith:"NOT LIKE",notendswith:"NOT LIKE",notcontains:"NOT LIKE"},this.fields||(this.fields={text:"label",value:"field"})}render(){if(this.levelColl={},this.items=[{text:this.l10n.getConstant("AddGroup"),iconCss:"e-icons e-add-icon e-addgroup"},{text:this.l10n.getConstant("AddCondition"),iconCss:"e-icons e-add-icon e-addrule"}],this.ruleElem=this.ruleTemplate(),this.groupElem=this.groupTemplate(),!Object(r.W)()){let e=[{value:"isnull",key:this.l10n.getConstant("IsNull")},{value:"isnotnull",key:this.l10n.getConstant("IsNotNull")}],t=[{value:"isnull",key:this.l10n.getConstant("IsNull")},{value:"isnotnull",key:this.l10n.getConstant("IsNotNull")}];this.customOperators.stringOperator=this.customOperators.stringOperator.concat(e),this.customOperators.numberOperator=this.customOperators.numberOperator.concat(t)}this.dataSource instanceof o.a?(this.dataManager=this.dataSource,this.executeDataManager((new o.g).take(1))):(this.dataManager=new o.a(this.dataSource),this.dataColl=this.dataManager.executeLocal(new o.g),this.initControl()),this.renderComplete()}templateParser(e){if(e)try{if(document.querySelectorAll(e).length)return Object(r.E)(document.querySelector(e).innerHTML.trim())}catch(t){return Object(r.E)(e)}}executeDataManager(e){let t=this.dataManager.executeQuery(e),l=new o.c;t.then(e=>{this.dataColl=e.actual&&e.actual.result?e.actual.result:e.result,this.initControl()}).catch(e=>{l.reject(e)})}initControl(){this.initialize(),this.initWrapper(),this.wireEvents()}wireEvents(){let e=this.getWrapper();r.l.add(e,"click",this.clickEventHandler,this),r.l.add(e,"focusout",this.focusEventHandler,this),r.l.add(e,"focusin",this.focusEventHandler,this),r.l.add(this.element,"keydown",this.keyBoardHandler,this)}unWireEvents(){let e=this.getWrapper();r.l.remove(e,"click",this.clickEventHandler),r.l.remove(e,"focusout",this.focusEventHandler),r.l.remove(e,"focusin",this.focusEventHandler),r.l.remove(this.element,"keydown",this.keyBoardHandler)}getParentGroup(e,t){let l=e instanceof Element?this.levelColl[e.id]:this.levelColl[e],n=t?l.length-1:l.length,i=this.rule;for(let r=0;r<n;r++)i=this.findGroupByIdx(l[r],i,0===r);return i}deleteGroup(e){let t={groupID:e.id.replace(this.element.id+"_",""),cancel:!1,type:"deleteGroup"};this.isImportRules?this.deleteGroupSuccessCallBack(t,e):this.trigger("beforeChange",t,t=>{this.deleteGroupSuccessCallBack(t,e)})}deleteGroupSuccessCallBack(e,t){if(!e.cancel){this.actionButton&&Object(r.M)(this.actionButton,"tooltip").destroy();let l,n,i=t,s=this.getParentGroup(i,!0),a=0,o=this.getValidRules(this.rule),u=i.nextElementSibling,d=i.previousElementSibling,c=i.querySelectorAll(".e-group-container"),p=i.querySelectorAll(".e-tooltip");for(n=p.length,l=0;l<n;l++)Object(r.M)(p[l],"tooltip").destroy();for(l=0,n=c.length;l<n;l++)delete this.levelColl[c[l].id];for(;null!==i.previousElementSibling;)i=i.previousElementSibling,a++;u&&u.className.indexOf("e-separate-rule")>-1&&(Object(r.ib)([u],"e-separate-rule"),Object(r.v)([u],"e-joined-rule"),d&&d.className.indexOf("e-rule-container")>-1&&Object(r.v)([d],"e-prev-joined-rule"));let h=i.parentElement.parentElement.parentElement,m=[];if(this.isReact||this.isAngular){let e=s.rules[a],l=t.querySelectorAll(".e-rule-container");if(e&&e.rules)for(let t=0;t<e.rules.length;t++){let n=this.getColumn(e.rules[t].field);n&&(n.ruleTemplate||this.isPlatformTemplate(n))&&m.push(l[t].id)}}Object(r.I)(t),m.length&&this.clearQBTemplate(m),s.rules.splice(a,1),delete this.levelColl[e.groupID],this.refreshLevelColl(),this.disableRuleCondition(h,s),this.isImportRules||this.trigger("change",e),this.filterRules(o,this.getValidRules(this.rule),"deleteGroup")}}isPlatformTemplate(e){let t=!1;return t=e.template&&("string"==typeof e.template||void 0===e.template.create),t}deleteRule(e){let t,l;l=Object(r.C)(e,".e-group-container").id.replace(this.element.id+"_",""),t=Object(r.C)(e,".e-rule-container").id.replace(this.element.id+"_","");let n={groupID:l,ruleID:t,cancel:!1,type:"deleteRule"};this.isImportRules?this.deleteRuleSuccessCallBack(n,e):this.trigger("beforeChange",n,t=>{this.deleteRuleSuccessCallBack(t,e)})}deleteRuleSuccessCallBack(e,t){if(!e.cancel){this.actionButton&&this.actionButton.className.indexOf("e-tooltip")>-1&&Object(r.M)(this.actionButton,"tooltip").destroy();let l,n,i=Object(r.C)(t,".e-group-container"),s=this.getParentGroup(i),a=Object(r.C)(t,".e-rule-container"),o=this.getValidRules(this.rule),u=a,d=a.nextElementSibling,c=a.previousElementSibling,p=0,h=a.querySelectorAll(".e-tooltip"),m=h.length;for(l=0;l<m;l++)Object(r.M)(h[l],"tooltip").destroy();for(;null!==a.previousElementSibling;)a=a.previousElementSibling,p++;n=this.getColumn(s.rules[p].field),n&&n.template&&u.querySelector(".e-template")&&this.templateDestroy(n,u.querySelector(".e-template").id),(!c||c.className.indexOf("e-rule-container")<0)&&d&&Object(r.ib)([d],"e-joined-rule"),(!d||d.className.indexOf("e-rule-container")<0)&&c&&Object(r.ib)([c],"e-prev-joined-rule"),Object(r.I)(u),n&&n.ruleTemplate&&this.clearQBTemplate([a.id]),n&&this.isPlatformTemplate(n)&&this.clearQBTemplate([u.id]),s.rules.splice(p,1),s.rules[0]&&s.rules[0].rules||this.disableRuleCondition(i,s),this.isImportRules||this.trigger("change",e),this.filterRules(o,this.getValidRules(this.rule),"deleteRule")}}setGroupRules(e){this.reset(),this.groupIdCounter=1,this.ruleIdCounter=0,this.isImportRules=!0,this.rule=e,e=this.getRuleCollection(this.rule,!1),this.importRules(this.rule,this.element.querySelector(".e-group-container"),!0),this.isImportRules=!1}keyBoardHandler(e){!this.readonly||38!==e.keyCode&&40!==e.keyCode&&13!==e.keyCode||e.preventDefault()}clearQBTemplate(e){(this.isReact||this.isAngular)&&this.clearTemplate(e)}disableRuleCondition(e,t){if(this.readonly)return;let l=e.querySelector(".e-rule-list").childElementCount,n=e.querySelector(".e-btngroup-and"),i=e.querySelector(".e-btngroup-or");l>1?(n.disabled=!1,i.disabled=!1,(i.nextElementSibling.classList.contains("e-btn-disable")||n.nextElementSibling.classList.contains("e-btn-disable"))&&(i.nextElementSibling.classList.remove("e-btn-disable"),n.nextElementSibling.classList.remove("e-btn-disable")),t&&"or"===t.condition?i.checked=!0:n.checked=!0):(n.checked=!1,n.disabled=!0,i.checked=!1,i.disabled=!0,t&&(i.nextElementSibling.classList.add("e-btn-disable"),n.nextElementSibling.classList.add("e-btn-disable")))}getValidRules(e){e||(e=this.getRules());let t=e.condition,l=e.not,n=Object(r.K)([],e.rules,[],!0);return this.getRuleCollection({condition:t,rules:n,not:l},!0)}getRuleCollection(e,t){let l;if(e.rules&&e.rules.length&&(Object.keys(e.rules[0]).length>6||t)){let n=e.rules.length;for(let i=0;i<n;i++)l=e.rules[i],l=this.getRuleCollection(l,t),e.rules[i]=l,Object.keys(l).length<1&&t&&(e.rules.splice(i,1),i--,n--)}if(e.condition||""===e.condition)e=this.enableNotCondition?{condition:e.condition,rules:e.rules,not:e.not}:{condition:e.condition,rules:e.rules};else if(e.operator&&(e.operator.toString().indexOf("null")>-1||e.operator.toString().indexOf("empty")>-1)&&(e.value=null),this.isRefreshed&&this.enablePersistence||""!==this.rule.field&&""!==e.operator&&""!==e.value&&void 0!==e.value){let t=e.custom;e={label:e.label,field:e.field,operator:e.operator,type:e.type,value:e.value},t&&(e.custom=t)}else e={};return e}setRules(e){let t=Object(r.K)({},e,{},!0);this.setGroupRules(t)}getRules(){return this.enableNotCondition?{condition:this.rule.condition,rules:this.rule.rules,not:this.rule.not}:{condition:this.rule.condition,rules:this.rule.rules}}getRule(e){let t,l,n=0;e instanceof HTMLElement?t=Object(r.C)(e,".e-rule-container"):(l=this.element.id+"_"+e,t=document.getElementById(l));let i=Object(r.C)(t,".e-group-container"),s=this.getParentGroup(i);for(;null!==t.previousElementSibling;)t=t.previousElementSibling,n++;return s.rules[n]}getGroup(e){e instanceof Element&&e.className.indexOf("e-group-container")<1&&(e=Object(r.C)(e,".e-group-container"));let t=e instanceof Element?e.id:this.element.id+"_"+e,l=this.getParentGroup(t);return this.enableNotCondition?{rules:l.rules,condition:l.condition,not:l.not}:{rules:l.rules,condition:l.condition}}deleteGroups(e){let t,l,n=e.length;for(t=0;t<n;t++)l=this.element.id+"_"+e[t],this.deleteGroup(document.getElementById(l))}getFilteredRecords(){let e,t=this.getPredicate(this.getValidRules(this.rule));if(e=Object(r.X)(t)?new o.g:(new o.g).where(t),Object(r.W)()){let t=new o.h,l=new o.a({url:"",adaptor:new o.h}),n=t.processQuery(l,e),i=JSON.parse(n.data);return Object.keys(i).length?i:null}return this.dataManager.executeQuery(e)}deleteRules(e){let t,l,n=e.length;for(t=0;t<n;t++)l=this.element.id+"_"+e[t],this.deleteRule(document.getElementById(l))}getDataManagerQuery(e){let t,l=this.getPredicate(e),n=[];for(let i=0,r=Object.keys(this.columns);i<r.length;i++)n.push(this.columns[i].field);return t=e.rules.length?(new o.g).select(n).where(l):(new o.g).select(n),t}getPredicate(e){let t,l,n,i,s=e.rules,a=!1,u=["notcontains","notstartswith","notendswith"];if(!s)return t;for(let d=0,c=s.length;d<c;d++)if(a=!1,Object.keys(s[d]).indexOf("rules")>-1&&s[d].rules)l=this.getPredicate(s[d]),l&&(t=t?"and"===e.condition?t.and(l):t.or(l):l);else if(s[d].operator.length){let l=s[d].operator.toLowerCase(),c=!1,p=["equal","notequal","greaterthan","lessthanorequal"];if("string"===s[d].type&&(a=!this.matchCase),"date"===s[d].type&&p.indexOf(l)>-1&&(a=!0),i=this.getColumn(s[d].field),l.indexOf("null")>-1||l.indexOf("empty")>-1)s[d].value=null;else if("date"!==s[d].type||s[d].value instanceof Array)n=s[d].value;else{let e=this.getFormat(i.format);Object(r.X)(s[d].value)?n=null:(n=this.getDate(s[d].value,e),p.indexOf(l)>-1&&(c=!0))}if(0===d)c||(l.indexOf("in")>-1||l.indexOf("between")>-1||l.indexOf("null")>-1||l.indexOf("empty")>-1)&&l.indexOf("contains")<0?t=c?this.datePredicate(s[d],n):this.arrayPredicate(s[d]):""!==n&&u.indexOf(l)<0&&(t=new o.f(s[d].field,s[d].operator,n,a));else{if(u.indexOf(l)>-1)continue;if(c||(l.indexOf("in")>-1||l.indexOf("between")>-1||l.indexOf("null")>-1||l.indexOf("empty")>-1)&&l.indexOf("contains")<0)t=c?this.datePredicate(s[d],n,t,e.condition):this.arrayPredicate(s[d],t,e.condition);else if("and"===e.condition){let e=n;t&&""!==e?t=t.and(s[d].field,s[d].operator,n,a):""!==e&&(t=new o.f(s[d].field,s[d].operator,n,a))}else{let e=n;t&&""!==e?t=t.or(s[d].field,s[d].operator,n,a):""!==e&&(t=new o.f(s[d].field,s[d].operator,n,a))}}}return t}getLocale(){let e=Object(r.W)()?".dates.days.short":".dates.calendars.gregorian.days.format.short",t=this.locale,l=Object(r.W)()?"":"main.";return Object(r.V)(l+""+this.locale+e,r.B)||(t="en"),t}getColumn(e){this.separator.length>0&&(e=e.split(this.separator)[0]);let t,l=this.columns;for(let n=0,i=l.length;n<i;n++)l[n].field===e&&(t=l[n]);return t}getOperators(e){return this.getColumn(e).operators}datePredicate(e,t,l,n){let i,r=new Date(t.getTime()),s=new Date(r.setDate(r.getDate()+1));switch(e.operator){case"equal":i=new o.f(e.field,"greaterthanorequal",t),i=i.and(e.field,"lessthan",s);break;case"notequal":i=new o.f(e.field,"lessthan",t),i=i.or(e.field,"greaterthanorequal",s);break;case"greaterthan":i=new o.f(e.field,"greaterthanorequal",s);break;case"lessthanorequal":i=new o.f(e.field,"lessthan",s)}return i&&(l?"and"===n?l=l.and(i):"or"===n&&(l=l.or(i)):l=i),l}arrayPredicate(e,t,l){let n,i,r=e.value,s=e.operator.toString(),a=e.value,u=this.getColumn(e.field);if(n=this.getFormat(u.format),s.indexOf("null")>-1||s.indexOf("empty")>-1)switch(s){case"isnull":i=new o.f(e.field,"isnull",a);break;case"isnotnull":i=new o.f(e.field,"notnull",a);break;case"isempty":i=new o.f(e.field,"equal","");break;case"isnotempty":i=new o.f(e.field,"notequal","")}if(!(s.indexOf("null")>-1||s.indexOf("empty")>-1))for(let d=0,c=r.length;d<c;d++)if(""!==r[d])if(0===d){let t="greaterthanorequal",l="lessthan";switch(s){case"between":i=new o.f(e.field,t,"date"===u.type?r[d]?this.getDate(r[d],n):null:r[d]);break;case"notbetween":i=new o.f(e.field,l,"date"===u.type?r[d]?this.getDate(r[d],n):null:r[d]);break;case"in":i=new o.f(e.field,"equal",r[d]);break;case"notin":i=new o.f(e.field,"notequal",r[d])}}else{let t="greaterthan";switch(e.operator){case"between":if("date"===u.type)if(r[d]){let t=this.getDate(r[d],n),l=new Date(t.setDate(t.getDate()+1));i=i.and(e.field,"lessthan",l)}else i=i.and(e.field,"lessthan",r[d]);else i=i.and(e.field,"lessthanorequal",r[d]);break;case"notbetween":i="date"===u.type?i.or(e.field,t,r[d]?this.getDate(r[d],n):r[d]):i.or(e.field,"greaterthan",r[d]);break;case"in":i=i.or(e.field,"equal",r[d]);break;case"notin":i=i.and(e.field,"notequal",r[d])}}return i&&(t?"and"===l?t=t.and(i):"or"===l&&(t=t.or(i)):t=i),t}getDate(e,t){let l=this.intl.parseDate(e,t);return e.indexOf(":")>-1&&(e.indexOf("/")<0||e.indexOf(",")<0)&&l.setDate((new Date).getDate()),l}importRules(e,t,l){if(l){if(e.rules.length>1){let l=t.querySelector(".e-btngroup-or"),n=t.querySelector(".e-btngroup-and");l.disabled=!1,n.disabled=!1,"or"===e.condition?l.checked=!0:n.checked=!0}else this.disableRuleCondition(t);if(this.enableNotCondition){let l=t.querySelector(".e-qb-toggle");e.not?Object(r.v)([l],"e-active-toggle"):Object(r.ib)([l],"e-active-toggle")}}else t=this.renderGroup(e.condition,t);let n=e.rules;if(!Object(r.X)(n))for(let i=0,s=n.length;i<s;i++){let e=Object.keys(n[i]);!Object(r.X)(n[i].rules)&&e.indexOf("rules")>-1?(t=this.renderGroup(n[i].condition,t),t=this.importRules(n[i],t,!0)):this.renderRule(n[i],t)}return(t=Object(r.C)(t,".e-rule-list"))&&(t=Object(r.C)(t,".e-group-container")),t}renderGroup(e,t){this.addGroupElement(!0,t,e);let l=t.querySelectorAll(".e-group-container");return l[l.length-1]}renderRule(e,t){t.className.indexOf("e-group-container")>-1?this.addRuleElement(t,e):this.addRuleElement(t.querySelector(".e-group-container"),e)}enableReadonly(){let e=this.element.querySelectorAll(".e-dropdownlist, .e-numerictextbox, .e-textbox, .e-datepicker, .e-multiselect .e-lib, .e-radio");for(let o=0;o<e.length;o++)e[o].classList.contains("e-dropdownlist")?Object(r.Q)(e[o],a.d).readonly=this.isReadonly:e[o].classList.contains("e-numerictextbox")?Object(r.Q)(e[o],u.e).readonly=this.isReadonly:e[o].classList.contains("e-textbox")?Object(r.Q)(e[o],u.g).readonly=this.isReadonly:e[o].classList.contains("e-datepicker")?Object(r.Q)(e[o],d.b).readonly=this.isReadonly:e[o].classList.contains("e-multiselect")?Object(r.Q)(e[o],a.g).readonly=this.isReadonly:e[o].classList.contains("e-radio")&&(Object(r.Q)(e[o],s.d).checked||(e[o].parentElement.style.display=this.isReadonly?"none":"inherit"));let t=this.element.querySelectorAll(".e-deletegroup"),l=this.element.querySelectorAll(".e-addrulegroup"),n=this.element.querySelectorAll(".e-removerule");!this.isReadonly&&this.ruleElem.classList.contains("e-readonly")&&this.ruleElem.classList.remove("e-readonly");let i=[t,l,n];for(let r=0;r<i.length;r++)i[r].forEach(e=>{e.classList.contains("e-readonly")?e.classList.remove("e-readonly"):e.classList.add("e-readonly")});this.enableBtnGroup()}enableBtnGroup(){let e=this.element.querySelectorAll(".e-btngroup-and-lbl, .e-btngroup-or-lbl, .e-qb-toggle"),t=!1;e.forEach(e=>{!e.classList.contains("e-qb-toggle")||e.classList.contains("e-active-toggle")||e.classList.contains("e-readonly")?e.classList.contains("e-qb-toggle")&&e.classList.contains("e-not-readonly")?e.classList.remove("e-not-readonly"):e.classList.contains("e-qb-toggle")&&e.classList.contains("e-readonly")?e.classList.remove("e-readonly"):e.classList.contains("e-active-toggle")?(e.classList.add("e-not-readonly"),t=!0):e.previousElementSibling.checked||e.classList.contains("e-readonly")?(e.classList.remove("e-readonly"),t?e.classList.add("AND"===e.textContent?"e-readonly-and":"e-readonly-or"):("AND"===e.textContent&&this.isReadonly?(e.classList.remove("e-not"),e.classList.add("e-readonly-and")):(this.enableNotCondition&&e.classList.add("e-not"),e.classList.remove("e-readonly-and")),"OR"===e.textContent&&this.isReadonly?e.classList.add("e-readonly-or-not"):e.classList.remove("e-readonly-or-not"))):e.classList.contains("e-btn-disable")||e.classList.add("e-readonly"):(e.classList.add("e-readonly"),t=!1)})}getSqlString(e,t,l){let n=!1;l||""===l?l+="(":(l="",n=!0);let i=e.condition;e.not&&(l+=n?"NOT (":" NOT (");for(let r=0,s=e.rules.length;r<s;r++){if(e.rules[r].rules)l=this.getSqlString(e.rules[r],t,l);else{let n=e.rules[r],i="";if(n.value instanceof Array)if(n.operator.toString().indexOf("between")>-1)i+="date"===n.type?'"'+n.value[0]+'" AND "'+n.value[1]+'"':n.value[0]+" AND "+n.value[1];else if("string"==typeof n.value[0]&&null!==n.value){i+='("'+n.value[0]+'"';for(let e=1,t=n.value.length;e<t;e++)i+=',"'+n.value[e]+'"';i+=")"}else i+="("+n.value+")";else n.operator.toString().indexOf("startswith")>-1?i+=n.value?'("'+n.value+'%")':"("+n.value+")":n.operator.toString().indexOf("endswith")>-1?i+=n.value?'("%'+n.value+'")':"("+n.value+")":n.operator.toString().indexOf("contains")>-1?i+=n.value?'("%'+n.value+'%")':"("+n.value+")":i+="number"===n.type||"boolean"==typeof n.value||null===n.value?n.value:'"'+n.value+'"';n.operator.toString().indexOf("null")>-1||n.operator.toString().indexOf("empty")>-1?(t&&(n.field="`"+n.field+"`"),l+=n.field+" "+this.operators[n.operator]):(t&&(n.field="`"+n.field+"`"),l+=n.field+" "+this.operators[n.operator]+" "+i)}r!==s-1&&(l+=" "+i.toUpperCase()+" ")}return n||(l+=")"),e.not&&(l+=")"),l}setRulesFromSql(e){e=e.replace(/`/g,"");let t=this.getRulesFromSql(e);this.setRules({condition:t.condition,not:t.not,rules:t.rules})}getRulesFromSql(e){this.parser=[],this.sqlParser(e),this.rule={condition:"and",not:!1,rules:[]};let t=this.processParser(this.parser,this.rule,[0]);return this.enableNotCondition?{condition:t.condition,not:t.not,rules:t.rules}:{condition:t.condition,rules:t.rules}}getSqlFromRules(e,t){return e||(e=this.getValidRules()),e=this.getRuleCollection(e,!1),this.getSqlString(this.getValidRules(e),t).replace(/"/g,"'")}sqlParser(e){let t,l=0;do{t=e.slice(l),l+=this.parseSqlStrings(t)}while(""!==t);return this.parser}parseSqlStrings(e){let t,l,n,i=["=","!=","<=",">=","<",">"],r=["AND","OR","NOT"],s=["IN","NOT IN","LIKE","NOT LIKE","BETWEEN","NOT BETWEEN","IS NULL","IS NOT NULL","IS EMPTY","IS NOT EMPTY"];for(let o=0,u=i.length;o<u;o++)if(t=/^\w+$/.test(i[o])?"\\b":"",l=new RegExp("^("+i[o]+")"+t,"ig"),l.exec(e))return this.parser.push(["Operators",i[o].toLowerCase()]),i[o].length;let a=this.parser[this.parser.length-1];if(!a||a&&"Literal"!==a[0])for(let o=0,u=r.length;o<u;o++)if(t=/^\w+$/.test(r[o])?"\\b":"",l=new RegExp("^("+r[o]+")"+t,"ig"),l.exec(e))return this.parser.push(["Conditions",r[o].toLowerCase()]),r[o].length;for(let o=0,u=s.length;o<u;o++)if(t=/^\w+$/.test(s[o])?"\\b":"",l=new RegExp("^("+s[o]+")"+t,"ig"),l.exec(e))return this.parser.push(["SubOperators",s[o].toLowerCase()]),s[o].length;return/^\(/.exec(e)?(this.parser.push(["Left","("]),1):/^\)/.exec(e)?(this.parser.push(["Right",")"]),1):/^(true|false)/.exec(e)?(n=/^(true|false)/.exec(e)[0],this.parser.push(["String",n]),n.length):/^null/.exec(e)?(n=/^null/.exec(e)[0],this.parser.push(["String",null]),n.length):/^`?([a-z_][a-z0-9_.\[\]\(\)]{0,}(\:(number|float|string|date|boolean))?)`?/i.exec(e)?(n=/^`?([a-z_][a-z0-9_.\[\]\(\)]{0,}(\:(number|float|string|date|boolean))?)`?/i.exec(e)[1],this.parser.push(["Literal",n]),n.length):/^'((?:[^\\']+?|\\.|'')*)'(?!')/.exec(e)?(n=/^'((?:[^\\']+?|\\.|'')*)'(?!')/.exec(e)[0],this.parser.push(["String",n]),n.length):/^"([^\\"]*(?:\\.[^\\"]*)*)"/.exec(e)?(n=/^"([^\\"]*(?:\\.[^\\"]*)*)"/.exec(e)[0],this.parser.push(["DoubleString",n]),n.length):/^[0-9]+(\.[0-9]+)?/.exec(e)?(n=/^[0-9]+(\.[0-9]+)?/.exec(e)[0],this.parser.push(["Number",n]),n.length):/^-?[0-9]+(\.[0-9]+)?/.exec(e)?(n=/^-?[0-9]+(\.[0-9]+)?/.exec(e)[0],this.parser.push(["Number",n]),n.length):1}getOperator(e,t){if(e){if(0===e.indexOf("%")&&"%"===e[e.length-1])return"not like"===t?"notcontains":"contains";if(0!==e.indexOf("%")&&e.indexOf("%")===e.length-1)return"not like"===t?"notstartswith":"startswith";if(0===e.indexOf("%")&&e.indexOf("%")!==e.length-1)return"not like"===t?"notendswith":"endswith"}else{if("not like"===t)return"notequal";if("like"===t)return"equal"}return{"=":"equal","!=":"notequal","<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal",in:"in","not in":"notin",between:"between","not between":"notbetween","is empty":"isempty","is null":"isnull","is not null":"isnotnull","is not empty":"isnotempty"}[t]}getTypeFromColumn(e){let t=this.columns;for(let l=0;l<t.length;l++)if(t[l].field===e.field){e.type=t[l].type;break}return e.type}processParser(e,t,l){let n,i,r,s,a,o,u,d,c,p,h=[],m=[];for(let g=0,f=e.length;g<f;g++)if("Literal"===e[g][0]){if(r={label:e[g][1],field:e[g][1]},"SubOperators"===e[g+1][0]){if(e[g+1][1].indexOf("null")>-1||e[g+1][1].indexOf("empty")>-1)r.operator=this.getOperator(" ",e[g+1][1]),r.value=null,r.type=this.getTypeFromColumn(r);else{let t=e[g+3][1]?e[g+3][1].replace(/'/g,""):e[g+3][1];r.operator=this.getOperator(t,e[g+1][1])}for(p=e[g+1][1],g++,n=g+1,i=f,n=g+1;n<i;n++){if("Right"===e[n][0]){g=n;break}if(p.indexOf("null")>-1||p.indexOf("empty")>-1)break;if(p.indexOf("like")>-1&&"String"===e[n][0]){let t=e[n][1]?e[n][1].replace(/'/g,"").replace(/%/g,""):e[n][1];r.value=t,r.type="string"}else if(p.indexOf("between")>-1){if("Literal"===e[n][0]||"Left"===e[n][0])break;"Number"===e[n][0]?h.push(Number(e[n][1])):"String"===e[n][0]&&m.push(e[n][1].replace(/'/g,""))}else"Number"===e[n][0]?h.push(Number(e[n][1])):"String"===e[n][0]&&m.push(e[n][1].replace(/'/g,""));r.type=this.getTypeFromColumn(r)}p.indexOf("like")<0&&("Number"===e[n-1][0]?(r.value=h,r.type="number"):"String"===e[n-1][0]?(r.value=m,r.type="string"):p.indexOf("between")>-1&&"Conditions"===e[n-1][0]&&(r.value=h,r.type="number"),h=[],m=[],r.type=this.getTypeFromColumn(r))}else"Operators"===e[g+1][0]&&(r.operator=this.getOperator(e[g+2][1],e[g+1][1]),"Number"===e[g+2][0]?(r.type="number",r.value=Number(e[g+2][1])):(r.type="string",r.value=e[g+2][1]?e[g+2][1].replace(/'/g,""):e[g+2][1]),r.type=this.getTypeFromColumn(r));t.rules.push(r)}else{if("Left"===e[g][0]){if("Left"!==e[0][0]&&"not"===e[g-1][1])continue;for(this.parser=e.splice(g+1,f-(g+1)),s=this.enableNotCondition?{condition:"and",rules:[],not:!1}:{condition:"and",rules:[]},c=0,o=t.rules.length,a=0;a<o;a++)t.rules[a].rules&&c++;return l.push(c),t.rules.push(s),s=this.processParser(this.parser,s,l),t}if("Conditions"===e[g][0])"not"===e[g][1]?t.not=!0:t.condition=e[g][1];else if("Right"===e[g][0]){for(this.parser=e.splice(g+1,f-(g+1)),l.pop(),t=this.rule,d=l.length,u=0;u<d;u++)t=this.findGroupByIdx(l[u],t,0===u);return this.processParser(this.parser,t,l)}}return t}};return h([Object(r.k)()],e.prototype,"created",void 0),h([Object(r.k)()],e.prototype,"actionBegin",void 0),h([Object(r.k)()],e.prototype,"beforeChange",void 0),h([Object(r.k)()],e.prototype,"change",void 0),h([Object(r.k)()],e.prototype,"ruleChange",void 0),h([Object(r.s)({ruleDelete:!0,groupInsert:!0,groupDelete:!0})],e.prototype,"showButtons",void 0),h([Object(r.s)(!1)],e.prototype,"summaryView",void 0),h([Object(r.s)(!1)],e.prototype,"allowValidation",void 0),h([Object(r.s)([])],e.prototype,"columns",void 0),h([Object(r.s)("")],e.prototype,"cssClass",void 0),h([Object(r.s)([])],e.prototype,"dataSource",void 0),h([Object(r.s)("Horizontal")],e.prototype,"displayMode",void 0),h([Object(r.s)(!1)],e.prototype,"enablePersistence",void 0),h([Object(r.s)("Default")],e.prototype,"sortDirection",void 0),h([Object(r.s)(5)],e.prototype,"maxGroupCount",void 0),h([Object(r.s)("auto")],e.prototype,"height",void 0),h([Object(r.s)("auto")],e.prototype,"width",void 0),h([Object(r.s)(!1)],e.prototype,"matchCase",void 0),h([Object(r.s)(0)],e.prototype,"immediateModeDelay",void 0),h([Object(r.s)(!1)],e.prototype,"enableNotCondition",void 0),h([Object(r.s)(!1)],e.prototype,"readonly",void 0),h([Object(r.s)("")],e.prototype,"separator",void 0),h([Object(r.g)({condition:"and",rules:[]},m)],e.prototype,"rule",void 0),e=h([r.q],e),e})();var f=l("ofXK");const b=["ruleTemplate"];var y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let v=["category","field","format","label","operators","ruleTemplate","step","template","type","validation","value","values"],C=[],O=(()=>{class e extends i.b{constructor(e){super(),this.viewContainerRef=e,Object(i.g)("currentInstance",this,this.viewContainerRef),this.registerEvents(C),this.directivePropList=v}}return e.\u0275fac=function(t){return new(t||e)(n.Nb(n.O))},e.\u0275dir=n.Ib({type:e,selectors:[["e-column"]],contentQueries:function(e,t,l){var i;1&e&&n.Gb(l,b,!0),2&e&&n.xc(i=n.fc())&&(t.ruleTemplate=i.first)},inputs:{category:"category",field:"field",format:"format",label:"label",operators:"operators",ruleTemplate:"ruleTemplate",step:"step",template:"template",type:"type",validation:"validation",value:"value",values:"values"},features:[n.ub]}),function(e,t,l,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,l):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,l,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,l,s):i(t,l))||s);r>3&&s&&Object.defineProperty(t,l,s)}([Object(i.f)(),y("design:type",Object)],e.prototype,"ruleTemplate",void 0),e})(),E=(()=>{class e extends i.a{constructor(){super("columns")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Ib({type:e,selectors:[["e-columns"]],contentQueries:function(e,t,l){var i;1&e&&n.Gb(l,O,!1),2&e&&n.xc(i=n.fc())&&(t.children=i)},features:[n.ub]}),e})();var S=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const x=["actionBegin","beforeChange","change","created","ruleChange"],I=[""];let N=(()=>{let e=class extends g{constructor(e,t,l,n){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=l,this.injector=n,this.tags=["columns"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(x),this.addTwoWay.call(this,I),Object(i.g)("currentInstance",this,this.viewContainerRef),this.context=new i.c}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childColumns,this.context.ngAfterContentChecked(this)}};return e.\u0275fac=function(t){return new(t||e)(n.Nb(n.l),n.Nb(n.D),n.Nb(n.O),n.Nb(n.r))},e.\u0275cmp=n.Hb({type:e,selectors:[["ejs-querybuilder"]],contentQueries:function(e,t,l){var i;1&e&&n.Gb(l,E,!0),2&e&&n.xc(i=n.fc())&&(t.childColumns=i.first)},inputs:{allowValidation:"allowValidation",columns:"columns",cssClass:"cssClass",dataSource:"dataSource",displayMode:"displayMode",enableNotCondition:"enableNotCondition",enablePersistence:"enablePersistence",enableRtl:"enableRtl",height:"height",immediateModeDelay:"immediateModeDelay",locale:"locale",matchCase:"matchCase",maxGroupCount:"maxGroupCount",readonly:"readonly",rule:"rule",separator:"separator",showButtons:"showButtons",sortDirection:"sortDirection",summaryView:"summaryView",width:"width"},outputs:{actionBegin:"actionBegin",beforeChange:"beforeChange",change:"change",created:"created",ruleChange:"ruleChange"},features:[n.ub],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),e=function(e,t,l,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,l):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,l,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,l,s):i(t,l))||s);return r>3&&s&&Object.defineProperty(t,l,s),s}([Object(i.d)([i.c]),S("design:paramtypes",[n.l,n.D,n.O,n.r])],e),e})(),w=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},imports:[[f.b]]}),e})(),j=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},providers:[],imports:[[f.b,w],w]}),e})()},Vtjc:function(e,t,l){"use strict";l.d(t,"a",(function(){return i}));var n=l("1gpv");const i={BusinessHourList:n.f+"business_hours",BusinessHourDetail:n.f+"business_hours",AddBusinessHour:n.f+"business_hours",EditBusinessHour:n.f+"business_hours",DeleteBusinessHour:n.f+"business_hours",DeleteHoliday:n.f+"business_hours/holiday",BusinessWorkingDaysList:n.k+"/assets/mock.json/businessDays.json"}},bqpE:function(e,t,l){"use strict";l.d(t,"a",(function(){return i}));var n=l("1gpv");const i={RoleList:n.f+"roles",MemberList:n.f+"roles/",RoleDetail:n.f+"roles/",AddMember:n.f+"roles/",RemoveMember:n.f+"roles/",UserList:n.f+"agents/collections",AddRole:n.f+"roles",EditRole:n.f+"roles",DeleteRole:n.f+"roles/",PermissionList:n.f+"permissions/",RoleCollection:n.f+"roles/collections",CloneRole:n.f+"roles/clone_role"}},mrjb:function(e,t,l){"use strict";l.d(t,"a",(function(){return r}));var n=l("dSv1"),i=l("fXoL");let r=(()=>{class e{constructor(){this.title=Object(n.a)("PAGENOTFOUND"),this.message=Object(n.a)("PAGENOTFOUNDMESSAGE")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-page-not-found"]],decls:10,vars:2,consts:[[1,"fallback-container","flex-vertical"],[1,"row","container","align-center","mt-100"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"fallback_image"],["height","300","width","300","src","assets/images/page-not-found.png"],[1,"fallback_message"],[1,"error-font"],[1,"message-style","font-16"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"div",1),i.Tb(2,"div",2),i.Tb(3,"div",3),i.Ob(4,"img",4),i.Sb(),i.Tb(5,"div",5),i.Tb(6,"div",6),i.Lc(7),i.Sb(),i.Tb(8,"span",7),i.Lc(9),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.xb(7),i.Mc(t.title),i.xb(2),i.Mc(t.message))},styles:[".fallback-container[_ngcontent-%COMP%]{height:100%;text-align:center}.fallback-container[_ngcontent-%COMP%]   .message-style[_ngcontent-%COMP%]{font-weight:400;line-height:24px;padding-top:6px}"]}),e})()},qZph:function(e,t,l){"use strict";l.d(t,"a",(function(){return s}));var n=l("58Y9"),i=l("4SUy"),r=l("fXoL");let s=(()=>{class e{transform(e){if(!Object(i.X)(e))return e+" (UTC "+Object(n.K)()+")"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Mb({name:"dateTimeUTC",type:e,pure:!0}),e})()},zZ4g:function(e){e.exports=JSON.parse('[{"id":1,"name":"Low","backgroundColor":"#10a856"},{"id":2,"name":"Normal","backgroundColor":"#096cbf"},{"id":3,"name":"High","backgroundColor":"#f9c301"},{"id":4,"name":"Critical","backgroundColor":"#e90a03"}]')}}]);