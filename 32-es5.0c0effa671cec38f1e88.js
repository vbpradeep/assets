!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"4ZeN":function(t,i,o){"use strict";o.r(i),o.d(i,"CannedResponsesModule",(function(){return _e}));var a,r=o("ofXK"),c=o("tyNb"),s=o("58Y9"),l=o("M9dC"),d=o("dSv1"),u=o("H552"),h=o("GOTl"),b=o("A4Lh"),g=o("Pk9d"),p=o("4SUy"),f=o("5Lwd"),v=o("ScLb"),m=o("fXoL"),C=o("1kef"),S=o("JCZ/"),y=o("X8pc"),T=o("tk/3"),O=((a=function(){function t(n){e(this,t),this.http=n,this.httpOptions={headers:new T.e({"Content-Type":"application/json"})}}return n(t,[{key:"AddCategory",value:function(e){return this.http.post(h.a.CannedResponseCategories,e).toPromise()}},{key:"EditCategory",value:function(e){return this.http.put(h.a.CannedResponseCategories,e).toPromise()}},{key:"DeleteCategory",value:function(e){return this.http.delete(h.a.CannedResponseCategories+"/"+e).toPromise()}},{key:"fetchEmailPlaceHolderList",value:function(){var e=Object(s.i)(v.a.PlaceHolderList,"isRequiredForCannedResponse","true");return this.http.get(e).toPromise()}},{key:"AddCannedResponse",value:function(e){return this.http.post(h.a.CannedResponses,e).toPromise()}},{key:"EditCannedResponse",value:function(e){return this.http.put(h.a.CannedResponses,e).toPromise()}},{key:"DeleteCannedResponse",value:function(e){return this.http.delete(h.a.CannedResponses+"/"+e).toPromise()}},{key:"changeOwnerForView",value:function(e,t){return this.http.put(h.a.CannedResponses+"/"+e+"/change_owner/"+t,this.httpOptions).toPromise()}}]),t}()).\u0275fac=function(e){return new(e||a)(m.bc(T.b))},a.\u0275prov=m.Jb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),E=o("IaKf"),x=o("jcQU"),D=o("SRvG"),R=o("QYJQ"),N=o("GJ+o"),w=o("hXFv"),I=o("AjNn"),k=o("EiDu"),P=["cannedResponseListGrid"],A=["responseCategoryList"],L=["categoryDialog"],j=["editCategoryName"],M=["addCategoryName"],B=["responseGridElement"],F=["contentGroupForm"],q=["cannedResponseListEle"],H=["agentDrop"],G=["contextmenu"],J=["searchCannesResponse"];function U(e,t){if(1&e){var n=m.Ub();m.Tb(0,"div",38),m.Tb(1,"span",39),m.Tb(2,"span",40),m.ec("click",(function(){return m.Bc(n),m.gc().editClick()})),m.hc(3,"translate"),m.Sb(),m.Sb(),m.Tb(4,"span",39),m.Tb(5,"span",41),m.ec("click",(function(){return m.Bc(n),m.gc().deleteCategoryClick()})),m.hc(6,"translate"),m.Sb(),m.Sb(),m.Sb()}2&e&&(m.xb(2),m.yb("data-title",m.ic(3,2,"EDITCATEGORY")),m.xb(3),m.yb("data-title",m.ic(6,4,"DELETECATEGORY")))}function _(e,t){if(1&e){var n=m.Ub();m.Tb(0,"div",42),m.Tb(1,"span",43),m.ec("click",(function(e){m.Bc(n);var i=t.$implicit;return m.gc().rowSelect(e,i)})),m.Lc(2),m.Sb(),m.Sb()}if(2&e){var i=t.$implicit;m.xb(2),m.Nc(" ",i.name," ")}}function V(e,t){if(1&e&&(m.Tb(0,"span",44),m.Lc(1),m.Sb()),2&e){var n=t.$implicit;m.xb(1),m.Nc(" ",n.accessScope," ")}}function Q(e,t){if(1&e){var n=m.Ub();m.Tb(0,"span",45),m.ec("click",(function(){m.Bc(n);var e=t.$implicit,i=m.gc();return i.moreOptionsSelect(i.editItem,e)})),m.hc(1,"translate"),m.Sb(),m.Tb(2,"span",46),m.ec("click",(function(e){m.Bc(n);var i=t.$implicit;return m.gc().bindBtnTemplate(e,i)})),m.Sb()}2&e&&m.yb("data-title",m.ic(1,1,"EDIT"))}function X(e,t){if(1&e&&(m.Tb(0,"div",47),m.Lc(1),m.hc(2,"translate"),m.Sb(),m.Tb(3,"div",47),m.Lc(4),m.hc(5,"translate"),m.Sb(),m.Tb(6,"div",47),m.Lc(7),m.hc(8,"translate"),m.Sb()),2&e){var n=m.gc();m.nc("hidden",!n.editCategory),m.xb(1),m.Nc(" ",m.ic(2,6,"EDITCATEGORY")," "),m.xb(2),m.nc("hidden",!n.addCategory),m.xb(1),m.Nc(" ",m.ic(5,8,"ADDCATEGORY")," "),m.xb(2),m.nc("hidden",!n.changeOwnerDialog),m.xb(1),m.Mc(m.ic(8,10,"CHANGEOWNER"))}}function W(e,t){if(1&e){var n=m.Ub();m.Tb(0,"div",47),m.Tb(1,"button",48),m.ec("click",(function(){return m.Bc(n),m.gc().closeDialog()})),m.Lc(2),m.hc(3,"translate"),m.Sb(),m.Tb(4,"button",49),m.ec("click",(function(){return m.Bc(n),m.gc().editCategoryClick()})),m.Lc(5),m.hc(6,"translate"),m.Sb(),m.Sb(),m.Tb(7,"div",47),m.Tb(8,"button",48),m.ec("click",(function(){return m.Bc(n),m.gc().closeDialog()})),m.Lc(9),m.hc(10,"translate"),m.Sb(),m.Tb(11,"button",49),m.ec("click",(function(){return m.Bc(n),m.gc().addCategoryClick()})),m.Lc(12),m.hc(13,"translate"),m.Sb(),m.Sb(),m.Tb(14,"div",47),m.Tb(15,"button",48),m.ec("click",(function(){return m.Bc(n),m.gc().closeDialog()})),m.Lc(16),m.hc(17,"translate"),m.Sb(),m.Tb(18,"button",49),m.ec("click",(function(){return m.Bc(n),m.gc().updateOwnerClick()})),m.Lc(19),m.hc(20,"translate"),m.Sb(),m.Sb()}if(2&e){var i=m.gc();m.nc("hidden",!i.editCategory),m.xb(2),m.Mc(m.ic(3,9,"CANCEL")),m.xb(3),m.Mc(m.ic(6,11,"UPDATE")),m.xb(2),m.nc("hidden",!i.addCategory),m.xb(2),m.Mc(m.ic(10,13,"CANCEL")),m.xb(3),m.Mc(m.ic(13,15,"ADD")),m.xb(2),m.nc("hidden",!i.changeOwnerDialog),m.xb(2),m.Mc(m.ic(17,17,"CANCEL")),m.xb(3),m.Mc(m.ic(20,19,"UPDATE"))}}function Y(e,t){1&e&&(m.Tb(0,"div"),m.Tb(1,"span",65),m.Lc(2),m.hc(3,"translate"),m.Sb(),m.Sb()),2&e&&(m.xb(2),m.Nc(" ",m.ic(3,1,"NOCHANGES"),""))}function K(e,t){if(1&e&&(m.Tb(0,"div",65),m.Ob(1,"span",66),m.hc(2,"safe"),m.Sb()),2&e){var n=m.gc(2);m.xb(1),m.nc("innerHTML",m.jc(2,1,n.CategoryNameErrorMessage,"html"),m.Cc)}}function z(e,t){1&e&&(m.Tb(0,"div"),m.Tb(1,"span",65),m.Lc(2),m.hc(3,"translate"),m.Sb(),m.Sb()),2&e&&(m.xb(2),m.Nc(" ",m.ic(3,1,"FIELDREQUIRED"),""))}function $(e,t){if(1&e&&(m.Tb(0,"div"),m.Ob(1,"span",66),m.hc(2,"safe"),m.Sb()),2&e){var n=m.gc(2);m.xb(1),m.nc("innerHTML",m.jc(2,1,n.editCategoryNameErrorMessage,"html"),m.Cc)}}function Z(e,t){if(1&e&&(m.Tb(0,"div",65),m.Ob(1,"span",66),m.hc(2,"safe"),m.Sb()),2&e){var n=m.gc(2);m.xb(1),m.nc("innerHTML",m.jc(2,1,n.CategoryNameErrorMessage,"html"),m.Cc)}}function ee(e,t){1&e&&(m.Tb(0,"div"),m.Tb(1,"span",65),m.Lc(2),m.hc(3,"translate"),m.Sb(),m.Sb()),2&e&&(m.xb(2),m.Nc(" ",m.ic(3,1,"FIELDREQUIRED"),""))}function te(e,t){if(1&e&&(m.Tb(0,"div"),m.Ob(1,"span",66),m.hc(2,"safe"),m.Sb()),2&e){var n=m.gc(2);m.xb(1),m.nc("innerHTML",m.jc(2,1,n.addCategoryNameErrorMessage,"html"),m.Cc)}}function ne(e,t){if(1&e&&(m.Tb(0,"div"),m.Ob(1,"span",66),m.hc(2,"safe"),m.Sb()),2&e){var n=m.gc(2);m.xb(1),m.nc("innerHTML",m.jc(2,1,n.errorMessage,"html"),m.Cc)}}function ie(e,t){if(1&e&&(m.Tb(0,"div",67),m.Tb(1,"div",68),m.Tb(2,"div",69),m.Tb(3,"span",70),m.Lc(4),m.Sb(),m.Tb(5,"span",70),m.Tb(6,"span",71),m.Lc(7),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&e){var n=t.$implicit;m.nc("ngClass",n.isAgent?"agent":""),m.yb("data-user-id",n.userId),m.xb(4),m.Nc(" ",n.displayName," "),m.xb(3),m.Mc(n.emailId)}}function oe(e,t){1&e&&(m.Tb(0,"div"),m.Tb(1,"span",65),m.Lc(2),m.hc(3,"translate"),m.Sb(),m.Sb()),2&e&&(m.xb(2),m.Nc(" ",m.ic(3,1,"FIELDREQUIRED"),""))}function ae(e,t){if(1&e){var n=m.Ub();m.Tb(0,"div",null,50),m.Tb(2,"div",47),m.Tb(3,"div",51),m.Tb(4,"div",52),m.Jc(5,Y,4,3,"div",53),m.Jc(6,K,3,4,"div",54),m.Tb(7,"div",55),m.Tb(8,"label"),m.Lc(9),m.hc(10,"translate"),m.Tb(11,"span",56),m.Lc(12,"*"),m.Sb(),m.Sb(),m.Tb(13,"ejs-textbox",57,58),m.ec("blur",(function(){return m.Bc(n),m.gc().editCategoryNameFocusOut()}))("change",(function(){return m.Bc(n),m.gc().editCategoryChange()}))("focus",(function(){return m.Bc(n),m.gc().CategoryFocus()}))("created",(function(){return m.Bc(n),m.gc().controlCreated("editCategoryName")})),m.hc(15,"translate"),m.Sb(),m.Jc(16,z,4,3,"div",53),m.Jc(17,$,3,4,"div",53),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(18,"div",47),m.Tb(19,"div",51),m.Tb(20,"div"),m.Jc(21,Z,3,4,"div",54),m.Tb(22,"div",55),m.Tb(23,"label"),m.Lc(24),m.hc(25,"translate"),m.Tb(26,"span",56),m.Lc(27,"*"),m.Sb(),m.Sb(),m.Tb(28,"ejs-textbox",59,60),m.ec("blur",(function(){return m.Bc(n),m.gc().addCategoryNameFocusOut()}))("change",(function(){return m.Bc(n),m.gc().addCategoryChange()}))("focus",(function(){return m.Bc(n),m.gc().CategoryFocus()}))("created",(function(){return m.Bc(n),m.gc().controlCreated("addCategoryName")})),m.hc(30,"translate"),m.Sb(),m.Jc(31,ee,4,3,"div",53),m.Jc(32,te,3,4,"div",53),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(33,"div",47),m.Tb(34,"div",51),m.Tb(35,"div",61),m.Jc(36,ne,3,4,"div",53),m.Tb(37,"div",55),m.Tb(38,"label"),m.Lc(39),m.hc(40,"translate"),m.Tb(41,"span",56),m.Lc(42,"*"),m.Sb(),m.Sb(),m.Tb(43,"ejs-dropdownlist",62,63),m.ec("focus",(function(){return m.Bc(n),m.gc().assigneeFocus()}))("blur",(function(){return m.Bc(n),m.gc().assigneeFocusOut()}))("change",(function(){return m.Bc(n),m.gc().assigneeFocusOut()})),m.hc(45,"translate"),m.hc(46,"translate"),m.Jc(47,ie,8,4,"ng-template",null,64,m.Kc),m.Sb(),m.Jc(49,oe,4,3,"div",53),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb()}if(2&e){var i=m.gc();m.xb(2),m.nc("hidden",!i.editCategory),m.xb(3),m.nc("ngIf",i.noChangesValidation),m.xb(1),m.nc("ngIf",i.CategoryNameError),m.xb(3),m.Nc(" ",m.ic(10,27,"CATEGORY")," "),m.xb(4),m.oc("placeholder",m.ic(15,29,"TEXTBOXPLACEHOLDER")),m.nc("htmlAttributes",i.inputAttribute),m.xb(3),m.nc("ngIf",i.isRequired),m.xb(1),m.nc("ngIf",i.editCategoryNameError),m.xb(1),m.nc("hidden",!i.addCategory),m.xb(3),m.nc("ngIf",i.CategoryNameError),m.xb(3),m.Nc(" ",m.ic(25,31,"CATEGORY")," "),m.xb(4),m.oc("placeholder",m.ic(30,33,"TEXTBOXPLACEHOLDER")),m.nc("htmlAttributes",i.inputAttribute),m.xb(3),m.nc("ngIf",i.isRequired),m.xb(1),m.nc("ngIf",i.addCategoryNameError),m.xb(1),m.nc("hidden",!i.changeOwnerDialog),m.xb(3),m.nc("ngIf",i.errorMessage),m.xb(3),m.Nc(" ",m.ic(40,35,"AGENT")," "),m.xb(4),m.oc("placeholder",m.ic(45,37,"DROPDOWNPLACEHOLDER")),m.oc("filterBarPlaceholder",m.ic(46,39,"SEARCH")),m.nc("dataSource",i.assigneeDataConfig)("fields",i.assigneeFieldConfig)("allowFiltering",!0)("showClearButton",!0)("htmlAttributes",i.autoCompleteAttribute)("query",i.agentDropQuery),m.xb(6),m.nc("ngIf",i.isRequired)}}var re,ce=((re=function(){function t(n,i,o,a,r,c){e(this,t),this.appRootService=n,this.seoService=i,this.router=o,this.spinService=a,this.cannedResponseService=r,this.toastService=c,this.inputAttribute={maxlength:b.s,autocomplete:"anyrandomstring"},this.fields={text:"name",value:"id"},this.edit=Object(d.a)("EDIT"),this.delete=Object(d.a)("DELETE"),this.height="200px",this.changeOwner=Object(d.a)("CHANGEOWNER"),this.assigneeFieldConfig={value:"userId",text:"displayName"},this.autoCompleteAttribute={autocomplete:"anyrandomstring"},this.animation={effect:"none"},this.moreActionItems=[{text:this.delete,id:"1"},{text:this.changeOwner,id:"2"}],this.moreActionsWithResponse=[this.delete],this.moreActionsWithChangeOwner=[this.delete,this.changeOwner],this.editItem={item:{text:this.edit}},this.searchPlaceholder=Object(d.a)("SEARCH");var s=Object(d.a)("ADMIN")+" / "+Object(d.a)("CANNEDRESPONSES"),l=Object(d.a)("CANNEDRESPONSES")+" | "+Object(d.a)("ADMIN");this.appRootService.setAppTitleText(s),this.seoService.setHeaderElements({title:l})}return n(t,[{key:"ngOnInit",value:function(){var e=history.state;this.pageSettings={pageSize:b.q},Object(p.X)(e.data)?this.filterGrid("1"):(this.filterGrid(e.data.value),this.listObj.query=(new u.g).addParams("includeAdditionalIds",e.data.value)),this.loadCategories()}},{key:"ngAfterViewInit",value:function(){var e=this;this.oldCategoryValue=this.listObj.text;var t=history.state;Object(p.X)(t.data)?(this.listObj.value=1,setTimeout((function(){e.isDisabledAction=!0}),0)):(this.listObj.value=parseInt(t.data.value,10),1===this.listObj.value?setTimeout((function(){e.isDisabledAction=!0}),0):setTimeout((function(){e.isDisabledAction=!1}),0)),this.gridEle.nativeElement.addEventListener("scroll",(function(){e.contextmenu.close()})),this.cannedResponseListEle.nativeElement.addEventListener("keydown",(function(t){Object(s.l)(t,e.cannedResponseListEle.nativeElement)})),this.gridEle.nativeElement.addEventListener("scroll",(function(){e.contextmenu.close()}))}},{key:"rowSelect",value:function(e,t){if(e.target.classList.contains("more-option-button"))e.cancel=!0;else{var n=t;n&&this.goToDetail(n.cannedResponseId)}}},{key:"filterGrid",value:function(e){this.grid.query=(new u.g).addParams("cannedResponseCategoryId",e),this.loadGrid()}},{key:"loadGrid",value:function(){this.cannedResponseList=new u.a({url:h.a.CannedResponses,adaptor:new l.b})}},{key:"loadCategories",value:function(){this.categoriesData=new u.a({url:h.a.CannedResponseCategories,adaptor:new l.b})}},{key:"addCannedResponse",value:function(){this.router.navigate(["/admin/canned-responses/new"],{state:{data:{accessScopeId:f.a.Public,cannedResponseCategoryId:this.listObj.value}}})}},{key:"goToDetail",value:function(e){this.router.navigateByUrl("/admin/canned-responses/"+e)}},{key:"onChange",value:function(){this.oldCategoryValue=this.listObj.text,this.filterGrid(this.listObj.value.toString()),this.isDisabledAction=1===this.listObj.value}},{key:"closeDialog",value:function(){this.categoryDialog.hide(),this.editCategoryName.value=null,this.addCategoryName.value=null,this.isRequired=!1,this.noChangesValidation=!1,this.editCategory=!1,this.addCategory=!1,this.changeOwnerDialog=!1,this.editCategoryNameError=!1,this.editCategoryNameErrorMessage=null,this.addCategoryNameError=!1,this.addCategoryNameErrorMessage=null,this.deleteDialog&&this.deleteDialog.hide()}},{key:"moreOptionsSelect",value:function(e,t){e.item.text===this.edit?this.goToDetail(t.cannedResponseId):e.item.text===this.delete?(this.selectedCannedResponseId=this.selectedItemData.cannedResponseId,Object(s.b)(this.deleteCannedReponse,this.closeDialog,this,Object(d.a)("DELETERESPONSE"),Object(d.a)("DELETERESPONSEALERT"),Object(d.a)("YES")+", "+Object(d.a)("DELETE"))):e.item.text===this.changeOwner&&(this.changeOwnerDialogOpen(),this.cannedResponseID=this.selectedItemData.cannedResponseId)}},{key:"categoryDialogOpen",value:function(){var e=this;this.editCategory?setTimeout((function(){e.editCategoryName.focusIn()})):this.addCategory?setTimeout((function(){e.addCategoryName.focusIn()})):this.changeOwnerDialog&&setTimeout((function(){e.agentDrop.focusIn()}))}},{key:"changeOwnerDialogOpen",value:function(){this.assigneeDataConfig=new u.a({url:v.a.Assignee,adaptor:new l.b}),this.editCategory=!1,this.addCategory=!1,this.changeOwnerDialog=!0,this.categoryDialog.show()}},{key:"assigneeFocus",value:function(){this.isRequired=!1}},{key:"assigneeFocusOut",value:function(){this.isRequired=!this.agentDrop.value}},{key:"updateOwnerClick",value:function(){var e=this;this.agentDrop.value&&!Object(p.X)(this.agentDrop.value)&&(this.spinService.showSpinner(),this.cannedResponseService.changeOwnerForView(this.cannedResponseID.toString(),this.agentDrop.value).then((function(t){t&&(e.spinService.hideSpinner(),e.toastService.successToast(t.message),e.closeDialog(),e.loadGrid())})).catch((function(t){e.spinService.hideSpinner(),t.error&&t.error.errors&&t.error.errors.length>0&&(e.errorMessage=t.error.errors[0].errorMessage)})))}},{key:"moreOptionsClick",value:function(){this.grid.clearSelection()}},{key:"moreOptionsButtonOpen",value:function(){var e=this.gridEle.nativeElement.querySelectorAll(".response-more-option-button.e-active");e.length>1&&e&&e[0].ej2_instances[0].toggle()}},{key:"addCategoryNameFocusOut",value:function(){this.isRequired=!this.addCategoryName.value}},{key:"actionCompleteOnCategory",value:function(){this.responseCategoryId&&(this.listObj.value=this.responseCategoryId,this.responseCategoryId=void 0)}},{key:"addClick",value:function(){this.addCategory=!0,this.editCategory=!1,this.changeOwnerDialog=!1,this.isRequired=!1,this.noChangesValidation=!1,this.editCategoryNameError=!1,this.editCategoryNameErrorMessage=null,this.categoryDialog.show()}},{key:"editClick",value:function(){this.addCategory=!1,this.changeOwnerDialog=!1,this.editCategory=!0,this.isRequired=!1,this.noChangesValidation=!1,this.editCategoryNameError=!1,this.editCategoryNameErrorMessage=null,this.editCategoryName.value=this.listObj.text,this.categoryDialog.show()}},{key:"CategoryFocus",value:function(){var e=this;setTimeout((function(){e.CategoryNameError=!1,e.isRequired=!1}),0)}},{key:"addCategoryClick",value:function(){var e=this;this.spinService.showSpinner(),null===this.addCategoryName.value||0===this.addCategoryName.value.length||""===this.addCategoryName.value?(this.spinService.hideSpinner(),this.isRequired=!0):this.addCategoryNameError?(this.spinService.hideSpinner(),this.addCategoryNameErrorMessage=s.e,this.isRequired=null):this.cannedResponseService.AddCategory({name:this.addCategoryName.value}).then((function(t){e.spinService.hideSpinner(),e.closeDialog(),e.isDisabledAction=!1,e.listObj.query=(new u.g).addParams("includeAdditionalIds",t.id.toString()),e.responseCategoryId=t.id,e.filterGrid(t.id.toString())})).catch((function(t){e.spinService.hideSpinner(),t.error&&t.error.errors.length>0&&setTimeout((function(){e.CategoryNameError=!0,e.CategoryNameErrorMessage=t.error.errors[0].errorMessage}),0)}))}},{key:"controlCreated",value:function(e){var t=this;setTimeout((function(){var n=t.CategoryForm.nativeElement;Object(s.h)(n.querySelector("#"+e))}))}},{key:"editCategoryClick",value:function(){var e=this;this.spinService.showSpinner(),this.editCategoryNameErrorMessage=null;var t=this.editCategoryName.value;this.editCategoryName.value===this.oldCategoryValue?(this.spinService.hideSpinner(),this.noChangesValidation=!0,this.isRequired=null):0===this.editCategoryName.value.length||""===this.editCategoryName.value?(this.spinService.hideSpinner(),this.isRequired=!0,this.noChangesValidation=null):this.editCategoryNameError?(this.spinService.hideSpinner(),this.editCategoryNameErrorMessage=s.e,this.isRequired=null,this.noChangesValidation=null):this.cannedResponseService.EditCategory({id:this.listObj.value,name:this.editCategoryName.value}).then((function(){e.spinService.hideSpinner(),e.closeDialog(),e.listObj.refresh(),e.listObj.text=t,e.oldCategoryValue=e.listObj.text})).catch((function(t){e.spinService.hideSpinner(),t.error&&t.error.errors.length>0&&setTimeout((function(){e.CategoryNameError=!0,e.CategoryNameErrorMessage=t.error.errors[0].errorMessage}),0)}))}},{key:"deleteClick",value:function(){var e=this;this.spinService.showSpinner(),this.cannedResponseService.DeleteCategory(this.listObj.value).then((function(){e.spinService.hideSpinner(),e.closeDialog(),e.filterGrid("1"),e.listObj.refresh(),e.listObj.value=1,e.isDisabledAction=!0})).catch((function(t){e.spinService.hideSpinner(),t.error&&t.error.errors.length>0&&e.toastService.failureToast(t.error.errors[0].errorMessage)}))}},{key:"deleteCategoryClick",value:function(){Object(s.b)(this.deleteClick,this.closeDialog,this,Object(d.a)("DELETECATEGORY"),Object(d.a)("DELETECATEGORYSUBALERT"),Object(d.a)("YES")+", "+Object(d.a)("DELETE"))}},{key:"deleteCannedReponse",value:function(){var e=this;this.spinService.showSpinner(),this.cannedResponseService.DeleteCannedResponse(this.selectedCannedResponseId).then((function(){e.spinService.hideSpinner(),e.closeDialog(),e.toastService.successToast(Object(d.a)("CANNEDRESPONSEDELETED")),e.loadGrid(),e.listObj.refresh()})).catch((function(t){e.spinService.hideSpinner(),t.error&&t.error.errors.length>0&&e.toastService.failureToast(t.error.errors[0].errorMessage)}))}},{key:"addCategoryChange",value:function(){if(null!=this.addCategoryName.value){var e=Object(s.d)(this.addCategoryName.value);this.addCategoryNameError=!!e,this.addCategoryNameErrorMessage=e?s.e:null,this.isRequired=!1,this.noChangesValidation=!1}else this.isRequired=!1}},{key:"gridDataBound",value:function(){Object(s.a)(this.grid)}},{key:"gridActionBegin",value:function(){}},{key:"editCategoryChange",value:function(){if(null!=this.editCategoryName.value){var e=Object(s.d)(this.editCategoryName.value);this.editCategoryNameError=!!e,this.editCategoryNameErrorMessage=e?s.e:null,this.isRequired=!1,this.noChangesValidation=!1}else this.isRequired=!1}},{key:"editCategoryNameFocusOut",value:function(){this.isRequired=!this.editCategoryName.value}},{key:"bindBtnTemplate",value:function(e,t){this.selectedItemData=t;var n=Object(g.f)(e.target);this.contextmenu.open(n.top+16,n.left-5,e.target)}},{key:"itemBeforeEvent",value:function(){"Active"===this.selectedItemData.ownerStatus?(this.contextmenu.hideItems(this.moreActionsWithChangeOwner),this.contextmenu.showItems(this.moreActionsWithResponse)):(this.contextmenu.hideItems(this.moreActionsWithResponse),this.contextmenu.showItems(this.moreActionsWithChangeOwner))}},{key:"searchNodes",value:function(){var e=this.searchCannesResponse.value.trim();this.grid.search(e)}}]),t}()).\u0275fac=function(e){return new(e||re)(m.Nb(C.a),m.Nb(S.a),m.Nb(c.g),m.Nb(y.a),m.Nb(O),m.Nb(E.a))},re.\u0275cmp=m.Hb({type:re,selectors:[["app-canned-response-list"]],viewQuery:function(e,t){var n;1&e&&(m.Gc(P,!0),m.Gc(A,!0),m.Qc(L,!0),m.Qc(j,!0),m.Qc(M,!0),m.Qc(B,!0),m.Qc(F,!0),m.Qc(q,!0),m.Qc(H,!0),m.Qc(G,!0),m.Qc(J,!0)),2&e&&(m.xc(n=m.fc())&&(t.grid=n.first),m.xc(n=m.fc())&&(t.listObj=n.first),m.xc(n=m.fc())&&(t.categoryDialog=n.first),m.xc(n=m.fc())&&(t.editCategoryName=n.first),m.xc(n=m.fc())&&(t.addCategoryName=n.first),m.xc(n=m.fc())&&(t.gridEle=n.first),m.xc(n=m.fc())&&(t.CategoryForm=n.first),m.xc(n=m.fc())&&(t.cannedResponseListEle=n.first),m.xc(n=m.fc())&&(t.agentDrop=n.first),m.xc(n=m.fc())&&(t.contextmenu=n.first),m.xc(n=m.fc())&&(t.searchCannesResponse=n.first))},decls:63,vars:44,consts:[[1,"canned-response-list","hd-grid-full-height"],["responseGridElement",""],[1,"secondary","padding-10","information-content"],[1,"bd-icon","bd-icon-info","information-icon","information-icon-position"],[1,"no-padding"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","flex-horizontal"],[1,"flex-horizontal","pl-2",2,"float","left"],[1,"pr-10"],[1,"no-margin"],["width","150",3,"dataSource","fields","popupHeight","allowFiltering","filterBarPlaceholder","placeholder","change","actionComplete"],["responseCategoryList",""],[2,"padding","7px 0px 7px 7px","float","left"],[1,"cursor-pointer","bd-icon","bd-icon-add","action-square-button",3,"click"],["style","float: left;",4,"ngIf"],[1,"grid-menu-bar","align-right","flex"],[1,"grid-menu","width100","flex-horizontal"],[1,"add-button-container"],["type","button","ejs-button","",1,"e-btn","add-button","e-primary","e-outline",3,"click"],[1,"search-box"],["id","search","showClearButton","true","autocomplete","off","maxlength","150",3,"placeholder","change"],["searchCannesResponse",""],[1,"row","no-margin","pl-20","pr-20",2,"height","90%"],["cannedResponseListEle",""],[3,"dataSource","allowPaging","pageSettings","allowSorting","allowResizing","dataBound","actionBegin"],["cannedResponseListGrid",""],["field","name","minWidth","150","width","160","clipMode","EllipsisWithTooltip","textAlign","left",3,"headerText"],["template",""],["field","accessScopeId","minWidth","150","width","160","clipMode","EllipsisWithTooltip","textAlign","left",3,"headerText"],["field","owner","minWidth","150","width","160","clipMode","EllipsisWithTooltip","textAlign","left",3,"headerText"],["field","usageCount","minWidth","150","width","160","clipMode","EllipsisWithTooltip","textAlign","Center",3,"headerText"],["textAlign","Center","minWidth","100","width","100"],[3,"items","animationSettings","beforeOpen","select"],["contextmenu",""],["width","450px","isModal","true","showCloseIcon","true","closeOnEscape","true","height","Auto","cssClass","dialog-height",1,"save-dialog",3,"visible","overlayClick","close","open"],["categoryDialog",""],["header",""],["footerTemplate",""],["content",""],[2,"float","left"],[1,"pl-2"],[1,"action-square-button","cursor-pointer","bd-icon","bd-icon-edit",2,"cursor","pointer",3,"click"],[1,"action-square-button","cursor-pointer","bd-icon","bd-icon-delete",2,"cursor","pointer",3,"click"],[1,"no-wrap","ellipsis"],[1,"primary-link-color","cursor-pointer",3,"click"],[1,"grid-text-font-color"],[1,"bd-icon","bd-icon-edit","more-option-button",3,"click"],[1,"hd-icon","hd-vertical-menu","more-option-button",3,"click"],[3,"hidden"],["data-ripple","true",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["data-ripple","true",1,"e-control","e-btn","e-primary","e-flat",3,"click"],["contentGroupForm",""],[1,"dialog-content"],["id","editTagContent"],[4,"ngIf"],["class","required",4,"ngIf"],[1,"form-group","pt-3"],[1,"error"],["id","editCategoryName","autocomplete","off",3,"placeholder","htmlAttributes","blur","change","focus","created"],["editCategoryName",""],["id","addCategoryName","autocomplete","off",3,"placeholder","htmlAttributes","blur","change","focus","created"],["addCategoryName",""],["id","editAgentContent"],[3,"placeholder","dataSource","fields","allowFiltering","showClearButton","htmlAttributes","query","filterBarPlaceholder","focus","blur","change"],["agentDrop",""],["itemTemplate",""],[1,"required"],[1,"error",3,"innerHTML"],[1,"flex-horizontal","p-2",3,"ngClass"],[1,"wrapper","flex-horizontal","full-width"],[1,"flex-vertical","no-wrap","ellipsis"],[1,"e-text"],[1,"font-12"]],template:function(e,t){1&e&&(m.Tb(0,"div",0,1),m.Tb(2,"div",2),m.Ob(3,"div",3),m.Lc(4),m.hc(5,"translate"),m.Sb(),m.Tb(6,"div",4),m.Tb(7,"div",5),m.Tb(8,"div",6),m.Tb(9,"div",7),m.Tb(10,"label",8),m.Lc(11),m.hc(12,"translate"),m.Sb(),m.Sb(),m.Tb(13,"div"),m.Tb(14,"ejs-dropdownlist",9,10),m.ec("change",(function(){return t.onChange()}))("actionComplete",(function(){return t.actionCompleteOnCategory()})),m.hc(16,"translate"),m.hc(17,"translate"),m.Sb(),m.Sb(),m.Tb(18,"div",11),m.Tb(19,"span",12),m.ec("click",(function(){return t.addClick()})),m.hc(20,"translate"),m.Sb(),m.Sb(),m.Jc(21,U,7,6,"div",13),m.Sb(),m.Tb(22,"div",14),m.Tb(23,"div",15),m.Tb(24,"div",16),m.Tb(25,"button",17),m.ec("click",(function(){return t.addCannedResponse()})),m.Lc(26),m.hc(27,"translate"),m.Sb(),m.Sb(),m.Tb(28,"div",18),m.Tb(29,"ejs-textbox",19,20),m.ec("change",(function(){return t.searchNodes()})),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(31,"div",21,22),m.Tb(33,"div"),m.Tb(34,"ejs-grid",23,24),m.ec("dataBound",(function(){return t.gridDataBound()}))("actionBegin",(function(){return t.gridActionBegin()})),m.Tb(36,"e-columns"),m.Tb(37,"e-column",25),m.hc(38,"translate"),m.Jc(39,_,3,1,"ng-template",null,26,m.Kc),m.Sb(),m.Tb(41,"e-column",27),m.hc(42,"translate"),m.Jc(43,V,2,1,"ng-template",null,26,m.Kc),m.Sb(),m.Ob(45,"e-column",28),m.hc(46,"translate"),m.Ob(47,"e-column",29),m.hc(48,"translate"),m.Tb(49,"e-column",30),m.Jc(50,Q,3,3,"ng-template",null,26,m.Kc),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(52,"ejs-contextmenu",31,32),m.ec("beforeOpen",(function(){return t.itemBeforeEvent()}))("select",(function(e){return t.moreOptionsSelect(e)})),m.Sb(),m.Tb(54,"div"),m.Tb(55,"ejs-dialog",33,34),m.ec("overlayClick",(function(){return t.closeDialog()}))("close",(function(){return t.closeDialog()}))("open",(function(){return t.categoryDialogOpen()})),m.Jc(57,X,9,12,"ng-template",null,35,m.Kc),m.Jc(59,W,21,21,"ng-template",null,36,m.Kc),m.Jc(61,ae,50,41,"ng-template",null,37,m.Kc),m.Sb(),m.Sb()),2&e&&(m.xb(4),m.Nc(" ",m.ic(5,24,"CANNEDRESPONSEMODULEINFO"),""),m.xb(7),m.Nc("",m.ic(12,26,"CATEGORY")," "),m.xb(3),m.oc("filterBarPlaceholder",m.ic(16,28,"SEARCH")),m.oc("placeholder",m.ic(17,30,"CATEGORY")),m.nc("dataSource",t.categoriesData)("fields",t.fields)("popupHeight",t.height)("allowFiltering",!0),m.xb(5),m.yb("data-title",m.ic(20,32,"ADDCATEGORY")),m.xb(2),m.nc("ngIf",!t.isDisabledAction),m.xb(5),m.Nc(" ",m.ic(27,34,"ADDCANNEDRESPONSE")," "),m.xb(3),m.nc("placeholder",t.searchPlaceholder),m.xb(5),m.nc("dataSource",t.cannedResponseList)("allowPaging",!0)("pageSettings",t.pageSettings)("allowSorting",!0)("allowResizing",!0),m.xb(3),m.oc("headerText",m.ic(38,36,"INPLACETITLE")),m.xb(4),m.oc("headerText",m.ic(42,38,"PERMISSIONACCESSSCOPE")),m.xb(4),m.oc("headerText",m.ic(46,40,"OWNER")),m.xb(2),m.oc("headerText",m.ic(48,42,"USAGECOUNT")),m.xb(5),m.nc("items",t.moreActionItems)("animationSettings",t.animation),m.xb(3),m.nc("visible",!1))},directives:[x.e,r.n,D.c,R.i,N.k,N.e,N.b,N.d,N.a,w.f,g.b,r.l],pipes:[I.a,k.a],styles:[".response-more-option-button[_ngcontent-%COMP%]{background:none;padding:0!important}.grid-margin[_ngcontent-%COMP%]{margin-top:4px}.e-dropdown-btn[_ngcontent-%COMP%]:active{box-shadow:none!important}.cursor-style[_ngcontent-%COMP%]:hover{cursor:pointer}.canned-response-list[_ngcontent-%COMP%]   .grid-menu-bar[_ngcontent-%COMP%]{padding:10px 5px;width:auto}.canned-response-list[_ngcontent-%COMP%]   .add-button-container[_ngcontent-%COMP%]{padding:12px 12px 15px!important}.canned-response-list[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{height:38px!important;padding:0!important}"]}),re),se=o("bYFv"),le=o("JNPz"),de=["addcannedresponse"],ue=["placeholderDialog"],he=["Description"],be=["responseTitle"],ge=["privateButton"],pe=["publicButton"],fe=["responseCategoryList"];function ve(e,t){1&e&&m.Pb(0)}function me(e,t){if(1&e){var n=m.Ub();m.Tb(0,"button",15,16),m.ec("click",(function(){return m.Bc(n),m.gc().addCannedResponse()})),m.Lc(2),m.hc(3,"translate"),m.Sb()}2&e&&(m.nc("isPrimary",!0),m.xb(2),m.Mc(m.ic(3,2,"ADD")))}function Ce(e,t){if(1&e){var n=m.Ub();m.Tb(0,"button",15,16),m.ec("click",(function(){return m.Bc(n),m.gc().updateCannedResponse()})),m.Lc(2),m.hc(3,"translate"),m.Sb()}2&e&&(m.nc("isPrimary",!0),m.xb(2),m.Mc(m.ic(3,2,"UPDATE")))}function Se(e,t){1&e&&(m.Tb(0,"div",45),m.Tb(1,"span",20),m.Lc(2),m.hc(3,"translate"),m.Sb(),m.Sb()),2&e&&(m.xb(2),m.Nc(" ",m.ic(3,1,"FIELDREQUIRED"),""))}function ye(e,t){1&e&&m.Pb(0)}function Te(e,t){if(1&e&&(m.Tb(0,"div",45),m.Jc(1,ye,1,0,"ng-container",3),m.Sb()),2&e){m.gc(2);var n=m.yc(14);m.xb(1),m.nc("ngTemplateOutlet",n)}}function Oe(e,t){1&e&&(m.Tb(0,"div",46),m.Tb(1,"span",20),m.Lc(2),m.hc(3,"translate"),m.Sb(),m.Sb()),2&e&&(m.xb(2),m.Nc(" ",m.ic(3,1,"FIELDREQUIRED"),""))}function Ee(e,t){1&e&&(m.Tb(0,"div"),m.Tb(1,"span",47),m.Lc(2),m.hc(3,"translate"),m.Sb(),m.Sb()),2&e&&(m.xb(2),m.Nc(" ",m.ic(3,1,"FIELDREQUIRED"),""))}function xe(e,t){if(1&e){var n=m.Ub();m.Tb(0,"div"),m.Tb(1,"div",17),m.Tb(2,"div",18),m.Tb(3,"div",19),m.Tb(4,"label"),m.Lc(5),m.hc(6,"translate"),m.Tb(7,"span",20),m.Lc(8,"*"),m.Sb(),m.Sb(),m.Tb(9,"ejs-textbox",21,22),m.ec("focus",(function(){return m.Bc(n),m.gc().responseTitleFocusIn()}))("created",(function(){m.Bc(n);var e=m.yc(10);return m.gc().validationElementBind(e)}))("blur",(function(){return m.Bc(n),m.gc().responseTitleFocusOut()}))("change",(function(){return m.Bc(n),m.gc().responseTitleChange()}))("input",(function(e){return m.Bc(n),m.gc().responseTitleInput(e)})),m.hc(11,"translate"),m.Sb(),m.Jc(12,Se,4,3,"div",23),m.Jc(13,Te,2,1,"div",23),m.Sb(),m.Sb(),m.Tb(14,"div",18),m.Tb(15,"div",24),m.Tb(16,"div"),m.Tb(17,"label",25),m.Tb(18,"span",26),m.ec("click",(function(){return m.Bc(n),m.gc().openPlaceholderDialog()})),m.Lc(19),m.hc(20,"translate"),m.Sb(),m.Sb(),m.Tb(21,"label"),m.Lc(22),m.hc(23,"translate"),m.Tb(24,"span",20),m.Lc(25,"*"),m.Sb(),m.Sb(),m.Tb(26,"app-rte",27,28),m.ec("focusIn",(function(){return m.Bc(n),m.gc().rteFocus()}))("rteCreated",(function(){return m.Bc(n),m.gc().rteCreated()}))("focusOut",(function(){return m.Bc(n),m.gc().rteFocusOut()})),m.Sb(),m.Jc(28,Oe,4,3,"div",29),m.Tb(29,"div",30),m.Ob(30,"span",31),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(31,"div",32),m.Tb(32,"div",33),m.Tb(33,"label"),m.Lc(34),m.hc(35,"translate"),m.Tb(36,"span",20),m.Lc(37,"*"),m.Sb(),m.Sb(),m.Tb(38,"ejs-dropdownlist",34,35),m.ec("created",(function(){m.Bc(n);var e=m.yc(39);return m.gc().validationElementBind(e)}))("dataBound",(function(){return m.Bc(n),m.gc().categoryDataBound()}))("focus",(function(){return m.Bc(n),m.gc().categoryFocusIn()}))("blur",(function(){return m.Bc(n),m.gc().categoryFocusOut()}))("change",(function(){return m.Bc(n),m.gc().categoryChange()})),m.hc(40,"translate"),m.hc(41,"translate"),m.Sb(),m.Jc(42,Ee,4,3,"div",36),m.Sb(),m.Sb(),m.Tb(43,"div",37),m.Tb(44,"div",38),m.Lc(45),m.hc(46,"translate"),m.Sb(),m.Tb(47,"div",39),m.Ob(48,"ejs-radiobutton",40,41),m.Sb(),m.Tb(50,"div",42),m.Ob(51,"ejs-radiobutton",43,44),m.Sb(),m.Sb(),m.Sb(),m.Sb()}if(2&e){var i=m.gc();m.xb(5),m.Nc(" ",m.ic(6,19,"RESPONSETITLE")," "),m.xb(4),m.oc("placeholder",m.ic(11,21,"TEXTBOXPLACEHOLDER")),m.oc("value",i.data.name),m.nc("htmlAttributes",i.inputAttribute),m.xb(3),m.nc("ngIf",i.titleRequired),m.xb(1),m.nc("ngIf",i.titleNameIsError),m.xb(6),m.Nc(" ",m.ic(20,23,"INSERTPLACEHOLDERS")," "),m.xb(3),m.Nc(" ",m.ic(23,25,"DESCRIPTION")," "),m.xb(4),m.oc("value",i.data.description),m.xb(2),m.nc("ngIf",i.rteValidation),m.xb(6),m.Nc(" ",m.ic(35,27,"CATEGORY")," "),m.xb(4),m.oc("filterBarPlaceholder",m.ic(40,29,"SEARCH")),m.oc("placeholder",m.ic(41,31,"DROPDOWNPLACEHOLDER")),m.nc("dataSource",i.categoriesData)("fields",i.fields)("popupHeight",i.height)("allowFiltering",!0),m.xb(4),m.nc("ngIf",i.CategoryRequired),m.xb(3),m.Nc(" ",m.ic(46,33,"PERMISSIONACCESSSCOPE")," ")}}function De(e,t){if(1&e&&(m.Ob(0,"span",48),m.hc(1,"safe")),2&e){var n=m.gc();m.nc("innerHTML",m.jc(1,1,n.commonInputValidationErrorMessage,"html"),m.Cc)}}function Re(e,t){if(1&e){var n=m.Ub();m.Tb(0,"div",49),m.Tb(1,"div",50),m.Lc(2),m.hc(3,"translate"),m.Sb(),m.Tb(4,"div",51),m.ec("click",(function(){return m.Bc(n),m.gc().closeDialog()})),m.Ob(5,"span",52),m.hc(6,"translate"),m.Sb(),m.Sb()}2&e&&(m.xb(2),m.Mc(m.ic(3,3,"PLACEHOLDERS")),m.xb(3),m.yb("data-non-elliptical",!0)("data-title",m.ic(6,5,"Close")))}function Ne(e,t){if(1&e){var n=m.Ub();m.Tb(0,"div"),m.Tb(1,"button",53),m.ec("click",(function(){return m.Bc(n),m.gc().closeDialog()})),m.Lc(2),m.hc(3,"translate"),m.Sb(),m.Sb()}2&e&&(m.xb(2),m.Mc(m.ic(3,1,"CANCEL")))}function we(e,t){if(1&e){var n=m.Ub();m.Tb(0,"div",59,60),m.ec("mousedown",(function(e){return m.Bc(n),m.gc(3).placeHolderClick(e)})),m.Tb(2,"div",61),m.Tb(3,"span"),m.Lc(4),m.Sb(),m.Sb(),m.Sb()}if(2&e){var i=t.$implicit;m.yb("data-placeholder",i.placeholder),m.xb(3),m.yb("data-title",i.name),m.xb(1),m.Mc(i.name)}}function Ie(e,t){if(1&e&&(m.Tb(0,"div"),m.Tb(1,"div",56),m.Lc(2),m.Sb(),m.Tb(3,"div",57),m.Jc(4,we,5,3,"div",58),m.Sb(),m.Sb()),2&e){var n=t.$implicit;m.xb(2),m.Mc(n.placeholderCategory),m.xb(2),m.nc("ngForOf",n.placeholders)}}function ke(e,t){if(1&e&&(m.Tb(0,"div",null,54),m.Jc(2,Ie,5,2,"div",55),m.Sb()),2&e){var n=m.gc();m.xb(2),m.nc("ngForOf",n.PlaceHolderList)}}var Pe,Ae,Le,je,Me=((Pe=function(){function t(n,i,o,a,r,c,s){var l=this;e(this,t),this.appRootService=n,this.seoService=i,this.cannedResponseServices=o,this.spinService=a,this.activatedRoute=r,this.router=c,this.toastService=s,this.focusedEleValue="Description",this.selection=new se.e,this.placeholderDialogPosition={X:"right"},this.inputAttribute={maxlength:b.s,autocomplete:"anyrandomstring"},this.fields={text:"name",value:"id"},this.height="200px",this.cannedResponseServices.fetchEmailPlaceHolderList().then((function(e){l.PlaceHolderList=e.result})),this.resolveData=this.activatedRoute.data.subscribe((function(e){var t=history.state;e.data?(l.data=e.data.result,l.isAddPage=!1):(l.isAddPage=!0,l.data={accessScopeId:f.a.Private,name:"",description:"",cannedResponseCategoryId:1,cannedResponseId:0,cannedResponseCategory:"",accessScope:""}),Object(p.X)(t.data)?(l.cannedResponseCategoryId=l.data.cannedResponseCategoryId,l.accessScopeId=l.data.accessScopeId):(l.cannedResponseCategoryId=t.data.cannedResponseCategoryId,l.accessScopeId=t.data.accessScopeId),l.spinService.hideSpinner()})),this.responseHeader=this.isAddPage?Object(d.a)("ADD"):Object(d.a)("EDIT");var u=Object(d.a)("ADMIN")+" / "+Object(d.a)("CANNEDRESPONSES")+" / "+this.responseHeader+",/admin/canned-responses",h=this.responseHeader+" | "+Object(d.a)("CANNEDRESPONSES")+" | "+Object(d.a)("ADMIN");this.appRootService.setAppTitleText(u),this.appRootService.getNavigateUrl(this.router.url.replace(this.isAddPage?"/new":"/"+this.data.cannedResponseId,"")),this.seoService.setHeaderElements({title:h})}return n(t,[{key:"ngOnInit",value:function(){this.loadCategories(),this.commonInputValidationErrorMessage=s.e}},{key:"ngAfterViewInit",value:function(){this.categoryDropdown.query=(new u.g).addParams("includeAdditionalIds",this.cannedResponseCategoryId.toString()),this.categoryDropdown.value=this.cannedResponseCategoryId,this.accessScopeId===f.a.Private?this.privateButton.checked=!0:this.publicButton.checked=!0,this.rteFocusUIRefresh()}},{key:"rteFocusUIRefresh",value:function(){this.Description.rteObj.refreshUI()}},{key:"categoryDataBound",value:function(){this.categoryDropdown.value=this.cannedResponseCategoryId}},{key:"loadCategories",value:function(){this.categoriesData=new u.a({url:h.a.CannedResponseCategories,adaptor:new l.b})}},{key:"rteRangeFocusSelection",value:function(){var e=this.selection.getRange(document);this.saveSelection=this.selection.save(e,document)}},{key:"openPlaceholderDialog",value:function(){Object(s.D)(this.focusedEleValue)&&(this.focusedEleValue="Description"),"Description"===this.focusedEleValue&&Object(p.X)(this.saveSelection)&&this.rteRangeFocusSelection(),this.placeholderDialog.show()}},{key:"rteFocus",value:function(){this.focusedEleValue="Description",this.rteValidation=!1,this.Description.rteObj.focusIn(),this.isRTEFocussed=!0}},{key:"rteCreated",value:function(){var e=this;setTimeout((function(){e.Description.rteObj.refreshUI()}),200)}},{key:"responseTitleFocusIn",value:function(){this.focusedEleValue="ResponseTitle",this.titlePos=this.responseTitle.element.selectionStart}},{key:"validationElementBind",value:function(e){setTimeout((function(){if(e&&e.element){var t=e.element.parentElement;t&&Object(s.h)(t)}}),100)}},{key:"responseTitleFocusOut",value:function(){if(Object(p.X)(this.responseTitle.value))this.titleRequired=!0;else{var e=this.responseTitle.value.trim();Object(p.X)(e)||0!==e.length||(this.titleRequired=!0)}}},{key:"responseTitleChange",value:function(){if(null!=this.responseTitle.value){this.titleRequired=!1;var e=Object(s.d)(this.responseTitle.value);this.titleNameIsError=!!e}else this.titleRequired=!1,this.titleNameIsError=!1}},{key:"responseTitleInput",value:function(e){this.responseTitle.value=e.value;var t=e.value;this.titleRequired=!(!Object(p.X)(t)&&""!==t.trim());var n=Object(s.d)(t);this.titleNameIsError=!!n}},{key:"closeDialog",value:function(){this.placeholderDialog.hide(),this.isDialogCancel=!0}},{key:"placeHolderClick",value:function(e){var t=e.currentTarget.getAttribute("data-placeholder"),n=this.Description.rteObj;if(Object(s.D)(this.focusedEleValue)&&(this.focusedEleValue="Description"),"Description"===this.focusedEleValue||"ResponseTitle"===this.focusedEleValue){n.value||n.focusIn(),!this.isDialogCancel&&this.isRTEFocussed&&this.rteRangeFocusSelection(),0===n.formatter.getUndoRedoStack().length&&n.formatter.saveData(),this.saveSelection.restore(),n.executeCommand("insertText",t),n.formatter.saveData(),n.formatter.enableUndo(n);var i=this.selection.getRange(document);this.saveSelection=this.selection.save(i,document),this.isDialogCancel=!1,this.isRTEFocussed=!0}e.preventDefault(),e.stopPropagation()}},{key:"cannedResponseCancel",value:function(){this.router.navigate(this.isAddPage?[this.router.url.replace("/new","")]:[this.router.url.replace("/"+this.data.cannedResponseId,"")],{state:{data:{value:this.cannedResponseCategoryId}}})}},{key:"navigateToPreviousPage",value:function(){this.router.navigate(this.isAddPage?[this.router.url.replace("/new","")]:[this.router.url.replace("/"+this.data.cannedResponseId,"")],{state:{data:{value:this.categoryDropdown.value}}})}},{key:"rteFocusOut",value:function(){var e=this.Description.rteObj;this.rteValidation=!(e.value&&e.value.length>0),Object(p.X)(this.saveSelection)&&this.rteRangeFocusSelection(),this.isRTEFocussed=!1}},{key:"categoryFocusIn",value:function(){this.CategoryRequired=Object(p.X)(this.categoryDropdown.value)||0===this.categoryDropdown.value.toString().length}},{key:"categoryFocusOut",value:function(){this.CategoryRequired=!1}},{key:"categoryChange",value:function(){this.CategoryRequired=!(!Object(p.X)(this.categoryDropdown.value)&&0!==this.categoryDropdown.value.toString().length)}},{key:"addCannedResponse",value:function(){var e=this;this.responseTitleFocusOut(),this.rteFocusOut(),this.titleRequired||this.titleNameIsError||this.rteValidation||Object(p.X)(this.categoryDropdown.value)||0===this.categoryDropdown.value.toString().length?Object(p.X)(this.categoryDropdown.value)||0===this.categoryDropdown.value.toString().length?this.CategoryRequired=!0:(this.titleRequired||this.titleNameIsError)&&this.responseTitle.focusIn():(this.placeholderDialog.hide(),this.spinService.showSpinner(),this.cannedResponseServices.AddCannedResponse({name:this.responseTitle.value,accessScopeId:this.privateButton.checked?f.a.Private:f.a.Public,description:this.Description.rteObj.value,cannedResponseCategoryId:this.categoryDropdown.value}).then((function(t){t&&(e.spinService.hideSpinner(),e.toastService.successToast(Object(d.a)("CANNEDRESPONSEADDED"))),e.navigateToPreviousPage()})).catch((function(t){e.spinService.hideSpinner(),t.error&&t.error.errors.length>0&&e.toastService.failureToast(t.error.errors[0].errorMessage)})))}},{key:"updateCannedResponse",value:function(){var e=this;this.responseTitleFocusOut(),this.rteFocusOut(),this.titleRequired||this.titleNameIsError||this.rteValidation||Object(p.X)(this.categoryDropdown.value)||0===this.categoryDropdown.value.toString().length?Object(p.X)(this.categoryDropdown.value)||0===this.categoryDropdown.value.toString().length?this.CategoryRequired=!0:(this.titleRequired||this.titleNameIsError)&&this.responseTitle.focusIn():(this.placeholderDialog.hide(),this.spinService.showSpinner(),this.cannedResponseServices.EditCannedResponse({cannedResponseId:this.data.cannedResponseId,name:this.responseTitle.value,accessScopeId:this.privateButton.checked?f.a.Private:f.a.Public,description:this.Description.rteObj.value,cannedResponseCategoryId:this.categoryDropdown.value}).then((function(t){t&&(e.spinService.hideSpinner(),e.toastService.successToast(Object(d.a)("CANNEDRESPONSEUPDATED"))),e.navigateToPreviousPage()})).catch((function(t){e.spinService.hideSpinner(),t.error&&t.error.errors.length>0&&e.toastService.failureToast(t.error.errors[0].errorMessage)})))}}]),t}()).\u0275fac=function(e){return new(e||Pe)(m.Nb(C.a),m.Nb(S.a),m.Nb(O),m.Nb(y.a),m.Nb(c.a),m.Nb(c.g),m.Nb(E.a))},Pe.\u0275cmp=m.Hb({type:Pe,selectors:[["app-canned-response-detail"]],viewQuery:function(e,t){var n;1&e&&(m.Qc(de,!0),m.Qc(ue,!0),m.Qc(he,!0),m.Qc(be,!0),m.Qc(ge,!0),m.Qc(pe,!0),m.Qc(fe,!0)),2&e&&(m.xc(n=m.fc())&&(t.addCannedResponseButton=n.first),m.xc(n=m.fc())&&(t.placeholderDialog=n.first),m.xc(n=m.fc())&&(t.Description=n.first),m.xc(n=m.fc())&&(t.responseTitle=n.first),m.xc(n=m.fc())&&(t.privateButton=n.first),m.xc(n=m.fc())&&(t.publicButton=n.first),m.xc(n=m.fc())&&(t.categoryDropdown=n.first))},decls:24,vars:9,consts:[[1,"response-notification-form"],[1,"response-notification-overflow","overflow-auto-align"],[1,"pt-3","col-lg-8","pl-4"],[4,"ngTemplateOutlet"],[1,"response-action-buttons"],[1,"col-lg-8"],["type","submit","class","mr-10 e-btn","ejs-button","",3,"isPrimary","click",4,"ngIf"],["type","button","cssClass","e-outline","ejs-button","",1,"e-btn",3,"click"],["cannedAction",""],["errorInputValidation",""],["width","350px","height","100%","cssClass","canned-response-placeholder",3,"visible","closeOnEscape","position"],["placeholderDialog",""],["header",""],["footerTemplate",""],["content",""],["type","submit","ejs-button","",1,"mr-10","e-btn",3,"isPrimary","click"],["addcannedresponse",""],[1,"form-builder"],[1,"form-group","row","flex-vertical"],[1,"col","pt-2"],[1,"error"],["autocomplete","off",3,"placeholder","value","htmlAttributes","focus","created","blur","change","input"],["responseTitle",""],["class","error-msg",4,"ngIf"],[1,"col"],[1,"align-right"],[1,"link",3,"click"],[3,"value","focusIn","rteCreated","focusOut"],["Description",""],["class","error-msg pt-5",4,"ngIf"],["id","description",1,"col","custom-error","no-padding"],[1,"error","primary"],[1,"form-group","row","py-2"],[1,"col-6"],[3,"dataSource","fields","popupHeight","allowFiltering","filterBarPlaceholder","placeholder","created","dataBound","focus","blur","change"],["responseCategoryList",""],[4,"ngIf"],[1,"form-group","row","flex-horizontal","py-2"],[1,"col-3"],[1,"col-1",2,"right","50px"],["label","Private","name","access","value","Private"],["privateButton",""],[1,"col-1",2,"right","15px"],["label","Public","name","access","value","Public"],["publicButton",""],[1,"error-msg"],[1,"error-msg","pt-5"],[1,"required"],[1,"error",3,"innerHTML"],[1,"flex-horizontal"],[1,"font-16","font-500"],[1,"align-right","action-square-button","cursor-pointer",3,"click"],[1,"hd-icon","hd-close","font-16"],["data-ripple","true",1,"e-control","e-btn","e-secondary","e-flat",3,"click"],["contentholidayForm",""],[4,"ngFor","ngForOf"],[1,"font-500","font-14","pb-3","pt-2"],[1,"placeholder-list"],["class","placeholder-list-item no-wrap ellipsis",3,"mousedown",4,"ngFor","ngForOf"],[1,"placeholder-list-item","no-wrap","ellipsis",3,"mousedown"],["element",""],[1,"no-wrap","ellipsis"]],template:function(e,t){if(1&e&&(m.Tb(0,"div",0),m.Tb(1,"div",1),m.Tb(2,"div",2),m.Jc(3,ve,1,0,"ng-container",3),m.Sb(),m.Sb(),m.Tb(4,"div",4),m.Tb(5,"div",5),m.Jc(6,me,4,4,"button",6),m.Jc(7,Ce,4,4,"button",6),m.Tb(8,"button",7),m.ec("click",(function(){return t.cannedResponseCancel()})),m.Lc(9),m.hc(10,"translate"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Jc(11,xe,53,35,"ng-template",null,8,m.Kc),m.Jc(13,De,2,4,"ng-template",null,9,m.Kc),m.Tb(15,"div"),m.Tb(16,"ejs-dialog",10,11),m.Jc(18,Re,7,7,"ng-template",null,12,m.Kc),m.Jc(20,Ne,4,3,"ng-template",null,13,m.Kc),m.Jc(22,ke,3,1,"ng-template",null,14,m.Kc),m.Sb(),m.Sb()),2&e){var n=m.yc(12);m.xb(3),m.nc("ngTemplateOutlet",n),m.xb(3),m.nc("ngIf",t.isAddPage),m.xb(1),m.nc("ngIf",!t.isAddPage),m.xb(2),m.Mc(m.ic(10,7,"CANCEL")),m.xb(7),m.nc("visible",!1)("closeOnEscape",!0)("position",t.placeholderDialogPosition)}},directives:[r.r,r.n,D.c,g.b,R.i,le.a,x.e,D.i,r.m],pipes:[I.a,k.a],styles:["body[_ngcontent-%COMP%]{--theme-color:#ff4800;--header-background-color:#ff4800;--header-font-color:#183247;--header-font-style:Roboto,segoe ui;--body-background-color:#f3f5f7;--primary-color:rgba(0,0,0,0.87);--secondary-color:#718096;--font-style:Roboto,segoe ui;--footer-background-color:#f1f1f1}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #e2e8f0!important}.border-left[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0!important}.border[_ngcontent-%COMP%]{border:1px solid #e2e8f0!important}.border-radius[_ngcontent-%COMP%]{border-radius:5px}.response-notification-form[_ngcontent-%COMP%]{height:100%}.response-notification-form[_ngcontent-%COMP%]   .form-builder[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-left:0}.response-action-buttons[_ngcontent-%COMP%]{background:#f7fafc;border-top:1px solid #e8eaed;bottom:0;height:50px;margin-left:0;padding:10px 10px 10px 15px;position:fixed;width:100%}.response-notification-overflow[_ngcontent-%COMP%]{height:calc(100% - 50px)!important}.canned-response-placeholder[_ngcontent-%COMP%], .response-notification-overflow[_ngcontent-%COMP%]{max-height:100%!important;top:0!important}.overflow-auto-align[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}.e-dialog[cssClass=canned-response-placeholder][_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%], .e-dialog[cssClass=response-notification-overflow][_ngcontent-%COMP%]   .e-dlg-header[_ngcontent-%COMP%]{width:100%!important}"]}),Pe),Be=o("mrjb"),Fe=((Ae=function(){function t(n,i,o){e(this,t),this.http=n,this.spinService=i,this.router=o}return n(t,[{key:"resolve",value:function(e){var t=this;return this.spinService.showSpinner(),this.http.get(h.a.CannedResponses+"/"+e.params.id).toPromise().catch((function(e){return t.router.navigateByUrl("error",{state:e.error.errors[0].errorMessage,skipLocationChange:!0})}))}}]),t}()).\u0275fac=function(e){return new(e||Ae)(m.bc(T.b),m.bc(y.a),m.bc(c.g))},Ae.\u0275prov=m.Jb({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),Ae),qe=[{path:"",component:ce},{path:"new",component:Me},{path:":id",component:Me,resolve:{data:Fe}},{path:"**",component:Be.a}],He=((Le=function t(){e(this,t)}).\u0275mod=m.Lb({type:Le}),Le.\u0275inj=m.Kb({factory:function(e){return new(e||Le)},imports:[[c.k.forChild(qe)],c.k]}),Le),Ge=o("ltyr"),Je=o("np3I"),Ue=o("5OZa"),_e=((je=function t(){e(this,t)}).\u0275mod=m.Lb({type:je}),je.\u0275inj=m.Kb({factory:function(e){return new(e||je)},providers:[O,Fe],imports:[[r.b,He,Ge.a,N.j,Je.AdminModule,R.h,D.b,g.a,D.j,x.d,Ue.a,D.h,w.e]]}),je)},mrjb:function(t,n,i){"use strict";i.d(n,"a",(function(){return r}));var o=i("dSv1"),a=i("fXoL"),r=function(){var t=function t(){e(this,t),this.title=Object(o.a)("PAGENOTFOUND"),this.message=Object(o.a)("PAGENOTFOUNDMESSAGE")};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["app-page-not-found"]],decls:10,vars:2,consts:[[1,"fallback-container","flex-vertical"],[1,"row","container","align-center","mt-100"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"fallback_image"],["height","300","width","300","src","assets/images/page-not-found.png"],[1,"fallback_message"],[1,"error-font"],[1,"message-style","font-16"]],template:function(e,t){1&e&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"div",2),a.Tb(3,"div",3),a.Ob(4,"img",4),a.Sb(),a.Tb(5,"div",5),a.Tb(6,"div",6),a.Lc(7),a.Sb(),a.Tb(8,"span",7),a.Lc(9),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e&&(a.xb(7),a.Mc(t.title),a.xb(2),a.Mc(t.message))},styles:[".fallback-container[_ngcontent-%COMP%]{height:100%;text-align:center}.fallback-container[_ngcontent-%COMP%]   .message-style[_ngcontent-%COMP%]{font-weight:400;line-height:24px;padding-top:6px}"]}),t}()}}])}();