!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{hvyQ:function(t,n,a){"use strict";a.r(n),a.d(n,"FieldsModule",(function(){return le}));var c,l=a("ofXK"),o=a("tyNb"),s=a("mrjb"),r=a("A4Lh"),d=a("H552"),b=a("kR0U"),u=a("M9dC"),h=a("58Y9"),f=a("dSv1"),p=a("Pk9d"),m=a("qBM0"),g=a("oRrO"),v=a("5LOs"),T=a("y5ZJ"),S=a("fXoL"),E=a("1kef"),I=a("JCZ/"),F=a("tk/3"),x=((c=function(){function t(i){e(this,t),this.http=i,this.httpOptions={headers:new F.e({"Content-Type":"application/json"})}}return i(t,[{key:"deleteField",value:function(e){return this.http.delete(b.a.FieldDelete+"/"+e).toPromise()}},{key:"toggleField",value:function(e,t){return this.http.post(e?b.a.FieldActiveOrDeactivate+"/"+t+"/activate":b.a.FieldActiveOrDeactivate+"/"+t+"/deactivate",this.httpOptions).toPromise()}}]),t}()).\u0275fac=function(e){return new(e||c)(S.bc(F.b))},c.\u0275prov=S.Jb({token:c,factory:c.\u0275fac}),c),A=a("X8pc"),y=a("IaKf"),C=a("QYJQ"),k=a("SRvG"),O=a("GJ+o"),D=a("hXFv"),L=a("EiDu"),j=a("AjNn"),P=["fieldListGrid"],w=["contextmenu"],N=["filedListEle"],B=["searchFields"];function R(e,t){if(1&e&&(S.Tb(0,"span"),S.Tb(1,"div"),S.Ob(2,"i",25),S.Sb(),S.Sb()),2&e){var i=t.$implicit;S.xb(1),S.yb("data-non-elliptical",!0)("data-title",i.fieldType),S.xb(1),S.oc("ngClass",null!=i.fieldTypeIconCssClass?i.fieldTypeIconCssClass:"bd-custom-default-icon")}}function K(e,t){if(1&e){var i=S.Ub();S.Tb(0,"span",33),S.ec("click",(function(){S.Bc(i);var e=S.gc().$implicit,t=S.gc();return e.canEditConfiguration||"Tags"==e.labelForAgentPortal||"Status"==e.labelForAgentPortal?t.fieldClick("/admin/"+e.labelForAgentPortal.toLowerCase().replace(" ","")):""})),S.Tb(1,"span",34),S.Lc(2),S.Sb(),S.Sb()}if(2&e){var n=S.gc().$implicit;S.xb(1),S.nc("ngClass",n.canEditConfiguration||"Tags"==n.labelForAgentPortal||"Status"==n.labelForAgentPortal?"primary-link-color-blue cursor-pointer":""),S.yb("data-title",n.labelForAgentPortal),S.xb(1),S.Mc(n.labelForAgentPortal)}}function J(e,t){if(1&e){var i=S.Ub();S.Tb(0,"span",35),S.Tb(1,"span",36),S.ec("click",(function(e){S.Bc(i);var t=S.gc().$implicit,n=S.gc();return t.canEditConfiguration?n.fieldNameClick(e,t.fieldId):""})),S.Lc(2),S.Sb(),S.Sb()}if(2&e){var n=S.gc().$implicit;S.xb(1),S.nc("ngClass",n.canEditConfiguration?"primary-link-color-blue cursor-pointer":""),S.yb("data-title",n.labelForAgentPortal),S.xb(1),S.Mc(n.labelForAgentPortal)}}function M(e,t){1&e&&(S.Tb(0,"span",37),S.hc(1,"translate"),S.Tb(2,"span"),S.Lc(3),S.hc(4,"translate"),S.Sb(),S.Sb()),2&e&&(S.yb("data-title",S.ic(1,2,"SYSTEM")),S.xb(3),S.Nc(" ",S.ic(4,4,"SYSTEM"),""))}function U(e,t){1&e&&(S.Tb(0,"span",38),S.hc(1,"translate"),S.Tb(2,"span"),S.Lc(3),S.hc(4,"translate"),S.Sb(),S.Sb()),2&e&&(S.yb("data-title",S.ic(1,2,"INACTIVE")),S.xb(3),S.Nc(" ",S.ic(4,4,"INACTIVE"),""))}function V(e,t){if(1&e&&(S.Tb(0,"div",26),S.Tb(1,"div",27),S.Tb(2,"span",28),S.Jc(3,K,3,3,"span",29),S.Jc(4,J,3,3,"span",30),S.Jc(5,M,5,6,"span",31),S.Jc(6,U,5,6,"span",32),S.Sb(),S.Sb(),S.Sb()),2&e){var i=t.$implicit;S.xb(3),S.nc("ngIf","Status"==i.labelForAgentPortal||"Priority"==i.labelForAgentPortal||"Tags"==i.labelForAgentPortal),S.xb(1),S.nc("ngIf","Status"!=i.labelForAgentPortal&&"Priority"!=i.labelForAgentPortal&&"Tags"!=i.labelForAgentPortal),S.xb(1),S.nc("ngIf",i.isDefaultSystemField),S.xb(1),S.nc("ngIf",!i.isActive)}}function $(e,t){if(1&e&&(S.Tb(0,"div"),S.Tb(1,"div",39),S.Lc(2),S.hc(3,"translate"),S.hc(4,"translate"),S.Sb(),S.Sb()),2&e){var i=t.$implicit;S.xb(2),S.Nc(" ",i.isVisibleInCustomerPortal?S.ic(3,1,"YES"):S.ic(4,3,"NO"),"")}}function Q(e,t){if(1&e){var i=S.Ub();S.Tb(0,"span",42),S.ec("click",(function(){S.Bc(i);var e=S.gc().$implicit,t=S.gc();return t.moreOptionsSelect(t.editItem,e)})),S.hc(1,"translate"),S.Sb()}2&e&&S.yb("data-title",S.ic(1,1,"EDIT"))}function G(e,t){if(1&e){var i=S.Ub();S.Tb(0,"span",43),S.ec("click",(function(e){S.Bc(i);var t=S.gc().$implicit;return S.gc().bindBtnTemplate(e,t)})),S.Sb()}}function W(e,t){if(1&e&&(S.Jc(0,Q,2,3,"span",40),S.Jc(1,G,1,0,"span",41)),2&e){var i=t.$implicit;S.nc("ngIf",i.canEditConfiguration&&"tags"!=i.apiName),S.xb(1),S.nc("ngIf",i.canEditConfiguration&&"tags"!=i.apiName&&!(i.isDefaultSystemField&&i.isActive))}}var Y,H,z,X=((Y=function(){function t(i,n,a,c,l,o,s){e(this,t),this.router=i,this.appRootService=n,this.seoService=a,this.fieldService=c,this.spinService=l,this.toastService=o,this.cd=s,this.fieldDialogPosition={X:"right"},this.listItems=[{text:"Activate",id:"2"},{text:"Deactivate",id:"3"},{text:"Delete",id:"4"}],this.defaultFieldItems=["Edit"],this.activeFieldItems=["Deactivate","Delete"],this.inActiveFieldItems=["Activate","Delete"],this.animation={effect:"none"},this.perPage=r.E.toString(),this.currentpage="1",this.fieldTypeEnum=g.a,this.editItem={item:{id:m.a.Edit}};var d=Object(f.a)("ADMIN")+" / "+Object(f.a)("TICKETFIELDS"),b=Object(f.a)("TICKETFIELDS")+" | "+Object(f.a)("ADMIN");this.appRootService.setAppTitleText(d),this.appRootService.isSideBarNeeded(!0),this.seoService.setHeaderElements({title:b})}return i(t,[{key:"ngOnInit",value:function(){var e=b.a.TicketFields;e=Object(h.i)(e,"Page",this.currentpage),e=Object(h.i)(e,"PerPage",this.perPage),this.fieldList=new d.a({url:e,adaptor:new u.a}),this.href=this.router.url}},{key:"ngAfterViewInit",value:function(){var e=this;this.filedListEle.nativeElement.addEventListener("scroll",(function(){e.contextmenu.close()}))}},{key:"searchNodes",value:function(){var e=this.searchFields.value.trim();this.grid.search(e)}},{key:"fieldClick",value:function(e){this.router.navigateByUrl(e)}},{key:"fieldNameClick",value:function(e,t){e.stopPropagation(),this.router.navigateByUrl(this.href+"/"+t)}},{key:"addTicketFieldClick",value:function(){this.router.navigateByUrl("/admin/ticket-fields/add")}},{key:"fieldListDataBound",value:function(){Object(h.a)(this.grid)}},{key:"bindBtnTemplate",value:function(e,t){this.selectedItemData=t;var i=Object(p.f)(e.target);this.contextmenu.open(i.top+16,i.left-5,e.target)}},{key:"itemBeforeEvent",value:function(){this.selectedItemData.isActive&&!this.selectedItemData.isDefaultSystemField?(this.contextmenu.hideItems(this.inActiveFieldItems),this.contextmenu.showItems(this.activeFieldItems)):(this.contextmenu.hideItems(this.activeFieldItems),this.contextmenu.showItems(this.inActiveFieldItems))}},{key:"moreOptionsSelect",value:function(e,t){e.item.id===m.a.Edit?this.router.navigateByUrl(t.apiName==v.e.Status?"/admin/status":t.apiName==v.e.Priority?"/admin/priority":this.href+"/"+t.fieldId):e.item.id===m.a.Delete?Object(h.b)(this.updateDeleteField,this.cancelDialog,this,Object(f.a)("DELETE")+" "+Object(f.a)("TICKETFIELD"),Object(f.a)("TICKETFIELDDELETEALERT")):e.item.id===m.a.Activate?(this.isEnabled=!0,Object(h.b)(this.toggleField,this.cancelDialog,this,Object(f.a)("ACTIVATE")+" "+Object(f.a)("TICKETFIELD"),Object(f.a)("TICKETFIELDACTIVATEALERT"),Object(f.a)("YES")+", "+Object(f.a)("ACTIVATE"),"",!0)):(this.isEnabled=!1,Object(h.b)(this.toggleField,this.cancelDialog,this,Object(f.a)("DEACTIVATE")+" "+Object(f.a)("TICKETFIELD"),Object(f.a)("TICKETFIELDDEACTIVATEALERT"),Object(f.a)("YES")+", "+Object(f.a)("DEACTIVATE")))}},{key:"loadGrid",value:function(){var e=b.a.TicketFields;e=Object(h.i)(e,"Page",this.currentpage),e=Object(h.i)(e,"PerPage",this.perPage),this.fieldList=new d.a({url:e,adaptor:new u.a}),this.cd.detectChanges()}},{key:"toggleField",value:function(){var e=this;this.spinService.showSpinner(),this.fieldService.toggleField(this.isEnabled,this.selectedItemData.fieldId).then((function(t){t&&(e.spinService.hideSpinner(),e.deleteDialog.hide(),e.loadGrid(),e.toastService.successToast(t.result),Object(T.c)())})).catch((function(t){var i=Object(h.q)(t.error);400===t.status&&(e.spinService.hideSpinner(),e.toastService.failureToast(i))}))}},{key:"cancelDialog",value:function(){this.deleteDialog.hide()}},{key:"updateDeleteField",value:function(){var e=this;this.spinService.showSpinner(),this.fieldService.deleteField(this.selectedItemData.fieldId).then((function(t){t&&(e.spinService.hideSpinner(),e.deleteDialog.hide(),e.loadGrid(),e.toastService.successToast(t.result),Object(T.c)())})).catch((function(t){e.spinService.hideSpinner();var i=Object(h.q)(t.error);400===t.status&&(e.spinService.hideSpinner(),e.toastService.failureToast(i))}))}}]),t}()).\u0275fac=function(e){return new(e||Y)(S.Nb(o.g),S.Nb(E.a),S.Nb(I.a),S.Nb(x),S.Nb(A.a),S.Nb(y.a),S.Nb(S.h))},Y.\u0275cmp=S.Hb({type:Y,selectors:[["ng-component"]],viewQuery:function(e,t){var i;1&e&&(S.Qc(P,!0),S.Qc(w,!0),S.Qc(N,!0),S.Qc(B,!0)),2&e&&(S.xc(i=S.fc())&&(t.grid=i.first),S.xc(i=S.fc())&&(t.contextmenu=i.first),S.xc(i=S.fc())&&(t.filedListEle=i.first),S.xc(i=S.fc())&&(t.searchFields=i.first))},decls:41,vars:25,consts:[[1,"field-list","hd-grid-full-height"],["filedListEle",""],[1,"secondary","padding-10","information-content"],[1,"bd-icon","bd-icon-info","information-icon","information-icon-position"],[3,"innerHtml"],[1,"row","no-margin","pr-15"],[1,"grid-menu-bar"],[1,"grid-menu"],[1,"search-box","pr-1"],["showClearButton","true","autocomplete","off","maxlength","150",3,"placeholder","change"],["searchFields",""],[1,"add-button-container"],["type","button","ejs-button","",1,"e-btn","add-button","e-primary","e-outline",3,"click"],[1,"row","no-margin","pl-20","pr-20",2,"height","90%"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","no-padding"],[3,"dataSource","allowResizing","dataBound"],["fieldListGrid",""],["minWidth","50","width","50"],["template",""],["field","labelForAgentPortal","minWidth","150","width","200","textAlign","Left",3,"headerText"],["field","labelForCustomerPortal","minWidth","120","width","120","textAlign","Left","clipMode","EllipsisWithTooltip",3,"headerText"],["field","isVisibleInCustomerPortal","minWidth","80","width","110","textAlign","Center","clipMode","EllipsisWithTooltip",3,"headerText"],["minWidth","100","width","100","textAlign","Center"],[3,"items","animationSettings","beforeOpen","select"],["contextmenu",""],[1,"bd-icon",2,"font-size","16px","position","relative","top","4px",3,"ngClass"],[1,"flex-horizontal","secondary","p-1"],[1,"flex-vertical","no-wrap","ellipsis"],[1,"flex-horizontal"],["class","e-text no-wrap ellipsis",3,"click",4,"ngIf"],["class","e-text no-wrap ellipsis",4,"ngIf"],["class","grid-label status left-spacing",4,"ngIf"],["class","grid-label inactive-label status left-spacing",4,"ngIf"],[1,"e-text","no-wrap","ellipsis",3,"click"],[3,"ngClass"],[1,"e-text","no-wrap","ellipsis"],[3,"ngClass","click"],[1,"grid-label","status","left-spacing"],[1,"grid-label","inactive-label","status","left-spacing"],[1,"grid-text-font-color"],["class","bd-icon bd-icon-edit more-option-button",3,"click",4,"ngIf"],["class","hd-icon hd-vertical-menu more-option-button",3,"click",4,"ngIf"],[1,"bd-icon","bd-icon-edit","more-option-button",3,"click"],[1,"hd-icon","hd-vertical-menu","more-option-button",3,"click"]],template:function(e,t){1&e&&(S.Tb(0,"div",0,1),S.Tb(2,"div",2),S.Ob(3,"div",3),S.Ob(4,"span",4),S.hc(5,"safe"),S.hc(6,"translate"),S.Sb(),S.Tb(7,"div",5),S.Tb(8,"div",6),S.Tb(9,"div",7),S.Tb(10,"div",8),S.Tb(11,"ejs-textbox",9,10),S.ec("change",(function(){return t.searchNodes()})),S.hc(13,"translate"),S.Sb(),S.Sb(),S.Tb(14,"div",11),S.Tb(15,"button",12),S.ec("click",(function(){return t.addTicketFieldClick()})),S.Lc(16),S.hc(17,"translate"),S.Sb(),S.Sb(),S.Sb(),S.Sb(),S.Sb(),S.Tb(18,"div",13),S.Tb(19,"div",14),S.Tb(20,"ejs-grid",15,16),S.ec("dataBound",(function(){return t.fieldListDataBound()})),S.Tb(22,"e-columns"),S.Tb(23,"e-column",17),S.Jc(24,R,3,3,"ng-template",null,18,S.Kc),S.Sb(),S.Tb(26,"e-column",19),S.hc(27,"translate"),S.Jc(28,V,7,4,"ng-template",null,18,S.Kc),S.Sb(),S.Ob(30,"e-column",20),S.hc(31,"translate"),S.Tb(32,"e-column",21),S.hc(33,"translate"),S.Jc(34,$,5,5,"ng-template",null,18,S.Kc),S.Sb(),S.Tb(36,"e-column",22),S.Jc(37,W,2,2,"ng-template",null,18,S.Kc),S.Sb(),S.Sb(),S.Sb(),S.Sb(),S.Sb(),S.Sb(),S.Tb(39,"ejs-contextmenu",23,24),S.ec("beforeOpen",(function(){return t.itemBeforeEvent()}))("select",(function(e){return t.moreOptionsSelect(e)})),S.Sb()),2&e&&(S.xb(4),S.nc("innerHtml",S.jc(5,10,S.ic(6,13,"TICKETFIELDSMODULEINFO"),"html"),S.Cc),S.xb(7),S.oc("placeholder",S.ic(13,15,"SEARCH")),S.xb(5),S.Nc(" ",S.ic(17,17,"ADDTICKETFIELD")," "),S.xb(4),S.nc("dataSource",t.fieldList)("allowResizing",!0),S.xb(6),S.oc("headerText",S.ic(27,19,"LABELFORAGENTPORATL")),S.xb(4),S.oc("headerText",S.ic(31,21,"LABELFORCUTOMERPORTAL")),S.xb(2),S.oc("headerText",S.ic(33,23,"VISIBLEINCUSTOMERPORTAL")),S.xb(7),S.nc("items",t.listItems)("animationSettings",t.animation))},directives:[C.i,k.c,O.k,O.e,O.b,O.d,O.a,D.f,l.l,l.n],pipes:[L.a,j.a],encapsulation:2,changeDetection:0}),Y),q=a("hCAU"),Z=a("CBeA"),_=a("TSZ8"),ee=[{path:"",component:X},{path:"add",component:q.a,data:{customFieldsType:v.c.TicketFields,addCustomField:!0,module:v.b.Ticket},canDeactivate:[_.a]},{path:":id",component:q.a,resolve:{data:Z.a},data:{customFieldsType:v.c.TicketFields,addCustomField:!1,module:v.b.Ticket},canDeactivate:[_.a]},{path:"**",component:s.a}],te=((H=function t(){e(this,t)}).\u0275mod=S.Lb({type:H}),H.\u0275inj=S.Kb({factory:function(e){return new(e||H)},imports:[[o.k.forChild(ee)],o.k]}),H),ie=a("ltyr"),ne=a("np3I"),ae=a("jcQU"),ce=a("Pl5m"),le=((z=function t(){e(this,t)}).\u0275mod=S.Lb({type:z}),z.\u0275inj=S.Kb({factory:function(e){return new(e||z)},providers:[x,Z.a],imports:[[l.b,te,ie.a,ce.a,O.j,D.j,ne.AdminModule,ae.d,k.b,C.h,ae.g,k.h,k.d,k.j,D.e]]}),z)}}])}();